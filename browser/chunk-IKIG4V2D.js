import{Ca as re,Fa as y,Ga as H,Ha as z,Ia as Gt,Ib as ia,L as P,La as Xt,Ma as qt,Na as Kt,Ra as Ge,Rb as aa,T as In,Ub as sa,V as Ji,Xb as oa,_ as J,a as Yt,ac as ra,b as Ut,bc as la,cc as ca,fa as R,ga as x,h as Ki,ha as b,ia as Se,jc as da,lb as Zi,mb as Qi,nb as ta,pa as Pe,sa as it,ta as Y,tb as ea,v as mt,w as bt,zb as na}from"./chunk-XJZXWVKN.js";var ha=[{valor:1,nombre:"Enero"},{valor:2,nombre:"Febrero"},{valor:3,nombre:"Marzo"},{valor:4,nombre:"Abril"},{valor:5,nombre:"Mayo"},{valor:6,nombre:"Junio"},{valor:7,nombre:"Julio"},{valor:8,nombre:"Agosto"},{valor:9,nombre:"Septiembre"},{valor:10,nombre:"Octubre"},{valor:11,nombre:"Noviembre"},{valor:12,nombre:"Diciembre"}];function ke(e){return e+.5|0}var Et=(e,n,t)=>Math.max(Math.min(e,t),n);function Oe(e){return Et(ke(e*2.55),0,255)}function At(e){return Et(ke(e*255),0,255)}function St(e){return Et(ke(e/2.55)/100,0,1)}function fa(e){return Et(ke(e*100),0,100)}var ft={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},zn=[..."0123456789ABCDEF"],wo=e=>zn[e&15],ko=e=>zn[(e&240)>>4]+zn[e&15],Xe=e=>(e&240)>>4===(e&15),Do=e=>Xe(e.r)&&Xe(e.g)&&Xe(e.b)&&Xe(e.a);function To(e){var n=e.length,t;return e[0]==="#"&&(n===4||n===5?t={r:255&ft[e[1]]*17,g:255&ft[e[2]]*17,b:255&ft[e[3]]*17,a:n===5?ft[e[4]]*17:255}:(n===7||n===9)&&(t={r:ft[e[1]]<<4|ft[e[2]],g:ft[e[3]]<<4|ft[e[4]],b:ft[e[5]]<<4|ft[e[6]],a:n===9?ft[e[7]]<<4|ft[e[8]]:255})),t}var Eo=(e,n)=>e<255?n(e):"";function Ao(e){var n=Do(e)?wo:ko;return e?"#"+n(e.r)+n(e.g)+n(e.b)+Eo(e.a,n):void 0}var Io=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function ma(e,n,t){let i=n*Math.min(t,1-t),a=(s,o=(s+e/30)%12)=>t-i*Math.max(Math.min(o-3,9-o,1),-1);return[a(0),a(8),a(4)]}function jo(e,n,t){let i=(a,s=(a+e/60)%6)=>t-t*n*Math.max(Math.min(s,4-s,1),0);return[i(5),i(3),i(1)]}function zo(e,n,t){let i=ma(e,1,.5),a;for(n+t>1&&(a=1/(n+t),n*=a,t*=a),a=0;a<3;a++)i[a]*=1-n-t,i[a]+=n;return i}function Fo(e,n,t,i,a){return e===a?(n-t)/i+(n<t?6:0):n===a?(t-e)/i+2:(e-n)/i+4}function Fn(e){let t=e.r/255,i=e.g/255,a=e.b/255,s=Math.max(t,i,a),o=Math.min(t,i,a),r=(s+o)/2,l,c,d;return s!==o&&(d=s-o,c=r>.5?d/(2-s-o):d/(s+o),l=Fo(t,i,a,d,s),l=l*60+.5),[l|0,c||0,r]}function Rn(e,n,t,i){return(Array.isArray(n)?e(n[0],n[1],n[2]):e(n,t,i)).map(At)}function Ln(e,n,t){return Rn(ma,e,n,t)}function Ro(e,n,t){return Rn(zo,e,n,t)}function Lo(e,n,t){return Rn(jo,e,n,t)}function ba(e){return(e%360+360)%360}function No(e){let n=Io.exec(e),t=255,i;if(!n)return;n[5]!==i&&(t=n[6]?Oe(+n[5]):At(+n[5]));let a=ba(+n[2]),s=+n[3]/100,o=+n[4]/100;return n[1]==="hwb"?i=Ro(a,s,o):n[1]==="hsv"?i=Lo(a,s,o):i=Ln(a,s,o),{r:i[0],g:i[1],b:i[2],a:t}}function Bo(e,n){var t=Fn(e);t[0]=ba(t[0]+n),t=Ln(t),e.r=t[0],e.g=t[1],e.b=t[2]}function Vo(e){if(!e)return;let n=Fn(e),t=n[0],i=fa(n[1]),a=fa(n[2]);return e.a<255?`hsla(${t}, ${i}%, ${a}%, ${St(e.a)})`:`hsl(${t}, ${i}%, ${a}%)`}var ua={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},ga={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Ho(){let e={},n=Object.keys(ga),t=Object.keys(ua),i,a,s,o,r;for(i=0;i<n.length;i++){for(o=r=n[i],a=0;a<t.length;a++)s=t[a],r=r.replace(s,ua[s]);s=parseInt(ga[o],16),e[r]=[s>>16&255,s>>8&255,s&255]}return e}var qe;function Wo(e){qe||(qe=Ho(),qe.transparent=[0,0,0,0]);let n=qe[e.toLowerCase()];return n&&{r:n[0],g:n[1],b:n[2],a:n.length===4?n[3]:255}}var $o=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function Yo(e){let n=$o.exec(e),t=255,i,a,s;if(n){if(n[7]!==i){let o=+n[7];t=n[8]?Oe(o):Et(o*255,0,255)}return i=+n[1],a=+n[3],s=+n[5],i=255&(n[2]?Oe(i):Et(i,0,255)),a=255&(n[4]?Oe(a):Et(a,0,255)),s=255&(n[6]?Oe(s):Et(s,0,255)),{r:i,g:a,b:s,a:t}}}function Uo(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${St(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}var jn=e=>e<=.0031308?e*12.92:Math.pow(e,1/2.4)*1.055-.055,le=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function Go(e,n,t){let i=le(St(e.r)),a=le(St(e.g)),s=le(St(e.b));return{r:At(jn(i+t*(le(St(n.r))-i))),g:At(jn(a+t*(le(St(n.g))-a))),b:At(jn(s+t*(le(St(n.b))-s))),a:e.a+t*(n.a-e.a)}}function Ke(e,n,t){if(e){let i=Fn(e);i[n]=Math.max(0,Math.min(i[n]+i[n]*t,n===0?360:1)),i=Ln(i),e.r=i[0],e.g=i[1],e.b=i[2]}}function xa(e,n){return e&&Object.assign(n||{},e)}function pa(e){var n={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(n={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(n.a=At(e[3]))):(n=xa(e,{r:0,g:0,b:0,a:1}),n.a=At(n.a)),n}function Xo(e){return e.charAt(0)==="r"?Yo(e):No(e)}var we=class e{constructor(n){if(n instanceof e)return n;let t=typeof n,i;t==="object"?i=pa(n):t==="string"&&(i=To(n)||Wo(n)||Xo(n)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var n=xa(this._rgb);return n&&(n.a=St(n.a)),n}set rgb(n){this._rgb=pa(n)}rgbString(){return this._valid?Uo(this._rgb):void 0}hexString(){return this._valid?Ao(this._rgb):void 0}hslString(){return this._valid?Vo(this._rgb):void 0}mix(n,t){if(n){let i=this.rgb,a=n.rgb,s,o=t===s?.5:t,r=2*o-1,l=i.a-a.a,c=((r*l===-1?r:(r+l)/(1+r*l))+1)/2;s=1-c,i.r=255&c*i.r+s*a.r+.5,i.g=255&c*i.g+s*a.g+.5,i.b=255&c*i.b+s*a.b+.5,i.a=o*i.a+(1-o)*a.a,this.rgb=i}return this}interpolate(n,t){return n&&(this._rgb=Go(this._rgb,n._rgb,t)),this}clone(){return new e(this.rgb)}alpha(n){return this._rgb.a=At(n),this}clearer(n){let t=this._rgb;return t.a*=1-n,this}greyscale(){let n=this._rgb,t=ke(n.r*.3+n.g*.59+n.b*.11);return n.r=n.g=n.b=t,this}opaquer(n){let t=this._rgb;return t.a*=1+n,this}negate(){let n=this._rgb;return n.r=255-n.r,n.g=255-n.g,n.b=255-n.b,this}lighten(n){return Ke(this._rgb,2,n),this}darken(n){return Ke(this._rgb,2,-n),this}saturate(n){return Ke(this._rgb,1,n),this}desaturate(n){return Ke(this._rgb,1,-n),this}rotate(n){return Bo(this._rgb,n),this}};function yt(){}var Da=(()=>{let e=0;return()=>e++})();function B(e){return e==null}function X(e){if(Array.isArray&&Array.isArray(e))return!0;let n=Object.prototype.toString.call(e);return n.slice(0,7)==="[object"&&n.slice(-6)==="Array]"}function V(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}function Z(e){return(typeof e=="number"||e instanceof Number)&&isFinite(+e)}function ct(e,n){return Z(e)?e:n}function F(e,n){return typeof e>"u"?n:e}var Ta=(e,n)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100:+e/n,Hn=(e,n)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100*n:+e;function G(e,n,t){if(e&&typeof e.call=="function")return e.apply(t,n)}function U(e,n,t,i){let a,s,o;if(X(e))if(s=e.length,i)for(a=s-1;a>=0;a--)n.call(t,e[a],a);else for(a=0;a<s;a++)n.call(t,e[a],a);else if(V(e))for(o=Object.keys(e),s=o.length,a=0;a<s;a++)n.call(t,e[o[a]],o[a])}function Ee(e,n){let t,i,a,s;if(!e||!n||e.length!==n.length)return!1;for(t=0,i=e.length;t<i;++t)if(a=e[t],s=n[t],a.datasetIndex!==s.datasetIndex||a.index!==s.index)return!1;return!0}function tn(e){if(X(e))return e.map(tn);if(V(e)){let n=Object.create(null),t=Object.keys(e),i=t.length,a=0;for(;a<i;++a)n[t[a]]=tn(e[t[a]]);return n}return e}function Ea(e){return["__proto__","prototype","constructor"].indexOf(e)===-1}function qo(e,n,t,i){if(!Ea(e))return;let a=n[e],s=t[e];V(a)&&V(s)?de(a,s,i):n[e]=tn(s)}function de(e,n,t){let i=X(n)?n:[n],a=i.length;if(!V(e))return e;t=t||{};let s=t.merger||qo,o;for(let r=0;r<a;++r){if(o=i[r],!V(o))continue;let l=Object.keys(o);for(let c=0,d=l.length;c<d;++c)s(l[c],e,o,t)}return e}function fe(e,n){return de(e,n,{merger:Ko})}function Ko(e,n,t){if(!Ea(e))return;let i=n[e],a=t[e];V(i)&&V(a)?fe(i,a):Object.prototype.hasOwnProperty.call(n,e)||(n[e]=tn(a))}var _a={"":e=>e,x:e=>e.x,y:e=>e.y};function Jo(e){let n=e.split("."),t=[],i="";for(let a of n)i+=a,i.endsWith("\\")?i=i.slice(0,-1)+".":(t.push(i),i="");return t}function Zo(e){let n=Jo(e);return t=>{for(let i of n){if(i==="")break;t=t&&t[i]}return t}}function wt(e,n){return(_a[n]||(_a[n]=Zo(n)))(e)}function sn(e){return e.charAt(0).toUpperCase()+e.slice(1)}var ue=e=>typeof e<"u",Pt=e=>typeof e=="function",Wn=(e,n)=>{if(e.size!==n.size)return!1;for(let t of e)if(!n.has(t))return!1;return!0};function Aa(e){return e.type==="mouseup"||e.type==="click"||e.type==="contextmenu"}var W=Math.PI,q=2*W,Qo=q+W,en=Number.POSITIVE_INFINITY,tr=W/180,tt=W/2,Jt=W/4,ya=W*2/3,Ot=Math.log10,gt=Math.sign;function ge(e,n,t){return Math.abs(e-n)<t}function $n(e){let n=Math.round(e);e=ge(e,n,e/1e3)?n:e;let t=Math.pow(10,Math.floor(Ot(e))),i=e/t;return(i<=1?1:i<=2?2:i<=5?5:10)*t}function Ia(e){let n=[],t=Math.sqrt(e),i;for(i=1;i<t;i++)e%i===0&&(n.push(i),n.push(e/i));return t===(t|0)&&n.push(t),n.sort((a,s)=>a-s).pop(),n}function er(e){return typeof e=="symbol"||typeof e=="object"&&e!==null&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}function te(e){return!er(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function ja(e,n){let t=Math.round(e);return t-n<=e&&t+n>=e}function Yn(e,n,t){let i,a,s;for(i=0,a=e.length;i<a;i++)s=e[i][t],isNaN(s)||(n.min=Math.min(n.min,s),n.max=Math.max(n.max,s))}function ut(e){return e*(W/180)}function on(e){return e*(180/W)}function Un(e){if(!Z(e))return;let n=1,t=0;for(;Math.round(e*n)/n!==e;)n*=10,t++;return t}function Gn(e,n){let t=n.x-e.x,i=n.y-e.y,a=Math.sqrt(t*t+i*i),s=Math.atan2(i,t);return s<-.5*W&&(s+=q),{angle:s,distance:a}}function nn(e,n){return Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2))}function nr(e,n){return(e-n+Qo)%q-W}function st(e){return(e%q+q)%q}function pe(e,n,t,i){let a=st(e),s=st(n),o=st(t),r=st(s-a),l=st(o-a),c=st(a-s),d=st(a-o);return a===s||a===o||i&&s===o||r>l&&c<d}function at(e,n,t){return Math.max(n,Math.min(t,e))}function za(e){return at(e,-32768,32767)}function vt(e,n,t,i=1e-6){return e>=Math.min(n,t)-i&&e<=Math.max(n,t)+i}function rn(e,n,t){t=t||(o=>e[o]<n);let i=e.length-1,a=0,s;for(;i-a>1;)s=a+i>>1,t(s)?a=s:i=s;return{lo:a,hi:i}}var xt=(e,n,t,i)=>rn(e,t,i?a=>{let s=e[a][n];return s<t||s===t&&e[a+1][n]===t}:a=>e[a][n]<t),Fa=(e,n,t)=>rn(e,t,i=>e[i][n]>=t);function Ra(e,n,t){let i=0,a=e.length;for(;i<a&&e[i]<n;)i++;for(;a>i&&e[a-1]>t;)a--;return i>0||a<e.length?e.slice(i,a):e}var La=["push","pop","shift","splice","unshift"];function Na(e,n){if(e._chartjs){e._chartjs.listeners.push(n);return}Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[n]}}),La.forEach(t=>{let i="_onData"+sn(t),a=e[t];Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value(...s){let o=a.apply(this,s);return e._chartjs.listeners.forEach(r=>{typeof r[i]=="function"&&r[i](...s)}),o}})})}function Xn(e,n){let t=e._chartjs;if(!t)return;let i=t.listeners,a=i.indexOf(n);a!==-1&&i.splice(a,1),!(i.length>0)&&(La.forEach(s=>{delete e[s]}),delete e._chartjs)}function qn(e){let n=new Set(e);return n.size===e.length?e:Array.from(n)}var Kn=(function(){return typeof window>"u"?function(e){return e()}:window.requestAnimationFrame})();function Jn(e,n){let t=[],i=!1;return function(...a){t=a,i||(i=!0,Kn.call(window,()=>{i=!1,e.apply(n,t)}))}}function Ba(e,n){let t;return function(...i){return n?(clearTimeout(t),t=setTimeout(e,n,i)):e.apply(this,i),n}}var ln=e=>e==="start"?"left":e==="end"?"right":"center",ot=(e,n,t)=>e==="start"?n:e==="end"?t:(n+t)/2,Va=(e,n,t,i)=>e===(i?"left":"right")?t:e==="center"?(n+t)/2:n;function Zn(e,n,t){let i=n.length,a=0,s=i;if(e._sorted){let{iScale:o,vScale:r,_parsed:l}=e,c=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,d=o.axis,{min:h,max:f,minDefined:u,maxDefined:p}=o.getUserBounds();if(u){if(a=Math.min(xt(l,d,h).lo,t?i:xt(n,d,o.getPixelForValue(h)).lo),c){let g=l.slice(0,a+1).reverse().findIndex(m=>!B(m[r.axis]));a-=Math.max(0,g)}a=at(a,0,i-1)}if(p){let g=Math.max(xt(l,o.axis,f,!0).hi+1,t?0:xt(n,d,o.getPixelForValue(f),!0).hi+1);if(c){let m=l.slice(g-1).findIndex(v=>!B(v[r.axis]));g+=Math.max(0,m)}s=at(g,a,i)-a}else s=i-a}return{start:a,count:s}}function Qn(e){let{xScale:n,yScale:t,_scaleRanges:i}=e,a={xmin:n.min,xmax:n.max,ymin:t.min,ymax:t.max};if(!i)return e._scaleRanges=a,!0;let s=i.xmin!==n.min||i.xmax!==n.max||i.ymin!==t.min||i.ymax!==t.max;return Object.assign(i,a),s}var Je=e=>e===0||e===1,va=(e,n,t)=>-(Math.pow(2,10*(e-=1))*Math.sin((e-n)*q/t)),Ma=(e,n,t)=>Math.pow(2,-10*e)*Math.sin((e-n)*q/t)+1,ce={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>-Math.cos(e*tt)+1,easeOutSine:e=>Math.sin(e*tt),easeInOutSine:e=>-.5*(Math.cos(W*e)-1),easeInExpo:e=>e===0?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>e===1?1:-Math.pow(2,-10*e)+1,easeInOutExpo:e=>Je(e)?e:e<.5?.5*Math.pow(2,10*(e*2-1)):.5*(-Math.pow(2,-10*(e*2-1))+2),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>Je(e)?e:va(e,.075,.3),easeOutElastic:e=>Je(e)?e:Ma(e,.075,.3),easeInOutElastic(e){return Je(e)?e:e<.5?.5*va(e*2,.1125,.45):.5+.5*Ma(e*2-1,.1125,.45)},easeInBack(e){return e*e*((1.70158+1)*e-1.70158)},easeOutBack(e){return(e-=1)*e*((1.70158+1)*e+1.70158)+1},easeInOutBack(e){let n=1.70158;return(e/=.5)<1?.5*(e*e*(((n*=1.525)+1)*e-n)):.5*((e-=2)*e*(((n*=1.525)+1)*e+n)+2)},easeInBounce:e=>1-ce.easeOutBounce(1-e),easeOutBounce(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:e=>e<.5?ce.easeInBounce(e*2)*.5:ce.easeOutBounce(e*2-1)*.5+.5};function ti(e){if(e&&typeof e=="object"){let n=e.toString();return n==="[object CanvasPattern]"||n==="[object CanvasGradient]"}return!1}function ei(e){return ti(e)?e:new we(e)}function Nn(e){return ti(e)?e:new we(e).saturate(.5).darken(.1).hexString()}var ir=["x","y","borderWidth","radius","tension"],ar=["color","borderColor","backgroundColor"];function sr(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:n=>n!=="onProgress"&&n!=="onComplete"&&n!=="fn"}),e.set("animations",{colors:{type:"color",properties:ar},numbers:{type:"number",properties:ir}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:n=>n|0}}}})}function or(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}var Ca=new Map;function rr(e,n){n=n||{};let t=e+JSON.stringify(n),i=Ca.get(t);return i||(i=new Intl.NumberFormat(e,n),Ca.set(t,i)),i}function me(e,n,t){return rr(n,t).format(e)}var Ha={values(e){return X(e)?e:""+e},numeric(e,n,t){if(e===0)return"0";let i=this.chart.options.locale,a,s=e;if(t.length>1){let c=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(c<1e-4||c>1e15)&&(a="scientific"),s=lr(e,t)}let o=Ot(Math.abs(s)),r=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:a,minimumFractionDigits:r,maximumFractionDigits:r};return Object.assign(l,this.options.ticks.format),me(e,i,l)},logarithmic(e,n,t){if(e===0)return"0";let i=t[n].significand||e/Math.pow(10,Math.floor(Ot(e)));return[1,2,3,5,10,15].includes(i)||n>.8*t.length?Ha.numeric.call(this,e,n,t):""}};function lr(e,n){let t=n.length>3?n[2].value-n[1].value:n[1].value-n[0].value;return Math.abs(t)>=1&&e!==Math.floor(e)&&(t=e-Math.floor(e)),t}var Ae={formatters:Ha};function cr(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(n,t)=>t.lineWidth,tickColor:(n,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Ae.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:n=>!n.startsWith("before")&&!n.startsWith("after")&&n!=="callback"&&n!=="parser",_indexable:n=>n!=="borderDash"&&n!=="tickBorderDash"&&n!=="dash"}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:n=>n!=="backdropPadding"&&n!=="callback",_indexable:n=>n!=="backdropPadding"})}var zt=Object.create(null),cn=Object.create(null);function De(e,n){if(!n)return e;let t=n.split(".");for(let i=0,a=t.length;i<a;++i){let s=t[i];e=e[s]||(e[s]=Object.create(null))}return e}function Bn(e,n,t){return typeof n=="string"?de(De(e,n),t):de(De(e,""),n)}var Vn=class{constructor(n,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,a)=>Nn(a.backgroundColor),this.hoverBorderColor=(i,a)=>Nn(a.borderColor),this.hoverColor=(i,a)=>Nn(a.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(n),this.apply(t)}set(n,t){return Bn(this,n,t)}get(n){return De(this,n)}describe(n,t){return Bn(cn,n,t)}override(n,t){return Bn(zt,n,t)}route(n,t,i,a){let s=De(this,n),o=De(this,i),r="_"+t;Object.defineProperties(s,{[r]:{value:s[t],writable:!0},[t]:{enumerable:!0,get(){let l=this[r],c=o[a];return V(l)?Object.assign({},c,l):F(l,c)},set(l){this[r]=l}}})}apply(n){n.forEach(t=>t(this))}},K=new Vn({_scriptable:e=>!e.startsWith("on"),_indexable:e=>e!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[sr,or,cr]);function dr(e){return!e||B(e.size)||B(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function Te(e,n,t,i,a){let s=n[a];return s||(s=n[a]=e.measureText(a).width,t.push(a)),s>i&&(i=s),i}function Wa(e,n,t,i){i=i||{};let a=i.data=i.data||{},s=i.garbageCollect=i.garbageCollect||[];i.font!==n&&(a=i.data={},s=i.garbageCollect=[],i.font=n),e.save(),e.font=n;let o=0,r=t.length,l,c,d,h,f;for(l=0;l<r;l++)if(h=t[l],h!=null&&!X(h))o=Te(e,a,s,o,h);else if(X(h))for(c=0,d=h.length;c<d;c++)f=h[c],f!=null&&!X(f)&&(o=Te(e,a,s,o,f));e.restore();let u=s.length/2;if(u>t.length){for(l=0;l<u;l++)delete a[s[l]];s.splice(0,u)}return o}function Ft(e,n,t){let i=e.currentDevicePixelRatio,a=t!==0?Math.max(t/2,.5):0;return Math.round((n-a)*i)/i+a}function ni(e,n){!n&&!e||(n=n||e.getContext("2d"),n.save(),n.resetTransform(),n.clearRect(0,0,e.width,e.height),n.restore())}function dn(e,n,t,i){ii(e,n,t,i,null)}function ii(e,n,t,i,a){let s,o,r,l,c,d,h,f,u=n.pointStyle,p=n.rotation,g=n.radius,m=(p||0)*tr;if(u&&typeof u=="object"&&(s=u.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){e.save(),e.translate(t,i),e.rotate(m),e.drawImage(u,-u.width/2,-u.height/2,u.width,u.height),e.restore();return}if(!(isNaN(g)||g<=0)){switch(e.beginPath(),u){default:a?e.ellipse(t,i,a/2,g,0,0,q):e.arc(t,i,g,0,q),e.closePath();break;case"triangle":d=a?a/2:g,e.moveTo(t+Math.sin(m)*d,i-Math.cos(m)*g),m+=ya,e.lineTo(t+Math.sin(m)*d,i-Math.cos(m)*g),m+=ya,e.lineTo(t+Math.sin(m)*d,i-Math.cos(m)*g),e.closePath();break;case"rectRounded":c=g*.516,l=g-c,o=Math.cos(m+Jt)*l,h=Math.cos(m+Jt)*(a?a/2-c:l),r=Math.sin(m+Jt)*l,f=Math.sin(m+Jt)*(a?a/2-c:l),e.arc(t-h,i-r,c,m-W,m-tt),e.arc(t+f,i-o,c,m-tt,m),e.arc(t+h,i+r,c,m,m+tt),e.arc(t-f,i+o,c,m+tt,m+W),e.closePath();break;case"rect":if(!p){l=Math.SQRT1_2*g,d=a?a/2:l,e.rect(t-d,i-l,2*d,2*l);break}m+=Jt;case"rectRot":h=Math.cos(m)*(a?a/2:g),o=Math.cos(m)*g,r=Math.sin(m)*g,f=Math.sin(m)*(a?a/2:g),e.moveTo(t-h,i-r),e.lineTo(t+f,i-o),e.lineTo(t+h,i+r),e.lineTo(t-f,i+o),e.closePath();break;case"crossRot":m+=Jt;case"cross":h=Math.cos(m)*(a?a/2:g),o=Math.cos(m)*g,r=Math.sin(m)*g,f=Math.sin(m)*(a?a/2:g),e.moveTo(t-h,i-r),e.lineTo(t+h,i+r),e.moveTo(t+f,i-o),e.lineTo(t-f,i+o);break;case"star":h=Math.cos(m)*(a?a/2:g),o=Math.cos(m)*g,r=Math.sin(m)*g,f=Math.sin(m)*(a?a/2:g),e.moveTo(t-h,i-r),e.lineTo(t+h,i+r),e.moveTo(t+f,i-o),e.lineTo(t-f,i+o),m+=Jt,h=Math.cos(m)*(a?a/2:g),o=Math.cos(m)*g,r=Math.sin(m)*g,f=Math.sin(m)*(a?a/2:g),e.moveTo(t-h,i-r),e.lineTo(t+h,i+r),e.moveTo(t+f,i-o),e.lineTo(t-f,i+o);break;case"line":o=a?a/2:Math.cos(m)*g,r=Math.sin(m)*g,e.moveTo(t-o,i-r),e.lineTo(t+o,i+r);break;case"dash":e.moveTo(t,i),e.lineTo(t+Math.cos(m)*(a?a/2:g),i+Math.sin(m)*g);break;case!1:e.closePath();break}e.fill(),n.borderWidth>0&&e.stroke()}}function _t(e,n,t){return t=t||.5,!n||e&&e.x>n.left-t&&e.x<n.right+t&&e.y>n.top-t&&e.y<n.bottom+t}function Ie(e,n){e.save(),e.beginPath(),e.rect(n.left,n.top,n.right-n.left,n.bottom-n.top),e.clip()}function je(e){e.restore()}function $a(e,n,t,i,a){if(!n)return e.lineTo(t.x,t.y);if(a==="middle"){let s=(n.x+t.x)/2;e.lineTo(s,n.y),e.lineTo(s,t.y)}else a==="after"!=!!i?e.lineTo(n.x,t.y):e.lineTo(t.x,n.y);e.lineTo(t.x,t.y)}function Ya(e,n,t,i){if(!n)return e.lineTo(t.x,t.y);e.bezierCurveTo(i?n.cp1x:n.cp2x,i?n.cp1y:n.cp2y,i?t.cp2x:t.cp1x,i?t.cp2y:t.cp1y,t.x,t.y)}function hr(e,n){n.translation&&e.translate(n.translation[0],n.translation[1]),B(n.rotation)||e.rotate(n.rotation),n.color&&(e.fillStyle=n.color),n.textAlign&&(e.textAlign=n.textAlign),n.textBaseline&&(e.textBaseline=n.textBaseline)}function fr(e,n,t,i,a){if(a.strikethrough||a.underline){let s=e.measureText(i),o=n-s.actualBoundingBoxLeft,r=n+s.actualBoundingBoxRight,l=t-s.actualBoundingBoxAscent,c=t+s.actualBoundingBoxDescent,d=a.strikethrough?(l+c)/2:c;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=a.decorationWidth||2,e.moveTo(o,d),e.lineTo(r,d),e.stroke()}}function ur(e,n){let t=e.fillStyle;e.fillStyle=n.color,e.fillRect(n.left,n.top,n.width,n.height),e.fillStyle=t}function Rt(e,n,t,i,a,s={}){let o=X(n)?n:[n],r=s.strokeWidth>0&&s.strokeColor!=="",l,c;for(e.save(),e.font=a.string,hr(e,s),l=0;l<o.length;++l)c=o[l],s.backdrop&&ur(e,s.backdrop),r&&(s.strokeColor&&(e.strokeStyle=s.strokeColor),B(s.strokeWidth)||(e.lineWidth=s.strokeWidth),e.strokeText(c,t,i,s.maxWidth)),e.fillText(c,t,i,s.maxWidth),fr(e,t,i,c,s),i+=Number(a.lineHeight);e.restore()}function be(e,n){let{x:t,y:i,w:a,h:s,radius:o}=n;e.arc(t+o.topLeft,i+o.topLeft,o.topLeft,1.5*W,W,!0),e.lineTo(t,i+s-o.bottomLeft),e.arc(t+o.bottomLeft,i+s-o.bottomLeft,o.bottomLeft,W,tt,!0),e.lineTo(t+a-o.bottomRight,i+s),e.arc(t+a-o.bottomRight,i+s-o.bottomRight,o.bottomRight,tt,0,!0),e.lineTo(t+a,i+o.topRight),e.arc(t+a-o.topRight,i+o.topRight,o.topRight,0,-tt,!0),e.lineTo(t+o.topLeft,i)}var gr=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,pr=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function mr(e,n){let t=(""+e).match(gr);if(!t||t[1]==="normal")return n*1.2;switch(e=+t[2],t[3]){case"px":return e;case"%":e/=100;break}return n*e}var br=e=>+e||0;function hn(e,n){let t={},i=V(n),a=i?Object.keys(n):n,s=V(e)?i?o=>F(e[o],e[n[o]]):o=>e[o]:()=>e;for(let o of a)t[o]=br(s(o));return t}function ai(e){return hn(e,{top:"y",right:"x",bottom:"y",left:"x"})}function Lt(e){return hn(e,["topLeft","topRight","bottomLeft","bottomRight"])}function rt(e){let n=ai(e);return n.width=n.left+n.right,n.height=n.top+n.bottom,n}function nt(e,n){e=e||{},n=n||K.font;let t=F(e.size,n.size);typeof t=="string"&&(t=parseInt(t,10));let i=F(e.style,n.style);i&&!(""+i).match(pr)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);let a={family:F(e.family,n.family),lineHeight:mr(F(e.lineHeight,n.lineHeight),t),size:t,style:i,weight:F(e.weight,n.weight),string:""};return a.string=dr(a),a}function xe(e,n,t,i){let a=!0,s,o,r;for(s=0,o=e.length;s<o;++s)if(r=e[s],r!==void 0&&(n!==void 0&&typeof r=="function"&&(r=r(n),a=!1),t!==void 0&&X(r)&&(r=r[t%r.length],a=!1),r!==void 0))return i&&!a&&(i.cacheable=!1),r}function Ua(e,n,t){let{min:i,max:a}=e,s=Hn(n,(a-i)/2),o=(r,l)=>t&&r===0?0:r+l;return{min:o(i,-Math.abs(s)),max:o(a,s)}}function kt(e,n){return Object.assign(Object.create(e),n)}function fn(e,n=[""],t,i,a=()=>e[0]){let s=t||e;typeof i>"u"&&(i=qa("_fallback",e));let o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:s,_fallback:i,_getTarget:a,override:r=>fn([r,...e],n,s,i)};return new Proxy(o,{deleteProperty(r,l){return delete r[l],delete r._keys,delete e[0][l],!0},get(r,l){return Ga(r,l,()=>Pr(l,n,e,r))},getOwnPropertyDescriptor(r,l){return Reflect.getOwnPropertyDescriptor(r._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(e[0])},has(r,l){return Pa(r).includes(l)},ownKeys(r){return Pa(r)},set(r,l,c){let d=r._storage||(r._storage=a());return r[l]=d[l]=c,delete r._keys,!0}})}function Qt(e,n,t,i){let a={_cacheable:!1,_proxy:e,_context:n,_subProxy:t,_stack:new Set,_descriptors:si(e,i),setContext:s=>Qt(e,s,t,i),override:s=>Qt(e.override(s),n,t,i)};return new Proxy(a,{deleteProperty(s,o){return delete s[o],delete e[o],!0},get(s,o,r){return Ga(s,o,()=>_r(s,o,r))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(e,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,o)},getPrototypeOf(){return Reflect.getPrototypeOf(e)},has(s,o){return Reflect.has(e,o)},ownKeys(){return Reflect.ownKeys(e)},set(s,o,r){return e[o]=r,delete s[o],!0}})}function si(e,n={scriptable:!0,indexable:!0}){let{_scriptable:t=n.scriptable,_indexable:i=n.indexable,_allKeys:a=n.allKeys}=e;return{allKeys:a,scriptable:t,indexable:i,isScriptable:Pt(t)?t:()=>t,isIndexable:Pt(i)?i:()=>i}}var xr=(e,n)=>e?e+sn(n):n,oi=(e,n)=>V(n)&&e!=="adapters"&&(Object.getPrototypeOf(n)===null||n.constructor===Object);function Ga(e,n,t){if(Object.prototype.hasOwnProperty.call(e,n)||n==="constructor")return e[n];let i=t();return e[n]=i,i}function _r(e,n,t){let{_proxy:i,_context:a,_subProxy:s,_descriptors:o}=e,r=i[n];return Pt(r)&&o.isScriptable(n)&&(r=yr(n,r,e,t)),X(r)&&r.length&&(r=vr(n,r,e,o.isIndexable)),oi(n,r)&&(r=Qt(r,a,s&&s[n],o)),r}function yr(e,n,t,i){let{_proxy:a,_context:s,_subProxy:o,_stack:r}=t;if(r.has(e))throw new Error("Recursion detected: "+Array.from(r).join("->")+"->"+e);r.add(e);let l=n(s,o||i);return r.delete(e),oi(e,l)&&(l=ri(a._scopes,a,e,l)),l}function vr(e,n,t,i){let{_proxy:a,_context:s,_subProxy:o,_descriptors:r}=t;if(typeof s.index<"u"&&i(e))return n[s.index%n.length];if(V(n[0])){let l=n,c=a._scopes.filter(d=>d!==l);n=[];for(let d of l){let h=ri(c,a,e,d);n.push(Qt(h,s,o&&o[e],r))}}return n}function Xa(e,n,t){return Pt(e)?e(n,t):e}var Mr=(e,n)=>e===!0?n:typeof e=="string"?wt(n,e):void 0;function Cr(e,n,t,i,a){for(let s of n){let o=Mr(t,s);if(o){e.add(o);let r=Xa(o._fallback,t,a);if(typeof r<"u"&&r!==t&&r!==i)return r}else if(o===!1&&typeof i<"u"&&t!==i)return null}return!1}function ri(e,n,t,i){let a=n._rootScopes,s=Xa(n._fallback,t,i),o=[...e,...a],r=new Set;r.add(i);let l=Sa(r,o,t,s||t,i);return l===null||typeof s<"u"&&s!==t&&(l=Sa(r,o,s,l,i),l===null)?!1:fn(Array.from(r),[""],a,s,()=>Sr(n,t,i))}function Sa(e,n,t,i,a){for(;t;)t=Cr(e,n,t,i,a);return t}function Sr(e,n,t){let i=e._getTarget();n in i||(i[n]={});let a=i[n];return X(a)&&V(t)?t:a||{}}function Pr(e,n,t,i){let a;for(let s of n)if(a=qa(xr(s,e),t),typeof a<"u")return oi(e,a)?ri(t,i,e,a):a}function qa(e,n){for(let t of n){if(!t)continue;let i=t[e];if(typeof i<"u")return i}}function Pa(e){let n=e._keys;return n||(n=e._keys=Or(e._scopes)),n}function Or(e){let n=new Set;for(let t of e)for(let i of Object.keys(t).filter(a=>!a.startsWith("_")))n.add(i);return Array.from(n)}function li(e,n,t,i){let{iScale:a}=e,{key:s="r"}=this._parsing,o=new Array(i),r,l,c,d;for(r=0,l=i;r<l;++r)c=r+t,d=n[c],o[r]={r:a.parse(wt(d,s),c)};return o}var wr=Number.EPSILON||1e-14,he=(e,n)=>n<e.length&&!e[n].skip&&e[n],Ka=e=>e==="x"?"y":"x";function kr(e,n,t,i){let a=e.skip?n:e,s=n,o=t.skip?n:t,r=nn(s,a),l=nn(o,s),c=r/(r+l),d=l/(r+l);c=isNaN(c)?0:c,d=isNaN(d)?0:d;let h=i*c,f=i*d;return{previous:{x:s.x-h*(o.x-a.x),y:s.y-h*(o.y-a.y)},next:{x:s.x+f*(o.x-a.x),y:s.y+f*(o.y-a.y)}}}function Dr(e,n,t){let i=e.length,a,s,o,r,l,c=he(e,0);for(let d=0;d<i-1;++d)if(l=c,c=he(e,d+1),!(!l||!c)){if(ge(n[d],0,wr)){t[d]=t[d+1]=0;continue}a=t[d]/n[d],s=t[d+1]/n[d],r=Math.pow(a,2)+Math.pow(s,2),!(r<=9)&&(o=3/Math.sqrt(r),t[d]=a*o*n[d],t[d+1]=s*o*n[d])}}function Tr(e,n,t="x"){let i=Ka(t),a=e.length,s,o,r,l=he(e,0);for(let c=0;c<a;++c){if(o=r,r=l,l=he(e,c+1),!r)continue;let d=r[t],h=r[i];o&&(s=(d-o[t])/3,r[`cp1${t}`]=d-s,r[`cp1${i}`]=h-s*n[c]),l&&(s=(l[t]-d)/3,r[`cp2${t}`]=d+s,r[`cp2${i}`]=h+s*n[c])}}function Er(e,n="x"){let t=Ka(n),i=e.length,a=Array(i).fill(0),s=Array(i),o,r,l,c=he(e,0);for(o=0;o<i;++o)if(r=l,l=c,c=he(e,o+1),!!l){if(c){let d=c[n]-l[n];a[o]=d!==0?(c[t]-l[t])/d:0}s[o]=r?c?gt(a[o-1])!==gt(a[o])?0:(a[o-1]+a[o])/2:a[o-1]:a[o]}Dr(e,a,s),Tr(e,s,n)}function Ze(e,n,t){return Math.max(Math.min(e,t),n)}function Ar(e,n){let t,i,a,s,o,r=_t(e[0],n);for(t=0,i=e.length;t<i;++t)o=s,s=r,r=t<i-1&&_t(e[t+1],n),s&&(a=e[t],o&&(a.cp1x=Ze(a.cp1x,n.left,n.right),a.cp1y=Ze(a.cp1y,n.top,n.bottom)),r&&(a.cp2x=Ze(a.cp2x,n.left,n.right),a.cp2y=Ze(a.cp2y,n.top,n.bottom)))}function Ja(e,n,t,i,a){let s,o,r,l;if(n.spanGaps&&(e=e.filter(c=>!c.skip)),n.cubicInterpolationMode==="monotone")Er(e,a);else{let c=i?e[e.length-1]:e[0];for(s=0,o=e.length;s<o;++s)r=e[s],l=kr(c,r,e[Math.min(s+1,o-(i?0:1))%o],n.tension),r.cp1x=l.previous.x,r.cp1y=l.previous.y,r.cp2x=l.next.x,r.cp2y=l.next.y,c=r}n.capBezierPoints&&Ar(e,t)}function un(){return typeof window<"u"&&typeof document<"u"}function gn(e){let n=e.parentNode;return n&&n.toString()==="[object ShadowRoot]"&&(n=n.host),n}function an(e,n,t){let i;return typeof e=="string"?(i=parseInt(e,10),e.indexOf("%")!==-1&&(i=i/100*n.parentNode[t])):i=e,i}var pn=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);function Ir(e,n){return pn(e).getPropertyValue(n)}var jr=["top","right","bottom","left"];function Zt(e,n,t){let i={};t=t?"-"+t:"";for(let a=0;a<4;a++){let s=jr[a];i[s]=parseFloat(e[n+"-"+s+t])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}var zr=(e,n,t)=>(e>0||n>0)&&(!t||!t.shadowRoot);function Fr(e,n){let t=e.touches,i=t&&t.length?t[0]:e,{offsetX:a,offsetY:s}=i,o=!1,r,l;if(zr(a,s,e.target))r=a,l=s;else{let c=n.getBoundingClientRect();r=i.clientX-c.left,l=i.clientY-c.top,o=!0}return{x:r,y:l,box:o}}function Nt(e,n){if("native"in e)return e;let{canvas:t,currentDevicePixelRatio:i}=n,a=pn(t),s=a.boxSizing==="border-box",o=Zt(a,"padding"),r=Zt(a,"border","width"),{x:l,y:c,box:d}=Fr(e,t),h=o.left+(d&&r.left),f=o.top+(d&&r.top),{width:u,height:p}=n;return s&&(u-=o.width+r.width,p-=o.height+r.height),{x:Math.round((l-h)/u*t.width/i),y:Math.round((c-f)/p*t.height/i)}}function Rr(e,n,t){let i,a;if(n===void 0||t===void 0){let s=e&&gn(e);if(!s)n=e.clientWidth,t=e.clientHeight;else{let o=s.getBoundingClientRect(),r=pn(s),l=Zt(r,"border","width"),c=Zt(r,"padding");n=o.width-c.width-l.width,t=o.height-c.height-l.height,i=an(r.maxWidth,s,"clientWidth"),a=an(r.maxHeight,s,"clientHeight")}}return{width:n,height:t,maxWidth:i||en,maxHeight:a||en}}var jt=e=>Math.round(e*10)/10;function Za(e,n,t,i){let a=pn(e),s=Zt(a,"margin"),o=an(a.maxWidth,e,"clientWidth")||en,r=an(a.maxHeight,e,"clientHeight")||en,l=Rr(e,n,t),{width:c,height:d}=l;if(a.boxSizing==="content-box"){let f=Zt(a,"border","width"),u=Zt(a,"padding");c-=u.width+f.width,d-=u.height+f.height}return c=Math.max(0,c-s.width),d=Math.max(0,i?c/i:d-s.height),c=jt(Math.min(c,o,l.maxWidth)),d=jt(Math.min(d,r,l.maxHeight)),c&&!d&&(d=jt(c/2)),(n!==void 0||t!==void 0)&&i&&l.height&&d>l.height&&(d=l.height,c=jt(Math.floor(d*i))),{width:c,height:d}}function ci(e,n,t){let i=n||1,a=jt(e.height*i),s=jt(e.width*i);e.height=jt(e.height),e.width=jt(e.width);let o=e.canvas;return o.style&&(t||!o.style.height&&!o.style.width)&&(o.style.height=`${e.height}px`,o.style.width=`${e.width}px`),e.currentDevicePixelRatio!==i||o.height!==a||o.width!==s?(e.currentDevicePixelRatio=i,o.height=a,o.width=s,e.ctx.setTransform(i,0,0,i,0,0),!0):!1}var Qa=(function(){let e=!1;try{let n={get passive(){return e=!0,!1}};un()&&(window.addEventListener("test",null,n),window.removeEventListener("test",null,n))}catch{}return e})();function di(e,n){let t=Ir(e,n),i=t&&t.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function It(e,n,t,i){return{x:e.x+t*(n.x-e.x),y:e.y+t*(n.y-e.y)}}function ts(e,n,t,i){return{x:e.x+t*(n.x-e.x),y:i==="middle"?t<.5?e.y:n.y:i==="after"?t<1?e.y:n.y:t>0?n.y:e.y}}function es(e,n,t,i){let a={x:e.cp2x,y:e.cp2y},s={x:n.cp1x,y:n.cp1y},o=It(e,a,t),r=It(a,s,t),l=It(s,n,t),c=It(o,r,t),d=It(r,l,t);return It(c,d,t)}var Lr=function(e,n){return{x(t){return e+e+n-t},setWidth(t){n=t},textAlign(t){return t==="center"?t:t==="right"?"left":"right"},xPlus(t,i){return t-i},leftForLtr(t,i){return t-i}}},Nr=function(){return{x(e){return e},setWidth(e){},textAlign(e){return e},xPlus(e,n){return e+n},leftForLtr(e,n){return e}}};function ee(e,n,t){return e?Lr(n,t):Nr()}function hi(e,n){let t,i;(n==="ltr"||n==="rtl")&&(t=e.canvas.style,i=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",n,"important"),e.prevTextDirection=i)}function fi(e,n){n!==void 0&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",n[0],n[1]))}function ns(e){return e==="angle"?{between:pe,compare:nr,normalize:st}:{between:vt,compare:(n,t)=>n-t,normalize:n=>n}}function Oa({start:e,end:n,count:t,loop:i,style:a}){return{start:e%t,end:n%t,loop:i&&(n-e+1)%t===0,style:a}}function Br(e,n,t){let{property:i,start:a,end:s}=t,{between:o,normalize:r}=ns(i),l=n.length,{start:c,end:d,loop:h}=e,f,u;if(h){for(c+=l,d+=l,f=0,u=l;f<u&&o(r(n[c%l][i]),a,s);++f)c--,d--;c%=l,d%=l}return d<c&&(d+=l),{start:c,end:d,loop:h,style:e.style}}function ui(e,n,t){if(!t)return[e];let{property:i,start:a,end:s}=t,o=n.length,{compare:r,between:l,normalize:c}=ns(i),{start:d,end:h,loop:f,style:u}=Br(e,n,t),p=[],g=!1,m=null,v,M,O,S=()=>l(a,O,v)&&r(a,O)!==0,_=()=>r(s,v)===0||l(s,O,v),C=()=>g||S(),k=()=>!g||_();for(let w=d,D=d;w<=h;++w)M=n[w%o],!M.skip&&(v=c(M[i]),v!==O&&(g=l(v,a,s),m===null&&C()&&(m=r(v,a)===0?w:D),m!==null&&k()&&(p.push(Oa({start:m,end:w,loop:f,count:o,style:u})),m=null),D=w,O=v));return m!==null&&p.push(Oa({start:m,end:h,loop:f,count:o,style:u})),p}function gi(e,n){let t=[],i=e.segments;for(let a=0;a<i.length;a++){let s=ui(i[a],e.points,n);s.length&&t.push(...s)}return t}function Vr(e,n,t,i){let a=0,s=n-1;if(t&&!i)for(;a<n&&!e[a].skip;)a++;for(;a<n&&e[a].skip;)a++;for(a%=n,t&&(s+=a);s>a&&e[s%n].skip;)s--;return s%=n,{start:a,end:s}}function Hr(e,n,t,i){let a=e.length,s=[],o=n,r=e[n],l;for(l=n+1;l<=t;++l){let c=e[l%a];c.skip||c.stop?r.skip||(i=!1,s.push({start:n%a,end:(l-1)%a,loop:i}),n=o=c.stop?l:null):(o=l,r.skip&&(n=l)),r=c}return o!==null&&s.push({start:n%a,end:o%a,loop:i}),s}function is(e,n){let t=e.points,i=e.options.spanGaps,a=t.length;if(!a)return[];let s=!!e._loop,{start:o,end:r}=Vr(t,a,s,i);if(i===!0)return wa(e,[{start:o,end:r,loop:s}],t,n);let l=r<o?r+a:r,c=!!e._fullLoop&&o===0&&r===a-1;return wa(e,Hr(t,o,l,c),t,n)}function wa(e,n,t,i){return!i||!i.setContext||!t?n:Wr(e,n,t,i)}function Wr(e,n,t,i){let a=e._chart.getContext(),s=ka(e.options),{_datasetIndex:o,options:{spanGaps:r}}=e,l=t.length,c=[],d=s,h=n[0].start,f=h;function u(p,g,m,v){let M=r?-1:1;if(p!==g){for(p+=l;t[p%l].skip;)p-=M;for(;t[g%l].skip;)g+=M;p%l!==g%l&&(c.push({start:p%l,end:g%l,loop:m,style:v}),d=v,h=g%l)}}for(let p of n){h=r?h:p.start;let g=t[h%l],m;for(f=h+1;f<=p.end;f++){let v=t[f%l];m=ka(i.setContext(kt(a,{type:"segment",p0:g,p1:v,p0DataIndex:(f-1)%l,p1DataIndex:f%l,datasetIndex:o}))),$r(m,d)&&u(h,f-1,p.loop,d),g=v,d=m}h<f-1&&u(h,f-1,p.loop,d)}return c}function ka(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function $r(e,n){if(!n)return!1;let t=[],i=function(a,s){return ti(s)?(t.includes(s)||t.push(s),t.indexOf(s)):s};return JSON.stringify(e,i)!==JSON.stringify(n,i)}function Qe(e,n,t){return e.options.clip?e[t]:n[t]}function Yr(e,n){let{xScale:t,yScale:i}=e;return t&&i?{left:Qe(t,n,"left"),right:Qe(t,n,"right"),top:Qe(i,n,"top"),bottom:Qe(i,n,"bottom")}:n}function pi(e,n){let t=n._clip;if(t.disabled)return!1;let i=Yr(n,e.chartArea);return{left:t.left===!1?0:i.left-(t.left===!0?0:t.left),right:t.right===!1?e.width:i.right+(t.right===!0?0:t.right),top:t.top===!1?0:i.top-(t.top===!0?0:t.top),bottom:t.bottom===!1?e.height:i.bottom+(t.bottom===!0?0:t.bottom)}}var wi=class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(n,t,i,a){let s=t.listeners[a],o=t.duration;s.forEach(r=>r({chart:n,initial:t.initial,numSteps:o,currentStep:Math.min(i-t.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=Kn.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(n=Date.now()){let t=0;this._charts.forEach((i,a)=>{if(!i.running||!i.items.length)return;let s=i.items,o=s.length-1,r=!1,l;for(;o>=0;--o)l=s[o],l._active?(l._total>i.duration&&(i.duration=l._total),l.tick(n),r=!0):(s[o]=s[s.length-1],s.pop());r&&(a.draw(),this._notify(a,i,n,"progress")),s.length||(i.running=!1,this._notify(a,i,n,"complete"),i.initial=!1),t+=s.length}),this._lastDate=n,t===0&&(this._running=!1)}_getAnims(n){let t=this._charts,i=t.get(n);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(n,i)),i}listen(n,t,i){this._getAnims(n).listeners[t].push(i)}add(n,t){!t||!t.length||this._getAnims(n).items.push(...t)}has(n){return this._getAnims(n).items.length>0}start(n){let t=this._charts.get(n);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((i,a)=>Math.max(i,a._duration),0),this._refresh())}running(n){if(!this._running)return!1;let t=this._charts.get(n);return!(!t||!t.running||!t.items.length)}stop(n){let t=this._charts.get(n);if(!t||!t.items.length)return;let i=t.items,a=i.length-1;for(;a>=0;--a)i[a].cancel();t.items=[],this._notify(n,t,Date.now(),"complete")}remove(n){return this._charts.delete(n)}},Dt=new wi,as="transparent",Ur={boolean(e,n,t){return t>.5?n:e},color(e,n,t){let i=ei(e||as),a=i.valid&&ei(n||as);return a&&a.valid?a.mix(i,t).hexString():n},number(e,n,t){return e+(n-e)*t}},ki=class{constructor(n,t,i,a){let s=t[i];a=xe([n.to,a,s,n.from]);let o=xe([n.from,s,a]);this._active=!0,this._fn=n.fn||Ur[n.type||typeof o],this._easing=ce[n.easing]||ce.linear,this._start=Math.floor(Date.now()+(n.delay||0)),this._duration=this._total=Math.floor(n.duration),this._loop=!!n.loop,this._target=t,this._prop=i,this._from=o,this._to=a,this._promises=void 0}active(){return this._active}update(n,t,i){if(this._active){this._notify(!1);let a=this._target[this._prop],s=i-this._start,o=this._duration-s;this._start=i,this._duration=Math.floor(Math.max(o,n.duration)),this._total+=s,this._loop=!!n.loop,this._to=xe([n.to,t,a,n.from]),this._from=xe([n.from,a,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(n){let t=n-this._start,i=this._duration,a=this._prop,s=this._from,o=this._loop,r=this._to,l;if(this._active=s!==r&&(o||t<i),!this._active){this._target[a]=r,this._notify(!0);return}if(t<0){this._target[a]=s;return}l=t/i%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[a]=this._fn(s,r,l)}wait(){let n=this._promises||(this._promises=[]);return new Promise((t,i)=>{n.push({res:t,rej:i})})}_notify(n){let t=n?"res":"rej",i=this._promises||[];for(let a=0;a<i.length;a++)i[a][t]()}},Sn=class{constructor(n,t){this._chart=n,this._properties=new Map,this.configure(t)}configure(n){if(!V(n))return;let t=Object.keys(K.animation),i=this._properties;Object.getOwnPropertyNames(n).forEach(a=>{let s=n[a];if(!V(s))return;let o={};for(let r of t)o[r]=s[r];(X(s.properties)&&s.properties||[a]).forEach(r=>{(r===a||!i.has(r))&&i.set(r,o)})})}_animateOptions(n,t){let i=t.options,a=Xr(n,i);if(!a)return[];let s=this._createAnimations(a,i);return i.$shared&&Gr(n.options.$animations,i).then(()=>{n.options=i},()=>{}),s}_createAnimations(n,t){let i=this._properties,a=[],s=n.$animations||(n.$animations={}),o=Object.keys(t),r=Date.now(),l;for(l=o.length-1;l>=0;--l){let c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){a.push(...this._animateOptions(n,t));continue}let d=t[c],h=s[c],f=i.get(c);if(h)if(f&&h.active()){h.update(f,d,r);continue}else h.cancel();if(!f||!f.duration){n[c]=d;continue}s[c]=h=new ki(f,n,c,d),a.push(h)}return a}update(n,t){if(this._properties.size===0){Object.assign(n,t);return}let i=this._createAnimations(n,t);if(i.length)return Dt.add(this._chart,i),!0}};function Gr(e,n){let t=[],i=Object.keys(n);for(let a=0;a<i.length;a++){let s=e[i[a]];s&&s.active()&&t.push(s.wait())}return Promise.all(t)}function Xr(e,n){if(!n)return;let t=e.options;if(!t){e.options=n;return}return t.$shared&&(e.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t}function ss(e,n){let t=e&&e.options||{},i=t.reverse,a=t.min===void 0?n:0,s=t.max===void 0?n:0;return{start:i?s:a,end:i?a:s}}function qr(e,n,t){if(t===!1)return!1;let i=ss(e,t),a=ss(n,t);return{top:a.end,right:i.end,bottom:a.start,left:i.start}}function Kr(e){let n,t,i,a;return V(e)?(n=e.top,t=e.right,i=e.bottom,a=e.left):n=t=i=a=e,{top:n,right:t,bottom:i,left:a,disabled:e===!1}}function ao(e,n){let t=[],i=e._getSortedDatasetMetas(n),a,s;for(a=0,s=i.length;a<s;++a)t.push(i[a].index);return t}function os(e,n,t,i={}){let a=e.keys,s=i.mode==="single",o,r,l,c;if(n===null)return;let d=!1;for(o=0,r=a.length;o<r;++o){if(l=+a[o],l===t){if(d=!0,i.all)continue;break}c=e.values[l],Z(c)&&(s||n===0||gt(n)===gt(c))&&(n+=c)}return!d&&!i.all?0:n}function Jr(e,n){let{iScale:t,vScale:i}=n,a=t.axis==="x"?"x":"y",s=i.axis==="x"?"x":"y",o=Object.keys(e),r=new Array(o.length),l,c,d;for(l=0,c=o.length;l<c;++l)d=o[l],r[l]={[a]:d,[s]:e[d]};return r}function mi(e,n){let t=e&&e.options.stacked;return t||t===void 0&&n.stack!==void 0}function Zr(e,n,t){return`${e.id}.${n.id}.${t.stack||t.type}`}function Qr(e){let{min:n,max:t,minDefined:i,maxDefined:a}=e.getUserBounds();return{min:i?n:Number.NEGATIVE_INFINITY,max:a?t:Number.POSITIVE_INFINITY}}function tl(e,n,t){let i=e[n]||(e[n]={});return i[t]||(i[t]={})}function rs(e,n,t,i){for(let a of n.getMatchingVisibleMetas(i).reverse()){let s=e[a.index];if(t&&s>0||!t&&s<0)return a.index}return null}function ls(e,n){let{chart:t,_cachedMeta:i}=e,a=t._stacks||(t._stacks={}),{iScale:s,vScale:o,index:r}=i,l=s.axis,c=o.axis,d=Zr(s,o,i),h=n.length,f;for(let u=0;u<h;++u){let p=n[u],{[l]:g,[c]:m}=p,v=p._stacks||(p._stacks={});f=v[c]=tl(a,d,g),f[r]=m,f._top=rs(f,o,!0,i.type),f._bottom=rs(f,o,!1,i.type);let M=f._visualValues||(f._visualValues={});M[r]=m}}function bi(e,n){let t=e.scales;return Object.keys(t).filter(i=>t[i].axis===n).shift()}function el(e,n){return kt(e,{active:!1,dataset:void 0,datasetIndex:n,index:n,mode:"default",type:"dataset"})}function nl(e,n,t){return kt(e,{active:!1,dataIndex:n,parsed:void 0,raw:void 0,element:t,index:n,mode:"default",type:"data"})}function ze(e,n){let t=e.controller.index,i=e.vScale&&e.vScale.axis;if(i){n=n||e._parsed;for(let a of n){let s=a._stacks;if(!s||s[i]===void 0||s[i][t]===void 0)return;delete s[i][t],s[i]._visualValues!==void 0&&s[i]._visualValues[t]!==void 0&&delete s[i]._visualValues[t]}}}var xi=e=>e==="reset"||e==="none",cs=(e,n)=>n?e:Object.assign({},e),il=(e,n,t)=>e&&!n.hidden&&n._stacked&&{keys:ao(t,!0),values:null},Vt=(()=>{class e{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,i){this.chart=t,this._ctx=t.ctx,this.index=i,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){let t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=mi(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&ze(this._cachedMeta),this.index=t}linkScales(){let t=this.chart,i=this._cachedMeta,a=this.getDataset(),s=(f,u,p,g)=>f==="x"?u:f==="r"?g:p,o=i.xAxisID=F(a.xAxisID,bi(t,"x")),r=i.yAxisID=F(a.yAxisID,bi(t,"y")),l=i.rAxisID=F(a.rAxisID,bi(t,"r")),c=i.indexAxis,d=i.iAxisID=s(c,o,r,l),h=i.vAxisID=s(c,r,o,l);i.xScale=this.getScaleForId(o),i.yScale=this.getScaleForId(r),i.rScale=this.getScaleForId(l),i.iScale=this.getScaleForId(d),i.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){let i=this._cachedMeta;return t===i.iScale?i.vScale:i.iScale}reset(){this._update("reset")}_destroy(){let t=this._cachedMeta;this._data&&Xn(this._data,this),t._stacked&&ze(t)}_dataCheck(){let t=this.getDataset(),i=t.data||(t.data=[]),a=this._data;if(V(i)){let s=this._cachedMeta;this._data=Jr(i,s)}else if(a!==i){if(a){Xn(a,this);let s=this._cachedMeta;ze(s),s._parsed=[]}i&&Object.isExtensible(i)&&Na(i,this),this._syncList=[],this._data=i}}addElements(){let t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){let i=this._cachedMeta,a=this.getDataset(),s=!1;this._dataCheck();let o=i._stacked;i._stacked=mi(i.vScale,i),i.stack!==a.stack&&(s=!0,ze(i),i.stack=a.stack),this._resyncElements(t),(s||o!==i._stacked)&&(ls(this,i._parsed),i._stacked=mi(i.vScale,i))}configure(){let t=this.chart.config,i=t.datasetScopeKeys(this._type),a=t.getOptionScopes(this.getDataset(),i,!0);this.options=t.createResolver(a,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,i){let{_cachedMeta:a,_data:s}=this,{iScale:o,_stacked:r}=a,l=o.axis,c=t===0&&i===s.length?!0:a._sorted,d=t>0&&a._parsed[t-1],h,f,u;if(this._parsing===!1)a._parsed=s,a._sorted=!0,u=s;else{X(s[t])?u=this.parseArrayData(a,s,t,i):V(s[t])?u=this.parseObjectData(a,s,t,i):u=this.parsePrimitiveData(a,s,t,i);let p=()=>f[l]===null||d&&f[l]<d[l];for(h=0;h<i;++h)a._parsed[h+t]=f=u[h],c&&(p()&&(c=!1),d=f);a._sorted=c}r&&ls(this,u)}parsePrimitiveData(t,i,a,s){let{iScale:o,vScale:r}=t,l=o.axis,c=r.axis,d=o.getLabels(),h=o===r,f=new Array(s),u,p,g;for(u=0,p=s;u<p;++u)g=u+a,f[u]={[l]:h||o.parse(d[g],g),[c]:r.parse(i[g],g)};return f}parseArrayData(t,i,a,s){let{xScale:o,yScale:r}=t,l=new Array(s),c,d,h,f;for(c=0,d=s;c<d;++c)h=c+a,f=i[h],l[c]={x:o.parse(f[0],h),y:r.parse(f[1],h)};return l}parseObjectData(t,i,a,s){let{xScale:o,yScale:r}=t,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,d=new Array(s),h,f,u,p;for(h=0,f=s;h<f;++h)u=h+a,p=i[u],d[h]={x:o.parse(wt(p,l),u),y:r.parse(wt(p,c),u)};return d}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,i,a){let s=this.chart,o=this._cachedMeta,r=i[t.axis],l={keys:ao(s,!0),values:i._stacks[t.axis]._visualValues};return os(l,r,o.index,{mode:a})}updateRangeFromParsed(t,i,a,s){let o=a[i.axis],r=o===null?NaN:o,l=s&&a._stacks[i.axis];s&&l&&(s.values=l,r=os(s,o,this._cachedMeta.index)),t.min=Math.min(t.min,r),t.max=Math.max(t.max,r)}getMinMax(t,i){let a=this._cachedMeta,s=a._parsed,o=a._sorted&&t===a.iScale,r=s.length,l=this._getOtherScale(t),c=il(i,a,this.chart),d={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:f}=Qr(l),u,p;function g(){p=s[u];let m=p[l.axis];return!Z(p[t.axis])||h>m||f<m}for(u=0;u<r&&!(!g()&&(this.updateRangeFromParsed(d,t,p,c),o));++u);if(o){for(u=r-1;u>=0;--u)if(!g()){this.updateRangeFromParsed(d,t,p,c);break}}return d}getAllParsedValues(t){let i=this._cachedMeta._parsed,a=[],s,o,r;for(s=0,o=i.length;s<o;++s)r=i[s][t.axis],Z(r)&&a.push(r);return a}getMaxOverflow(){return!1}getLabelAndValue(t){let i=this._cachedMeta,a=i.iScale,s=i.vScale,o=this.getParsed(t);return{label:a?""+a.getLabelForValue(o[a.axis]):"",value:s?""+s.getLabelForValue(o[s.axis]):""}}_update(t){let i=this._cachedMeta;this.update(t||"default"),i._clip=Kr(F(this.options.clip,qr(i.xScale,i.yScale,this.getMaxOverflow())))}update(t){}draw(){let t=this._ctx,i=this.chart,a=this._cachedMeta,s=a.data||[],o=i.chartArea,r=[],l=this._drawStart||0,c=this._drawCount||s.length-l,d=this.options.drawActiveElementsOnTop,h;for(a.dataset&&a.dataset.draw(t,o,l,c),h=l;h<l+c;++h){let f=s[h];f.hidden||(f.active&&d?r.push(f):f.draw(t,o))}for(h=0;h<r.length;++h)r[h].draw(t,o)}getStyle(t,i){let a=i?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(a):this.resolveDataElementOptions(t||0,a)}getContext(t,i,a){let s=this.getDataset(),o;if(t>=0&&t<this._cachedMeta.data.length){let r=this._cachedMeta.data[t];o=r.$context||(r.$context=nl(this.getContext(),t,r)),o.parsed=this.getParsed(t),o.raw=s.data[t],o.index=o.dataIndex=t}else o=this.$context||(this.$context=el(this.chart.getContext(),this.index)),o.dataset=s,o.index=o.datasetIndex=this.index;return o.active=!!i,o.mode=a,o}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,i){return this._resolveElementOptions(this.dataElementType.id,i,t)}_resolveElementOptions(t,i="default",a){let s=i==="active",o=this._cachedDataOpts,r=t+"-"+i,l=o[r],c=this.enableOptionSharing&&ue(a);if(l)return cs(l,c);let d=this.chart.config,h=d.datasetElementScopeKeys(this._type,t),f=s?[`${t}Hover`,"hover",t,""]:[t,""],u=d.getOptionScopes(this.getDataset(),h),p=Object.keys(K.elements[t]),g=()=>this.getContext(a,s,i),m=d.resolveNamedOptions(u,p,g,f);return m.$shared&&(m.$shared=c,o[r]=Object.freeze(cs(m,c))),m}_resolveAnimations(t,i,a){let s=this.chart,o=this._cachedDataOpts,r=`animation-${i}`,l=o[r];if(l)return l;let c;if(s.options.animation!==!1){let h=this.chart.config,f=h.datasetAnimationScopeKeys(this._type,i),u=h.getOptionScopes(this.getDataset(),f);c=h.createResolver(u,this.getContext(t,a,i))}let d=new Sn(s,c&&c.animations);return c&&c._cacheable&&(o[r]=Object.freeze(d)),d}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,i){return!i||xi(t)||this.chart._animationsDisabled}_getSharedOptions(t,i){let a=this.resolveDataElementOptions(t,i),s=this._sharedOptions,o=this.getSharedOptions(a),r=this.includeOptions(i,o)||o!==s;return this.updateSharedOptions(o,i,a),{sharedOptions:o,includeOptions:r}}updateElement(t,i,a,s){xi(s)?Object.assign(t,a):this._resolveAnimations(i,s).update(t,a)}updateSharedOptions(t,i,a){t&&!xi(i)&&this._resolveAnimations(void 0,i).update(t,a)}_setStyle(t,i,a,s){t.active=s;let o=this.getStyle(i,s);this._resolveAnimations(i,a,s).update(t,{options:!s&&this.getSharedOptions(o)||o})}removeHoverStyle(t,i,a){this._setStyle(t,a,"active",!1)}setHoverStyle(t,i,a){this._setStyle(t,a,"active",!0)}_removeDatasetHoverStyle(){let t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){let t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){let i=this._data,a=this._cachedMeta.data;for(let[l,c,d]of this._syncList)this[l](c,d);this._syncList=[];let s=a.length,o=i.length,r=Math.min(o,s);r&&this.parse(0,r),o>s?this._insertElements(s,o-s,t):o<s&&this._removeElements(o,s-o)}_insertElements(t,i,a=!0){let s=this._cachedMeta,o=s.data,r=t+i,l,c=d=>{for(d.length+=i,l=d.length-1;l>=r;l--)d[l]=d[l-i]};for(c(o),l=t;l<r;++l)o[l]=new this.dataElementType;this._parsing&&c(s._parsed),this.parse(t,i),a&&this.updateElements(o,t,i,"reset")}updateElements(t,i,a,s){}_removeElements(t,i){let a=this._cachedMeta;if(this._parsing){let s=a._parsed.splice(t,i);a._stacked&&ze(a,s)}a.data.splice(t,i)}_sync(t){if(this._parsing)this._syncList.push(t);else{let[i,a,s]=t;this[i](a,s)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){let t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,i){i&&this._sync(["_removeElements",t,i]);let a=arguments.length-2;a&&this._sync(["_insertElements",t,a])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}return e})();function al(e,n){if(!e._cache.$bar){let t=e.getMatchingVisibleMetas(n),i=[];for(let a=0,s=t.length;a<s;a++)i=i.concat(t[a].controller.getAllParsedValues(e));e._cache.$bar=qn(i.sort((a,s)=>a-s))}return e._cache.$bar}function sl(e){let n=e.iScale,t=al(n,e.type),i=n._length,a,s,o,r,l=()=>{o===32767||o===-32768||(ue(r)&&(i=Math.min(i,Math.abs(o-r)||i)),r=o)};for(a=0,s=t.length;a<s;++a)o=n.getPixelForValue(t[a]),l();for(r=void 0,a=0,s=n.ticks.length;a<s;++a)o=n.getPixelForTick(a),l();return i}function ol(e,n,t,i){let a=t.barThickness,s,o;return B(a)?(s=n.min*t.categoryPercentage,o=t.barPercentage):(s=a*i,o=1),{chunk:s/i,ratio:o,start:n.pixels[e]-s/2}}function rl(e,n,t,i){let a=n.pixels,s=a[e],o=e>0?a[e-1]:null,r=e<a.length-1?a[e+1]:null,l=t.categoryPercentage;o===null&&(o=s-(r===null?n.end-n.start:r-s)),r===null&&(r=s+s-o);let c=s-(s-Math.min(o,r))/2*l;return{chunk:Math.abs(r-o)/2*l/i,ratio:t.barPercentage,start:c}}function ll(e,n,t,i){let a=t.parse(e[0],i),s=t.parse(e[1],i),o=Math.min(a,s),r=Math.max(a,s),l=o,c=r;Math.abs(o)>Math.abs(r)&&(l=r,c=o),n[t.axis]=c,n._custom={barStart:l,barEnd:c,start:a,end:s,min:o,max:r}}function so(e,n,t,i){return X(e)?ll(e,n,t,i):n[t.axis]=t.parse(e,i),n}function ds(e,n,t,i){let a=e.iScale,s=e.vScale,o=a.getLabels(),r=a===s,l=[],c,d,h,f;for(c=t,d=t+i;c<d;++c)f=n[c],h={},h[a.axis]=r||a.parse(o[c],c),l.push(so(f,h,s,c));return l}function _i(e){return e&&e.barStart!==void 0&&e.barEnd!==void 0}function cl(e,n,t){return e!==0?gt(e):(n.isHorizontal()?1:-1)*(n.min>=t?1:-1)}function dl(e){let n,t,i,a,s;return e.horizontal?(n=e.base>e.x,t="left",i="right"):(n=e.base<e.y,t="bottom",i="top"),n?(a="end",s="start"):(a="start",s="end"),{start:t,end:i,reverse:n,top:a,bottom:s}}function hl(e,n,t,i){let a=n.borderSkipped,s={};if(!a){e.borderSkipped=s;return}if(a===!0){e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}let{start:o,end:r,reverse:l,top:c,bottom:d}=dl(e);a==="middle"&&t&&(e.enableBorderRadius=!0,(t._top||0)===i?a=c:(t._bottom||0)===i?a=d:(s[hs(d,o,r,l)]=!0,a=c)),s[hs(a,o,r,l)]=!0,e.borderSkipped=s}function hs(e,n,t,i){return i?(e=fl(e,n,t),e=fs(e,t,n)):e=fs(e,n,t),e}function fl(e,n,t){return e===n?t:e===t?n:e}function fs(e,n,t){return e==="start"?n:e==="end"?t:e}function ul(e,{inflateAmount:n},t){e.inflateAmount=n==="auto"?t===1?.33:0:n}var gl=(()=>{class e extends Vt{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(t,i,a,s){return ds(t,i,a,s)}parseArrayData(t,i,a,s){return ds(t,i,a,s)}parseObjectData(t,i,a,s){let{iScale:o,vScale:r}=t,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,d=o.axis==="x"?l:c,h=r.axis==="x"?l:c,f=[],u,p,g,m;for(u=a,p=a+s;u<p;++u)m=i[u],g={},g[o.axis]=o.parse(wt(m,d),u),f.push(so(wt(m,h),g,r,u));return f}updateRangeFromParsed(t,i,a,s){super.updateRangeFromParsed(t,i,a,s);let o=a._custom;o&&i===this._cachedMeta.vScale&&(t.min=Math.min(t.min,o.min),t.max=Math.max(t.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(t){let i=this._cachedMeta,{iScale:a,vScale:s}=i,o=this.getParsed(t),r=o._custom,l=_i(r)?"["+r.start+", "+r.end+"]":""+s.getLabelForValue(o[s.axis]);return{label:""+a.getLabelForValue(o[a.axis]),value:l}}initialize(){this.enableOptionSharing=!0,super.initialize();let t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){let i=this._cachedMeta;this.updateElements(i.data,0,i.data.length,t)}updateElements(t,i,a,s){let o=s==="reset",{index:r,_cachedMeta:{vScale:l}}=this,c=l.getBasePixel(),d=l.isHorizontal(),h=this._getRuler(),{sharedOptions:f,includeOptions:u}=this._getSharedOptions(i,s);for(let p=i;p<i+a;p++){let g=this.getParsed(p),m=o||B(g[l.axis])?{base:c,head:c}:this._calculateBarValuePixels(p),v=this._calculateBarIndexPixels(p,h),M=(g._stacks||{})[l.axis],O={horizontal:d,base:m.base,enableBorderRadius:!M||_i(g._custom)||r===M._top||r===M._bottom,x:d?m.head:v.center,y:d?v.center:m.head,height:d?v.size:Math.abs(m.size),width:d?Math.abs(m.size):v.size};u&&(O.options=f||this.resolveDataElementOptions(p,t[p].active?"active":s));let S=O.options||t[p].options;hl(O,S,M,r),ul(O,S,h.ratio),this.updateElement(t[p],p,O,s)}}_getStacks(t,i){let{iScale:a}=this._cachedMeta,s=a.getMatchingVisibleMetas(this._type).filter(h=>h.controller.options.grouped),o=a.options.stacked,r=[],l=this._cachedMeta.controller.getParsed(i),c=l&&l[a.axis],d=h=>{let f=h._parsed.find(p=>p[a.axis]===c),u=f&&f[h.vScale.axis];if(B(u)||isNaN(u))return!0};for(let h of s)if(!(i!==void 0&&d(h))&&((o===!1||r.indexOf(h.stack)===-1||o===void 0&&h.stack===void 0)&&r.push(h.stack),h.index===t))break;return r.length||r.push(void 0),r}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){let t=this.chart.scales,i=this.chart.options.indexAxis;return Object.keys(t).filter(a=>t[a].axis===i).shift()}_getAxis(){let t={},i=this.getFirstScaleIdForIndexAxis();for(let a of this.chart.data.datasets)t[F(this.chart.options.indexAxis==="x"?a.xAxisID:a.yAxisID,i)]=!0;return Object.keys(t)}_getStackIndex(t,i,a){let s=this._getStacks(t,a),o=i!==void 0?s.indexOf(i):-1;return o===-1?s.length-1:o}_getRuler(){let t=this.options,i=this._cachedMeta,a=i.iScale,s=[],o,r;for(o=0,r=i.data.length;o<r;++o)s.push(a.getPixelForValue(this.getParsed(o)[a.axis],o));let l=t.barThickness;return{min:l||sl(i),pixels:s,start:a._startPixel,end:a._endPixel,stackCount:this._getStackCount(),scale:a,grouped:t.grouped,ratio:l?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){let{_cachedMeta:{vScale:i,_stacked:a,index:s},options:{base:o,minBarLength:r}}=this,l=o||0,c=this.getParsed(t),d=c._custom,h=_i(d),f=c[i.axis],u=0,p=a?this.applyStack(i,c,a):f,g,m;p!==f&&(u=p-f,p=f),h&&(f=d.barStart,p=d.barEnd-d.barStart,f!==0&&gt(f)!==gt(d.barEnd)&&(u=0),u+=f);let v=!B(o)&&!h?o:u,M=i.getPixelForValue(v);if(this.chart.getDataVisibility(t)?g=i.getPixelForValue(u+p):g=M,m=g-M,Math.abs(m)<r){m=cl(m,i,l)*r,f===l&&(M-=m/2);let O=i.getPixelForDecimal(0),S=i.getPixelForDecimal(1),_=Math.min(O,S),C=Math.max(O,S);M=Math.max(Math.min(M,C),_),g=M+m,a&&!h&&(c._stacks[i.axis]._visualValues[s]=i.getValueForPixel(g)-i.getValueForPixel(M))}if(M===i.getPixelForValue(l)){let O=gt(m)*i.getLineWidthForValue(l)/2;M+=O,m-=O}return{size:m,base:M,head:g,center:g+m/2}}_calculateBarIndexPixels(t,i){let a=i.scale,s=this.options,o=s.skipNull,r=F(s.maxBarThickness,1/0),l,c,d=this._getAxisCount();if(i.grouped){let h=o?this._getStackCount(t):i.stackCount,f=s.barThickness==="flex"?rl(t,i,s,h*d):ol(t,i,s,h*d),u=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,p=this._getAxis().indexOf(F(u,this.getFirstScaleIdForIndexAxis())),g=this._getStackIndex(this.index,this._cachedMeta.stack,o?t:void 0)+p;l=f.start+f.chunk*g+f.chunk/2,c=Math.min(r,f.chunk*f.ratio)}else l=a.getPixelForValue(this.getParsed(t)[a.axis],t),c=Math.min(r,i.min*i.ratio);return{base:l-c/2,head:l+c/2,center:l,size:c}}draw(){let t=this._cachedMeta,i=t.vScale,a=t.data,s=a.length,o=0;for(;o<s;++o)this.getParsed(o)[i.axis]!==null&&!a[o].hidden&&a[o].draw(this._ctx)}}return e})(),pl=(()=>{class e extends Vt{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,i,a,s){let o=super.parsePrimitiveData(t,i,a,s);for(let r=0;r<o.length;r++)o[r]._custom=this.resolveDataElementOptions(r+a).radius;return o}parseArrayData(t,i,a,s){let o=super.parseArrayData(t,i,a,s);for(let r=0;r<o.length;r++){let l=i[a+r];o[r]._custom=F(l[2],this.resolveDataElementOptions(r+a).radius)}return o}parseObjectData(t,i,a,s){let o=super.parseObjectData(t,i,a,s);for(let r=0;r<o.length;r++){let l=i[a+r];o[r]._custom=F(l&&l.r&&+l.r,this.resolveDataElementOptions(r+a).radius)}return o}getMaxOverflow(){let t=this._cachedMeta.data,i=0;for(let a=t.length-1;a>=0;--a)i=Math.max(i,t[a].size(this.resolveDataElementOptions(a))/2);return i>0&&i}getLabelAndValue(t){let i=this._cachedMeta,a=this.chart.data.labels||[],{xScale:s,yScale:o}=i,r=this.getParsed(t),l=s.getLabelForValue(r.x),c=o.getLabelForValue(r.y),d=r._custom;return{label:a[t]||"",value:"("+l+", "+c+(d?", "+d:"")+")"}}update(t){let i=this._cachedMeta.data;this.updateElements(i,0,i.length,t)}updateElements(t,i,a,s){let o=s==="reset",{iScale:r,vScale:l}=this._cachedMeta,{sharedOptions:c,includeOptions:d}=this._getSharedOptions(i,s),h=r.axis,f=l.axis;for(let u=i;u<i+a;u++){let p=t[u],g=!o&&this.getParsed(u),m={},v=m[h]=o?r.getPixelForDecimal(.5):r.getPixelForValue(g[h]),M=m[f]=o?l.getBasePixel():l.getPixelForValue(g[f]);m.skip=isNaN(v)||isNaN(M),d&&(m.options=c||this.resolveDataElementOptions(u,p.active?"active":s),o&&(m.options.radius=0)),this.updateElement(p,u,m,s)}}resolveDataElementOptions(t,i){let a=this.getParsed(t),s=super.resolveDataElementOptions(t,i);s.$shared&&(s=Object.assign({},s,{$shared:!1}));let o=s.radius;return i!=="active"&&(s.radius=0),s.radius+=F(a&&a._custom,o),s}}return e})();function ml(e,n,t){let i=1,a=1,s=0,o=0;if(n<q){let r=e,l=r+n,c=Math.cos(r),d=Math.sin(r),h=Math.cos(l),f=Math.sin(l),u=(O,S,_)=>pe(O,r,l,!0)?1:Math.max(S,S*t,_,_*t),p=(O,S,_)=>pe(O,r,l,!0)?-1:Math.min(S,S*t,_,_*t),g=u(0,c,h),m=u(tt,d,f),v=p(W,c,h),M=p(W+tt,d,f);i=(g-v)/2,a=(m-M)/2,s=-(g+v)/2,o=-(m+M)/2}return{ratioX:i,ratioY:a,offsetX:s,offsetY:o}}var Xi=(()=>{class e extends Vt{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){let i=t.data,{labels:{pointStyle:a,textAlign:s,color:o,useBorderRadius:r,borderRadius:l}}=t.legend.options;return i.labels.length&&i.datasets.length?i.labels.map((c,d)=>{let f=t.getDatasetMeta(0).controller.getStyle(d);return{text:c,fillStyle:f.backgroundColor,fontColor:o,hidden:!t.getDataVisibility(d),lineDash:f.borderDash,lineDashOffset:f.borderDashOffset,lineJoin:f.borderJoinStyle,lineWidth:f.borderWidth,strokeStyle:f.borderColor,textAlign:s,pointStyle:a,borderRadius:r&&(l||f.borderRadius),index:d}}):[]}},onClick(t,i,a){a.chart.toggleDataVisibility(i.index),a.chart.update()}}}};constructor(t,i){super(t,i),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,i){let a=this.getDataset().data,s=this._cachedMeta;if(this._parsing===!1)s._parsed=a;else{let o=c=>+a[c];if(V(a[t])){let{key:c="value"}=this._parsing;o=d=>+wt(a[d],c)}let r,l;for(r=t,l=t+i;r<l;++r)s._parsed[r]=o(r)}}_getRotation(){return ut(this.options.rotation-90)}_getCircumference(){return ut(this.options.circumference)}_getRotationExtents(){let t=q,i=-q;for(let a=0;a<this.chart.data.datasets.length;++a)if(this.chart.isDatasetVisible(a)&&this.chart.getDatasetMeta(a).type===this._type){let s=this.chart.getDatasetMeta(a).controller,o=s._getRotation(),r=s._getCircumference();t=Math.min(t,o),i=Math.max(i,o+r)}return{rotation:t,circumference:i-t}}update(t){let i=this.chart,{chartArea:a}=i,s=this._cachedMeta,o=s.data,r=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,l=Math.max((Math.min(a.width,a.height)-r)/2,0),c=Math.min(Ta(this.options.cutout,l),1),d=this._getRingWeight(this.index),{circumference:h,rotation:f}=this._getRotationExtents(),{ratioX:u,ratioY:p,offsetX:g,offsetY:m}=ml(f,h,c),v=(a.width-r)/u,M=(a.height-r)/p,O=Math.max(Math.min(v,M)/2,0),S=Hn(this.options.radius,O),_=Math.max(S*c,0),C=(S-_)/this._getVisibleDatasetWeightTotal();this.offsetX=g*S,this.offsetY=m*S,s.total=this.calculateTotal(),this.outerRadius=S-C*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-C*d,0),this.updateElements(o,0,o.length,t)}_circumference(t,i){let a=this.options,s=this._cachedMeta,o=this._getCircumference();return i&&a.animation.animateRotate||!this.chart.getDataVisibility(t)||s._parsed[t]===null||s.data[t].hidden?0:this.calculateCircumference(s._parsed[t]*o/q)}updateElements(t,i,a,s){let o=s==="reset",r=this.chart,l=r.chartArea,d=r.options.animation,h=(l.left+l.right)/2,f=(l.top+l.bottom)/2,u=o&&d.animateScale,p=u?0:this.innerRadius,g=u?0:this.outerRadius,{sharedOptions:m,includeOptions:v}=this._getSharedOptions(i,s),M=this._getRotation(),O;for(O=0;O<i;++O)M+=this._circumference(O,o);for(O=i;O<i+a;++O){let S=this._circumference(O,o),_=t[O],C={x:h+this.offsetX,y:f+this.offsetY,startAngle:M,endAngle:M+S,circumference:S,outerRadius:g,innerRadius:p};v&&(C.options=m||this.resolveDataElementOptions(O,_.active?"active":s)),M+=S,this.updateElement(_,O,C,s)}}calculateTotal(){let t=this._cachedMeta,i=t.data,a=0,s;for(s=0;s<i.length;s++){let o=t._parsed[s];o!==null&&!isNaN(o)&&this.chart.getDataVisibility(s)&&!i[s].hidden&&(a+=Math.abs(o))}return a}calculateCircumference(t){let i=this._cachedMeta.total;return i>0&&!isNaN(t)?q*(Math.abs(t)/i):0}getLabelAndValue(t){let i=this._cachedMeta,a=this.chart,s=a.data.labels||[],o=me(i._parsed[t],a.options.locale);return{label:s[t]||"",value:o}}getMaxBorderWidth(t){let i=0,a=this.chart,s,o,r,l,c;if(!t){for(s=0,o=a.data.datasets.length;s<o;++s)if(a.isDatasetVisible(s)){r=a.getDatasetMeta(s),t=r.data,l=r.controller;break}}if(!t)return 0;for(s=0,o=t.length;s<o;++s)c=l.resolveDataElementOptions(s),c.borderAlign!=="inner"&&(i=Math.max(i,c.borderWidth||0,c.hoverBorderWidth||0));return i}getMaxOffset(t){let i=0;for(let a=0,s=t.length;a<s;++a){let o=this.resolveDataElementOptions(a);i=Math.max(i,o.offset||0,o.hoverOffset||0)}return i}_getRingWeightOffset(t){let i=0;for(let a=0;a<t;++a)this.chart.isDatasetVisible(a)&&(i+=this._getRingWeight(a));return i}_getRingWeight(t){return Math.max(F(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}return e})(),bl=(()=>{class e extends Vt{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){let i=this._cachedMeta,{dataset:a,data:s=[],_dataset:o}=i,r=this.chart._animationsDisabled,{start:l,count:c}=Zn(i,s,r);this._drawStart=l,this._drawCount=c,Qn(i)&&(l=0,c=s.length),a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!o._decimated,a.points=s;let d=this.resolveDatasetElementOptions(t);this.options.showLine||(d.borderWidth=0),d.segment=this.options.segment,this.updateElement(a,void 0,{animated:!r,options:d},t),this.updateElements(s,l,c,t)}updateElements(t,i,a,s){let o=s==="reset",{iScale:r,vScale:l,_stacked:c,_dataset:d}=this._cachedMeta,{sharedOptions:h,includeOptions:f}=this._getSharedOptions(i,s),u=r.axis,p=l.axis,{spanGaps:g,segment:m}=this.options,v=te(g)?g:Number.POSITIVE_INFINITY,M=this.chart._animationsDisabled||o||s==="none",O=i+a,S=t.length,_=i>0&&this.getParsed(i-1);for(let C=0;C<S;++C){let k=t[C],w=M?k:{};if(C<i||C>=O){w.skip=!0;continue}let D=this.getParsed(C),I=B(D[p]),E=w[u]=r.getPixelForValue(D[u],C),T=w[p]=o||I?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,D,c):D[p],C);w.skip=isNaN(E)||isNaN(T)||I,w.stop=C>0&&Math.abs(D[u]-_[u])>v,m&&(w.parsed=D,w.raw=d.data[C]),f&&(w.options=h||this.resolveDataElementOptions(C,k.active?"active":s)),M||this.updateElement(k,C,w,s),_=D}}getMaxOverflow(){let t=this._cachedMeta,i=t.dataset,a=i.options&&i.options.borderWidth||0,s=t.data||[];if(!s.length)return a;let o=s[0].size(this.resolveDataElementOptions(0)),r=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(a,o,r)/2}draw(){let t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}return e})(),oo=(()=>{class e extends Vt{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){let i=t.data;if(i.labels.length&&i.datasets.length){let{labels:{pointStyle:a,color:s}}=t.legend.options;return i.labels.map((o,r)=>{let c=t.getDatasetMeta(0).controller.getStyle(r);return{text:o,fillStyle:c.backgroundColor,strokeStyle:c.borderColor,fontColor:s,lineWidth:c.borderWidth,pointStyle:a,hidden:!t.getDataVisibility(r),index:r}})}return[]}},onClick(t,i,a){a.chart.toggleDataVisibility(i.index),a.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(t,i){super(t,i),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){let i=this._cachedMeta,a=this.chart,s=a.data.labels||[],o=me(i._parsed[t].r,a.options.locale);return{label:s[t]||"",value:o}}parseObjectData(t,i,a,s){return li.bind(this)(t,i,a,s)}update(t){let i=this._cachedMeta.data;this._updateRadius(),this.updateElements(i,0,i.length,t)}getMinMax(){let t=this._cachedMeta,i={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach((a,s)=>{let o=this.getParsed(s).r;!isNaN(o)&&this.chart.getDataVisibility(s)&&(o<i.min&&(i.min=o),o>i.max&&(i.max=o))}),i}_updateRadius(){let t=this.chart,i=t.chartArea,a=t.options,s=Math.min(i.right-i.left,i.bottom-i.top),o=Math.max(s/2,0),r=Math.max(a.cutoutPercentage?o/100*a.cutoutPercentage:1,0),l=(o-r)/t.getVisibleDatasetCount();this.outerRadius=o-l*this.index,this.innerRadius=this.outerRadius-l}updateElements(t,i,a,s){let o=s==="reset",r=this.chart,c=r.options.animation,d=this._cachedMeta.rScale,h=d.xCenter,f=d.yCenter,u=d.getIndexAngle(0)-.5*W,p=u,g,m=360/this.countVisibleElements();for(g=0;g<i;++g)p+=this._computeAngle(g,s,m);for(g=i;g<i+a;g++){let v=t[g],M=p,O=p+this._computeAngle(g,s,m),S=r.getDataVisibility(g)?d.getDistanceFromCenterForValue(this.getParsed(g).r):0;p=O,o&&(c.animateScale&&(S=0),c.animateRotate&&(M=O=u));let _={x:h,y:f,innerRadius:0,outerRadius:S,startAngle:M,endAngle:O,options:this.resolveDataElementOptions(g,v.active?"active":s)};this.updateElement(v,g,_,s)}}countVisibleElements(){let t=this._cachedMeta,i=0;return t.data.forEach((a,s)=>{!isNaN(this.getParsed(s).r)&&this.chart.getDataVisibility(s)&&i++}),i}_computeAngle(t,i,a){return this.chart.getDataVisibility(t)?ut(this.resolveDataElementOptions(t,i).angle||a):0}}return e})(),xl=(()=>{class e extends Xi{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}return e})(),_l=(()=>{class e extends Vt{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(t){let i=this._cachedMeta.vScale,a=this.getParsed(t);return{label:i.getLabels()[t],value:""+i.getLabelForValue(a[i.axis])}}parseObjectData(t,i,a,s){return li.bind(this)(t,i,a,s)}update(t){let i=this._cachedMeta,a=i.dataset,s=i.data||[],o=i.iScale.getLabels();if(a.points=s,t!=="resize"){let r=this.resolveDatasetElementOptions(t);this.options.showLine||(r.borderWidth=0);let l={_loop:!0,_fullLoop:o.length===s.length,options:r};this.updateElement(a,void 0,l,t)}this.updateElements(s,0,s.length,t)}updateElements(t,i,a,s){let o=this._cachedMeta.rScale,r=s==="reset";for(let l=i;l<i+a;l++){let c=t[l],d=this.resolveDataElementOptions(l,c.active?"active":s),h=o.getPointPositionForValue(l,this.getParsed(l).r),f=r?o.xCenter:h.x,u=r?o.yCenter:h.y,p={x:f,y:u,angle:h.angle,skip:isNaN(f)||isNaN(u),options:d};this.updateElement(c,l,p,s)}}}return e})(),yl=(()=>{class e extends Vt{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(t){let i=this._cachedMeta,a=this.chart.data.labels||[],{xScale:s,yScale:o}=i,r=this.getParsed(t),l=s.getLabelForValue(r.x),c=o.getLabelForValue(r.y);return{label:a[t]||"",value:"("+l+", "+c+")"}}update(t){let i=this._cachedMeta,{data:a=[]}=i,s=this.chart._animationsDisabled,{start:o,count:r}=Zn(i,a,s);if(this._drawStart=o,this._drawCount=r,Qn(i)&&(o=0,r=a.length),this.options.showLine){this.datasetElementType||this.addElements();let{dataset:l,_dataset:c}=i;l._chart=this.chart,l._datasetIndex=this.index,l._decimated=!!c._decimated,l.points=a;let d=this.resolveDatasetElementOptions(t);d.segment=this.options.segment,this.updateElement(l,void 0,{animated:!s,options:d},t)}else this.datasetElementType&&(delete i.dataset,this.datasetElementType=!1);this.updateElements(a,o,r,t)}addElements(){let{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,i,a,s){let o=s==="reset",{iScale:r,vScale:l,_stacked:c,_dataset:d}=this._cachedMeta,h=this.resolveDataElementOptions(i,s),f=this.getSharedOptions(h),u=this.includeOptions(s,f),p=r.axis,g=l.axis,{spanGaps:m,segment:v}=this.options,M=te(m)?m:Number.POSITIVE_INFINITY,O=this.chart._animationsDisabled||o||s==="none",S=i>0&&this.getParsed(i-1);for(let _=i;_<i+a;++_){let C=t[_],k=this.getParsed(_),w=O?C:{},D=B(k[g]),I=w[p]=r.getPixelForValue(k[p],_),E=w[g]=o||D?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,k,c):k[g],_);w.skip=isNaN(I)||isNaN(E)||D,w.stop=_>0&&Math.abs(k[p]-S[p])>M,v&&(w.parsed=k,w.raw=d.data[_]),u&&(w.options=f||this.resolveDataElementOptions(_,C.active?"active":s)),O||this.updateElement(C,_,w,s),S=k}this.updateSharedOptions(f,s,h)}getMaxOverflow(){let t=this._cachedMeta,i=t.data||[];if(!this.options.showLine){let l=0;for(let c=i.length-1;c>=0;--c)l=Math.max(l,i[c].size(this.resolveDataElementOptions(c))/2);return l>0&&l}let a=t.dataset,s=a.options&&a.options.borderWidth||0;if(!i.length)return s;let o=i[0].size(this.resolveDataElementOptions(0)),r=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(s,o,r)/2}}return e})(),vl=Object.freeze({__proto__:null,BarController:gl,BubbleController:pl,DoughnutController:Xi,LineController:bl,PieController:xl,PolarAreaController:oo,RadarController:_l,ScatterController:yl});function ne(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}var Di=class e{static override(n){Object.assign(e.prototype,n)}options;constructor(n){this.options=n||{}}init(){}formats(){return ne()}parse(){return ne()}format(){return ne()}add(){return ne()}diff(){return ne()}startOf(){return ne()}endOf(){return ne()}},Ml={_date:Di};function Cl(e,n,t,i){let{controller:a,data:s,_sorted:o}=e,r=a._cachedMeta.iScale,l=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(r&&n===r.axis&&n!=="r"&&o&&s.length){let c=r._reversePixels?Fa:xt;if(i){if(a._sharedOptions){let d=s[0],h=typeof d.getRange=="function"&&d.getRange(n);if(h){let f=c(s,n,t-h),u=c(s,n,t+h);return{lo:f.lo,hi:u.hi}}}}else{let d=c(s,n,t);if(l){let{vScale:h}=a._cachedMeta,{_parsed:f}=e,u=f.slice(0,d.lo+1).reverse().findIndex(g=>!B(g[h.axis]));d.lo-=Math.max(0,u);let p=f.slice(d.hi).findIndex(g=>!B(g[h.axis]));d.hi+=Math.max(0,p)}return d}}return{lo:0,hi:s.length-1}}function Ye(e,n,t,i,a){let s=e.getSortedVisibleDatasetMetas(),o=t[n];for(let r=0,l=s.length;r<l;++r){let{index:c,data:d}=s[r],{lo:h,hi:f}=Cl(s[r],n,o,a);for(let u=h;u<=f;++u){let p=d[u];p.skip||i(p,c,u)}}}function Sl(e){let n=e.indexOf("x")!==-1,t=e.indexOf("y")!==-1;return function(i,a){let s=n?Math.abs(i.x-a.x):0,o=t?Math.abs(i.y-a.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function yi(e,n,t,i,a){let s=[];return!a&&!e.isPointInArea(n)||Ye(e,t,n,function(r,l,c){!a&&!_t(r,e.chartArea,0)||r.inRange(n.x,n.y,i)&&s.push({element:r,datasetIndex:l,index:c})},!0),s}function Pl(e,n,t,i){let a=[];function s(o,r,l){let{startAngle:c,endAngle:d}=o.getProps(["startAngle","endAngle"],i),{angle:h}=Gn(o,{x:n.x,y:n.y});pe(h,c,d)&&a.push({element:o,datasetIndex:r,index:l})}return Ye(e,t,n,s),a}function Ol(e,n,t,i,a,s){let o=[],r=Sl(t),l=Number.POSITIVE_INFINITY;function c(d,h,f){let u=d.inRange(n.x,n.y,a);if(i&&!u)return;let p=d.getCenterPoint(a);if(!(!!s||e.isPointInArea(p))&&!u)return;let m=r(n,p);m<l?(o=[{element:d,datasetIndex:h,index:f}],l=m):m===l&&o.push({element:d,datasetIndex:h,index:f})}return Ye(e,t,n,c),o}function vi(e,n,t,i,a,s){return!s&&!e.isPointInArea(n)?[]:t==="r"&&!i?Pl(e,n,t,a):Ol(e,n,t,i,a,s)}function us(e,n,t,i,a){let s=[],o=t==="x"?"inXRange":"inYRange",r=!1;return Ye(e,t,n,(l,c,d)=>{l[o]&&l[o](n[t],a)&&(s.push({element:l,datasetIndex:c,index:d}),r=r||l.inRange(n.x,n.y,a))}),i&&!r?[]:s}var wl={evaluateInteractionItems:Ye,modes:{index(e,n,t,i){let a=Nt(n,e),s=t.axis||"x",o=t.includeInvisible||!1,r=t.intersect?yi(e,a,s,i,o):vi(e,a,s,!1,i,o),l=[];return r.length?(e.getSortedVisibleDatasetMetas().forEach(c=>{let d=r[0].index,h=c.data[d];h&&!h.skip&&l.push({element:h,datasetIndex:c.index,index:d})}),l):[]},dataset(e,n,t,i){let a=Nt(n,e),s=t.axis||"xy",o=t.includeInvisible||!1,r=t.intersect?yi(e,a,s,i,o):vi(e,a,s,!1,i,o);if(r.length>0){let l=r[0].datasetIndex,c=e.getDatasetMeta(l).data;r=[];for(let d=0;d<c.length;++d)r.push({element:c[d],datasetIndex:l,index:d})}return r},point(e,n,t,i){let a=Nt(n,e),s=t.axis||"xy",o=t.includeInvisible||!1;return yi(e,a,s,i,o)},nearest(e,n,t,i){let a=Nt(n,e),s=t.axis||"xy",o=t.includeInvisible||!1;return vi(e,a,s,t.intersect,i,o)},x(e,n,t,i){let a=Nt(n,e);return us(e,a,"x",t.intersect,i)},y(e,n,t,i){let a=Nt(n,e);return us(e,a,"y",t.intersect,i)}}},ro=["left","top","right","bottom"];function Fe(e,n){return e.filter(t=>t.pos===n)}function gs(e,n){return e.filter(t=>ro.indexOf(t.pos)===-1&&t.box.axis===n)}function Re(e,n){return e.sort((t,i)=>{let a=n?i:t,s=n?t:i;return a.weight===s.weight?a.index-s.index:a.weight-s.weight})}function kl(e){let n=[],t,i,a,s,o,r;for(t=0,i=(e||[]).length;t<i;++t)a=e[t],{position:s,options:{stack:o,stackWeight:r=1}}=a,n.push({index:t,box:a,pos:s,horizontal:a.isHorizontal(),weight:a.weight,stack:o&&s+o,stackWeight:r});return n}function Dl(e){let n={};for(let t of e){let{stack:i,pos:a,stackWeight:s}=t;if(!i||!ro.includes(a))continue;let o=n[i]||(n[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return n}function Tl(e,n){let t=Dl(e),{vBoxMaxWidth:i,hBoxMaxHeight:a}=n,s,o,r;for(s=0,o=e.length;s<o;++s){r=e[s];let{fullSize:l}=r.box,c=t[r.stack],d=c&&r.stackWeight/c.weight;r.horizontal?(r.width=d?d*i:l&&n.availableWidth,r.height=a):(r.width=i,r.height=d?d*a:l&&n.availableHeight)}return t}function El(e){let n=kl(e),t=Re(n.filter(c=>c.box.fullSize),!0),i=Re(Fe(n,"left"),!0),a=Re(Fe(n,"right")),s=Re(Fe(n,"top"),!0),o=Re(Fe(n,"bottom")),r=gs(n,"x"),l=gs(n,"y");return{fullSize:t,leftAndTop:i.concat(s),rightAndBottom:a.concat(l).concat(o).concat(r),chartArea:Fe(n,"chartArea"),vertical:i.concat(a).concat(l),horizontal:s.concat(o).concat(r)}}function ps(e,n,t,i){return Math.max(e[t],n[t])+Math.max(e[i],n[i])}function lo(e,n){e.top=Math.max(e.top,n.top),e.left=Math.max(e.left,n.left),e.bottom=Math.max(e.bottom,n.bottom),e.right=Math.max(e.right,n.right)}function Al(e,n,t,i){let{pos:a,box:s}=t,o=e.maxPadding;if(!V(a)){t.size&&(e[a]-=t.size);let h=i[t.stack]||{size:0,count:1};h.size=Math.max(h.size,t.horizontal?s.height:s.width),t.size=h.size/h.count,e[a]+=t.size}s.getPadding&&lo(o,s.getPadding());let r=Math.max(0,n.outerWidth-ps(o,e,"left","right")),l=Math.max(0,n.outerHeight-ps(o,e,"top","bottom")),c=r!==e.w,d=l!==e.h;return e.w=r,e.h=l,t.horizontal?{same:c,other:d}:{same:d,other:c}}function Il(e){let n=e.maxPadding;function t(i){let a=Math.max(n[i]-e[i],0);return e[i]+=a,a}e.y+=t("top"),e.x+=t("left"),t("right"),t("bottom")}function jl(e,n){let t=n.maxPadding;function i(a){let s={left:0,top:0,right:0,bottom:0};return a.forEach(o=>{s[o]=Math.max(n[o],t[o])}),s}return i(e?["left","right"]:["top","bottom"])}function Be(e,n,t,i){let a=[],s,o,r,l,c,d;for(s=0,o=e.length,c=0;s<o;++s){r=e[s],l=r.box,l.update(r.width||n.w,r.height||n.h,jl(r.horizontal,n));let{same:h,other:f}=Al(n,t,r,i);c|=h&&a.length,d=d||f,l.fullSize||a.push(r)}return c&&Be(a,n,t,i)||d}function mn(e,n,t,i,a){e.top=t,e.left=n,e.right=n+i,e.bottom=t+a,e.width=i,e.height=a}function ms(e,n,t,i){let a=t.padding,{x:s,y:o}=n;for(let r of e){let l=r.box,c=i[r.stack]||{count:1,placed:0,weight:1},d=r.stackWeight/c.weight||1;if(r.horizontal){let h=n.w*d,f=c.size||l.height;ue(c.start)&&(o=c.start),l.fullSize?mn(l,a.left,o,t.outerWidth-a.right-a.left,f):mn(l,n.left+c.placed,o,h,f),c.start=o,c.placed+=h,o=l.bottom}else{let h=n.h*d,f=c.size||l.width;ue(c.start)&&(s=c.start),l.fullSize?mn(l,s,a.top,f,t.outerHeight-a.bottom-a.top):mn(l,s,n.top+c.placed,f,h),c.start=s,c.placed+=h,s=l.right}}n.x=s,n.y=o}var lt={addBox(e,n){e.boxes||(e.boxes=[]),n.fullSize=n.fullSize||!1,n.position=n.position||"top",n.weight=n.weight||0,n._layers=n._layers||function(){return[{z:0,draw(t){n.draw(t)}}]},e.boxes.push(n)},removeBox(e,n){let t=e.boxes?e.boxes.indexOf(n):-1;t!==-1&&e.boxes.splice(t,1)},configure(e,n,t){n.fullSize=t.fullSize,n.position=t.position,n.weight=t.weight},update(e,n,t,i){if(!e)return;let a=rt(e.options.layout.padding),s=Math.max(n-a.width,0),o=Math.max(t-a.height,0),r=El(e.boxes),l=r.vertical,c=r.horizontal;U(e.boxes,g=>{typeof g.beforeLayout=="function"&&g.beforeLayout()});let d=l.reduce((g,m)=>m.box.options&&m.box.options.display===!1?g:g+1,0)||1,h=Object.freeze({outerWidth:n,outerHeight:t,padding:a,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/d,hBoxMaxHeight:o/2}),f=Object.assign({},a);lo(f,rt(i));let u=Object.assign({maxPadding:f,w:s,h:o,x:a.left,y:a.top},a),p=Tl(l.concat(c),h);Be(r.fullSize,u,h,p),Be(l,u,h,p),Be(c,u,h,p)&&Be(l,u,h,p),Il(u),ms(r.leftAndTop,u,h,p),u.x+=u.w,u.y+=u.h,ms(r.rightAndBottom,u,h,p),e.chartArea={left:u.left,top:u.top,right:u.left+u.w,bottom:u.top+u.h,height:u.h,width:u.w},U(r.chartArea,g=>{let m=g.box;Object.assign(m,e.chartArea),m.update(u.w,u.h,{left:0,top:0,right:0,bottom:0})})}},Pn=class{acquireContext(n,t){}releaseContext(n){return!1}addEventListener(n,t,i){}removeEventListener(n,t,i){}getDevicePixelRatio(){return 1}getMaximumSize(n,t,i,a){return t=Math.max(0,t||n.width),i=i||n.height,{width:t,height:Math.max(0,a?Math.floor(t/a):i)}}isAttached(n){return!0}updateConfig(n){}},Ti=class extends Pn{acquireContext(n){return n&&n.getContext&&n.getContext("2d")||null}updateConfig(n){n.options.animation=!1}},Mn="$chartjs",zl={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},bs=e=>e===null||e==="";function Fl(e,n){let t=e.style,i=e.getAttribute("height"),a=e.getAttribute("width");if(e[Mn]={initial:{height:i,width:a,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",bs(a)){let s=di(e,"width");s!==void 0&&(e.width=s)}if(bs(i))if(e.style.height==="")e.height=e.width/(n||2);else{let s=di(e,"height");s!==void 0&&(e.height=s)}return e}var co=Qa?{passive:!0}:!1;function Rl(e,n,t){e&&e.addEventListener(n,t,co)}function Ll(e,n,t){e&&e.canvas&&e.canvas.removeEventListener(n,t,co)}function Nl(e,n){let t=zl[e.type]||e.type,{x:i,y:a}=Nt(e,n);return{type:t,chart:n,native:e,x:i!==void 0?i:null,y:a!==void 0?a:null}}function On(e,n){for(let t of e)if(t===n||t.contains(n))return!0}function Bl(e,n,t){let i=e.canvas,a=new MutationObserver(s=>{let o=!1;for(let r of s)o=o||On(r.addedNodes,i),o=o&&!On(r.removedNodes,i);o&&t()});return a.observe(document,{childList:!0,subtree:!0}),a}function Vl(e,n,t){let i=e.canvas,a=new MutationObserver(s=>{let o=!1;for(let r of s)o=o||On(r.removedNodes,i),o=o&&!On(r.addedNodes,i);o&&t()});return a.observe(document,{childList:!0,subtree:!0}),a}var He=new Map,xs=0;function ho(){let e=window.devicePixelRatio;e!==xs&&(xs=e,He.forEach((n,t)=>{t.currentDevicePixelRatio!==e&&n()}))}function Hl(e,n){He.size||window.addEventListener("resize",ho),He.set(e,n)}function Wl(e){He.delete(e),He.size||window.removeEventListener("resize",ho)}function $l(e,n,t){let i=e.canvas,a=i&&gn(i);if(!a)return;let s=Jn((r,l)=>{let c=a.clientWidth;t(r,l),c<a.clientWidth&&t()},window),o=new ResizeObserver(r=>{let l=r[0],c=l.contentRect.width,d=l.contentRect.height;c===0&&d===0||s(c,d)});return o.observe(a),Hl(e,s),o}function Mi(e,n,t){t&&t.disconnect(),n==="resize"&&Wl(e)}function Yl(e,n,t){let i=e.canvas,a=Jn(s=>{e.ctx!==null&&t(Nl(s,e))},e);return Rl(i,n,a),a}var Ei=class extends Pn{acquireContext(n,t){let i=n&&n.getContext&&n.getContext("2d");return i&&i.canvas===n?(Fl(n,t),i):null}releaseContext(n){let t=n.canvas;if(!t[Mn])return!1;let i=t[Mn].initial;["height","width"].forEach(s=>{let o=i[s];B(o)?t.removeAttribute(s):t.setAttribute(s,o)});let a=i.style||{};return Object.keys(a).forEach(s=>{t.style[s]=a[s]}),t.width=t.width,delete t[Mn],!0}addEventListener(n,t,i){this.removeEventListener(n,t);let a=n.$proxies||(n.$proxies={}),o={attach:Bl,detach:Vl,resize:$l}[t]||Yl;a[t]=o(n,t,i)}removeEventListener(n,t){let i=n.$proxies||(n.$proxies={}),a=i[t];if(!a)return;({attach:Mi,detach:Mi,resize:Mi}[t]||Ll)(n,t,a),i[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(n,t,i,a){return Za(n,t,i,a)}isAttached(n){let t=n&&gn(n);return!!(t&&t.isConnected)}};function Ul(e){return!un()||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas?Ti:Ei}var pt=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(n){let{x:t,y:i}=this.getProps(["x","y"],n);return{x:t,y:i}}hasValue(){return te(this.x)&&te(this.y)}getProps(n,t){let i=this.$animations;if(!t||!i)return this;let a={};return n.forEach(s=>{a[s]=i[s]&&i[s].active()?i[s]._to:this[s]}),a}};function Gl(e,n){let t=e.options.ticks,i=Xl(e),a=Math.min(t.maxTicksLimit||i,i),s=t.major.enabled?Kl(n):[],o=s.length,r=s[0],l=s[o-1],c=[];if(o>a)return Jl(n,c,s,o/a),c;let d=ql(s,n,a);if(o>0){let h,f,u=o>1?Math.round((l-r)/(o-1)):null;for(bn(n,c,d,B(u)?0:r-u,r),h=0,f=o-1;h<f;h++)bn(n,c,d,s[h],s[h+1]);return bn(n,c,d,l,B(u)?n.length:l+u),c}return bn(n,c,d),c}function Xl(e){let n=e.options.offset,t=e._tickSize(),i=e._length/t+(n?0:1),a=e._maxLength/t;return Math.floor(Math.min(i,a))}function ql(e,n,t){let i=Zl(e),a=n.length/t;if(!i)return Math.max(a,1);let s=Ia(i);for(let o=0,r=s.length-1;o<r;o++){let l=s[o];if(l>a)return l}return Math.max(a,1)}function Kl(e){let n=[],t,i;for(t=0,i=e.length;t<i;t++)e[t].major&&n.push(t);return n}function Jl(e,n,t,i){let a=0,s=t[0],o;for(i=Math.ceil(i),o=0;o<e.length;o++)o===s&&(n.push(e[o]),a++,s=t[a*i])}function bn(e,n,t,i,a){let s=F(i,0),o=Math.min(F(a,e.length),e.length),r=0,l,c,d;for(t=Math.ceil(t),a&&(l=a-i,t=l/Math.floor(l/t)),d=s;d<0;)r++,d=Math.round(s+r*t);for(c=Math.max(s,0);c<o;c++)c===d&&(n.push(e[c]),r++,d=Math.round(s+r*t))}function Zl(e){let n=e.length,t,i;if(n<2)return!1;for(i=e[0],t=1;t<n;++t)if(e[t]-e[t-1]!==i)return!1;return i}var Ql=e=>e==="left"?"right":e==="right"?"left":e,_s=(e,n,t)=>n==="top"||n==="left"?e[n]+t:e[n]-t,ys=(e,n)=>Math.min(n||e,e);function vs(e,n){let t=[],i=e.length/n,a=e.length,s=0;for(;s<a;s+=i)t.push(e[Math.floor(s)]);return t}function tc(e,n,t){let i=e.ticks.length,a=Math.min(n,i-1),s=e._startPixel,o=e._endPixel,r=1e-6,l=e.getPixelForTick(a),c;if(!(t&&(i===1?c=Math.max(l-s,o-l):n===0?c=(e.getPixelForTick(1)-l)/2:c=(l-e.getPixelForTick(a-1))/2,l+=a<n?c:-c,l<s-r||l>o+r)))return l}function ec(e,n){U(e,t=>{let i=t.gc,a=i.length/2,s;if(a>n){for(s=0;s<a;++s)delete t.data[i[s]];i.splice(0,a)}})}function Le(e){return e.drawTicks?e.tickLength:0}function Ms(e,n){if(!e.display)return 0;let t=nt(e.font,n),i=rt(e.padding);return(X(e.text)?e.text.length:1)*t.lineHeight+i.height}function nc(e,n){return kt(e,{scale:n,type:"scale"})}function ic(e,n,t){return kt(e,{tick:t,index:n,type:"tick"})}function ac(e,n,t){let i=ln(e);return(t&&n!=="right"||!t&&n==="right")&&(i=Ql(i)),i}function sc(e,n,t,i){let{top:a,left:s,bottom:o,right:r,chart:l}=e,{chartArea:c,scales:d}=l,h=0,f,u,p,g=o-a,m=r-s;if(e.isHorizontal()){if(u=ot(i,s,r),V(t)){let v=Object.keys(t)[0],M=t[v];p=d[v].getPixelForValue(M)+g-n}else t==="center"?p=(c.bottom+c.top)/2+g-n:p=_s(e,t,n);f=r-s}else{if(V(t)){let v=Object.keys(t)[0],M=t[v];u=d[v].getPixelForValue(M)-m+n}else t==="center"?u=(c.left+c.right)/2-m+n:u=_s(e,t,n);p=ot(i,o,a),h=t==="left"?-tt:tt}return{titleX:u,titleY:p,maxWidth:f,rotation:h}}var ae=class e extends pt{constructor(n){super(),this.id=n.id,this.type=n.type,this.options=void 0,this.ctx=n.ctx,this.chart=n.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(n){this.options=n.setContext(this.getContext()),this.axis=n.axis,this._userMin=this.parse(n.min),this._userMax=this.parse(n.max),this._suggestedMin=this.parse(n.suggestedMin),this._suggestedMax=this.parse(n.suggestedMax)}parse(n,t){return n}getUserBounds(){let{_userMin:n,_userMax:t,_suggestedMin:i,_suggestedMax:a}=this;return n=ct(n,Number.POSITIVE_INFINITY),t=ct(t,Number.NEGATIVE_INFINITY),i=ct(i,Number.POSITIVE_INFINITY),a=ct(a,Number.NEGATIVE_INFINITY),{min:ct(n,i),max:ct(t,a),minDefined:Z(n),maxDefined:Z(t)}}getMinMax(n){let{min:t,max:i,minDefined:a,maxDefined:s}=this.getUserBounds(),o;if(a&&s)return{min:t,max:i};let r=this.getMatchingVisibleMetas();for(let l=0,c=r.length;l<c;++l)o=r[l].controller.getMinMax(this,n),a||(t=Math.min(t,o.min)),s||(i=Math.max(i,o.max));return t=s&&t>i?i:t,i=a&&t>i?t:i,{min:ct(t,ct(i,t)),max:ct(i,ct(t,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){let n=this.chart.data;return this.options.labels||(this.isHorizontal()?n.xLabels:n.yLabels)||n.labels||[]}getLabelItems(n=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(n))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){G(this.options.beforeUpdate,[this])}update(n,t,i){let{beginAtZero:a,grace:s,ticks:o}=this.options,r=o.sampleSize;this.beforeUpdate(),this.maxWidth=n,this.maxHeight=t,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Ua(this,s,a),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();let l=r<this.ticks.length;this._convertTicksToLabels(l?vs(this.ticks,r):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=Gl(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let n=this.options.reverse,t,i;this.isHorizontal()?(t=this.left,i=this.right):(t=this.top,i=this.bottom,n=!n),this._startPixel=t,this._endPixel=i,this._reversePixels=n,this._length=i-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){G(this.options.afterUpdate,[this])}beforeSetDimensions(){G(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){G(this.options.afterSetDimensions,[this])}_callHooks(n){this.chart.notifyPlugins(n,this.getContext()),G(this.options[n],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){G(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(n){let t=this.options.ticks,i,a,s;for(i=0,a=n.length;i<a;i++)s=n[i],s.label=G(t.callback,[s.value,i,n],this)}afterTickToLabelConversion(){G(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){G(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){let n=this.options,t=n.ticks,i=ys(this.ticks.length,n.ticks.maxTicksLimit),a=t.minRotation||0,s=t.maxRotation,o=a,r,l,c;if(!this._isVisible()||!t.display||a>=s||i<=1||!this.isHorizontal()){this.labelRotation=a;return}let d=this._getLabelSizes(),h=d.widest.width,f=d.highest.height,u=at(this.chart.width-h,0,this.maxWidth);r=n.offset?this.maxWidth/i:u/(i-1),h+6>r&&(r=u/(i-(n.offset?.5:1)),l=this.maxHeight-Le(n.grid)-t.padding-Ms(n.title,this.chart.options.font),c=Math.sqrt(h*h+f*f),o=on(Math.min(Math.asin(at((d.highest.height+6)/r,-1,1)),Math.asin(at(l/c,-1,1))-Math.asin(at(f/c,-1,1)))),o=Math.max(a,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){G(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){G(this.options.beforeFit,[this])}fit(){let n={width:0,height:0},{chart:t,options:{ticks:i,title:a,grid:s}}=this,o=this._isVisible(),r=this.isHorizontal();if(o){let l=Ms(a,t.options.font);if(r?(n.width=this.maxWidth,n.height=Le(s)+l):(n.height=this.maxHeight,n.width=Le(s)+l),i.display&&this.ticks.length){let{first:c,last:d,widest:h,highest:f}=this._getLabelSizes(),u=i.padding*2,p=ut(this.labelRotation),g=Math.cos(p),m=Math.sin(p);if(r){let v=i.mirror?0:m*h.width+g*f.height;n.height=Math.min(this.maxHeight,n.height+v+u)}else{let v=i.mirror?0:g*h.width+m*f.height;n.width=Math.min(this.maxWidth,n.width+v+u)}this._calculatePadding(c,d,m,g)}}this._handleMargins(),r?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=n.height):(this.width=n.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(n,t,i,a){let{ticks:{align:s,padding:o},position:r}=this.options,l=this.labelRotation!==0,c=r!=="top"&&this.axis==="x";if(this.isHorizontal()){let d=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1),f=0,u=0;l?c?(f=a*n.width,u=i*t.height):(f=i*n.height,u=a*t.width):s==="start"?u=t.width:s==="end"?f=n.width:s!=="inner"&&(f=n.width/2,u=t.width/2),this.paddingLeft=Math.max((f-d+o)*this.width/(this.width-d),0),this.paddingRight=Math.max((u-h+o)*this.width/(this.width-h),0)}else{let d=t.height/2,h=n.height/2;s==="start"?(d=0,h=n.height):s==="end"&&(d=t.height,h=0),this.paddingTop=d+o,this.paddingBottom=h+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){G(this.options.afterFit,[this])}isHorizontal(){let{axis:n,position:t}=this.options;return t==="top"||t==="bottom"||n==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(n){this.beforeTickToLabelConversion(),this.generateTickLabels(n);let t,i;for(t=0,i=n.length;t<i;t++)B(n[t].label)&&(n.splice(t,1),i--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let n=this._labelSizes;if(!n){let t=this.options.ticks.sampleSize,i=this.ticks;t<i.length&&(i=vs(i,t)),this._labelSizes=n=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return n}_computeLabelSizes(n,t,i){let{ctx:a,_longestTextCache:s}=this,o=[],r=[],l=Math.floor(t/ys(t,i)),c=0,d=0,h,f,u,p,g,m,v,M,O,S,_;for(h=0;h<t;h+=l){if(p=n[h].label,g=this._resolveTickFontOptions(h),a.font=m=g.string,v=s[m]=s[m]||{data:{},gc:[]},M=g.lineHeight,O=S=0,!B(p)&&!X(p))O=Te(a,v.data,v.gc,O,p),S=M;else if(X(p))for(f=0,u=p.length;f<u;++f)_=p[f],!B(_)&&!X(_)&&(O=Te(a,v.data,v.gc,O,_),S+=M);o.push(O),r.push(S),c=Math.max(O,c),d=Math.max(S,d)}ec(s,t);let C=o.indexOf(c),k=r.indexOf(d),w=D=>({width:o[D]||0,height:r[D]||0});return{first:w(0),last:w(t-1),widest:w(C),highest:w(k),widths:o,heights:r}}getLabelForValue(n){return n}getPixelForValue(n,t){return NaN}getValueForPixel(n){}getPixelForTick(n){let t=this.ticks;return n<0||n>t.length-1?null:this.getPixelForValue(t[n].value)}getPixelForDecimal(n){this._reversePixels&&(n=1-n);let t=this._startPixel+n*this._length;return za(this._alignToPixels?Ft(this.chart,t,0):t)}getDecimalForPixel(n){let t=(n-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){let{min:n,max:t}=this;return n<0&&t<0?t:n>0&&t>0?n:0}getContext(n){let t=this.ticks||[];if(n>=0&&n<t.length){let i=t[n];return i.$context||(i.$context=ic(this.getContext(),n,i))}return this.$context||(this.$context=nc(this.chart.getContext(),this))}_tickSize(){let n=this.options.ticks,t=ut(this.labelRotation),i=Math.abs(Math.cos(t)),a=Math.abs(Math.sin(t)),s=this._getLabelSizes(),o=n.autoSkipPadding||0,r=s?s.widest.width+o:0,l=s?s.highest.height+o:0;return this.isHorizontal()?l*i>r*a?r/i:l/a:l*a<r*i?l/i:r/a}_isVisible(){let n=this.options.display;return n!=="auto"?!!n:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(n){let t=this.axis,i=this.chart,a=this.options,{grid:s,position:o,border:r}=a,l=s.offset,c=this.isHorizontal(),h=this.ticks.length+(l?1:0),f=Le(s),u=[],p=r.setContext(this.getContext()),g=p.display?p.width:0,m=g/2,v=function(A){return Ft(i,A,g)},M,O,S,_,C,k,w,D,I,E,T,j;if(o==="top")M=v(this.bottom),k=this.bottom-f,D=M-m,E=v(n.top)+m,j=n.bottom;else if(o==="bottom")M=v(this.top),E=n.top,j=v(n.bottom)-m,k=M+m,D=this.top+f;else if(o==="left")M=v(this.right),C=this.right-f,w=M-m,I=v(n.left)+m,T=n.right;else if(o==="right")M=v(this.left),I=n.left,T=v(n.right)-m,C=M+m,w=this.left+f;else if(t==="x"){if(o==="center")M=v((n.top+n.bottom)/2+.5);else if(V(o)){let A=Object.keys(o)[0],N=o[A];M=v(this.chart.scales[A].getPixelForValue(N))}E=n.top,j=n.bottom,k=M+m,D=k+f}else if(t==="y"){if(o==="center")M=v((n.left+n.right)/2);else if(V(o)){let A=Object.keys(o)[0],N=o[A];M=v(this.chart.scales[A].getPixelForValue(N))}C=M-m,w=C-f,I=n.left,T=n.right}let $=F(a.ticks.maxTicksLimit,h),L=Math.max(1,Math.ceil(h/$));for(O=0;O<h;O+=L){let A=this.getContext(O),N=s.setContext(A),Q=r.setContext(A),et=N.lineWidth,se=N.color,Ue=Q.dash||[],oe=Q.dashOffset,Me=N.tickWidth,Wt=N.tickColor,Ce=N.tickBorderDash||[],$t=N.tickBorderDashOffset;S=tc(this,O,l),S!==void 0&&(_=Ft(i,S,et),c?C=w=I=T=_:k=D=E=j=_,u.push({tx1:C,ty1:k,tx2:w,ty2:D,x1:I,y1:E,x2:T,y2:j,width:et,color:se,borderDash:Ue,borderDashOffset:oe,tickWidth:Me,tickColor:Wt,tickBorderDash:Ce,tickBorderDashOffset:$t}))}return this._ticksLength=h,this._borderValue=M,u}_computeLabelItems(n){let t=this.axis,i=this.options,{position:a,ticks:s}=i,o=this.isHorizontal(),r=this.ticks,{align:l,crossAlign:c,padding:d,mirror:h}=s,f=Le(i.grid),u=f+d,p=h?-d:u,g=-ut(this.labelRotation),m=[],v,M,O,S,_,C,k,w,D,I,E,T,j="middle";if(a==="top")C=this.bottom-p,k=this._getXAxisLabelAlignment();else if(a==="bottom")C=this.top+p,k=this._getXAxisLabelAlignment();else if(a==="left"){let L=this._getYAxisLabelAlignment(f);k=L.textAlign,_=L.x}else if(a==="right"){let L=this._getYAxisLabelAlignment(f);k=L.textAlign,_=L.x}else if(t==="x"){if(a==="center")C=(n.top+n.bottom)/2+u;else if(V(a)){let L=Object.keys(a)[0],A=a[L];C=this.chart.scales[L].getPixelForValue(A)+u}k=this._getXAxisLabelAlignment()}else if(t==="y"){if(a==="center")_=(n.left+n.right)/2-u;else if(V(a)){let L=Object.keys(a)[0],A=a[L];_=this.chart.scales[L].getPixelForValue(A)}k=this._getYAxisLabelAlignment(f).textAlign}t==="y"&&(l==="start"?j="top":l==="end"&&(j="bottom"));let $=this._getLabelSizes();for(v=0,M=r.length;v<M;++v){O=r[v],S=O.label;let L=s.setContext(this.getContext(v));w=this.getPixelForTick(v)+s.labelOffset,D=this._resolveTickFontOptions(v),I=D.lineHeight,E=X(S)?S.length:1;let A=E/2,N=L.color,Q=L.textStrokeColor,et=L.textStrokeWidth,se=k;o?(_=w,k==="inner"&&(v===M-1?se=this.options.reverse?"left":"right":v===0?se=this.options.reverse?"right":"left":se="center"),a==="top"?c==="near"||g!==0?T=-E*I+I/2:c==="center"?T=-$.highest.height/2-A*I+I:T=-$.highest.height+I/2:c==="near"||g!==0?T=I/2:c==="center"?T=$.highest.height/2-A*I:T=$.highest.height-E*I,h&&(T*=-1),g!==0&&!L.showLabelBackdrop&&(_+=I/2*Math.sin(g))):(C=w,T=(1-E)*I/2);let Ue;if(L.showLabelBackdrop){let oe=rt(L.backdropPadding),Me=$.heights[v],Wt=$.widths[v],Ce=T-oe.top,$t=0-oe.left;switch(j){case"middle":Ce-=Me/2;break;case"bottom":Ce-=Me;break}switch(k){case"center":$t-=Wt/2;break;case"right":$t-=Wt;break;case"inner":v===M-1?$t-=Wt:v>0&&($t-=Wt/2);break}Ue={left:$t,top:Ce,width:Wt+oe.width,height:Me+oe.height,color:L.backdropColor}}m.push({label:S,font:D,textOffset:T,options:{rotation:g,color:N,strokeColor:Q,strokeWidth:et,textAlign:se,textBaseline:j,translation:[_,C],backdrop:Ue}})}return m}_getXAxisLabelAlignment(){let{position:n,ticks:t}=this.options;if(-ut(this.labelRotation))return n==="top"?"left":"right";let a="center";return t.align==="start"?a="left":t.align==="end"?a="right":t.align==="inner"&&(a="inner"),a}_getYAxisLabelAlignment(n){let{position:t,ticks:{crossAlign:i,mirror:a,padding:s}}=this.options,o=this._getLabelSizes(),r=n+s,l=o.widest.width,c,d;return t==="left"?a?(d=this.right+s,i==="near"?c="left":i==="center"?(c="center",d+=l/2):(c="right",d+=l)):(d=this.right-r,i==="near"?c="right":i==="center"?(c="center",d-=l/2):(c="left",d=this.left)):t==="right"?a?(d=this.left+s,i==="near"?c="right":i==="center"?(c="center",d-=l/2):(c="left",d-=l)):(d=this.left+r,i==="near"?c="left":i==="center"?(c="center",d+=l/2):(c="right",d=this.right)):c="right",{textAlign:c,x:d}}_computeLabelArea(){if(this.options.ticks.mirror)return;let n=this.chart,t=this.options.position;if(t==="left"||t==="right")return{top:0,left:this.left,bottom:n.height,right:this.right};if(t==="top"||t==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:n.width}}drawBackground(){let{ctx:n,options:{backgroundColor:t},left:i,top:a,width:s,height:o}=this;t&&(n.save(),n.fillStyle=t,n.fillRect(i,a,s,o),n.restore())}getLineWidthForValue(n){let t=this.options.grid;if(!this._isVisible()||!t.display)return 0;let a=this.ticks.findIndex(s=>s.value===n);return a>=0?t.setContext(this.getContext(a)).lineWidth:0}drawGrid(n){let t=this.options.grid,i=this.ctx,a=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(n)),s,o,r=(l,c,d)=>{!d.width||!d.color||(i.save(),i.lineWidth=d.width,i.strokeStyle=d.color,i.setLineDash(d.borderDash||[]),i.lineDashOffset=d.borderDashOffset,i.beginPath(),i.moveTo(l.x,l.y),i.lineTo(c.x,c.y),i.stroke(),i.restore())};if(t.display)for(s=0,o=a.length;s<o;++s){let l=a[s];t.drawOnChartArea&&r({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),t.drawTicks&&r({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){let{chart:n,ctx:t,options:{border:i,grid:a}}=this,s=i.setContext(this.getContext()),o=i.display?s.width:0;if(!o)return;let r=a.setContext(this.getContext(0)).lineWidth,l=this._borderValue,c,d,h,f;this.isHorizontal()?(c=Ft(n,this.left,o)-o/2,d=Ft(n,this.right,r)+r/2,h=f=l):(h=Ft(n,this.top,o)-o/2,f=Ft(n,this.bottom,r)+r/2,c=d=l),t.save(),t.lineWidth=s.width,t.strokeStyle=s.color,t.beginPath(),t.moveTo(c,h),t.lineTo(d,f),t.stroke(),t.restore()}drawLabels(n){if(!this.options.ticks.display)return;let i=this.ctx,a=this._computeLabelArea();a&&Ie(i,a);let s=this.getLabelItems(n);for(let o of s){let r=o.options,l=o.font,c=o.label,d=o.textOffset;Rt(i,c,0,d,l,r)}a&&je(i)}drawTitle(){let{ctx:n,options:{position:t,title:i,reverse:a}}=this;if(!i.display)return;let s=nt(i.font),o=rt(i.padding),r=i.align,l=s.lineHeight/2;t==="bottom"||t==="center"||V(t)?(l+=o.bottom,X(i.text)&&(l+=s.lineHeight*(i.text.length-1))):l+=o.top;let{titleX:c,titleY:d,maxWidth:h,rotation:f}=sc(this,l,t,r);Rt(n,i.text,0,0,s,{color:i.color,maxWidth:h,rotation:f,textAlign:ac(r,t,a),textBaseline:"middle",translation:[c,d]})}draw(n){this._isVisible()&&(this.drawBackground(),this.drawGrid(n),this.drawBorder(),this.drawTitle(),this.drawLabels(n))}_layers(){let n=this.options,t=n.ticks&&n.ticks.z||0,i=F(n.grid&&n.grid.z,-1),a=F(n.border&&n.border.z,0);return!this._isVisible()||this.draw!==e.prototype.draw?[{z:t,draw:s=>{this.draw(s)}}]:[{z:i,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:a,draw:()=>{this.drawBorder()}},{z:t,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(n){let t=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",a=[],s,o;for(s=0,o=t.length;s<o;++s){let r=t[s];r[i]===this.id&&(!n||r.type===n)&&a.push(r)}return a}_resolveTickFontOptions(n){let t=this.options.ticks.setContext(this.getContext(n));return nt(t.font)}_maxDigits(){let n=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/n}},ye=class{constructor(n,t,i){this.type=n,this.scope=t,this.override=i,this.items=Object.create(null)}isForType(n){return Object.prototype.isPrototypeOf.call(this.type.prototype,n.prototype)}register(n){let t=Object.getPrototypeOf(n),i;lc(t)&&(i=this.register(t));let a=this.items,s=n.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+n);return s in a||(a[s]=n,oc(n,o,i),this.override&&K.override(n.id,n.overrides)),o}get(n){return this.items[n]}unregister(n){let t=this.items,i=n.id,a=this.scope;i in t&&delete t[i],a&&i in K[a]&&(delete K[a][i],this.override&&delete zt[i])}};function oc(e,n,t){let i=de(Object.create(null),[t?K.get(t):{},K.get(n),e.defaults]);K.set(n,i),e.defaultRoutes&&rc(n,e.defaultRoutes),e.descriptors&&K.describe(n,e.descriptors)}function rc(e,n){Object.keys(n).forEach(t=>{let i=t.split("."),a=i.pop(),s=[e].concat(i).join("."),o=n[t].split("."),r=o.pop(),l=o.join(".");K.route(s,a,l,r)})}function lc(e){return"id"in e&&"defaults"in e}var Ai=class{constructor(){this.controllers=new ye(Vt,"datasets",!0),this.elements=new ye(pt,"elements"),this.plugins=new ye(Object,"plugins"),this.scales=new ye(ae,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...n){this._each("register",n)}remove(...n){this._each("unregister",n)}addControllers(...n){this._each("register",n,this.controllers)}addElements(...n){this._each("register",n,this.elements)}addPlugins(...n){this._each("register",n,this.plugins)}addScales(...n){this._each("register",n,this.scales)}getController(n){return this._get(n,this.controllers,"controller")}getElement(n){return this._get(n,this.elements,"element")}getPlugin(n){return this._get(n,this.plugins,"plugin")}getScale(n){return this._get(n,this.scales,"scale")}removeControllers(...n){this._each("unregister",n,this.controllers)}removeElements(...n){this._each("unregister",n,this.elements)}removePlugins(...n){this._each("unregister",n,this.plugins)}removeScales(...n){this._each("unregister",n,this.scales)}_each(n,t,i){[...t].forEach(a=>{let s=i||this._getRegistryForType(a);i||s.isForType(a)||s===this.plugins&&a.id?this._exec(n,s,a):U(a,o=>{let r=i||this._getRegistryForType(o);this._exec(n,r,o)})})}_exec(n,t,i){let a=sn(n);G(i["before"+a],[],i),t[n](i),G(i["after"+a],[],i)}_getRegistryForType(n){for(let t=0;t<this._typedRegistries.length;t++){let i=this._typedRegistries[t];if(i.isForType(n))return i}return this.plugins}_get(n,t,i){let a=t.get(n);if(a===void 0)throw new Error('"'+n+'" is not a registered '+i+".");return a}},Ct=new Ai,Ii=class{constructor(){this._init=void 0}notify(n,t,i,a){if(t==="beforeInit"&&(this._init=this._createDescriptors(n,!0),this._notify(this._init,n,"install")),this._init===void 0)return;let s=a?this._descriptors(n).filter(a):this._descriptors(n),o=this._notify(s,n,t,i);return t==="afterDestroy"&&(this._notify(s,n,"stop"),this._notify(this._init,n,"uninstall"),this._init=void 0),o}_notify(n,t,i,a){a=a||{};for(let s of n){let o=s.plugin,r=o[i],l=[t,a,s.options];if(G(r,l,o)===!1&&a.cancelable)return!1}return!0}invalidate(){B(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(n){if(this._cache)return this._cache;let t=this._cache=this._createDescriptors(n);return this._notifyStateChanges(n),t}_createDescriptors(n,t){let i=n&&n.config,a=F(i.options&&i.options.plugins,{}),s=cc(i);return a===!1&&!t?[]:hc(n,s,a,t)}_notifyStateChanges(n){let t=this._oldCache||[],i=this._cache,a=(s,o)=>s.filter(r=>!o.some(l=>r.plugin.id===l.plugin.id));this._notify(a(t,i),n,"stop"),this._notify(a(i,t),n,"start")}};function cc(e){let n={},t=[],i=Object.keys(Ct.plugins.items);for(let s=0;s<i.length;s++)t.push(Ct.getPlugin(i[s]));let a=e.plugins||[];for(let s=0;s<a.length;s++){let o=a[s];t.indexOf(o)===-1&&(t.push(o),n[o.id]=!0)}return{plugins:t,localIds:n}}function dc(e,n){return!n&&e===!1?null:e===!0?{}:e}function hc(e,{plugins:n,localIds:t},i,a){let s=[],o=e.getContext();for(let r of n){let l=r.id,c=dc(i[l],a);c!==null&&s.push({plugin:r,options:fc(e.config,{plugin:r,local:t[l]},c,o)})}return s}function fc(e,{plugin:n,local:t},i,a){let s=e.pluginScopeKeys(n),o=e.getOptionScopes(i,s);return t&&n.defaults&&o.push(n.defaults),e.createResolver(o,a,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function ji(e,n){let t=K.datasets[e]||{};return((n.datasets||{})[e]||{}).indexAxis||n.indexAxis||t.indexAxis||"x"}function uc(e,n){let t=e;return e==="_index_"?t=n:e==="_value_"&&(t=n==="x"?"y":"x"),t}function gc(e,n){return e===n?"_index_":"_value_"}function Cs(e){if(e==="x"||e==="y"||e==="r")return e}function pc(e){if(e==="top"||e==="bottom")return"x";if(e==="left"||e==="right")return"y"}function zi(e,...n){if(Cs(e))return e;for(let t of n){let i=t.axis||pc(t.position)||e.length>1&&Cs(e[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function Ss(e,n,t){if(t[n+"AxisID"]===e)return{axis:n}}function mc(e,n){if(n.data&&n.data.datasets){let t=n.data.datasets.filter(i=>i.xAxisID===e||i.yAxisID===e);if(t.length)return Ss(e,"x",t[0])||Ss(e,"y",t[0])}return{}}function bc(e,n){let t=zt[e.type]||{scales:{}},i=n.scales||{},a=ji(e.type,n),s=Object.create(null);return Object.keys(i).forEach(o=>{let r=i[o];if(!V(r))return console.error(`Invalid scale configuration for scale: ${o}`);if(r._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);let l=zi(o,r,mc(o,e),K.scales[r.type]),c=gc(l,a),d=t.scales||{};s[o]=fe(Object.create(null),[{axis:l},r,d[l],d[c]])}),e.data.datasets.forEach(o=>{let r=o.type||e.type,l=o.indexAxis||ji(r,n),d=(zt[r]||{}).scales||{};Object.keys(d).forEach(h=>{let f=uc(h,l),u=o[f+"AxisID"]||f;s[u]=s[u]||Object.create(null),fe(s[u],[{axis:f},i[u],d[h]])})}),Object.keys(s).forEach(o=>{let r=s[o];fe(r,[K.scales[r.type],K.scale])}),s}function fo(e){let n=e.options||(e.options={});n.plugins=F(n.plugins,{}),n.scales=bc(e,n)}function uo(e){return e=e||{},e.datasets=e.datasets||[],e.labels=e.labels||[],e}function xc(e){return e=e||{},e.data=uo(e.data),fo(e),e}var Ps=new Map,go=new Set;function xn(e,n){let t=Ps.get(e);return t||(t=n(),Ps.set(e,t),go.add(t)),t}var Ne=(e,n,t)=>{let i=wt(n,t);i!==void 0&&e.add(i)},Fi=class{constructor(n){this._config=xc(n),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(n){this._config.type=n}get data(){return this._config.data}set data(n){this._config.data=uo(n)}get options(){return this._config.options}set options(n){this._config.options=n}get plugins(){return this._config.plugins}update(){let n=this._config;this.clearCache(),fo(n)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(n){return xn(n,()=>[[`datasets.${n}`,""]])}datasetAnimationScopeKeys(n,t){return xn(`${n}.transition.${t}`,()=>[[`datasets.${n}.transitions.${t}`,`transitions.${t}`],[`datasets.${n}`,""]])}datasetElementScopeKeys(n,t){return xn(`${n}-${t}`,()=>[[`datasets.${n}.elements.${t}`,`datasets.${n}`,`elements.${t}`,""]])}pluginScopeKeys(n){let t=n.id,i=this.type;return xn(`${i}-plugin-${t}`,()=>[[`plugins.${t}`,...n.additionalOptionScopes||[]]])}_cachedScopes(n,t){let i=this._scopeCache,a=i.get(n);return(!a||t)&&(a=new Map,i.set(n,a)),a}getOptionScopes(n,t,i){let{options:a,type:s}=this,o=this._cachedScopes(n,i),r=o.get(t);if(r)return r;let l=new Set;t.forEach(d=>{n&&(l.add(n),d.forEach(h=>Ne(l,n,h))),d.forEach(h=>Ne(l,a,h)),d.forEach(h=>Ne(l,zt[s]||{},h)),d.forEach(h=>Ne(l,K,h)),d.forEach(h=>Ne(l,cn,h))});let c=Array.from(l);return c.length===0&&c.push(Object.create(null)),go.has(t)&&o.set(t,c),c}chartOptionScopes(){let{options:n,type:t}=this;return[n,zt[t]||{},K.datasets[t]||{},{type:t},K,cn]}resolveNamedOptions(n,t,i,a=[""]){let s={$shared:!0},{resolver:o,subPrefixes:r}=Os(this._resolverCache,n,a),l=o;if(yc(o,t)){s.$shared=!1,i=Pt(i)?i():i;let c=this.createResolver(n,i,r);l=Qt(o,i,c)}for(let c of t)s[c]=l[c];return s}createResolver(n,t,i=[""],a){let{resolver:s}=Os(this._resolverCache,n,i);return V(t)?Qt(s,t,void 0,a):s}};function Os(e,n,t){let i=e.get(n);i||(i=new Map,e.set(n,i));let a=t.join(),s=i.get(a);return s||(s={resolver:fn(n,t),subPrefixes:t.filter(r=>!r.toLowerCase().includes("hover"))},i.set(a,s)),s}var _c=e=>V(e)&&Object.getOwnPropertyNames(e).some(n=>Pt(e[n]));function yc(e,n){let{isScriptable:t,isIndexable:i}=si(e);for(let a of n){let s=t(a),o=i(a),r=(o||s)&&e[a];if(s&&(Pt(r)||_c(r))||o&&X(r))return!0}return!1}var vc="4.5.1",Mc=["top","bottom","left","right","chartArea"];function ws(e,n){return e==="top"||e==="bottom"||Mc.indexOf(e)===-1&&n==="x"}function ks(e,n){return function(t,i){return t[e]===i[e]?t[n]-i[n]:t[e]-i[e]}}function Ds(e){let n=e.chart,t=n.options.animation;n.notifyPlugins("afterRender"),G(t&&t.onComplete,[e],n)}function Cc(e){let n=e.chart,t=n.options.animation;G(t&&t.onProgress,[e],n)}function po(e){return un()&&typeof e=="string"?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}var Cn={},Ts=e=>{let n=po(e);return Object.values(Cn).filter(t=>t.canvas===n).pop()};function Sc(e,n,t){let i=Object.keys(e);for(let a of i){let s=+a;if(s>=n){let o=e[a];delete e[a],(t>0||s>n)&&(e[s+t]=o)}}}function Pc(e,n,t,i){return!t||e.type==="mouseout"?null:i?n:e}var Ht=(()=>{class e{static defaults=K;static instances=Cn;static overrides=zt;static registry=Ct;static version=vc;static getChart=Ts;static register(...t){Ct.add(...t),Es()}static unregister(...t){Ct.remove(...t),Es()}constructor(t,i){let a=this.config=new Fi(i),s=po(t),o=Ts(s);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");let r=a.createResolver(a.chartOptionScopes(),this.getContext());this.platform=new(a.platform||Ul(s)),this.platform.updateConfig(a);let l=this.platform.acquireContext(s,r.aspectRatio),c=l&&l.canvas,d=c&&c.height,h=c&&c.width;if(this.id=Da(),this.ctx=l,this.canvas=c,this.width=h,this.height=d,this._options=r,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Ii,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Ba(f=>this.update(f),r.resizeDelay||0),this._dataChanges=[],Cn[this.id]=this,!l||!c){console.error("Failed to create chart: can't acquire context from the given item");return}Dt.listen(this,"complete",Ds),Dt.listen(this,"progress",Cc),this._initialize(),this.attached&&this.update()}get aspectRatio(){let{options:{aspectRatio:t,maintainAspectRatio:i},width:a,height:s,_aspectRatio:o}=this;return B(t)?i&&o?o:s?a/s:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return Ct}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():ci(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return ni(this.canvas,this.ctx),this}stop(){return Dt.stop(this),this}resize(t,i){Dt.running(this)?this._resizeBeforeDraw={width:t,height:i}:this._resize(t,i)}_resize(t,i){let a=this.options,s=this.canvas,o=a.maintainAspectRatio&&this.aspectRatio,r=this.platform.getMaximumSize(s,t,i,o),l=a.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=r.width,this.height=r.height,this._aspectRatio=this.aspectRatio,ci(this,l,!0)&&(this.notifyPlugins("resize",{size:r}),G(a.onResize,[this,r],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){let i=this.options.scales||{};U(i,(a,s)=>{a.id=s})}buildOrUpdateScales(){let t=this.options,i=t.scales,a=this.scales,s=Object.keys(a).reduce((r,l)=>(r[l]=!1,r),{}),o=[];i&&(o=o.concat(Object.keys(i).map(r=>{let l=i[r],c=zi(r,l),d=c==="r",h=c==="x";return{options:l,dposition:d?"chartArea":h?"bottom":"left",dtype:d?"radialLinear":h?"category":"linear"}}))),U(o,r=>{let l=r.options,c=l.id,d=zi(c,l),h=F(l.type,r.dtype);(l.position===void 0||ws(l.position,d)!==ws(r.dposition))&&(l.position=r.dposition),s[c]=!0;let f=null;if(c in a&&a[c].type===h)f=a[c];else{let u=Ct.getScale(h);f=new u({id:c,type:h,ctx:this.ctx,chart:this}),a[f.id]=f}f.init(l,t)}),U(s,(r,l)=>{r||delete a[l]}),U(a,r=>{lt.configure(this,r,r.options),lt.addBox(this,r)})}_updateMetasets(){let t=this._metasets,i=this.data.datasets.length,a=t.length;if(t.sort((s,o)=>s.index-o.index),a>i){for(let s=i;s<a;++s)this._destroyDatasetMeta(s);t.splice(i,a-i)}this._sortedMetasets=t.slice(0).sort(ks("order","index"))}_removeUnreferencedMetasets(){let{_metasets:t,data:{datasets:i}}=this;t.length>i.length&&delete this._stacks,t.forEach((a,s)=>{i.filter(o=>o===a._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){let t=[],i=this.data.datasets,a,s;for(this._removeUnreferencedMetasets(),a=0,s=i.length;a<s;a++){let o=i[a],r=this.getDatasetMeta(a),l=o.type||this.config.type;if(r.type&&r.type!==l&&(this._destroyDatasetMeta(a),r=this.getDatasetMeta(a)),r.type=l,r.indexAxis=o.indexAxis||ji(l,this.options),r.order=o.order||0,r.index=a,r.label=""+o.label,r.visible=this.isDatasetVisible(a),r.controller)r.controller.updateIndex(a),r.controller.linkScales();else{let c=Ct.getController(l),{datasetElementType:d,dataElementType:h}=K.datasets[l];Object.assign(c,{dataElementType:Ct.getElement(h),datasetElementType:d&&Ct.getElement(d)}),r.controller=new c(this,a),t.push(r.controller)}}return this._updateMetasets(),t}_resetElements(){U(this.data.datasets,(t,i)=>{this.getDatasetMeta(i).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){let i=this.config;i.update();let a=this._options=i.createResolver(i.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!a.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;let o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let r=0;for(let d=0,h=this.data.datasets.length;d<h;d++){let{controller:f}=this.getDatasetMeta(d),u=!s&&o.indexOf(f)===-1;f.buildOrUpdateElements(u),r=Math.max(+f.getMaxOverflow(),r)}r=this._minPadding=a.layout.autoPadding?r:0,this._updateLayout(r),s||U(o,d=>{d.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(ks("z","_idx"));let{_active:l,_lastEvent:c}=this;c?this._eventHandler(c,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){U(this.scales,t=>{lt.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){let t=this.options,i=new Set(Object.keys(this._listeners)),a=new Set(t.events);(!Wn(i,a)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){let{_hiddenIndices:t}=this,i=this._getUniformDataChanges()||[];for(let{method:a,start:s,count:o}of i){let r=a==="_removeElements"?-o:o;Sc(t,s,r)}}_getUniformDataChanges(){let t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];let i=this.data.datasets.length,a=o=>new Set(t.filter(r=>r[0]===o).map((r,l)=>l+","+r.splice(1).join(","))),s=a(0);for(let o=1;o<i;o++)if(!Wn(s,a(o)))return;return Array.from(s).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;lt.update(this,this.width,this.height,t);let i=this.chartArea,a=i.width<=0||i.height<=0;this._layers=[],U(this.boxes,s=>{a&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,o)=>{s._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let i=0,a=this.data.datasets.length;i<a;++i)this.getDatasetMeta(i).controller.configure();for(let i=0,a=this.data.datasets.length;i<a;++i)this._updateDataset(i,Pt(t)?t({datasetIndex:i}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,i){let a=this.getDatasetMeta(t),s={meta:a,index:t,mode:i,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(a.controller._update(i),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Dt.has(this)?this.attached&&!Dt.running(this)&&Dt.start(this):(this.draw(),Ds({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){let{width:a,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(a,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;let i=this._layers;for(t=0;t<i.length&&i[t].z<=0;++t)i[t].draw(this.chartArea);for(this._drawDatasets();t<i.length;++t)i[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){let i=this._sortedMetasets,a=[],s,o;for(s=0,o=i.length;s<o;++s){let r=i[s];(!t||r.visible)&&a.push(r)}return a}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;let t=this.getSortedVisibleDatasetMetas();for(let i=t.length-1;i>=0;--i)this._drawDataset(t[i]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){let i=this.ctx,a={meta:t,index:t.index,cancelable:!0},s=pi(this,t);this.notifyPlugins("beforeDatasetDraw",a)!==!1&&(s&&Ie(i,s),t.controller.draw(),s&&je(i),a.cancelable=!1,this.notifyPlugins("afterDatasetDraw",a))}isPointInArea(t){return _t(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,i,a,s){let o=wl.modes[i];return typeof o=="function"?o(this,t,a,s):[]}getDatasetMeta(t){let i=this.data.datasets[t],a=this._metasets,s=a.filter(o=>o&&o._dataset===i).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:i&&i.order||0,index:t,_dataset:i,_parsed:[],_sorted:!1},a.push(s)),s}getContext(){return this.$context||(this.$context=kt(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){let i=this.data.datasets[t];if(!i)return!1;let a=this.getDatasetMeta(t);return typeof a.hidden=="boolean"?!a.hidden:!i.hidden}setDatasetVisibility(t,i){let a=this.getDatasetMeta(t);a.hidden=!i}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,i,a){let s=a?"show":"hide",o=this.getDatasetMeta(t),r=o.controller._resolveAnimations(void 0,s);ue(i)?(o.data[i].hidden=!a,this.update()):(this.setDatasetVisibility(t,a),r.update(o,{visible:a}),this.update(l=>l.datasetIndex===t?s:void 0))}hide(t,i){this._updateVisibility(t,i,!1)}show(t,i){this._updateVisibility(t,i,!0)}_destroyDatasetMeta(t){let i=this._metasets[t];i&&i.controller&&i.controller._destroy(),delete this._metasets[t]}_stop(){let t,i;for(this.stop(),Dt.remove(this),t=0,i=this.data.datasets.length;t<i;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");let{canvas:t,ctx:i}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),ni(t,i),this.platform.releaseContext(i),this.canvas=null,this.ctx=null),delete Cn[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){let t=this._listeners,i=this.platform,a=(o,r)=>{i.addEventListener(this,o,r),t[o]=r},s=(o,r,l)=>{o.offsetX=r,o.offsetY=l,this._eventHandler(o)};U(this.options.events,o=>a(o,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});let t=this._responsiveListeners,i=this.platform,a=(c,d)=>{i.addEventListener(this,c,d),t[c]=d},s=(c,d)=>{t[c]&&(i.removeEventListener(this,c,d),delete t[c])},o=(c,d)=>{this.canvas&&this.resize(c,d)},r,l=()=>{s("attach",l),this.attached=!0,this.resize(),a("resize",o),a("detach",r)};r=()=>{this.attached=!1,s("resize",o),this._stop(),this._resize(0,0),a("attach",l)},i.isAttached(this.canvas)?l():r()}unbindEvents(){U(this._listeners,(t,i)=>{this.platform.removeEventListener(this,i,t)}),this._listeners={},U(this._responsiveListeners,(t,i)=>{this.platform.removeEventListener(this,i,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,i,a){let s=a?"set":"remove",o,r,l,c;for(i==="dataset"&&(o=this.getDatasetMeta(t[0].datasetIndex),o.controller["_"+s+"DatasetHoverStyle"]()),l=0,c=t.length;l<c;++l){r=t[l];let d=r&&this.getDatasetMeta(r.datasetIndex).controller;d&&d[s+"HoverStyle"](r.element,r.datasetIndex,r.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){let i=this._active||[],a=t.map(({datasetIndex:o,index:r})=>{let l=this.getDatasetMeta(o);if(!l)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:l.data[r],index:r}});!Ee(a,i)&&(this._active=a,this._lastEvent=null,this._updateHoverStyles(a,i))}notifyPlugins(t,i,a){return this._plugins.notify(this,t,i,a)}isPluginEnabled(t){return this._plugins._cache.filter(i=>i.plugin.id===t).length===1}_updateHoverStyles(t,i,a){let s=this.options.hover,o=(c,d)=>c.filter(h=>!d.some(f=>h.datasetIndex===f.datasetIndex&&h.index===f.index)),r=o(i,t),l=a?t:o(t,i);r.length&&this.updateHoverStyle(r,s.mode,!1),l.length&&s.mode&&this.updateHoverStyle(l,s.mode,!0)}_eventHandler(t,i){let a={event:t,replay:i,cancelable:!0,inChartArea:this.isPointInArea(t)},s=r=>(r.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",a,s)===!1)return;let o=this._handleEvent(t,i,a.inChartArea);return a.cancelable=!1,this.notifyPlugins("afterEvent",a,s),(o||a.changed)&&this.render(),this}_handleEvent(t,i,a){let{_active:s=[],options:o}=this,r=i,l=this._getActiveElements(t,s,a,r),c=Aa(t),d=Pc(t,this._lastEvent,a,c);a&&(this._lastEvent=null,G(o.onHover,[t,l,this],this),c&&G(o.onClick,[t,l,this],this));let h=!Ee(l,s);return(h||i)&&(this._active=l,this._updateHoverStyles(l,s,i)),this._lastEvent=d,h}_getActiveElements(t,i,a,s){if(t.type==="mouseout")return[];if(!a)return i;let o=this.options.hover;return this.getElementsAtEventForMode(t,o.mode,o,s)}}return e})();function Es(){return U(Ht.instances,e=>e._plugins.invalidate())}function Oc(e,n,t){let{startAngle:i,x:a,y:s,outerRadius:o,innerRadius:r,options:l}=n,{borderWidth:c,borderJoinStyle:d}=l,h=Math.min(c/o,st(i-t));if(e.beginPath(),e.arc(a,s,o-c/2,i+h/2,t-h/2),r>0){let f=Math.min(c/r,st(i-t));e.arc(a,s,r+c/2,t-f/2,i+f/2,!0)}else{let f=Math.min(c/2,o*st(i-t));if(d==="round")e.arc(a,s,f,t-W/2,i+W/2,!0);else if(d==="bevel"){let u=2*f*f,p=-u*Math.cos(t+W/2)+a,g=-u*Math.sin(t+W/2)+s,m=u*Math.cos(i+W/2)+a,v=u*Math.sin(i+W/2)+s;e.lineTo(p,g),e.lineTo(m,v)}}e.closePath(),e.moveTo(0,0),e.rect(0,0,e.canvas.width,e.canvas.height),e.clip("evenodd")}function wc(e,n,t){let{startAngle:i,pixelMargin:a,x:s,y:o,outerRadius:r,innerRadius:l}=n,c=a/r;e.beginPath(),e.arc(s,o,r,i-c,t+c),l>a?(c=a/l,e.arc(s,o,l,t+c,i-c,!0)):e.arc(s,o,a,t+tt,i-tt),e.closePath(),e.clip()}function kc(e){return hn(e,["outerStart","outerEnd","innerStart","innerEnd"])}function Dc(e,n,t,i){let a=kc(e.options.borderRadius),s=(t-n)/2,o=Math.min(s,i*n/2),r=l=>{let c=(t-Math.min(s,l))*i/2;return at(l,0,Math.min(s,c))};return{outerStart:r(a.outerStart),outerEnd:r(a.outerEnd),innerStart:at(a.innerStart,0,o),innerEnd:at(a.innerEnd,0,o)}}function _e(e,n,t,i){return{x:t+e*Math.cos(n),y:i+e*Math.sin(n)}}function wn(e,n,t,i,a,s){let{x:o,y:r,startAngle:l,pixelMargin:c,innerRadius:d}=n,h=Math.max(n.outerRadius+i+t-c,0),f=d>0?d+i+t+c:0,u=0,p=a-l;if(i){let L=d>0?d-i:0,A=h>0?h-i:0,N=(L+A)/2,Q=N!==0?p*N/(N+i):p;u=(p-Q)/2}let g=Math.max(.001,p*h-t/W)/h,m=(p-g)/2,v=l+m+u,M=a-m-u,{outerStart:O,outerEnd:S,innerStart:_,innerEnd:C}=Dc(n,f,h,M-v),k=h-O,w=h-S,D=v+O/k,I=M-S/w,E=f+_,T=f+C,j=v+_/E,$=M-C/T;if(e.beginPath(),s){let L=(D+I)/2;if(e.arc(o,r,h,D,L),e.arc(o,r,h,L,I),S>0){let et=_e(w,I,o,r);e.arc(et.x,et.y,S,I,M+tt)}let A=_e(T,M,o,r);if(e.lineTo(A.x,A.y),C>0){let et=_e(T,$,o,r);e.arc(et.x,et.y,C,M+tt,$+Math.PI)}let N=(M-C/f+(v+_/f))/2;if(e.arc(o,r,f,M-C/f,N,!0),e.arc(o,r,f,N,v+_/f,!0),_>0){let et=_e(E,j,o,r);e.arc(et.x,et.y,_,j+Math.PI,v-tt)}let Q=_e(k,v,o,r);if(e.lineTo(Q.x,Q.y),O>0){let et=_e(k,D,o,r);e.arc(et.x,et.y,O,v-tt,D)}}else{e.moveTo(o,r);let L=Math.cos(D)*h+o,A=Math.sin(D)*h+r;e.lineTo(L,A);let N=Math.cos(I)*h+o,Q=Math.sin(I)*h+r;e.lineTo(N,Q)}e.closePath()}function Tc(e,n,t,i,a){let{fullCircles:s,startAngle:o,circumference:r}=n,l=n.endAngle;if(s){wn(e,n,t,i,l,a);for(let c=0;c<s;++c)e.fill();isNaN(r)||(l=o+(r%q||q))}return wn(e,n,t,i,l,a),e.fill(),l}function Ec(e,n,t,i,a){let{fullCircles:s,startAngle:o,circumference:r,options:l}=n,{borderWidth:c,borderJoinStyle:d,borderDash:h,borderDashOffset:f,borderRadius:u}=l,p=l.borderAlign==="inner";if(!c)return;e.setLineDash(h||[]),e.lineDashOffset=f,p?(e.lineWidth=c*2,e.lineJoin=d||"round"):(e.lineWidth=c,e.lineJoin=d||"bevel");let g=n.endAngle;if(s){wn(e,n,t,i,g,a);for(let m=0;m<s;++m)e.stroke();isNaN(r)||(g=o+(r%q||q))}p&&wc(e,n,g),l.selfJoin&&g-o>=W&&u===0&&d!=="miter"&&Oc(e,n,g),s||(wn(e,n,t,i,g,a),e.stroke())}var Ri=class extends pt{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:n=>n!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(n){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,n&&Object.assign(this,n)}inRange(n,t,i){let a=this.getProps(["x","y"],i),{angle:s,distance:o}=Gn(a,{x:n,y:t}),{startAngle:r,endAngle:l,innerRadius:c,outerRadius:d,circumference:h}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),f=(this.options.spacing+this.options.borderWidth)/2,u=F(h,l-r),p=pe(s,r,l)&&r!==l,g=u>=q||p,m=vt(o,c+f,d+f);return g&&m}getCenterPoint(n){let{x:t,y:i,startAngle:a,endAngle:s,innerRadius:o,outerRadius:r}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],n),{offset:l,spacing:c}=this.options,d=(a+s)/2,h=(o+r+c+l)/2;return{x:t+Math.cos(d)*h,y:i+Math.sin(d)*h}}tooltipPosition(n){return this.getCenterPoint(n)}draw(n){let{options:t,circumference:i}=this,a=(t.offset||0)/4,s=(t.spacing||0)/2,o=t.circular;if(this.pixelMargin=t.borderAlign==="inner"?.33:0,this.fullCircles=i>q?Math.floor(i/q):0,i===0||this.innerRadius<0||this.outerRadius<0)return;n.save();let r=(this.startAngle+this.endAngle)/2;n.translate(Math.cos(r)*a,Math.sin(r)*a);let l=1-Math.sin(Math.min(W,i||0)),c=a*l;n.fillStyle=t.backgroundColor,n.strokeStyle=t.borderColor,Tc(n,this,c,s,o),Ec(n,this,c,s,o),n.restore()}};function mo(e,n,t=n){e.lineCap=F(t.borderCapStyle,n.borderCapStyle),e.setLineDash(F(t.borderDash,n.borderDash)),e.lineDashOffset=F(t.borderDashOffset,n.borderDashOffset),e.lineJoin=F(t.borderJoinStyle,n.borderJoinStyle),e.lineWidth=F(t.borderWidth,n.borderWidth),e.strokeStyle=F(t.borderColor,n.borderColor)}function Ac(e,n,t){e.lineTo(t.x,t.y)}function Ic(e){return e.stepped?$a:e.tension||e.cubicInterpolationMode==="monotone"?Ya:Ac}function bo(e,n,t={}){let i=e.length,{start:a=0,end:s=i-1}=t,{start:o,end:r}=n,l=Math.max(a,o),c=Math.min(s,r),d=a<o&&s<o||a>r&&s>r;return{count:i,start:l,loop:n.loop,ilen:c<l&&!d?i+c-l:c-l}}function jc(e,n,t,i){let{points:a,options:s}=n,{count:o,start:r,loop:l,ilen:c}=bo(a,t,i),d=Ic(s),{move:h=!0,reverse:f}=i||{},u,p,g;for(u=0;u<=c;++u)p=a[(r+(f?c-u:u))%o],!p.skip&&(h?(e.moveTo(p.x,p.y),h=!1):d(e,g,p,f,s.stepped),g=p);return l&&(p=a[(r+(f?c:0))%o],d(e,g,p,f,s.stepped)),!!l}function zc(e,n,t,i){let a=n.points,{count:s,start:o,ilen:r}=bo(a,t,i),{move:l=!0,reverse:c}=i||{},d=0,h=0,f,u,p,g,m,v,M=S=>(o+(c?r-S:S))%s,O=()=>{g!==m&&(e.lineTo(d,m),e.lineTo(d,g),e.lineTo(d,v))};for(l&&(u=a[M(0)],e.moveTo(u.x,u.y)),f=0;f<=r;++f){if(u=a[M(f)],u.skip)continue;let S=u.x,_=u.y,C=S|0;C===p?(_<g?g=_:_>m&&(m=_),d=(h*d+S)/++h):(O(),e.lineTo(S,_),p=C,h=0,g=m=_),v=_}O()}function Li(e){let n=e.options,t=n.borderDash&&n.borderDash.length;return!e._decimated&&!e._loop&&!n.tension&&n.cubicInterpolationMode!=="monotone"&&!n.stepped&&!t?zc:jc}function Fc(e){return e.stepped?ts:e.tension||e.cubicInterpolationMode==="monotone"?es:It}function Rc(e,n,t,i){let a=n._path;a||(a=n._path=new Path2D,n.path(a,t,i)&&a.closePath()),mo(e,n.options),e.stroke(a)}function Lc(e,n,t,i){let{segments:a,options:s}=n,o=Li(n);for(let r of a)mo(e,s,r.style),e.beginPath(),o(e,n,r,{start:t,end:t+i-1})&&e.closePath(),e.stroke()}var Nc=typeof Path2D=="function";function Bc(e,n,t,i){Nc&&!n.options.segment?Rc(e,n,t,i):Lc(e,n,t,i)}var Tn=(()=>{class e extends pt{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"};constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,i){let a=this.options;if((a.tension||a.cubicInterpolationMode==="monotone")&&!a.stepped&&!this._pointsUpdated){let s=a.spanGaps?this._loop:this._fullLoop;Ja(this._points,a,t,s,i),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=is(this,this.options.segment))}first(){let t=this.segments,i=this.points;return t.length&&i[t[0].start]}last(){let t=this.segments,i=this.points,a=t.length;return a&&i[t[a-1].end]}interpolate(t,i){let a=this.options,s=t[i],o=this.points,r=gi(this,{property:i,start:s,end:s});if(!r.length)return;let l=[],c=Fc(a),d,h;for(d=0,h=r.length;d<h;++d){let{start:f,end:u}=r[d],p=o[f],g=o[u];if(p===g){l.push(p);continue}let m=Math.abs((s-p[i])/(g[i]-p[i])),v=c(p,g,m,a.stepped);v[i]=t[i],l.push(v)}return l.length===1?l[0]:l}pathSegment(t,i,a){return Li(this)(t,this,i,a)}path(t,i,a){let s=this.segments,o=Li(this),r=this._loop;i=i||0,a=a||this.points.length-i;for(let l of s)r&=o(t,this,l,{start:i,end:i+a-1});return!!r}draw(t,i,a,s){let o=this.options||{};(this.points||[]).length&&o.borderWidth&&(t.save(),Bc(t,this,a,s),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}return e})();function As(e,n,t,i){let a=e.options,{[t]:s}=e.getProps([t],i);return Math.abs(n-s)<a.radius+a.hitRadius}var Vc=(()=>{class e extends pt{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,i,a){let s=this.options,{x:o,y:r}=this.getProps(["x","y"],a);return Math.pow(t-o,2)+Math.pow(i-r,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(t,i){return As(this,t,"x",i)}inYRange(t,i){return As(this,t,"y",i)}getCenterPoint(t){let{x:i,y:a}=this.getProps(["x","y"],t);return{x:i,y:a}}size(t){t=t||this.options||{};let i=t.radius||0;i=Math.max(i,i&&t.hoverRadius||0);let a=i&&t.borderWidth||0;return(i+a)*2}draw(t,i){let a=this.options;this.skip||a.radius<.1||!_t(this,i,this.size(a)/2)||(t.strokeStyle=a.borderColor,t.lineWidth=a.borderWidth,t.fillStyle=a.backgroundColor,dn(t,a,this.x,this.y))}getRange(){let t=this.options||{};return t.radius+t.hitRadius}}return e})();function xo(e,n){let{x:t,y:i,base:a,width:s,height:o}=e.getProps(["x","y","base","width","height"],n),r,l,c,d,h;return e.horizontal?(h=o/2,r=Math.min(t,a),l=Math.max(t,a),c=i-h,d=i+h):(h=s/2,r=t-h,l=t+h,c=Math.min(i,a),d=Math.max(i,a)),{left:r,top:c,right:l,bottom:d}}function Bt(e,n,t,i){return e?0:at(n,t,i)}function Hc(e,n,t){let i=e.options.borderWidth,a=e.borderSkipped,s=ai(i);return{t:Bt(a.top,s.top,0,t),r:Bt(a.right,s.right,0,n),b:Bt(a.bottom,s.bottom,0,t),l:Bt(a.left,s.left,0,n)}}function Wc(e,n,t){let{enableBorderRadius:i}=e.getProps(["enableBorderRadius"]),a=e.options.borderRadius,s=Lt(a),o=Math.min(n,t),r=e.borderSkipped,l=i||V(a);return{topLeft:Bt(!l||r.top||r.left,s.topLeft,0,o),topRight:Bt(!l||r.top||r.right,s.topRight,0,o),bottomLeft:Bt(!l||r.bottom||r.left,s.bottomLeft,0,o),bottomRight:Bt(!l||r.bottom||r.right,s.bottomRight,0,o)}}function $c(e){let n=xo(e),t=n.right-n.left,i=n.bottom-n.top,a=Hc(e,t/2,i/2),s=Wc(e,t/2,i/2);return{outer:{x:n.left,y:n.top,w:t,h:i,radius:s},inner:{x:n.left+a.l,y:n.top+a.t,w:t-a.l-a.r,h:i-a.t-a.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(a.t,a.l)),topRight:Math.max(0,s.topRight-Math.max(a.t,a.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(a.b,a.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(a.b,a.r))}}}}function Ci(e,n,t,i){let a=n===null,s=t===null,r=e&&!(a&&s)&&xo(e,i);return r&&(a||vt(n,r.left,r.right))&&(s||vt(t,r.top,r.bottom))}function Yc(e){return e.topLeft||e.topRight||e.bottomLeft||e.bottomRight}function Uc(e,n){e.rect(n.x,n.y,n.w,n.h)}function Si(e,n,t={}){let i=e.x!==t.x?-n:0,a=e.y!==t.y?-n:0,s=(e.x+e.w!==t.x+t.w?n:0)-i,o=(e.y+e.h!==t.y+t.h?n:0)-a;return{x:e.x+i,y:e.y+a,w:e.w+s,h:e.h+o,radius:e.radius}}var Ni=class extends pt{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(n){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,n&&Object.assign(this,n)}draw(n){let{inflateAmount:t,options:{borderColor:i,backgroundColor:a}}=this,{inner:s,outer:o}=$c(this),r=Yc(o.radius)?be:Uc;n.save(),(o.w!==s.w||o.h!==s.h)&&(n.beginPath(),r(n,Si(o,t,s)),n.clip(),r(n,Si(s,-t,o)),n.fillStyle=i,n.fill("evenodd")),n.beginPath(),r(n,Si(s,t)),n.fillStyle=a,n.fill(),n.restore()}inRange(n,t,i){return Ci(this,n,t,i)}inXRange(n,t){return Ci(this,n,null,t)}inYRange(n,t){return Ci(this,null,n,t)}getCenterPoint(n){let{x:t,y:i,base:a,horizontal:s}=this.getProps(["x","y","base","horizontal"],n);return{x:s?(t+a)/2:t,y:s?i:(i+a)/2}}getRange(n){return n==="x"?this.width/2:this.height/2}},Gc=Object.freeze({__proto__:null,ArcElement:Ri,BarElement:Ni,LineElement:Tn,PointElement:Vc}),Bi=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],Is=Bi.map(e=>e.replace("rgb(","rgba(").replace(")",", 0.5)"));function _o(e){return Bi[e%Bi.length]}function yo(e){return Is[e%Is.length]}function Xc(e,n){return e.borderColor=_o(n),e.backgroundColor=yo(n),++n}function qc(e,n){return e.backgroundColor=e.data.map(()=>_o(n++)),n}function Kc(e,n){return e.backgroundColor=e.data.map(()=>yo(n++)),n}function Jc(e){let n=0;return(t,i)=>{let a=e.getDatasetMeta(i).controller;a instanceof Xi?n=qc(t,n):a instanceof oo?n=Kc(t,n):a&&(n=Xc(t,n))}}function js(e){let n;for(n in e)if(e[n].borderColor||e[n].backgroundColor)return!0;return!1}function Zc(e){return e&&(e.borderColor||e.backgroundColor)}function Qc(){return K.borderColor!=="rgba(0,0,0,0.1)"||K.backgroundColor!=="rgba(0,0,0,0.1)"}var td={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(e,n,t){if(!t.enabled)return;let{data:{datasets:i},options:a}=e.config,{elements:s}=a,o=js(i)||Zc(a)||s&&js(s)||Qc();if(!t.forceOverride&&o)return;let r=Jc(e);i.forEach(r)}};function ed(e,n,t,i,a){let s=a.samples||i;if(s>=t)return e.slice(n,n+t);let o=[],r=(t-2)/(s-2),l=0,c=n+t-1,d=n,h,f,u,p,g;for(o[l++]=e[d],h=0;h<s-2;h++){let m=0,v=0,M,O=Math.floor((h+1)*r)+1+n,S=Math.min(Math.floor((h+2)*r)+1,t)+n,_=S-O;for(M=O;M<S;M++)m+=e[M].x,v+=e[M].y;m/=_,v/=_;let C=Math.floor(h*r)+1+n,k=Math.min(Math.floor((h+1)*r)+1,t)+n,{x:w,y:D}=e[d];for(u=p=-1,M=C;M<k;M++)p=.5*Math.abs((w-m)*(e[M].y-D)-(w-e[M].x)*(v-D)),p>u&&(u=p,f=e[M],g=M);o[l++]=f,d=g}return o[l++]=e[c],o}function nd(e,n,t,i){let a=0,s=0,o,r,l,c,d,h,f,u,p,g,m=[],v=n+t-1,M=e[n].x,S=e[v].x-M;for(o=n;o<n+t;++o){r=e[o],l=(r.x-M)/S*i,c=r.y;let _=l|0;if(_===d)c<p?(p=c,h=o):c>g&&(g=c,f=o),a=(s*a+r.x)/++s;else{let C=o-1;if(!B(h)&&!B(f)){let k=Math.min(h,f),w=Math.max(h,f);k!==u&&k!==C&&m.push(Ut(Yt({},e[k]),{x:a})),w!==u&&w!==C&&m.push(Ut(Yt({},e[w]),{x:a}))}o>0&&C!==u&&m.push(e[C]),m.push(r),d=_,s=0,p=g=c,h=f=u=o}}return m}function vo(e){if(e._decimated){let n=e._data;delete e._decimated,delete e._data,Object.defineProperty(e,"data",{configurable:!0,enumerable:!0,writable:!0,value:n})}}function zs(e){e.data.datasets.forEach(n=>{vo(n)})}function id(e,n){let t=n.length,i=0,a,{iScale:s}=e,{min:o,max:r,minDefined:l,maxDefined:c}=s.getUserBounds();return l&&(i=at(xt(n,s.axis,o).lo,0,t-1)),c?a=at(xt(n,s.axis,r).hi+1,i,t)-i:a=t-i,{start:i,count:a}}var ad={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(e,n,t)=>{if(!t.enabled){zs(e);return}let i=e.width;e.data.datasets.forEach((a,s)=>{let{_data:o,indexAxis:r}=a,l=e.getDatasetMeta(s),c=o||a.data;if(xe([r,e.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;let d=e.scales[l.xAxisID];if(d.type!=="linear"&&d.type!=="time"||e.options.parsing)return;let{start:h,count:f}=id(l,c),u=t.threshold||4*i;if(f<=u){vo(a);return}B(o)&&(a._data=c,delete a.data,Object.defineProperty(a,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(g){this._data=g}}));let p;switch(t.algorithm){case"lttb":p=ed(c,h,f,i,t);break;case"min-max":p=nd(c,h,f,i);break;default:throw new Error(`Unsupported decimation algorithm '${t.algorithm}'`)}a._decimated=p})},destroy(e){zs(e)}};function sd(e,n,t){let i=e.segments,a=e.points,s=n.points,o=[];for(let r of i){let{start:l,end:c}=r;c=En(l,c,a);let d=Vi(t,a[l],a[c],r.loop);if(!n.segments){o.push({source:r,target:d,start:a[l],end:a[c]});continue}let h=gi(n,d);for(let f of h){let u=Vi(t,s[f.start],s[f.end],f.loop),p=ui(r,a,u);for(let g of p)o.push({source:g,target:f,start:{[t]:Fs(d,u,"start",Math.max)},end:{[t]:Fs(d,u,"end",Math.min)}})}}return o}function Vi(e,n,t,i){if(i)return;let a=n[e],s=t[e];return e==="angle"&&(a=st(a),s=st(s)),{property:e,start:a,end:s}}function od(e,n){let{x:t=null,y:i=null}=e||{},a=n.points,s=[];return n.segments.forEach(({start:o,end:r})=>{r=En(o,r,a);let l=a[o],c=a[r];i!==null?(s.push({x:l.x,y:i}),s.push({x:c.x,y:i})):t!==null&&(s.push({x:t,y:l.y}),s.push({x:t,y:c.y}))}),s}function En(e,n,t){for(;n>e;n--){let i=t[n];if(!isNaN(i.x)&&!isNaN(i.y))break}return n}function Fs(e,n,t,i){return e&&n?i(e[t],n[t]):e?e[t]:n?n[t]:0}function Mo(e,n){let t=[],i=!1;return X(e)?(i=!0,t=e):t=od(e,n),t.length?new Tn({points:t,options:{tension:0},_loop:i,_fullLoop:i}):null}function Rs(e){return e&&e.fill!==!1}function rd(e,n,t){let a=e[n].fill,s=[n],o;if(!t)return a;for(;a!==!1&&s.indexOf(a)===-1;){if(!Z(a))return a;if(o=e[a],!o)return!1;if(o.visible)return a;s.push(a),a=o.fill}return!1}function ld(e,n,t){let i=fd(e);if(V(i))return isNaN(i.value)?!1:i;let a=parseFloat(i);return Z(a)&&Math.floor(a)===a?cd(i[0],n,a,t):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function cd(e,n,t,i){return(e==="-"||e==="+")&&(t=n+t),t===n||t<0||t>=i?!1:t}function dd(e,n){let t=null;return e==="start"?t=n.bottom:e==="end"?t=n.top:V(e)?t=n.getPixelForValue(e.value):n.getBasePixel&&(t=n.getBasePixel()),t}function hd(e,n,t){let i;return e==="start"?i=t:e==="end"?i=n.options.reverse?n.min:n.max:V(e)?i=e.value:i=n.getBaseValue(),i}function fd(e){let n=e.options,t=n.fill,i=F(t&&t.target,t);return i===void 0&&(i=!!n.backgroundColor),i===!1||i===null?!1:i===!0?"origin":i}function ud(e){let{scale:n,index:t,line:i}=e,a=[],s=i.segments,o=i.points,r=gd(n,t);r.push(Mo({x:null,y:n.bottom},i));for(let l=0;l<s.length;l++){let c=s[l];for(let d=c.start;d<=c.end;d++)pd(a,o[d],r)}return new Tn({points:a,options:{}})}function gd(e,n){let t=[],i=e.getMatchingVisibleMetas("line");for(let a=0;a<i.length;a++){let s=i[a];if(s.index===n)break;s.hidden||t.unshift(s.dataset)}return t}function pd(e,n,t){let i=[];for(let a=0;a<t.length;a++){let s=t[a],{first:o,last:r,point:l}=md(s,n,"x");if(!(!l||o&&r)){if(o)i.unshift(l);else if(e.push(l),!r)break}}e.push(...i)}function md(e,n,t){let i=e.interpolate(n,t);if(!i)return{};let a=i[t],s=e.segments,o=e.points,r=!1,l=!1;for(let c=0;c<s.length;c++){let d=s[c],h=o[d.start][t],f=o[d.end][t];if(vt(a,h,f)){r=a===h,l=a===f;break}}return{first:r,last:l,point:i}}var kn=class{constructor(n){this.x=n.x,this.y=n.y,this.radius=n.radius}pathSegment(n,t,i){let{x:a,y:s,radius:o}=this;return t=t||{start:0,end:q},n.arc(a,s,o,t.end,t.start,!0),!i.bounds}interpolate(n){let{x:t,y:i,radius:a}=this,s=n.angle;return{x:t+Math.cos(s)*a,y:i+Math.sin(s)*a,angle:s}}};function bd(e){let{chart:n,fill:t,line:i}=e;if(Z(t))return xd(n,t);if(t==="stack")return ud(e);if(t==="shape")return!0;let a=_d(e);return a instanceof kn?a:Mo(a,i)}function xd(e,n){let t=e.getDatasetMeta(n);return t&&e.isDatasetVisible(n)?t.dataset:null}function _d(e){return(e.scale||{}).getPointPositionForValue?vd(e):yd(e)}function yd(e){let{scale:n={},fill:t}=e,i=dd(t,n);if(Z(i)){let a=n.isHorizontal();return{x:a?i:null,y:a?null:i}}return null}function vd(e){let{scale:n,fill:t}=e,i=n.options,a=n.getLabels().length,s=i.reverse?n.max:n.min,o=hd(t,n,s),r=[];if(i.grid.circular){let l=n.getPointPositionForValue(0,s);return new kn({x:l.x,y:l.y,radius:n.getDistanceFromCenterForValue(o)})}for(let l=0;l<a;++l)r.push(n.getPointPositionForValue(l,o));return r}function Pi(e,n,t){let i=bd(n),{chart:a,index:s,line:o,scale:r,axis:l}=n,c=o.options,d=c.fill,h=c.backgroundColor,{above:f=h,below:u=h}=d||{},p=a.getDatasetMeta(s),g=pi(a,p);i&&o.points.length&&(Ie(e,t),Md(e,{line:o,target:i,above:f,below:u,area:t,scale:r,axis:l,clip:g}),je(e))}function Md(e,n){let{line:t,target:i,above:a,below:s,area:o,scale:r,clip:l}=n,c=t._loop?"angle":n.axis;e.save();let d=s;s!==a&&(c==="x"?(Ls(e,i,o.top),Oi(e,{line:t,target:i,color:a,scale:r,property:c,clip:l}),e.restore(),e.save(),Ls(e,i,o.bottom)):c==="y"&&(Ns(e,i,o.left),Oi(e,{line:t,target:i,color:s,scale:r,property:c,clip:l}),e.restore(),e.save(),Ns(e,i,o.right),d=a)),Oi(e,{line:t,target:i,color:d,scale:r,property:c,clip:l}),e.restore()}function Ls(e,n,t){let{segments:i,points:a}=n,s=!0,o=!1;e.beginPath();for(let r of i){let{start:l,end:c}=r,d=a[l],h=a[En(l,c,a)];s?(e.moveTo(d.x,d.y),s=!1):(e.lineTo(d.x,t),e.lineTo(d.x,d.y)),o=!!n.pathSegment(e,r,{move:o}),o?e.closePath():e.lineTo(h.x,t)}e.lineTo(n.first().x,t),e.closePath(),e.clip()}function Ns(e,n,t){let{segments:i,points:a}=n,s=!0,o=!1;e.beginPath();for(let r of i){let{start:l,end:c}=r,d=a[l],h=a[En(l,c,a)];s?(e.moveTo(d.x,d.y),s=!1):(e.lineTo(t,d.y),e.lineTo(d.x,d.y)),o=!!n.pathSegment(e,r,{move:o}),o?e.closePath():e.lineTo(t,h.y)}e.lineTo(t,n.first().y),e.closePath(),e.clip()}function Oi(e,n){let{line:t,target:i,property:a,color:s,scale:o,clip:r}=n,l=sd(t,i,a);for(let{source:c,target:d,start:h,end:f}of l){let{style:{backgroundColor:u=s}={}}=c,p=i!==!0;e.save(),e.fillStyle=u,Cd(e,o,r,p&&Vi(a,h,f)),e.beginPath();let g=!!t.pathSegment(e,c),m;if(p){g?e.closePath():Bs(e,i,f,a);let v=!!i.pathSegment(e,d,{move:g,reverse:!0});m=g&&v,m||Bs(e,i,h,a)}e.closePath(),e.fill(m?"evenodd":"nonzero"),e.restore()}}function Cd(e,n,t,i){let a=n.chart.chartArea,{property:s,start:o,end:r}=i||{};if(s==="x"||s==="y"){let l,c,d,h;s==="x"?(l=o,c=a.top,d=r,h=a.bottom):(l=a.left,c=o,d=a.right,h=r),e.beginPath(),t&&(l=Math.max(l,t.left),d=Math.min(d,t.right),c=Math.max(c,t.top),h=Math.min(h,t.bottom)),e.rect(l,c,d-l,h-c),e.clip()}}function Bs(e,n,t,i){let a=n.interpolate(t,i);a&&e.lineTo(a.x,a.y)}var Sd={id:"filler",afterDatasetsUpdate(e,n,t){let i=(e.data.datasets||[]).length,a=[],s,o,r,l;for(o=0;o<i;++o)s=e.getDatasetMeta(o),r=s.dataset,l=null,r&&r.options&&r instanceof Tn&&(l={visible:e.isDatasetVisible(o),index:o,fill:ld(r,o,i),chart:e,axis:s.controller.options.indexAxis,scale:s.vScale,line:r}),s.$filler=l,a.push(l);for(o=0;o<i;++o)l=a[o],!(!l||l.fill===!1)&&(l.fill=rd(a,o,t.propagate))},beforeDraw(e,n,t){let i=t.drawTime==="beforeDraw",a=e.getSortedVisibleDatasetMetas(),s=e.chartArea;for(let o=a.length-1;o>=0;--o){let r=a[o].$filler;r&&(r.line.updateControlPoints(s,r.axis),i&&r.fill&&Pi(e.ctx,r,s))}},beforeDatasetsDraw(e,n,t){if(t.drawTime!=="beforeDatasetsDraw")return;let i=e.getSortedVisibleDatasetMetas();for(let a=i.length-1;a>=0;--a){let s=i[a].$filler;Rs(s)&&Pi(e.ctx,s,e.chartArea)}},beforeDatasetDraw(e,n,t){let i=n.meta.$filler;!Rs(i)||t.drawTime!=="beforeDatasetDraw"||Pi(e.ctx,i,e.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}},Vs=(e,n)=>{let{boxHeight:t=n,boxWidth:i=n}=e;return e.usePointStyle&&(t=Math.min(t,n),i=e.pointStyleWidth||Math.min(i,n)),{boxWidth:i,boxHeight:t,itemHeight:Math.max(n,t)}},Pd=(e,n)=>e!==null&&n!==null&&e.datasetIndex===n.datasetIndex&&e.index===n.index,Dn=class extends pt{constructor(n){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=n.chart,this.options=n.options,this.ctx=n.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(n,t,i){this.maxWidth=n,this.maxHeight=t,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){let n=this.options.labels||{},t=G(n.generateLabels,[this.chart],this)||[];n.filter&&(t=t.filter(i=>n.filter(i,this.chart.data))),n.sort&&(t=t.sort((i,a)=>n.sort(i,a,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){let{options:n,ctx:t}=this;if(!n.display){this.width=this.height=0;return}let i=n.labels,a=nt(i.font),s=a.size,o=this._computeTitleHeight(),{boxWidth:r,itemHeight:l}=Vs(i,s),c,d;t.font=a.string,this.isHorizontal()?(c=this.maxWidth,d=this._fitRows(o,s,r,l)+10):(d=this.maxHeight,c=this._fitCols(o,a,r,l)+10),this.width=Math.min(c,n.maxWidth||this.maxWidth),this.height=Math.min(d,n.maxHeight||this.maxHeight)}_fitRows(n,t,i,a){let{ctx:s,maxWidth:o,options:{labels:{padding:r}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],d=a+r,h=n;s.textAlign="left",s.textBaseline="middle";let f=-1,u=-d;return this.legendItems.forEach((p,g)=>{let m=i+t/2+s.measureText(p.text).width;(g===0||c[c.length-1]+m+2*r>o)&&(h+=d,c[c.length-(g>0?0:1)]=0,u+=d,f++),l[g]={left:0,top:u,row:f,width:m,height:a},c[c.length-1]+=m+r}),h}_fitCols(n,t,i,a){let{ctx:s,maxHeight:o,options:{labels:{padding:r}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],d=o-n,h=r,f=0,u=0,p=0,g=0;return this.legendItems.forEach((m,v)=>{let{itemWidth:M,itemHeight:O}=Od(i,t,s,m,a);v>0&&u+O+2*r>d&&(h+=f+r,c.push({width:f,height:u}),p+=f+r,g++,f=u=0),l[v]={left:p,top:u,col:g,width:M,height:O},f=Math.max(f,M),u+=O+r}),h+=f,c.push({width:f,height:u}),h}adjustHitBoxes(){if(!this.options.display)return;let n=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:i,labels:{padding:a},rtl:s}}=this,o=ee(s,this.left,this.width);if(this.isHorizontal()){let r=0,l=ot(i,this.left+a,this.right-this.lineWidths[r]);for(let c of t)r!==c.row&&(r=c.row,l=ot(i,this.left+a,this.right-this.lineWidths[r])),c.top+=this.top+n+a,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+a}else{let r=0,l=ot(i,this.top+n+a,this.bottom-this.columnSizes[r].height);for(let c of t)c.col!==r&&(r=c.col,l=ot(i,this.top+n+a,this.bottom-this.columnSizes[r].height)),c.top=l,c.left+=this.left+a,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+a}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){let n=this.ctx;Ie(n,this),this._draw(),je(n)}}_draw(){let{options:n,columnSizes:t,lineWidths:i,ctx:a}=this,{align:s,labels:o}=n,r=K.color,l=ee(n.rtl,this.left,this.width),c=nt(o.font),{padding:d}=o,h=c.size,f=h/2,u;this.drawTitle(),a.textAlign=l.textAlign("left"),a.textBaseline="middle",a.lineWidth=.5,a.font=c.string;let{boxWidth:p,boxHeight:g,itemHeight:m}=Vs(o,h),v=function(C,k,w){if(isNaN(p)||p<=0||isNaN(g)||g<0)return;a.save();let D=F(w.lineWidth,1);if(a.fillStyle=F(w.fillStyle,r),a.lineCap=F(w.lineCap,"butt"),a.lineDashOffset=F(w.lineDashOffset,0),a.lineJoin=F(w.lineJoin,"miter"),a.lineWidth=D,a.strokeStyle=F(w.strokeStyle,r),a.setLineDash(F(w.lineDash,[])),o.usePointStyle){let I={radius:g*Math.SQRT2/2,pointStyle:w.pointStyle,rotation:w.rotation,borderWidth:D},E=l.xPlus(C,p/2),T=k+f;ii(a,I,E,T,o.pointStyleWidth&&p)}else{let I=k+Math.max((h-g)/2,0),E=l.leftForLtr(C,p),T=Lt(w.borderRadius);a.beginPath(),Object.values(T).some(j=>j!==0)?be(a,{x:E,y:I,w:p,h:g,radius:T}):a.rect(E,I,p,g),a.fill(),D!==0&&a.stroke()}a.restore()},M=function(C,k,w){Rt(a,w.text,C,k+m/2,c,{strikethrough:w.hidden,textAlign:l.textAlign(w.textAlign)})},O=this.isHorizontal(),S=this._computeTitleHeight();O?u={x:ot(s,this.left+d,this.right-i[0]),y:this.top+d+S,line:0}:u={x:this.left+d,y:ot(s,this.top+S+d,this.bottom-t[0].height),line:0},hi(this.ctx,n.textDirection);let _=m+d;this.legendItems.forEach((C,k)=>{a.strokeStyle=C.fontColor,a.fillStyle=C.fontColor;let w=a.measureText(C.text).width,D=l.textAlign(C.textAlign||(C.textAlign=o.textAlign)),I=p+f+w,E=u.x,T=u.y;l.setWidth(this.width),O?k>0&&E+I+d>this.right&&(T=u.y+=_,u.line++,E=u.x=ot(s,this.left+d,this.right-i[u.line])):k>0&&T+_>this.bottom&&(E=u.x=E+t[u.line].width+d,u.line++,T=u.y=ot(s,this.top+S+d,this.bottom-t[u.line].height));let j=l.x(E);if(v(j,T,C),E=Va(D,E+p+f,O?E+I:this.right,n.rtl),M(l.x(E),T,C),O)u.x+=I+d;else if(typeof C.text!="string"){let $=c.lineHeight;u.y+=Co(C,$)+d}else u.y+=_}),fi(this.ctx,n.textDirection)}drawTitle(){let n=this.options,t=n.title,i=nt(t.font),a=rt(t.padding);if(!t.display)return;let s=ee(n.rtl,this.left,this.width),o=this.ctx,r=t.position,l=i.size/2,c=a.top+l,d,h=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),d=this.top+c,h=ot(n.align,h,this.right-f);else{let p=this.columnSizes.reduce((g,m)=>Math.max(g,m.height),0);d=c+ot(n.align,this.top,this.bottom-p-n.labels.padding-this._computeTitleHeight())}let u=ot(r,h,h+f);o.textAlign=s.textAlign(ln(r)),o.textBaseline="middle",o.strokeStyle=t.color,o.fillStyle=t.color,o.font=i.string,Rt(o,t.text,u,d,i)}_computeTitleHeight(){let n=this.options.title,t=nt(n.font),i=rt(n.padding);return n.display?t.lineHeight+i.height:0}_getLegendItemAt(n,t){let i,a,s;if(vt(n,this.left,this.right)&&vt(t,this.top,this.bottom)){for(s=this.legendHitBoxes,i=0;i<s.length;++i)if(a=s[i],vt(n,a.left,a.left+a.width)&&vt(t,a.top,a.top+a.height))return this.legendItems[i]}return null}handleEvent(n){let t=this.options;if(!Dd(n.type,t))return;let i=this._getLegendItemAt(n.x,n.y);if(n.type==="mousemove"||n.type==="mouseout"){let a=this._hoveredItem,s=Pd(a,i);a&&!s&&G(t.onLeave,[n,a,this],this),this._hoveredItem=i,i&&!s&&G(t.onHover,[n,i,this],this)}else i&&G(t.onClick,[n,i,this],this)}};function Od(e,n,t,i,a){let s=wd(i,e,n,t),o=kd(a,i,n.lineHeight);return{itemWidth:s,itemHeight:o}}function wd(e,n,t,i){let a=e.text;return a&&typeof a!="string"&&(a=a.reduce((s,o)=>s.length>o.length?s:o)),n+t.size/2+i.measureText(a).width}function kd(e,n,t){let i=e;return typeof n.text!="string"&&(i=Co(n,t)),i}function Co(e,n){let t=e.text?e.text.length:0;return n*t}function Dd(e,n){return!!((e==="mousemove"||e==="mouseout")&&(n.onHover||n.onLeave)||n.onClick&&(e==="click"||e==="mouseup"))}var Td={id:"legend",_element:Dn,start(e,n,t){let i=e.legend=new Dn({ctx:e.ctx,options:t,chart:e});lt.configure(e,i,t),lt.addBox(e,i)},stop(e){lt.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,n,t){let i=e.legend;lt.configure(e,i,t),i.options=t},afterUpdate(e){let n=e.legend;n.buildLabels(),n.adjustHitBoxes()},afterEvent(e,n){n.replay||e.legend.handleEvent(n.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,n,t){let i=n.datasetIndex,a=t.chart;a.isDatasetVisible(i)?(a.hide(i),n.hidden=!0):(a.show(i),n.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){let n=e.data.datasets,{labels:{usePointStyle:t,pointStyle:i,textAlign:a,color:s,useBorderRadius:o,borderRadius:r}}=e.legend.options;return e._getSortedDatasetMetas().map(l=>{let c=l.controller.getStyle(t?0:void 0),d=rt(c.borderWidth);return{text:n[l.index].label,fillStyle:c.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(d.width+d.height)/4,strokeStyle:c.borderColor,pointStyle:i||c.pointStyle,rotation:c.rotation,textAlign:a||c.textAlign,borderRadius:o&&(r||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}},We=class extends pt{constructor(n){super(),this.chart=n.chart,this.options=n.options,this.ctx=n.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(n,t){let i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=n,this.height=this.bottom=t;let a=X(i.text)?i.text.length:1;this._padding=rt(i.padding);let s=a*nt(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){let n=this.options.position;return n==="top"||n==="bottom"}_drawArgs(n){let{top:t,left:i,bottom:a,right:s,options:o}=this,r=o.align,l=0,c,d,h;return this.isHorizontal()?(d=ot(r,i,s),h=t+n,c=s-i):(o.position==="left"?(d=i+n,h=ot(r,a,t),l=W*-.5):(d=s-n,h=ot(r,t,a),l=W*.5),c=a-t),{titleX:d,titleY:h,maxWidth:c,rotation:l}}draw(){let n=this.ctx,t=this.options;if(!t.display)return;let i=nt(t.font),s=i.lineHeight/2+this._padding.top,{titleX:o,titleY:r,maxWidth:l,rotation:c}=this._drawArgs(s);Rt(n,t.text,0,0,i,{color:t.color,maxWidth:l,rotation:c,textAlign:ln(t.align),textBaseline:"middle",translation:[o,r]})}};function Ed(e,n){let t=new We({ctx:e.ctx,options:n,chart:e});lt.configure(e,t,n),lt.addBox(e,t),e.titleBlock=t}var Ad={id:"title",_element:We,start(e,n,t){Ed(e,t)},stop(e){let n=e.titleBlock;lt.removeBox(e,n),delete e.titleBlock},beforeUpdate(e,n,t){let i=e.titleBlock;lt.configure(e,i,t),i.options=t},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},_n=new WeakMap,Id={id:"subtitle",start(e,n,t){let i=new We({ctx:e.ctx,options:t,chart:e});lt.configure(e,i,t),lt.addBox(e,i),_n.set(e,i)},stop(e){lt.removeBox(e,_n.get(e)),_n.delete(e)},beforeUpdate(e,n,t){let i=_n.get(e);lt.configure(e,i,t),i.options=t},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},Ve={average(e){if(!e.length)return!1;let n,t,i=new Set,a=0,s=0;for(n=0,t=e.length;n<t;++n){let r=e[n].element;if(r&&r.hasValue()){let l=r.tooltipPosition();i.add(l.x),a+=l.y,++s}}return s===0||i.size===0?!1:{x:[...i].reduce((r,l)=>r+l)/i.size,y:a/s}},nearest(e,n){if(!e.length)return!1;let t=n.x,i=n.y,a=Number.POSITIVE_INFINITY,s,o,r;for(s=0,o=e.length;s<o;++s){let l=e[s].element;if(l&&l.hasValue()){let c=l.getCenterPoint(),d=nn(n,c);d<a&&(a=d,r=l)}}if(r){let l=r.tooltipPosition();t=l.x,i=l.y}return{x:t,y:i}}};function Mt(e,n){return n&&(X(n)?Array.prototype.push.apply(e,n):e.push(n)),e}function Tt(e){return(typeof e=="string"||e instanceof String)&&e.indexOf(`
`)>-1?e.split(`
`):e}function jd(e,n){let{element:t,datasetIndex:i,index:a}=n,s=e.getDatasetMeta(i).controller,{label:o,value:r}=s.getLabelAndValue(a);return{chart:e,label:o,parsed:s.getParsed(a),raw:e.data.datasets[i].data[a],formattedValue:r,dataset:s.getDataset(),dataIndex:a,datasetIndex:i,element:t}}function Hs(e,n){let t=e.chart.ctx,{body:i,footer:a,title:s}=e,{boxWidth:o,boxHeight:r}=n,l=nt(n.bodyFont),c=nt(n.titleFont),d=nt(n.footerFont),h=s.length,f=a.length,u=i.length,p=rt(n.padding),g=p.height,m=0,v=i.reduce((S,_)=>S+_.before.length+_.lines.length+_.after.length,0);if(v+=e.beforeBody.length+e.afterBody.length,h&&(g+=h*c.lineHeight+(h-1)*n.titleSpacing+n.titleMarginBottom),v){let S=n.displayColors?Math.max(r,l.lineHeight):l.lineHeight;g+=u*S+(v-u)*l.lineHeight+(v-1)*n.bodySpacing}f&&(g+=n.footerMarginTop+f*d.lineHeight+(f-1)*n.footerSpacing);let M=0,O=function(S){m=Math.max(m,t.measureText(S).width+M)};return t.save(),t.font=c.string,U(e.title,O),t.font=l.string,U(e.beforeBody.concat(e.afterBody),O),M=n.displayColors?o+2+n.boxPadding:0,U(i,S=>{U(S.before,O),U(S.lines,O),U(S.after,O)}),M=0,t.font=d.string,U(e.footer,O),t.restore(),m+=p.width,{width:m,height:g}}function zd(e,n){let{y:t,height:i}=n;return t<i/2?"top":t>e.height-i/2?"bottom":"center"}function Fd(e,n,t,i){let{x:a,width:s}=i,o=t.caretSize+t.caretPadding;if(e==="left"&&a+s+o>n.width||e==="right"&&a-s-o<0)return!0}function Rd(e,n,t,i){let{x:a,width:s}=t,{width:o,chartArea:{left:r,right:l}}=e,c="center";return i==="center"?c=a<=(r+l)/2?"left":"right":a<=s/2?c="left":a>=o-s/2&&(c="right"),Fd(c,e,n,t)&&(c="center"),c}function Ws(e,n,t){let i=t.yAlign||n.yAlign||zd(e,t);return{xAlign:t.xAlign||n.xAlign||Rd(e,n,t,i),yAlign:i}}function Ld(e,n){let{x:t,width:i}=e;return n==="right"?t-=i:n==="center"&&(t-=i/2),t}function Nd(e,n,t){let{y:i,height:a}=e;return n==="top"?i+=t:n==="bottom"?i-=a+t:i-=a/2,i}function $s(e,n,t,i){let{caretSize:a,caretPadding:s,cornerRadius:o}=e,{xAlign:r,yAlign:l}=t,c=a+s,{topLeft:d,topRight:h,bottomLeft:f,bottomRight:u}=Lt(o),p=Ld(n,r),g=Nd(n,l,c);return l==="center"?r==="left"?p+=c:r==="right"&&(p-=c):r==="left"?p-=Math.max(d,f)+a:r==="right"&&(p+=Math.max(h,u)+a),{x:at(p,0,i.width-n.width),y:at(g,0,i.height-n.height)}}function yn(e,n,t){let i=rt(t.padding);return n==="center"?e.x+e.width/2:n==="right"?e.x+e.width-i.right:e.x+i.left}function Ys(e){return Mt([],Tt(e))}function Bd(e,n,t){return kt(e,{tooltip:n,tooltipItems:t,type:"tooltip"})}function Us(e,n){let t=n&&n.dataset&&n.dataset.tooltip&&n.dataset.tooltip.callbacks;return t?e.override(t):e}var So={beforeTitle:yt,title(e){if(e.length>0){let n=e[0],t=n.chart.data.labels,i=t?t.length:0;if(this&&this.options&&this.options.mode==="dataset")return n.dataset.label||"";if(n.label)return n.label;if(i>0&&n.dataIndex<i)return t[n.dataIndex]}return""},afterTitle:yt,beforeBody:yt,beforeLabel:yt,label(e){if(this&&this.options&&this.options.mode==="dataset")return e.label+": "+e.formattedValue||e.formattedValue;let n=e.dataset.label||"";n&&(n+=": ");let t=e.formattedValue;return B(t)||(n+=t),n},labelColor(e){let t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){let t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:yt,afterBody:yt,beforeFooter:yt,footer:yt,afterFooter:yt};function dt(e,n,t,i){let a=e[n].call(t,i);return typeof a>"u"?So[n].call(t,i):a}var Gs=(()=>{class e extends pt{static positioners=Ve;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){let t=this._cachedAnimations;if(t)return t;let i=this.chart,a=this.options.setContext(this.getContext()),s=a.enabled&&i.options.animation&&a.animations,o=new Sn(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=Bd(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,i){let{callbacks:a}=i,s=dt(a,"beforeTitle",this,t),o=dt(a,"title",this,t),r=dt(a,"afterTitle",this,t),l=[];return l=Mt(l,Tt(s)),l=Mt(l,Tt(o)),l=Mt(l,Tt(r)),l}getBeforeBody(t,i){return Ys(dt(i.callbacks,"beforeBody",this,t))}getBody(t,i){let{callbacks:a}=i,s=[];return U(t,o=>{let r={before:[],lines:[],after:[]},l=Us(a,o);Mt(r.before,Tt(dt(l,"beforeLabel",this,o))),Mt(r.lines,dt(l,"label",this,o)),Mt(r.after,Tt(dt(l,"afterLabel",this,o))),s.push(r)}),s}getAfterBody(t,i){return Ys(dt(i.callbacks,"afterBody",this,t))}getFooter(t,i){let{callbacks:a}=i,s=dt(a,"beforeFooter",this,t),o=dt(a,"footer",this,t),r=dt(a,"afterFooter",this,t),l=[];return l=Mt(l,Tt(s)),l=Mt(l,Tt(o)),l=Mt(l,Tt(r)),l}_createItems(t){let i=this._active,a=this.chart.data,s=[],o=[],r=[],l=[],c,d;for(c=0,d=i.length;c<d;++c)l.push(jd(this.chart,i[c]));return t.filter&&(l=l.filter((h,f,u)=>t.filter(h,f,u,a))),t.itemSort&&(l=l.sort((h,f)=>t.itemSort(h,f,a))),U(l,h=>{let f=Us(t.callbacks,h);s.push(dt(f,"labelColor",this,h)),o.push(dt(f,"labelPointStyle",this,h)),r.push(dt(f,"labelTextColor",this,h))}),this.labelColors=s,this.labelPointStyles=o,this.labelTextColors=r,this.dataPoints=l,l}update(t,i){let a=this.options.setContext(this.getContext()),s=this._active,o,r=[];if(!s.length)this.opacity!==0&&(o={opacity:0});else{let l=Ve[a.position].call(this,s,this._eventPosition);r=this._createItems(a),this.title=this.getTitle(r,a),this.beforeBody=this.getBeforeBody(r,a),this.body=this.getBody(r,a),this.afterBody=this.getAfterBody(r,a),this.footer=this.getFooter(r,a);let c=this._size=Hs(this,a),d=Object.assign({},l,c),h=Ws(this.chart,a,d),f=$s(a,d,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,o={opacity:1,x:f.x,y:f.y,width:c.width,height:c.height,caretX:l.x,caretY:l.y}}this._tooltipItems=r,this.$context=void 0,o&&this._resolveAnimations().update(this,o),t&&a.external&&a.external.call(this,{chart:this.chart,tooltip:this,replay:i})}drawCaret(t,i,a,s){let o=this.getCaretPosition(t,a,s);i.lineTo(o.x1,o.y1),i.lineTo(o.x2,o.y2),i.lineTo(o.x3,o.y3)}getCaretPosition(t,i,a){let{xAlign:s,yAlign:o}=this,{caretSize:r,cornerRadius:l}=a,{topLeft:c,topRight:d,bottomLeft:h,bottomRight:f}=Lt(l),{x:u,y:p}=t,{width:g,height:m}=i,v,M,O,S,_,C;return o==="center"?(_=p+m/2,s==="left"?(v=u,M=v-r,S=_+r,C=_-r):(v=u+g,M=v+r,S=_-r,C=_+r),O=v):(s==="left"?M=u+Math.max(c,h)+r:s==="right"?M=u+g-Math.max(d,f)-r:M=this.caretX,o==="top"?(S=p,_=S-r,v=M-r,O=M+r):(S=p+m,_=S+r,v=M+r,O=M-r),C=S),{x1:v,x2:M,x3:O,y1:S,y2:_,y3:C}}drawTitle(t,i,a){let s=this.title,o=s.length,r,l,c;if(o){let d=ee(a.rtl,this.x,this.width);for(t.x=yn(this,a.titleAlign,a),i.textAlign=d.textAlign(a.titleAlign),i.textBaseline="middle",r=nt(a.titleFont),l=a.titleSpacing,i.fillStyle=a.titleColor,i.font=r.string,c=0;c<o;++c)i.fillText(s[c],d.x(t.x),t.y+r.lineHeight/2),t.y+=r.lineHeight+l,c+1===o&&(t.y+=a.titleMarginBottom-l)}}_drawColorBox(t,i,a,s,o){let r=this.labelColors[a],l=this.labelPointStyles[a],{boxHeight:c,boxWidth:d}=o,h=nt(o.bodyFont),f=yn(this,"left",o),u=s.x(f),p=c<h.lineHeight?(h.lineHeight-c)/2:0,g=i.y+p;if(o.usePointStyle){let m={radius:Math.min(d,c)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},v=s.leftForLtr(u,d)+d/2,M=g+c/2;t.strokeStyle=o.multiKeyBackground,t.fillStyle=o.multiKeyBackground,dn(t,m,v,M),t.strokeStyle=r.borderColor,t.fillStyle=r.backgroundColor,dn(t,m,v,M)}else{t.lineWidth=V(r.borderWidth)?Math.max(...Object.values(r.borderWidth)):r.borderWidth||1,t.strokeStyle=r.borderColor,t.setLineDash(r.borderDash||[]),t.lineDashOffset=r.borderDashOffset||0;let m=s.leftForLtr(u,d),v=s.leftForLtr(s.xPlus(u,1),d-2),M=Lt(r.borderRadius);Object.values(M).some(O=>O!==0)?(t.beginPath(),t.fillStyle=o.multiKeyBackground,be(t,{x:m,y:g,w:d,h:c,radius:M}),t.fill(),t.stroke(),t.fillStyle=r.backgroundColor,t.beginPath(),be(t,{x:v,y:g+1,w:d-2,h:c-2,radius:M}),t.fill()):(t.fillStyle=o.multiKeyBackground,t.fillRect(m,g,d,c),t.strokeRect(m,g,d,c),t.fillStyle=r.backgroundColor,t.fillRect(v,g+1,d-2,c-2))}t.fillStyle=this.labelTextColors[a]}drawBody(t,i,a){let{body:s}=this,{bodySpacing:o,bodyAlign:r,displayColors:l,boxHeight:c,boxWidth:d,boxPadding:h}=a,f=nt(a.bodyFont),u=f.lineHeight,p=0,g=ee(a.rtl,this.x,this.width),m=function(D){i.fillText(D,g.x(t.x+p),t.y+u/2),t.y+=u+o},v=g.textAlign(r),M,O,S,_,C,k,w;for(i.textAlign=r,i.textBaseline="middle",i.font=f.string,t.x=yn(this,v,a),i.fillStyle=a.bodyColor,U(this.beforeBody,m),p=l&&v!=="right"?r==="center"?d/2+h:d+2+h:0,_=0,k=s.length;_<k;++_){for(M=s[_],O=this.labelTextColors[_],i.fillStyle=O,U(M.before,m),S=M.lines,l&&S.length&&(this._drawColorBox(i,t,_,g,a),u=Math.max(f.lineHeight,c)),C=0,w=S.length;C<w;++C)m(S[C]),u=f.lineHeight;U(M.after,m)}p=0,u=f.lineHeight,U(this.afterBody,m),t.y-=o}drawFooter(t,i,a){let s=this.footer,o=s.length,r,l;if(o){let c=ee(a.rtl,this.x,this.width);for(t.x=yn(this,a.footerAlign,a),t.y+=a.footerMarginTop,i.textAlign=c.textAlign(a.footerAlign),i.textBaseline="middle",r=nt(a.footerFont),i.fillStyle=a.footerColor,i.font=r.string,l=0;l<o;++l)i.fillText(s[l],c.x(t.x),t.y+r.lineHeight/2),t.y+=r.lineHeight+a.footerSpacing}}drawBackground(t,i,a,s){let{xAlign:o,yAlign:r}=this,{x:l,y:c}=t,{width:d,height:h}=a,{topLeft:f,topRight:u,bottomLeft:p,bottomRight:g}=Lt(s.cornerRadius);i.fillStyle=s.backgroundColor,i.strokeStyle=s.borderColor,i.lineWidth=s.borderWidth,i.beginPath(),i.moveTo(l+f,c),r==="top"&&this.drawCaret(t,i,a,s),i.lineTo(l+d-u,c),i.quadraticCurveTo(l+d,c,l+d,c+u),r==="center"&&o==="right"&&this.drawCaret(t,i,a,s),i.lineTo(l+d,c+h-g),i.quadraticCurveTo(l+d,c+h,l+d-g,c+h),r==="bottom"&&this.drawCaret(t,i,a,s),i.lineTo(l+p,c+h),i.quadraticCurveTo(l,c+h,l,c+h-p),r==="center"&&o==="left"&&this.drawCaret(t,i,a,s),i.lineTo(l,c+f),i.quadraticCurveTo(l,c,l+f,c),i.closePath(),i.fill(),s.borderWidth>0&&i.stroke()}_updateAnimationTarget(t){let i=this.chart,a=this.$animations,s=a&&a.x,o=a&&a.y;if(s||o){let r=Ve[t.position].call(this,this._active,this._eventPosition);if(!r)return;let l=this._size=Hs(this,t),c=Object.assign({},r,this._size),d=Ws(i,t,c),h=$s(t,c,d,i);(s._to!==h.x||o._to!==h.y)&&(this.xAlign=d.xAlign,this.yAlign=d.yAlign,this.width=l.width,this.height=l.height,this.caretX=r.x,this.caretY=r.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(t){let i=this.options.setContext(this.getContext()),a=this.opacity;if(!a)return;this._updateAnimationTarget(i);let s={width:this.width,height:this.height},o={x:this.x,y:this.y};a=Math.abs(a)<.001?0:a;let r=rt(i.padding),l=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;i.enabled&&l&&(t.save(),t.globalAlpha=a,this.drawBackground(o,t,s,i),hi(t,i.textDirection),o.y+=r.top,this.drawTitle(o,t,i),this.drawBody(o,t,i),this.drawFooter(o,t,i),fi(t,i.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,i){let a=this._active,s=t.map(({datasetIndex:l,index:c})=>{let d=this.chart.getDatasetMeta(l);if(!d)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:d.data[c],index:c}}),o=!Ee(a,s),r=this._positionChanged(s,i);(o||r)&&(this._active=s,this._eventPosition=i,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,i,a=!0){if(i&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;let s=this.options,o=this._active||[],r=this._getActiveElements(t,o,i,a),l=this._positionChanged(r,t),c=i||!Ee(r,o)||l;return c&&(this._active=r,(s.enabled||s.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,i))),c}_getActiveElements(t,i,a,s){let o=this.options;if(t.type==="mouseout")return[];if(!s)return i.filter(l=>this.chart.data.datasets[l.datasetIndex]&&this.chart.getDatasetMeta(l.datasetIndex).controller.getParsed(l.index)!==void 0);let r=this.chart.getElementsAtEventForMode(t,o.mode,o,a);return o.reverse&&r.reverse(),r}_positionChanged(t,i){let{caretX:a,caretY:s,options:o}=this,r=Ve[o.position].call(this,t,i);return r!==!1&&(a!==r.x||s!==r.y)}}return e})(),Vd={id:"tooltip",_element:Gs,positioners:Ve,afterInit(e,n,t){t&&(e.tooltip=new Gs({chart:e,options:t}))},beforeUpdate(e,n,t){e.tooltip&&e.tooltip.initialize(t)},reset(e,n,t){e.tooltip&&e.tooltip.initialize(t)},afterDraw(e){let n=e.tooltip;if(n&&n._willRender()){let t={tooltip:n};if(e.notifyPlugins("beforeTooltipDraw",Ut(Yt({},t),{cancelable:!0}))===!1)return;n.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",t)}},afterEvent(e,n){if(e.tooltip){let t=n.replay;e.tooltip.handleEvent(n.event,t,n.inChartArea)&&(n.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,n)=>n.bodyFont.size,boxWidth:(e,n)=>n.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:So},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>e!=="filter"&&e!=="itemSort"&&e!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},Hd=Object.freeze({__proto__:null,Colors:td,Decimation:ad,Filler:Sd,Legend:Td,SubTitle:Id,Title:Ad,Tooltip:Vd}),Wd=(e,n,t,i)=>(typeof n=="string"?(t=e.push(n)-1,i.unshift({index:t,label:n})):isNaN(n)&&(t=null),t);function $d(e,n,t,i){let a=e.indexOf(n);if(a===-1)return Wd(e,n,t,i);let s=e.lastIndexOf(n);return a!==s?t:a}var Yd=(e,n)=>e===null?null:at(Math.round(e),0,n);function Xs(e){let n=this.getLabels();return e>=0&&e<n.length?n[e]:e}var Ud=(()=>{class e extends ae{static id="category";static defaults={ticks:{callback:Xs}};constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){let i=this._addedLabels;if(i.length){let a=this.getLabels();for(let{index:s,label:o}of i)a[s]===o&&a.splice(s,1);this._addedLabels=[]}super.init(t)}parse(t,i){if(B(t))return null;let a=this.getLabels();return i=isFinite(i)&&a[i]===t?i:$d(a,t,F(i,t),this._addedLabels),Yd(i,a.length-1)}determineDataLimits(){let{minDefined:t,maxDefined:i}=this.getUserBounds(),{min:a,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(a=0),i||(s=this.getLabels().length-1)),this.min=a,this.max=s}buildTicks(){let t=this.min,i=this.max,a=this.options.offset,s=[],o=this.getLabels();o=t===0&&i===o.length-1?o:o.slice(t,i+1),this._valueRange=Math.max(o.length-(a?0:1),1),this._startValue=this.min-(a?.5:0);for(let r=t;r<=i;r++)s.push({value:r});return s}getLabelForValue(t){return Xs.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){let i=this.ticks;return t<0||t>i.length-1?null:this.getPixelForValue(i[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}return e})();function Gd(e,n){let t=[],{bounds:a,step:s,min:o,max:r,precision:l,count:c,maxTicks:d,maxDigits:h,includeBounds:f}=e,u=s||1,p=d-1,{min:g,max:m}=n,v=!B(o),M=!B(r),O=!B(c),S=(m-g)/(h+1),_=$n((m-g)/p/u)*u,C,k,w,D;if(_<1e-14&&!v&&!M)return[{value:g},{value:m}];D=Math.ceil(m/_)-Math.floor(g/_),D>p&&(_=$n(D*_/p/u)*u),B(l)||(C=Math.pow(10,l),_=Math.ceil(_*C)/C),a==="ticks"?(k=Math.floor(g/_)*_,w=Math.ceil(m/_)*_):(k=g,w=m),v&&M&&s&&ja((r-o)/s,_/1e3)?(D=Math.round(Math.min((r-o)/_,d)),_=(r-o)/D,k=o,w=r):O?(k=v?o:k,w=M?r:w,D=c-1,_=(w-k)/D):(D=(w-k)/_,ge(D,Math.round(D),_/1e3)?D=Math.round(D):D=Math.ceil(D));let I=Math.max(Un(_),Un(k));C=Math.pow(10,B(l)?I:l),k=Math.round(k*C)/C,w=Math.round(w*C)/C;let E=0;for(v&&(f&&k!==o?(t.push({value:o}),k<o&&E++,ge(Math.round((k+E*_)*C)/C,o,qs(o,S,e))&&E++):k<o&&E++);E<D;++E){let T=Math.round((k+E*_)*C)/C;if(M&&T>r)break;t.push({value:T})}return M&&f&&w!==r?t.length&&ge(t[t.length-1].value,r,qs(r,S,e))?t[t.length-1].value=r:t.push({value:r}):(!M||w===r)&&t.push({value:w}),t}function qs(e,n,{horizontal:t,minRotation:i}){let a=ut(i),s=(t?Math.sin(a):Math.cos(a))||.001,o=.75*n*(""+e).length;return Math.min(n/s,o)}var ve=class extends ae{constructor(n){super(n),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(n,t){return B(n)||(typeof n=="number"||n instanceof Number)&&!isFinite(+n)?null:+n}handleTickRangeOptions(){let{beginAtZero:n}=this.options,{minDefined:t,maxDefined:i}=this.getUserBounds(),{min:a,max:s}=this,o=l=>a=t?a:l,r=l=>s=i?s:l;if(n){let l=gt(a),c=gt(s);l<0&&c<0?r(0):l>0&&c>0&&o(0)}if(a===s){let l=s===0?1:Math.abs(s*.05);r(s+l),n||o(a-l)}this.min=a,this.max=s}getTickLimit(){let n=this.options.ticks,{maxTicksLimit:t,stepSize:i}=n,a;return i?(a=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,a>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${a} ticks. Limiting to 1000.`),a=1e3)):(a=this.computeTickLimit(),t=t||11),t&&(a=Math.min(t,a)),a}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){let n=this.options,t=n.ticks,i=this.getTickLimit();i=Math.max(2,i);let a={maxTicks:i,bounds:n.bounds,min:n.min,max:n.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:t.includeBounds!==!1},s=this._range||this,o=Gd(a,s);return n.bounds==="ticks"&&Yn(o,this,"value"),n.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){let n=this.ticks,t=this.min,i=this.max;if(super.configure(),this.options.offset&&n.length){let a=(i-t)/Math.max(n.length-1,1)/2;t-=a,i+=a}this._startValue=t,this._endValue=i,this._valueRange=i-t}getLabelForValue(n){return me(n,this.chart.options.locale,this.options.ticks.format)}},Hi=class extends ve{static id="linear";static defaults={ticks:{callback:Ae.formatters.numeric}};determineDataLimits(){let{min:n,max:t}=this.getMinMax(!0);this.min=Z(n)?n:0,this.max=Z(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){let n=this.isHorizontal(),t=n?this.width:this.height,i=ut(this.options.ticks.minRotation),a=(n?Math.sin(i):Math.cos(i))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,s.lineHeight/a))}getPixelForValue(n){return n===null?NaN:this.getPixelForDecimal((n-this._startValue)/this._valueRange)}getValueForPixel(n){return this._startValue+this.getDecimalForPixel(n)*this._valueRange}},$e=e=>Math.floor(Ot(e)),ie=(e,n)=>Math.pow(10,$e(e)+n);function Ks(e){return e/Math.pow(10,$e(e))===1}function Js(e,n,t){let i=Math.pow(10,t),a=Math.floor(e/i);return Math.ceil(n/i)-a}function Xd(e,n){let t=n-e,i=$e(t);for(;Js(e,n,i)>10;)i++;for(;Js(e,n,i)<10;)i--;return Math.min(i,$e(e))}function qd(e,{min:n,max:t}){n=ct(e.min,n);let i=[],a=$e(n),s=Xd(n,t),o=s<0?Math.pow(10,Math.abs(s)):1,r=Math.pow(10,s),l=a>s?Math.pow(10,a):0,c=Math.round((n-l)*o)/o,d=Math.floor((n-l)/r/10)*r*10,h=Math.floor((c-d)/Math.pow(10,s)),f=ct(e.min,Math.round((l+d+h*Math.pow(10,s))*o)/o);for(;f<t;)i.push({value:f,major:Ks(f),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(s++,h=2,o=s>=0?1:o),f=Math.round((l+d+h*Math.pow(10,s))*o)/o;let u=ct(e.max,f);return i.push({value:u,major:Ks(u),significand:h}),i}var Wi=class extends ae{static id="logarithmic";static defaults={ticks:{callback:Ae.formatters.logarithmic,major:{enabled:!0}}};constructor(n){super(n),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(n,t){let i=ve.prototype.parse.apply(this,[n,t]);if(i===0){this._zero=!0;return}return Z(i)&&i>0?i:null}determineDataLimits(){let{min:n,max:t}=this.getMinMax(!0);this.min=Z(n)?Math.max(0,n):null,this.max=Z(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Z(this._userMin)&&(this.min=n===ie(this.min,0)?ie(this.min,-1):ie(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){let{minDefined:n,maxDefined:t}=this.getUserBounds(),i=this.min,a=this.max,s=r=>i=n?i:r,o=r=>a=t?a:r;i===a&&(i<=0?(s(1),o(10)):(s(ie(i,-1)),o(ie(a,1)))),i<=0&&s(ie(a,-1)),a<=0&&o(ie(i,1)),this.min=i,this.max=a}buildTicks(){let n=this.options,t={min:this._userMin,max:this._userMax},i=qd(t,this);return n.bounds==="ticks"&&Yn(i,this,"value"),n.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(n){return n===void 0?"0":me(n,this.chart.options.locale,this.options.ticks.format)}configure(){let n=this.min;super.configure(),this._startValue=Ot(n),this._valueRange=Ot(this.max)-Ot(n)}getPixelForValue(n){return(n===void 0||n===0)&&(n=this.min),n===null||isNaN(n)?NaN:this.getPixelForDecimal(n===this.min?0:(Ot(n)-this._startValue)/this._valueRange)}getValueForPixel(n){let t=this.getDecimalForPixel(n);return Math.pow(10,this._startValue+t*this._valueRange)}};function $i(e){let n=e.ticks;if(n.display&&e.display){let t=rt(n.backdropPadding);return F(n.font&&n.font.size,K.font.size)+t.height}return 0}function Kd(e,n,t){return t=X(t)?t:[t],{w:Wa(e,n.string,t),h:t.length*n.lineHeight}}function Zs(e,n,t,i,a){return e===i||e===a?{start:n-t/2,end:n+t/2}:e<i||e>a?{start:n-t,end:n}:{start:n,end:n+t}}function Jd(e){let n={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},t=Object.assign({},n),i=[],a=[],s=e._pointLabels.length,o=e.options.pointLabels,r=o.centerPointLabels?W/s:0;for(let l=0;l<s;l++){let c=o.setContext(e.getPointLabelContext(l));a[l]=c.padding;let d=e.getPointPosition(l,e.drawingArea+a[l],r),h=nt(c.font),f=Kd(e.ctx,h,e._pointLabels[l]);i[l]=f;let u=st(e.getIndexAngle(l)+r),p=Math.round(on(u)),g=Zs(p,d.x,f.w,0,180),m=Zs(p,d.y,f.h,90,270);Zd(t,n,u,g,m)}e.setCenterPoint(n.l-t.l,t.r-n.r,n.t-t.t,t.b-n.b),e._pointLabelItems=eh(e,i,a)}function Zd(e,n,t,i,a){let s=Math.abs(Math.sin(t)),o=Math.abs(Math.cos(t)),r=0,l=0;i.start<n.l?(r=(n.l-i.start)/s,e.l=Math.min(e.l,n.l-r)):i.end>n.r&&(r=(i.end-n.r)/s,e.r=Math.max(e.r,n.r+r)),a.start<n.t?(l=(n.t-a.start)/o,e.t=Math.min(e.t,n.t-l)):a.end>n.b&&(l=(a.end-n.b)/o,e.b=Math.max(e.b,n.b+l))}function Qd(e,n,t){let i=e.drawingArea,{extra:a,additionalAngle:s,padding:o,size:r}=t,l=e.getPointPosition(n,i+a+o,s),c=Math.round(on(st(l.angle+tt))),d=ah(l.y,r.h,c),h=nh(c),f=ih(l.x,r.w,h);return{visible:!0,x:l.x,y:d,textAlign:h,left:f,top:d,right:f+r.w,bottom:d+r.h}}function th(e,n){if(!n)return!0;let{left:t,top:i,right:a,bottom:s}=e;return!(_t({x:t,y:i},n)||_t({x:t,y:s},n)||_t({x:a,y:i},n)||_t({x:a,y:s},n))}function eh(e,n,t){let i=[],a=e._pointLabels.length,s=e.options,{centerPointLabels:o,display:r}=s.pointLabels,l={extra:$i(s)/2,additionalAngle:o?W/a:0},c;for(let d=0;d<a;d++){l.padding=t[d],l.size=n[d];let h=Qd(e,d,l);i.push(h),r==="auto"&&(h.visible=th(h,c),h.visible&&(c=h))}return i}function nh(e){return e===0||e===180?"center":e<180?"left":"right"}function ih(e,n,t){return t==="right"?e-=n:t==="center"&&(e-=n/2),e}function ah(e,n,t){return t===90||t===270?e-=n/2:(t>270||t<90)&&(e-=n),e}function sh(e,n,t){let{left:i,top:a,right:s,bottom:o}=t,{backdropColor:r}=n;if(!B(r)){let l=Lt(n.borderRadius),c=rt(n.backdropPadding);e.fillStyle=r;let d=i-c.left,h=a-c.top,f=s-i+c.width,u=o-a+c.height;Object.values(l).some(p=>p!==0)?(e.beginPath(),be(e,{x:d,y:h,w:f,h:u,radius:l}),e.fill()):e.fillRect(d,h,f,u)}}function oh(e,n){let{ctx:t,options:{pointLabels:i}}=e;for(let a=n-1;a>=0;a--){let s=e._pointLabelItems[a];if(!s.visible)continue;let o=i.setContext(e.getPointLabelContext(a));sh(t,o,s);let r=nt(o.font),{x:l,y:c,textAlign:d}=s;Rt(t,e._pointLabels[a],l,c+r.lineHeight/2,r,{color:o.color,textAlign:d,textBaseline:"middle"})}}function Po(e,n,t,i){let{ctx:a}=e;if(t)a.arc(e.xCenter,e.yCenter,n,0,q);else{let s=e.getPointPosition(0,n);a.moveTo(s.x,s.y);for(let o=1;o<i;o++)s=e.getPointPosition(o,n),a.lineTo(s.x,s.y)}}function rh(e,n,t,i,a){let s=e.ctx,o=n.circular,{color:r,lineWidth:l}=n;!o&&!i||!r||!l||t<0||(s.save(),s.strokeStyle=r,s.lineWidth=l,s.setLineDash(a.dash||[]),s.lineDashOffset=a.dashOffset,s.beginPath(),Po(e,t,o,i),s.closePath(),s.stroke(),s.restore())}function lh(e,n,t){return kt(e,{label:t,index:n,type:"pointLabel"})}var Yi=class extends ve{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Ae.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(n){return n},padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(n){super(n),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){let n=this._padding=rt($i(this.options)/2),t=this.width=this.maxWidth-n.width,i=this.height=this.maxHeight-n.height;this.xCenter=Math.floor(this.left+t/2+n.left),this.yCenter=Math.floor(this.top+i/2+n.top),this.drawingArea=Math.floor(Math.min(t,i)/2)}determineDataLimits(){let{min:n,max:t}=this.getMinMax(!1);this.min=Z(n)&&!isNaN(n)?n:0,this.max=Z(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/$i(this.options))}generateTickLabels(n){ve.prototype.generateTickLabels.call(this,n),this._pointLabels=this.getLabels().map((t,i)=>{let a=G(this.options.pointLabels.callback,[t,i],this);return a||a===0?a:""}).filter((t,i)=>this.chart.getDataVisibility(i))}fit(){let n=this.options;n.display&&n.pointLabels.display?Jd(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(n,t,i,a){this.xCenter+=Math.floor((n-t)/2),this.yCenter+=Math.floor((i-a)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(n,t,i,a))}getIndexAngle(n){let t=q/(this._pointLabels.length||1),i=this.options.startAngle||0;return st(n*t+ut(i))}getDistanceFromCenterForValue(n){if(B(n))return NaN;let t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-n)*t:(n-this.min)*t}getValueForDistanceFromCenter(n){if(B(n))return NaN;let t=n/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(n){let t=this._pointLabels||[];if(n>=0&&n<t.length){let i=t[n];return lh(this.getContext(),n,i)}}getPointPosition(n,t,i=0){let a=this.getIndexAngle(n)-tt+i;return{x:Math.cos(a)*t+this.xCenter,y:Math.sin(a)*t+this.yCenter,angle:a}}getPointPositionForValue(n,t){return this.getPointPosition(n,this.getDistanceFromCenterForValue(t))}getBasePosition(n){return this.getPointPositionForValue(n||0,this.getBaseValue())}getPointLabelPosition(n){let{left:t,top:i,right:a,bottom:s}=this._pointLabelItems[n];return{left:t,top:i,right:a,bottom:s}}drawBackground(){let{backgroundColor:n,grid:{circular:t}}=this.options;if(n){let i=this.ctx;i.save(),i.beginPath(),Po(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),i.closePath(),i.fillStyle=n,i.fill(),i.restore()}}drawGrid(){let n=this.ctx,t=this.options,{angleLines:i,grid:a,border:s}=t,o=this._pointLabels.length,r,l,c;if(t.pointLabels.display&&oh(this,o),a.display&&this.ticks.forEach((d,h)=>{if(h!==0||h===0&&this.min<0){l=this.getDistanceFromCenterForValue(d.value);let f=this.getContext(h),u=a.setContext(f),p=s.setContext(f);rh(this,u,l,o,p)}}),i.display){for(n.save(),r=o-1;r>=0;r--){let d=i.setContext(this.getPointLabelContext(r)),{color:h,lineWidth:f}=d;!f||!h||(n.lineWidth=f,n.strokeStyle=h,n.setLineDash(d.borderDash),n.lineDashOffset=d.borderDashOffset,l=this.getDistanceFromCenterForValue(t.reverse?this.min:this.max),c=this.getPointPosition(r,l),n.beginPath(),n.moveTo(this.xCenter,this.yCenter),n.lineTo(c.x,c.y),n.stroke())}n.restore()}}drawBorder(){}drawLabels(){let n=this.ctx,t=this.options,i=t.ticks;if(!i.display)return;let a=this.getIndexAngle(0),s,o;n.save(),n.translate(this.xCenter,this.yCenter),n.rotate(a),n.textAlign="center",n.textBaseline="middle",this.ticks.forEach((r,l)=>{if(l===0&&this.min>=0&&!t.reverse)return;let c=i.setContext(this.getContext(l)),d=nt(c.font);if(s=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){n.font=d.string,o=n.measureText(r.label).width,n.fillStyle=c.backdropColor;let h=rt(c.backdropPadding);n.fillRect(-o/2-h.left,-s-d.size/2-h.top,o+h.width,d.size+h.height)}Rt(n,r.label,0,-s,d,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),n.restore()}drawTitle(){}},An={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},ht=Object.keys(An);function Qs(e,n){return e-n}function to(e,n){if(B(n))return null;let t=e._adapter,{parser:i,round:a,isoWeekday:s}=e._parseOpts,o=n;return typeof i=="function"&&(o=i(o)),Z(o)||(o=typeof i=="string"?t.parse(o,i):t.parse(o)),o===null?null:(a&&(o=a==="week"&&(te(s)||s===!0)?t.startOf(o,"isoWeek",s):t.startOf(o,a)),+o)}function eo(e,n,t,i){let a=ht.length;for(let s=ht.indexOf(e);s<a-1;++s){let o=An[ht[s]],r=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((t-n)/(r*o.size))<=i)return ht[s]}return ht[a-1]}function ch(e,n,t,i,a){for(let s=ht.length-1;s>=ht.indexOf(t);s--){let o=ht[s];if(An[o].common&&e._adapter.diff(a,i,o)>=n-1)return o}return ht[t?ht.indexOf(t):0]}function dh(e){for(let n=ht.indexOf(e)+1,t=ht.length;n<t;++n)if(An[ht[n]].common)return ht[n]}function no(e,n,t){if(!t)e[n]=!0;else if(t.length){let{lo:i,hi:a}=rn(t,n),s=t[i]>=n?t[i]:t[a];e[s]=!0}}function hh(e,n,t,i){let a=e._adapter,s=+a.startOf(n[0].value,i),o=n[n.length-1].value,r,l;for(r=s;r<=o;r=+a.add(r,1,i))l=t[r],l>=0&&(n[l].major=!0);return n}function io(e,n,t){let i=[],a={},s=n.length,o,r;for(o=0;o<s;++o)r=n[o],a[r]=o,i.push({value:r,major:!1});return s===0||!t?i:hh(e,i,a,t)}var Ui=(()=>{class e extends ae{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,i={}){let a=t.time||(t.time={}),s=this._adapter=new Ml._date(t.adapters.date);s.init(i),fe(a.displayFormats,s.formats()),this._parseOpts={parser:a.parser,round:a.round,isoWeekday:a.isoWeekday},super.init(t),this._normalized=i.normalized}parse(t,i){return t===void 0?null:to(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){let t=this.options,i=this._adapter,a=t.time.unit||"day",{min:s,max:o,minDefined:r,maxDefined:l}=this.getUserBounds();function c(d){!r&&!isNaN(d.min)&&(s=Math.min(s,d.min)),!l&&!isNaN(d.max)&&(o=Math.max(o,d.max))}(!r||!l)&&(c(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&c(this.getMinMax(!1))),s=Z(s)&&!isNaN(s)?s:+i.startOf(Date.now(),a),o=Z(o)&&!isNaN(o)?o:+i.endOf(Date.now(),a)+1,this.min=Math.min(s,o-1),this.max=Math.max(s+1,o)}_getLabelBounds(){let t=this.getLabelTimestamps(),i=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY;return t.length&&(i=t[0],a=t[t.length-1]),{min:i,max:a}}buildTicks(){let t=this.options,i=t.time,a=t.ticks,s=a.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);let o=this.min,r=this.max,l=Ra(s,o,r);return this._unit=i.unit||(a.autoSkip?eo(i.minUnit,this.min,this.max,this._getLabelCapacity(o)):ch(this,l.length,i.minUnit,this.min,this.max)),this._majorUnit=!a.major.enabled||this._unit==="year"?void 0:dh(this._unit),this.initOffsets(s),t.reverse&&l.reverse(),io(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let i=0,a=0,s,o;this.options.offset&&t.length&&(s=this.getDecimalForValue(t[0]),t.length===1?i=1-s:i=(this.getDecimalForValue(t[1])-s)/2,o=this.getDecimalForValue(t[t.length-1]),t.length===1?a=o:a=(o-this.getDecimalForValue(t[t.length-2]))/2);let r=t.length<3?.5:.25;i=at(i,0,r),a=at(a,0,r),this._offsets={start:i,end:a,factor:1/(i+1+a)}}_generate(){let t=this._adapter,i=this.min,a=this.max,s=this.options,o=s.time,r=o.unit||eo(o.minUnit,i,a,this._getLabelCapacity(i)),l=F(s.ticks.stepSize,1),c=r==="week"?o.isoWeekday:!1,d=te(c)||c===!0,h={},f=i,u,p;if(d&&(f=+t.startOf(f,"isoWeek",c)),f=+t.startOf(f,d?"day":r),t.diff(a,i,r)>1e5*l)throw new Error(i+" and "+a+" are too far apart with stepSize of "+l+" "+r);let g=s.ticks.source==="data"&&this.getDataTimestamps();for(u=f,p=0;u<a;u=+t.add(u,l,r),p++)no(h,u,g);return(u===a||s.bounds==="ticks"||p===1)&&no(h,u,g),Object.keys(h).sort(Qs).map(m=>+m)}getLabelForValue(t){let i=this._adapter,a=this.options.time;return a.tooltipFormat?i.format(t,a.tooltipFormat):i.format(t,a.displayFormats.datetime)}format(t,i){let s=this.options.time.displayFormats,o=this._unit,r=i||s[o];return this._adapter.format(t,r)}_tickFormatFunction(t,i,a,s){let o=this.options,r=o.ticks.callback;if(r)return G(r,[t,i,a],this);let l=o.time.displayFormats,c=this._unit,d=this._majorUnit,h=c&&l[c],f=d&&l[d],u=a[i],p=d&&f&&u&&u.major;return this._adapter.format(t,s||(p?f:h))}generateTickLabels(t){let i,a,s;for(i=0,a=t.length;i<a;++i)s=t[i],s.label=this._tickFormatFunction(s.value,i,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){let i=this._offsets,a=this.getDecimalForValue(t);return this.getPixelForDecimal((i.start+a)*i.factor)}getValueForPixel(t){let i=this._offsets,a=this.getDecimalForPixel(t)/i.factor-i.end;return this.min+a*(this.max-this.min)}_getLabelSize(t){let i=this.options.ticks,a=this.ctx.measureText(t).width,s=ut(this.isHorizontal()?i.maxRotation:i.minRotation),o=Math.cos(s),r=Math.sin(s),l=this._resolveTickFontOptions(0).size;return{w:a*o+l*r,h:a*r+l*o}}_getLabelCapacity(t){let i=this.options.time,a=i.displayFormats,s=a[i.unit]||a.millisecond,o=this._tickFormatFunction(t,0,io(this,[t],this._majorUnit),s),r=this._getLabelSize(o),l=Math.floor(this.isHorizontal()?this.width/r.w:this.height/r.h)-1;return l>0?l:1}getDataTimestamps(){let t=this._cache.data||[],i,a;if(t.length)return t;let s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(i=0,a=s.length;i<a;++i)t=t.concat(s[i].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){let t=this._cache.labels||[],i,a;if(t.length)return t;let s=this.getLabels();for(i=0,a=s.length;i<a;++i)t.push(to(this,s[i]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return qn(t.sort(Qs))}}return e})();function vn(e,n,t){let i=0,a=e.length-1,s,o,r,l;t?(n>=e[i].pos&&n<=e[a].pos&&({lo:i,hi:a}=xt(e,"pos",n)),{pos:s,time:r}=e[i],{pos:o,time:l}=e[a]):(n>=e[i].time&&n<=e[a].time&&({lo:i,hi:a}=xt(e,"time",n)),{time:s,pos:r}=e[i],{time:o,pos:l}=e[a]);let c=o-s;return c?r+(l-r)*(n-s)/c:r}var Gi=class extends Ui{static id="timeseries";static defaults=Ui.defaults;constructor(n){super(n),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){let n=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(n);this._minPos=vn(t,this.min),this._tableRange=vn(t,this.max)-this._minPos,super.initOffsets(n)}buildLookupTable(n){let{min:t,max:i}=this,a=[],s=[],o,r,l,c,d;for(o=0,r=n.length;o<r;++o)c=n[o],c>=t&&c<=i&&a.push(c);if(a.length<2)return[{time:t,pos:0},{time:i,pos:1}];for(o=0,r=a.length;o<r;++o)d=a[o+1],l=a[o-1],c=a[o],Math.round((d+l)/2)!==c&&s.push({time:c,pos:o/(r-1)});return s}_generate(){let n=this.min,t=this.max,i=super.getDataTimestamps();return(!i.includes(n)||!i.length)&&i.splice(0,0,n),(!i.includes(t)||i.length===1)&&i.push(t),i.sort((a,s)=>a-s)}_getTimestampsForTable(){let n=this._cache.all||[];if(n.length)return n;let t=this.getDataTimestamps(),i=this.getLabelTimestamps();return t.length&&i.length?n=this.normalize(t.concat(i)):n=t.length?t:i,n=this._cache.all=n,n}getDecimalForValue(n){return(vn(this._table,n)-this._minPos)/this._tableRange}getValueForPixel(n){let t=this._offsets,i=this.getDecimalForPixel(n)/t.factor-t.end;return vn(this._table,i*this._tableRange+this._minPos,!0)}},fh=Object.freeze({__proto__:null,CategoryScale:Ud,LinearScale:Hi,LogarithmicScale:Wi,RadialLinearScale:Yi,TimeScale:Ui,TimeSeriesScale:Gi}),Oo=[vl,Gc,Hd,fh];var qi=()=>[];function uh(e,n){if(e&1&&(x(0,"div",46)(1,"div",47)(2,"div",48),y(3,"\u{1F465}"),b(),x(4,"div",49)(5,"span",50),y(6,"Total Trabajadores"),b(),x(7,"span",51),y(8),b()()(),x(9,"div",52)(10,"div",48),y(11,"\u2705"),b(),x(12,"div",49)(13,"span",50),y(14,"Promedio Asistencia"),b(),x(15,"span",51),y(16),b()()(),x(17,"div",53)(18,"div",48),y(19,"\u23F0"),b(),x(20,"div",49)(21,"span",50),y(22,"Promedio Puntualidad"),b(),x(23,"span",51),y(24),b()()(),x(25,"div",54)(26,"div",48),y(27,"\u26A0\uFE0F"),b(),x(28,"div",49)(29,"span",50),y(30,"Total Tardanzas"),b(),x(31,"span",51),y(32),b()()(),x(33,"div",55)(34,"div",48),y(35,"\u274C"),b(),x(36,"div",49)(37,"span",50),y(38,"Total Faltas"),b(),x(39,"span",51),y(40),b()()(),x(41,"div",56)(42,"div",48),y(43,"\u{1F4C5}"),b(),x(44,"div",49)(45,"span",50),y(46,"D\xEDas H\xE1biles"),b(),x(47,"span",51),y(48),b()()()()),e&2){let t=Y();P(8),H((t.resumenGeneral==null?null:t.resumenGeneral.totalTrabajadores)||0),P(8),z("",(t.resumenGeneral==null?null:t.resumenGeneral.promedioAsistencia)||0,"%"),P(8),z("",(t.resumenGeneral==null?null:t.resumenGeneral.promedioPuntualidad)||0,"%"),P(8),H((t.resumenGeneral==null?null:t.resumenGeneral.totalTardanzas)||0),P(8),H((t.resumenGeneral==null?null:t.resumenGeneral.totalFaltas)||0),P(8),H((t.resumenGeneral==null?null:t.resumenGeneral.diasHabiles)||0)}}function gh(e,n){if(e&1&&(x(0,"div",64)(1,"div",65),y(2),b(),x(3,"div",66)(4,"h4",67),y(5),b(),x(6,"p",68),y(7),b(),x(8,"p",69),y(9),b()(),x(10,"div",70)(11,"span",71),y(12),b(),x(13,"span",72),y(14),b()()()),e&2){let t=n.$implicit;P(2),H((t.nombreCompleto==null?null:t.nombreCompleto.charAt(0))||"?"),P(3),H(t.nombreCompleto||"Sin nombre"),P(2),H(t.cargo||"Sin cargo"),P(2),H(t.area||"Sin \xE1rea"),P(3),z("",t.porcentajeAsistencia,"% Asistencia"),P(2),z("",t.porcentajePuntualidad,"% Puntualidad")}}function ph(e,n){if(e&1&&(x(0,"div",76)(1,"div",77),y(2),b(),x(3,"div",78)(4,"h4",79),y(5),b(),x(6,"p",80),y(7),b()(),x(8,"div",81)(9,"span",82),y(10),b(),x(11,"span",83),y(12),b(),x(13,"span",84),y(14),b()()()),e&2){let t=n.$implicit;P(2),H((t.nombreCompleto==null?null:t.nombreCompleto.charAt(0))||"?"),P(3),H(t.nombreCompleto||"Sin nombre"),P(2),H(t.cargo||"Sin cargo"),P(3),z("",t.porcentajeAsistencia,"% Asistencia"),P(2),z("",t.diasFalta," Faltas"),P(2),z("",t.diasTardanza," Tardanzas")}}function mh(e,n){if(e&1&&(x(0,"div",73)(1,"h3",59)(2,"span",60),y(3,"\u26A0\uFE0F"),b(),y(4," Trabajadores en Alerta "),b(),x(5,"div",74),J(6,ph,15,6,"div",75),b()()),e&2){let t=Y(2);P(6),R("ngForOf",(t.resumenGeneral==null?null:t.resumenGeneral.trabajadoresAlerta)||Ge(1,qi))}}function bh(e,n){if(e&1&&(x(0,"div",57)(1,"div",58)(2,"h3",59)(3,"span",60),y(4,"\u{1F31F}"),b(),y(5," Trabajadores Destacados "),b(),x(6,"div",61),J(7,gh,15,6,"div",62),b()(),J(8,mh,7,2,"div",63),b()),e&2){let t=Y();P(7),R("ngForOf",(t.resumenGeneral==null?null:t.resumenGeneral.trabajadoresDestacados)||Ge(2,qi)),P(),R("ngIf",t.resumenGeneral&&t.resumenGeneral.trabajadoresAlerta&&t.resumenGeneral.trabajadoresAlerta.length>0)}}function xh(e,n){if(e&1&&(x(0,"option",85),y(1),b()),e&2){let t=n.$implicit;R("value",t.valor),P(),H(t.nombre)}}function _h(e,n){if(e&1&&(x(0,"option",85),y(1),b()),e&2){let t=n.$implicit;R("value",t),P(),H(t)}}function yh(e,n){if(e&1&&(x(0,"option",85),y(1),b()),e&2){let t=n.$implicit;R("value",t),P(),H(t)}}function vh(e,n){if(e&1){let t=Pe();x(0,"button",86),it("click",function(){mt(t);let a=Y();return bt(a.limpiarFiltros())}),y(1," \u2716\uFE0F Limpiar "),b()}}function Mh(e,n){e&1&&(x(0,"tr")(1,"td",92)(2,"div",93),y(3,"Cargando..."),b()()())}function Ch(e,n){e&1&&(x(0,"tr")(1,"td",94)(2,"div",95)(3,"span",96),y(4,"\u{1F4ED}"),b(),x(5,"p",97),y(6,"No se encontraron registros"),b()()()())}function Sh(e,n){if(e&1&&(x(0,"span",115),y(1),b()),e&2){let t=Y().$implicit;P(),z(" \u2713",t.tardanzasJustificadas," ")}}function Ph(e,n){if(e&1&&(x(0,"span",115),y(1),b()),e&2){let t=Y().$implicit;P(),z(" \u2713",t.faltasJustificadas," ")}}function Oh(e,n){if(e&1&&(x(0,"span",116),y(1),b()),e&2){let t=Y().$implicit;P(),z(" +",t.totalHorasExtras,"h ")}}function wh(e,n){if(e&1){let t=Pe();x(0,"tr")(1,"td",98),y(2),b(),x(3,"td",99)(4,"div",100)(5,"span",101),y(6),b(),x(7,"span",102),y(8),b()()(),x(9,"td",103),y(10),b(),x(11,"td",104),y(12),b(),x(13,"td",105),y(14),b(),x(15,"td",106),y(16),J(17,Sh,2,1,"span",107),b(),x(18,"td",108),y(19),J(20,Ph,2,1,"span",107),b(),x(21,"td",104),y(22),b(),x(23,"td",109)(24,"span",110),y(25),b()(),x(26,"td",109)(27,"span",110),y(28),b()(),x(29,"td",111),y(30),J(31,Oh,2,1,"span",112),b(),x(32,"td",113)(33,"button",114),it("click",function(){let a=mt(t).$implicit,s=Y(2);return bt(s.verDetalleTrabajador(a))}),y(34," \u{1F441}\uFE0F "),b()()()}if(e&2){let t=n.$implicit,i=Y(2);P(2),H(t.dni),P(4),H(t.nombreCompleto),P(2),H(t.cargo),P(2),H(t.area),P(2),H(t.diasHabiles),P(2),H(t.diasPresente),P(2),z(" ",t.diasTardanza," "),P(),R("ngIf",t.tardanzasJustificadas>0),P(2),z(" ",t.diasFalta," "),P(),R("ngIf",t.faltasJustificadas>0),P(2),H(t.diasPermiso+t.diasLicencia),P(2),R("ngClass",i.getEstadoBadgeClass(t.porcentajeAsistencia)),P(),z(" ",t.porcentajeAsistencia,"% "),P(2),R("ngClass",i.getEstadoBadgeClass(t.porcentajePuntualidad)),P(),z(" ",t.porcentajePuntualidad,"% "),P(2),z(" ",t.totalHorasTrabajadas,"h "),P(),R("ngIf",t.totalHorasExtras>0)}}function kh(e,n){if(e&1&&(x(0,"div",87)(1,"div",88)(2,"table",89)(3,"thead")(4,"tr")(5,"th"),y(6,"DNI"),b(),x(7,"th"),y(8,"Trabajador"),b(),x(9,"th"),y(10,"\xC1rea"),b(),x(11,"th"),y(12,"D\xEDas H\xE1biles"),b(),x(13,"th"),y(14,"Presente"),b(),x(15,"th"),y(16,"Tardanzas"),b(),x(17,"th"),y(18,"Faltas"),b(),x(19,"th"),y(20,"Permisos"),b(),x(21,"th"),y(22,"% Asistencia"),b(),x(23,"th"),y(24,"% Puntualidad"),b(),x(25,"th"),y(26,"Horas Trabajadas"),b(),x(27,"th"),y(28,"Acciones"),b()()(),x(29,"tbody"),J(30,Mh,4,0,"tr",90)(31,Ch,7,0,"tr",90)(32,wh,35,17,"tr",91),b()()()()),e&2){let t=Y();P(30),R("ngIf",t.cargando),P(),R("ngIf",!t.cargando&&t.resumenTrabajadoresFiltrados.length===0),P(),R("ngForOf",t.resumenTrabajadoresFiltrados)}}function Dh(e,n){if(e&1&&(x(0,"option",85),y(1),b()),e&2){let t=n.$implicit,i=n.index;R("value",i),P(),Gt(" ",t.nombreCompleto||t.trabajadorNombre," - DNI: ",t.dni||t.trabajadorDni," ")}}function Th(e,n){if(e&1&&(x(0,"div",126)(1,"div",127)(2,"div",128),y(3),b(),x(4,"div",129)(5,"h2",130),y(6),b(),x(7,"div",131)(8,"span",132)(9,"strong"),y(10,"DNI:"),b(),y(11),b(),x(12,"span",132)(13,"strong"),y(14,"Cargo:"),b(),y(15),b(),x(16,"span",132)(17,"strong"),y(18,"\xC1rea:"),b(),y(19),b()()()(),x(20,"div",133)(21,"div",134)(22,"div",135),y(23,"\u2705"),b(),x(24,"div",136)(25,"span",137),y(26,"D\xEDas Presente"),b(),x(27,"span",138),y(28),b()()(),x(29,"div",139)(30,"div",135),y(31,"\u23F0"),b(),x(32,"div",136)(33,"span",137),y(34,"Tardanzas"),b(),x(35,"span",138),y(36),b()()(),x(37,"div",140)(38,"div",135),y(39,"\u274C"),b(),x(40,"div",136)(41,"span",137),y(42,"Faltas"),b(),x(43,"span",138),y(44),b()()(),x(45,"div",141)(46,"div",135),y(47,"\u{1F4CA}"),b(),x(48,"div",136)(49,"span",137),y(50,"% Asistencia"),b(),x(51,"span",138),y(52),b()()(),x(53,"div",142)(54,"div",135),y(55,"\u23F1\uFE0F"),b(),x(56,"div",136)(57,"span",137),y(58,"% Puntualidad"),b(),x(59,"span",138),y(60),b()()(),x(61,"div",143)(62,"div",135),y(63,"\u{1F550}"),b(),x(64,"div",136)(65,"span",137),y(66,"Horas Trabajadas"),b(),x(67,"span",138),y(68),b()()()()()),e&2){let t=Y(2);P(3),z(" ",((t.trabajadorSeleccionado.nombreCompleto||t.trabajadorSeleccionado.trabajadorNombre)==null?null:(t.trabajadorSeleccionado.nombreCompleto||t.trabajadorSeleccionado.trabajadorNombre).charAt(0))||"?"," "),P(3),z(" ",t.trabajadorSeleccionado.nombreCompleto||t.trabajadorSeleccionado.trabajadorNombre," "),P(5),z(" ",t.trabajadorSeleccionado.dni||t.trabajadorSeleccionado.trabajadorDni," "),P(4),z(" ",t.trabajadorSeleccionado.cargo||t.trabajadorSeleccionado.trabajadorCargo||"Sin cargo"," "),P(4),z(" ",t.trabajadorSeleccionado.area||t.trabajadorSeleccionado.trabajadorArea||"Sin \xE1rea"," "),P(9),H(t.trabajadorSeleccionado.diasPresente||0),P(8),H(t.trabajadorSeleccionado.diasTardanza||0),P(8),H(t.trabajadorSeleccionado.diasFalta||0),P(8),z("",t.trabajadorSeleccionado.porcentajeAsistencia||0,"%"),P(8),z("",t.trabajadorSeleccionado.porcentajePuntualidad||0,"%"),P(8),z("",t.trabajadorSeleccionado.totalHorasTrabajadas||0,"h")}}function Eh(e,n){e&1&&(x(0,"tr")(1,"td",151)(2,"div",95)(3,"span",96),y(4,"\u{1F4ED}"),b(),x(5,"p",97),y(6,"No hay registros detallados disponibles para este trabajador"),b(),x(7,"p",152),y(8,"Los detalles d\xEDa por d\xEDa se cargar\xE1n pr\xF3ximamente"),b()()()())}function Ah(e,n){if(e&1&&(x(0,"span",116),y(1),b()),e&2){let t=Y().$implicit;P(),z(" +",t.horasExtras,"h ")}}function Ih(e,n){if(e&1&&(x(0,"span",161),y(1),b()),e&2){let t=Y().$implicit;P(),z(" +",t.minutosRetraso||t.minutosTardanza,"min ")}}function jh(e,n){e&1&&(x(0,"span",162),y(1," --- "),b())}function zh(e,n){if(e&1&&(x(0,"tr")(1,"td",153),y(2),b(),x(3,"td",154),y(4),b(),x(5,"td",155)(6,"span",110),y(7),b()(),x(8,"td",156),y(9),b(),x(10,"td",156),y(11),b(),x(12,"td",156),y(13),b(),x(14,"td",156),y(15),b(),x(16,"td",111),y(17),J(18,Ah,2,1,"span",112),b(),x(19,"td",157),J(20,Ih,2,1,"span",158)(21,jh,2,0,"span",159),b(),x(22,"td",160),y(23),b()()),e&2){let t=n.$implicit,i=Y(3);re("fila--presente",t.estado==="Presente")("fila--tardanza",t.estado==="Tardanza")("fila--falta",t.estado==="Falta")("fila--permiso",t.estado==="Permiso")("fila--licencia",t.estado==="Licencia"),P(2),z(" ",i.formatearFecha(t.fecha)," "),P(2),z(" ",t.diaSemana||"N/A"," "),P(2),R("ngClass","badge--"+((t.estado==null?null:t.estado.toLowerCase())||"sin-registro")),P(),z(" ",t.estado||"Sin registro"," "),P(2),z(" ",t.horaEntradaManana||t.horaEntrada||"---"," "),P(2),z(" ",t.horaSalidaManana||t.horaSalida||"---"," "),P(2),z(" ",t.horaEntradaTarde||"---"," "),P(2),z(" ",t.horaSalidaTarde||"---"," "),P(2),z(" ",t.horasTrabajadas||0,"h "),P(),R("ngIf",t.horasExtras>0),P(2),R("ngIf",t.minutosRetraso>0||t.minutosTardanza>0),P(),R("ngIf",!t.minutosRetraso&&!t.minutosTardanza),P(2),z(" ",t.observaciones||t.justificacion||"---"," ")}}function Fh(e,n){if(e&1&&(x(0,"div",144)(1,"div",145)(2,"h3",146),y(3),b(),x(4,"div",147)(5,"span",148),y(6),b()()(),x(7,"div",88)(8,"table",149)(9,"thead")(10,"tr")(11,"th"),y(12,"Fecha"),b(),x(13,"th"),y(14,"D\xEDa"),b(),x(15,"th"),y(16,"Estado"),b(),x(17,"th"),y(18,"Entrada Ma\xF1ana"),b(),x(19,"th"),y(20,"Salida Ma\xF1ana"),b(),x(21,"th"),y(22,"Entrada Tarde"),b(),x(23,"th"),y(24,"Salida Tarde"),b(),x(25,"th"),y(26,"Horas Trabajadas"),b(),x(27,"th"),y(28,"Tardanza"),b(),x(29,"th"),y(30,"Observaciones"),b()()(),x(31,"tbody"),J(32,Eh,9,0,"tr",90)(33,zh,24,23,"tr",150),b()()()()),e&2){let t=Y(2);P(3),Gt(" \u{1F4C5} Registro Detallado - ",t.nombreMesActual," ",t.filtros.anio," "),P(3),z(" \u{1F4CA} ",t.trabajadorSeleccionado.diasHabiles||0," d\xEDas h\xE1biles "),P(26),R("ngIf",!t.trabajadorSeleccionado.detallesDiarios||t.trabajadorSeleccionado.detallesDiarios.length===0),P(),R("ngForOf",t.trabajadorSeleccionado.detallesDiarios||Ge(5,qi))}}function Rh(e,n){if(e&1&&(x(0,"div",163)(1,"div",164)(2,"span",96),y(3,"\u{1F464}"),b(),x(4,"h3",165),y(5,"Selecciona un Trabajador"),b(),x(6,"p",97),y(7," Por favor, selecciona un trabajador del men\xFA desplegable para ver su registro detallado de asistencia para el per\xEDodo de "),x(8,"strong"),y(9),b(),y(10,". "),b()()()),e&2){let t=Y(2);P(9),Gt("",t.nombreMesActual," ",t.filtros.anio)}}function Lh(e,n){if(e&1){let t=Pe();x(0,"div",117)(1,"div",118)(2,"div",119)(3,"label",120),y(4,"\u{1F464} Seleccionar Trabajador:"),b(),x(5,"select",121),Kt("ngModelChange",function(a){mt(t);let s=Y();return qt(s.trabajadorSeleccionadoIndex,a)||(s.trabajadorSeleccionadoIndex=a),bt(a)}),it("change",function(){mt(t);let a=Y();return bt(a.seleccionarTrabajador())}),x(6,"option",122),y(7,"-- Seleccione un trabajador para ver su detalle --"),b(),J(8,Dh,2,3,"option",22),b()()(),J(9,Th,69,11,"div",123)(10,Fh,34,6,"div",124)(11,Rh,11,2,"div",125),b()}if(e&2){let t=Y();P(5),Xt("ngModel",t.trabajadorSeleccionadoIndex),P(3),R("ngForOf",t.resumenTrabajadoresFiltrados),P(),R("ngIf",t.trabajadorSeleccionado),P(),R("ngIf",t.trabajadorSeleccionado),P(),R("ngIf",!t.trabajadorSeleccionado)}}function Nh(e,n){if(e&1&&(x(0,"div",166)(1,"div",167)(2,"div",168)(3,"div",169)(4,"h3",170),y(5),b(),x(6,"p",171),y(7,"An\xE1lisis completo de asistencia, tardanzas y faltas del mes"),b()(),x(8,"div",172),Se(9,"canvas",173),b()()()()),e&2){let t=Y();P(5),Gt("\u{1F4CA} Resumen Mensual de Asistencia - ",t.nombreMesActual," ",t.filtros.anio)}}function Bh(e,n){if(e&1&&(x(0,"span",116),y(1),b()),e&2){let t=Y().$implicit;P(),z(" +",t.horasExtras,"h ")}}function Vh(e,n){if(e&1&&(x(0,"span",161),y(1),b()),e&2){let t=Y().$implicit;P(),z(" +",t.minutosRetraso||t.minutosTardanza,"min ")}}function Hh(e,n){e&1&&(x(0,"span",162),y(1," --- "),b())}function Wh(e,n){if(e&1&&(x(0,"tr")(1,"td"),y(2),b(),x(3,"td"),y(4),b(),x(5,"td")(6,"span",110),y(7),b()(),x(8,"td"),y(9),b(),x(10,"td"),y(11),b(),x(12,"td"),y(13),b(),x(14,"td"),y(15),b(),x(16,"td"),y(17),J(18,Bh,2,1,"span",112),b(),x(19,"td"),J(20,Vh,2,1,"span",158)(21,Hh,2,0,"span",159),b()()),e&2){let t=n.$implicit,i=Y(4);re("fila--presente",t.estado==="Presente")("fila--tardanza",t.estado==="Tardanza")("fila--falta",t.estado==="Falta")("fila--permiso",t.estado==="Permiso")("fila--licencia",t.estado==="Licencia"),P(2),H(i.formatearFecha(t.fecha)),P(2),H(t.diaSemana||"N/A"),P(2),R("ngClass","badge--"+((t.estado==null?null:t.estado.toLowerCase())||"sin-registro")),P(),z(" ",t.estado||"Sin registro"," "),P(2),H(t.horaEntradaManana||t.horaEntrada||"---"),P(2),H(t.horaSalidaManana||t.horaSalida||"---"),P(2),H(t.horaEntradaTarde||"---"),P(2),H(t.horaSalidaTarde||"---"),P(2),z(" ",t.horasTrabajadas||0,"h "),P(),R("ngIf",t.horasExtras>0),P(2),R("ngIf",t.minutosRetraso>0||t.minutosTardanza>0),P(),R("ngIf",!t.minutosRetraso&&!t.minutosTardanza)}}function $h(e,n){if(e&1&&(x(0,"div",196)(1,"h4",197),y(2,"\u{1F4C5} Registro Detallado:"),b(),x(3,"div",198)(4,"table",199)(5,"thead")(6,"tr")(7,"th"),y(8,"Fecha"),b(),x(9,"th"),y(10,"D\xEDa"),b(),x(11,"th"),y(12,"Estado"),b(),x(13,"th"),y(14,"Entrada Ma\xF1ana"),b(),x(15,"th"),y(16,"Salida Ma\xF1ana"),b(),x(17,"th"),y(18,"Entrada Tarde"),b(),x(19,"th"),y(20,"Salida Tarde"),b(),x(21,"th"),y(22,"Horas"),b(),x(23,"th"),y(24,"Retraso"),b()()(),x(25,"tbody"),J(26,Wh,22,22,"tr",150),b()()()()),e&2){let t=Y(3);P(26),R("ngForOf",t.trabajadorSeleccionado.detallesDiarios)}}function Yh(e,n){e&1&&(x(0,"div",200)(1,"p"),y(2,"\u{1F4ED} No hay registros detallados disponibles para este per\xEDodo"),b()())}function Uh(e,n){if(e&1&&(x(0,"div",183)(1,"div",184)(2,"div",185),y(3),b(),x(4,"div",186)(5,"h2"),y(6),b(),x(7,"p")(8,"strong"),y(9,"DNI:"),b(),y(10),b(),x(11,"p")(12,"strong"),y(13,"Cargo:"),b(),y(14),b(),x(15,"p")(16,"strong"),y(17,"Area:"),b(),y(18),b()()(),x(19,"div",187)(20,"div",188)(21,"span",189),y(22,"Dias Presente"),b(),x(23,"span",190),y(24),b()(),x(25,"div",188)(26,"span",189),y(27,"Tardanzas"),b(),x(28,"span",191),y(29),b()(),x(30,"div",188)(31,"span",189),y(32,"Faltas"),b(),x(33,"span",192),y(34),b()(),x(35,"div",188)(36,"span",189),y(37,"% Asistencia"),b(),x(38,"span",193),y(39),b()(),x(40,"div",188)(41,"span",189),y(42,"% Puntualidad"),b(),x(43,"span",193),y(44),b()(),x(45,"div",188)(46,"span",189),y(47,"Horas Trabajadas"),b(),x(48,"span",193),y(49),b()()(),J(50,$h,27,1,"div",194)(51,Yh,3,0,"div",195),b()),e&2){let t=Y(2);P(3),H((t.trabajadorSeleccionado.trabajadorNombre||t.trabajadorSeleccionado.nombreCompleto||"?").charAt(0)),P(3),H(t.trabajadorSeleccionado.trabajadorNombre||t.trabajadorSeleccionado.nombreCompleto||"Sin nombre"),P(4),z(" ",t.trabajadorSeleccionado.trabajadorDni||t.trabajadorSeleccionado.dni||"N/A"),P(4),z(" ",t.trabajadorSeleccionado.trabajadorCargo||t.trabajadorSeleccionado.cargo||"Sin cargo"),P(4),z(" ",t.trabajadorSeleccionado.trabajadorArea||t.trabajadorSeleccionado.area||"Sin \xE1rea"),P(6),H(t.trabajadorSeleccionado.diasPresente),P(5),H(t.trabajadorSeleccionado.diasTardanza),P(5),H(t.trabajadorSeleccionado.diasFalta),P(5),z("",t.trabajadorSeleccionado.porcentajeAsistencia,"%"),P(5),z("",t.trabajadorSeleccionado.porcentajePuntualidad,"%"),P(5),z("",t.trabajadorSeleccionado.totalHorasTrabajadas,"h"),P(),R("ngIf",t.trabajadorSeleccionado.detallesDiarios&&t.trabajadorSeleccionado.detallesDiarios.length>0),P(),R("ngIf",!t.trabajadorSeleccionado.detallesDiarios||t.trabajadorSeleccionado.detallesDiarios.length===0)}}function Gh(e,n){if(e&1){let t=Pe();x(0,"div",174),it("click",function(){mt(t);let a=Y();return bt(a.cerrarModalDetalle())}),x(1,"div",175),it("click",function(a){return mt(t),bt(a.stopPropagation())}),x(2,"div",176)(3,"h3",177),y(4),b(),x(5,"button",178),it("click",function(){mt(t);let a=Y();return bt(a.cerrarModalDetalle())}),y(6,"\u2716\uFE0F"),b()(),J(7,Uh,52,13,"div",179),x(8,"div",180)(9,"button",181),it("click",function(){mt(t);let a=Y();return bt(a.mostrarModalDetalle=!1)}),y(10,"Cerrar"),b(),x(11,"button",182),it("click",function(){mt(t);let a=Y();return bt(a.imprimirReporte())}),y(12,"\u{1F4C4} Imprimir Reporte"),b()()()()}if(e&2){let t=Y();P(4),Gt("\u{1F4CA} Detalle de Asistencia - ",t.nombreMesActual," ",t.filtros.anio),P(3),R("ngIf",t.trabajadorSeleccionado)}}Ht.register(...Oo);var ff=(()=>{let n=class n{ngOnInit(){window.scrollTo(0,0),setTimeout(()=>{let i=document.querySelector(".main-content");i&&(i.scrollTop=0)},100),this.trabajadoresDestacados=[],this.trabajadoresAlerta=[],this.trabajadoresDetalle=[],this.trabajadoresFiltrados=[],this.inicializarAnios(),this.cargarResumen()}ngAfterViewInit(){}ngOnDestroy(){Object.keys(this.charts).forEach(i=>{this.charts[i]&&(this.charts[i]?.destroy(),this.charts[i]=null)})}constructor(i,a){this.router=i,this.http=a,this.apiAsistencias="http://localhost:5000/api/asistencias",this.resumenMensual=null,this.trabajadoresDestacados=[],this.trabajadoresAlerta=[],this.trabajadoresDetalle=[],this.trabajadoresFiltrados=[],this.filtros={mes:new Date().getMonth()+1,anio:new Date().getFullYear(),area:"",ordenarPor:"nombre",busqueda:""},this.cargando=!1,this.vistaActual="resumen",this.trabajadorSeleccionado=null,this.trabajadorSeleccionadoIndex=-1,this.mostrarModalDetalle=!1,this.charts={},this.meses=ha,this.anios=[],this.areas=["Gerencia Municipal","Oficina de Recursos Humanos","Oficina de Administraci\xF3n","Gerencia de Desarrollo Social","Gerencia de Infraestructura","Serenazgo","Registro Civil"]}inicializarAnios(){let i=new Date().getFullYear();for(let a=i;a>=i-5;a--)this.anios.push(a)}cargarResumen(){this.cargando=!0,console.log("\u{1F4CA} Cargando resumen mensual para:",this.filtros.anio,this.filtros.mes);let i=localStorage.getItem("token"),a=i?{Authorization:`Bearer ${i}`}:{};this.http.get(`${this.apiAsistencias}/resumen-mensual/${this.filtros.anio}/${this.filtros.mes}`,{headers:a}).subscribe({next:s=>{console.log("\u2705 Resumen mensual cargado:",s.data),s.demoMode?(this.resumenMensual={periodo:{anio:this.filtros.anio,mes:this.filtros.mes,diasHabiles:0},totales:{totalTrabajadores:0,presentes:0,tardanzas:0,faltas:0,permisos:0,licencias:0,porcentajeAsistencia:0},trabajadoresDetalle:[],trabajadoresDestacados:[],trabajadoresAlerta:[]},this.trabajadoresDestacados=[],this.trabajadoresAlerta=[],this.trabajadoresDetalle=[],this.trabajadoresFiltrados=[]):(this.resumenMensual=s.data,this.trabajadoresDestacados=s.data.trabajadoresDestacados||[],this.trabajadoresAlerta=s.data.trabajadoresAlerta||[],this.trabajadoresDetalle=s.data.trabajadoresDetalle||[],this.trabajadoresFiltrados=[...this.trabajadoresDetalle]),this.cargando=!1,console.log("\u{1F4CA} Trabajadores cargados:",this.trabajadoresDetalle.length),console.log("\u{1F31F} Destacados:",this.trabajadoresDestacados.length),console.log("\u26A0\uFE0F Alerta:",this.trabajadoresAlerta.length),console.log("\u{1F4CB} Detalle completo:",this.trabajadoresDetalle),this.vistaActual==="grafico"&&setTimeout(()=>this.inicializarGraficos(),100)},error:s=>{console.error("\u274C Error al cargar resumen mensual:",s),this.cargando=!1,this.cargarDatosEjemplo()}})}cargarDatosEjemplo(){this.resumenMensual={periodo:{anio:this.filtros.anio,mes:this.filtros.mes,diasHabiles:22},estadisticas:{totalTrabajadores:5,promedioAsistencia:96.36,promedioPuntualidad:89.09,totalTardanzas:6,totalFaltas:4}},this.trabajadoresDestacados=[{id:1,dni:"43256789",nombreCompleto:"Garc\xEDa Rodr\xEDguez, Carlos Alberto",cargo:"Gerente Municipal",area:"Gerencia Municipal",porcentajeAsistencia:100,porcentajePuntualidad:90.91,promedioHorasTrabajadas:8.5},{id:2,dni:"12345678",nombreCompleto:"Ram\xEDrez L\xF3pez, Juan Carlos",cargo:"Contador",area:"Oficina de Administraci\xF3n",porcentajeAsistencia:100,porcentajePuntualidad:100,promedioHorasTrabajadas:8},{id:3,dni:"42345678",nombreCompleto:"V\xE1squez Ruiz, Roberto Miguel",cargo:"Inspector de Obra",area:"Gerencia de Infraestructura",porcentajeAsistencia:100,porcentajePuntualidad:100,promedioHorasTrabajadas:8}],this.trabajadoresAlerta=[{id:4,dni:"98765432",nombreCompleto:"Fern\xE1ndez Silva, Ana Patricia",cargo:"Asistente Administrativo",area:"Oficina de Recursos Humanos",porcentajeAsistencia:86.36,diasFalta:3,diasTardanza:1,promedioHorasTrabajadas:7.2}],this.trabajadoresDetalle=[{id:1,dni:"43256789",nombreCompleto:"Garc\xEDa Rodr\xEDguez, Carlos Alberto",cargo:"Gerente Municipal",area:"Gerencia Municipal",diasHabiles:22,diasPresente:20,diasTardanza:2,diasFalta:0,porcentajeAsistencia:100,porcentajePuntualidad:90.91,totalHorasTrabajadas:176.5},{id:2,dni:"12345678",nombreCompleto:"Ram\xEDrez L\xF3pez, Juan Carlos",cargo:"Contador",area:"Oficina de Administraci\xF3n",diasHabiles:22,diasPresente:22,diasTardanza:0,diasFalta:0,porcentajeAsistencia:100,porcentajePuntualidad:100,totalHorasTrabajadas:176}],this.trabajadoresFiltrados=[...this.trabajadoresDetalle]}cambiarPeriodo(){console.log("\u{1F4C5} Cambiando per\xEDodo a:",this.filtros.anio,this.filtros.mes);let i=this.trabajadorSeleccionado?.id||this.trabajadorSeleccionado?.TrabajadorID,a=this.trabajadorSeleccionadoIndex;this.trabajadorSeleccionado&&(this.trabajadorSeleccionado.detallesDiarios=[]),this.cargarResumen(),this.vistaActual==="grafico"&&setTimeout(()=>this.inicializarGraficos(),300),setTimeout(()=>{if(i&&a>=0){let s=this.resumenTrabajadoresFiltrados.find(o=>(o.id||o.TrabajadorID)===i);if(s){this.trabajadorSeleccionado=s;let o=this.resumenTrabajadoresFiltrados.indexOf(s);o>=0&&(this.trabajadorSeleccionadoIndex=o),console.log("\u{1F4C5} Recargando detalles del trabajador seleccionado para el nuevo per\xEDodo"),this.trabajadorSeleccionado.detallesDiarios=[],this.cargarDetallesDiarios()}}},500)}irMesAnterior(){this.filtros.mes>1?this.filtros.mes--:(this.filtros.mes=12,this.filtros.anio--),this.cambiarPeriodo()}irMesSiguiente(){this.filtros.mes<12?this.filtros.mes++:(this.filtros.mes=1,this.filtros.anio++),this.cambiarPeriodo()}irMesActual(){let i=new Date;this.filtros.mes=i.getMonth()+1,this.filtros.anio=i.getFullYear(),this.cambiarPeriodo()}cambiarVista(i){this.vistaActual=i,i==="grafico"&&setTimeout(()=>{console.log("\u{1F4CA} Inicializando gr\xE1ficos..."),this.inicializarGraficos()},300)}verDetalleTrabajador(i){this.trabajadorSeleccionado=Ut(Yt({},i),{trabajadorNombre:i.trabajadorNombre||i.nombreCompleto||"Sin nombre",trabajadorDni:i.trabajadorDni||i.dni||"N/A",trabajadorCargo:i.trabajadorCargo||i.cargo||"Sin cargo",trabajadorArea:i.trabajadorArea||i.area||"Sin \xE1rea",id:i.id||i.trabajadorId||i.TrabajadorID,diasPresente:i.diasPresente||0,diasTardanza:i.diasTardanza||0,diasFalta:i.diasFalta||0,porcentajeAsistencia:i.porcentajeAsistencia||0,porcentajePuntualidad:i.porcentajePuntualidad||0,totalHorasTrabajadas:i.totalHorasTrabajadas||0,detallesDiarios:i.detallesDiarios||[]}),console.log("\u{1F441}\uFE0F Trabajador seleccionado para modal:",this.trabajadorSeleccionado),this.mostrarModalDetalle=!0,setTimeout(()=>{this.cargarDetallesDiarios()},100)}cerrarModalDetalle(){this.mostrarModalDetalle=!1,this.trabajadorSeleccionado=null,setTimeout(()=>{document.documentElement.classList.remove("modal-open"),document.body.classList.remove("modal-open");let i=document.querySelector("app-topbar");if(i){i.style.setProperty("z-index","100000","important"),i.style.setProperty("pointer-events","auto","important"),i.style.setProperty("visibility","visible","important");let s=i.querySelector(".topbar");s&&(s.style.setProperty("z-index","100000","important"),s.style.setProperty("pointer-events","auto","important"),s.style.setProperty("visibility","visible","important"))}let a=document.querySelector("app-sidebar");a&&(a.style.setProperty("z-index","1000","important"),a.style.setProperty("pointer-events","auto","important"),a.style.setProperty("visibility","visible","important")),document.body.offsetHeight},150)}seleccionarTrabajador(){this.trabajadorSeleccionadoIndex>=0&&this.trabajadorSeleccionadoIndex<this.resumenTrabajadoresFiltrados.length?(this.trabajadorSeleccionado=this.resumenTrabajadoresFiltrados[this.trabajadorSeleccionadoIndex],this.cargarDetallesDiarios()):this.trabajadorSeleccionado=null}cargarDetallesDiarios(){if(!this.trabajadorSeleccionado){console.warn("\u26A0\uFE0F No hay trabajador seleccionado");return}let i=this.trabajadorSeleccionado.id||this.trabajadorSeleccionado.trabajadorId||this.trabajadorSeleccionado.TrabajadorID;if(!i){console.warn("\u26A0\uFE0F No se pudo obtener el ID del trabajador. Objeto completo:",this.trabajadorSeleccionado);let M=this.trabajadorSeleccionado.trabajadorDni||this.trabajadorSeleccionado.dni;if(!M){console.error("\u274C No se puede cargar detalles: falta ID y DNI");return}console.log("\u26A0\uFE0F Usando DNI como alternativa:",M)}let a=this.filtros.mes,s=this.filtros.anio;console.log("\u{1F50D} ========== INICIO: cargarDetallesDiarios =========="),console.log("\u{1F50D} Mes seleccionado:",a,"A\xF1o:",s),console.log("\u{1F50D} Trabajador ID:",i);let o=new Date(s,a-1,1,12,0,0),r=new Date(s,a,0,12,0,0),l=o.getFullYear(),c=String(o.getMonth()+1).padStart(2,"0"),d=String(o.getDate()).padStart(2,"0"),h=`${l}-${c}-${d}`,f=r.getFullYear(),u=String(r.getMonth()+1).padStart(2,"0"),p=String(r.getDate()).padStart(2,"0"),g=`${f}-${u}-${p}`;console.log("\u{1F50D} Fecha inicio calculada:",o.toLocaleDateString("es-PE"),"->",h),console.log("\u{1F50D} Fecha fin calculada:",r.toLocaleDateString("es-PE"),"->",g),console.log("\u{1F50D} Verificaci\xF3n: fechaInicio debe ser d\xEDa 1 del mes",a),console.log("\u{1F50D} Verificaci\xF3n: fechaFin debe ser \xFAltimo d\xEDa del mes",a);let m=localStorage.getItem("token"),v=m?{Authorization:`Bearer ${m}`}:{};this.http.get(`${this.apiAsistencias}/trabajador/${i}/rango/${h}/${g}`,{headers:v}).subscribe({next:M=>{if(console.log("\u{1F50D} Respuesta del backend recibida"),console.log("\u{1F50D} Total de registros recibidos:",M.data?.length||0),M.data&&Array.isArray(M.data)){console.log("\u{1F50D} Primeros 5 registros recibidos:"),M.data.slice(0,5).forEach((_,C)=>{console.log(`  ${C+1}. Fecha: ${_.fecha||_.Fecha}`)});let S=M.data.filter(_=>{let C=_.fecha||_.Fecha;if(!C)return console.log("\u274C Item sin fecha, filtrado"),!1;let k=C.split("T")[0].split("-");if(k.length!==3)return console.log("\u274C Fecha con formato inv\xE1lido:",C),!1;let w=parseInt(k[0],10),D=parseInt(k[1],10),I=parseInt(k[2],10),E=D===a&&w===s;return console.log(E?`\u2705 FECHA ACEPTADA: ${C} (mes: ${D}, a\xF1o: ${w}, d\xEDa: ${I})`:`\u274C FECHA FILTRADA: ${C} (mes: ${D}, a\xF1o: ${w}, d\xEDa: ${I}) - NO pertenece a ${a}/${s}`),E}).map(_=>{let C=_.fecha||_.Fecha,k=C.split("T")[0].split("-"),w=parseInt(k[0],10),D=parseInt(k[1],10),I=parseInt(k[2],10);if(D!==a||w!==s)return console.error(`\u274C ERROR CR\xCDTICO: Fecha ${C} pas\xF3 el filtro pero no pertenece al mes (mes: ${D}, a\xF1o: ${w})`),null;let T=new Date(w,D-1,I,12,0,0).toLocaleDateString("es-PE",{weekday:"long"}),j=_.tipoMarcacion||_.TipoMarcacion||_.estado||_.Estado||"Sin registro";j==="Validado"||j==="Presente"?j="Presente":j==="Tardanza"?j="Tardanza":j==="Falta"?j="Falta":j==="Permiso"?j="Permiso":j==="Licencia"&&(j="Licencia");let $=0;_.tiempoTrabajado?typeof _.tiempoTrabajado=="string"?$=parseFloat(_.tiempoTrabajado.replace("h","").replace("hh",""))||0:$=parseFloat(_.tiempoTrabajado)||0:_.TiempoTrabajado&&(typeof _.TiempoTrabajado=="string"?$=parseFloat(_.TiempoTrabajado.replace("h","").replace("hh",""))||0:$=parseFloat(_.TiempoTrabajado)||0);let L=`${w}-${String(D).padStart(2,"0")}-${String(I).padStart(2,"0")}`;return console.log(`\u2705 Mapeando fecha: ${L} (mes: ${D}, a\xF1o: ${w}, d\xEDa: ${I})`),{fecha:L,diaSemana:T.charAt(0).toUpperCase()+T.slice(1),estado:j,horaEntradaManana:_.horaEntradaManana||_.HoraEntradaManana||null,horaSalidaManana:_.horaSalidaManana||_.HoraSalidaManana||null,horaEntradaTarde:_.horaEntradaTarde||_.HoraEntradaTarde||null,horaSalidaTarde:_.horaSalidaTarde||_.HoraSalidaTarde||null,horasTrabajadas:$,horasExtras:parseFloat(_.horasExtras||_.HorasExtras||0),minutosRetraso:_.minutosTardanza||_.MinutosTardanza||0,minutosTardanza:_.minutosTardanza||_.MinutosTardanza||0,observaciones:_.observaciones||_.Observaciones||"",justificacion:_.justificacion||_.Justificacion||_.motivoJustificacion||_.MotivoJustificacion||""}}).filter(_=>_!==null).filter(_=>{let C=_.fecha.split("-");if(C.length!==3)return console.error("\u274C ERROR: Fecha con formato inv\xE1lido:",_.fecha),!1;let k=parseInt(C[0],10),w=parseInt(C[1],10),D=w===a&&k===s;return D||console.error(`\u274C ERROR CR\xCDTICO: Detalle con fecha fuera del mes: ${_.fecha} (mes: ${w}, a\xF1o: ${k}) - ELIMINADO`),D});if(S.sort((_,C)=>_.fecha.localeCompare(C.fecha)),console.log("\u{1F50D} Total de detalles despu\xE9s de filtrar:",S.length),S.length>0){console.log("\u{1F50D} Primer fecha:",S[0].fecha),console.log("\u{1F50D} \xDAltima fecha:",S[S.length-1].fecha);let _=S[0].fecha,C=_.split("-"),k=parseInt(C[2],10);k!==1&&console.error(`\u274C ERROR CR\xCDTICO: La primera fecha NO es el d\xEDa 1: ${_} (d\xEDa: ${k})`)}if(console.log("\u{1F50D} Total de detalles despu\xE9s de filtrar:",S.length),S.length>0){let _=new Date(s,a,0).getDate(),C=new Set(S.map(k=>k.fecha));for(let k=1;k<=_;k++){let w=new Date(s,a-1,k,12,0,0),D=w.getFullYear(),I=String(w.getMonth()+1).padStart(2,"0"),E=String(w.getDate()).padStart(2,"0"),T=`${D}-${I}-${E}`;if(!C.has(T)){let j=w.toLocaleDateString("es-PE",{weekday:"long"}),$=w.getDay(),L="Sin registro",A="";$>=1&&$<=5?(L="Falta",A="Falta autom\xE1tica - Sin registro de asistencia"):(L="Sin registro",A="D\xEDa no h\xE1bil"),S.push({fecha:T,diaSemana:j.charAt(0).toUpperCase()+j.slice(1),estado:L,horaEntradaManana:null,horaSalidaManana:null,horaEntradaTarde:null,horaSalidaTarde:null,horasTrabajadas:0,horasExtras:0,minutosRetraso:0,minutosTardanza:0,observaciones:A,justificacion:""})}}S.sort((k,w)=>k.fecha.localeCompare(w.fecha)),console.log("\u{1F50D} Total de detalles despu\xE9s de completar d\xEDas faltantes:",S.length)}else{console.log("\u{1F50D} No hay datos en la respuesta del m\xE9todo principal, usando m\xE9todo alternativo"),this.cargarDetallesDiariosAlternativo();return}if(this.trabajadorSeleccionado&&S.length>0){let _=S.filter(T=>T.estado==="Presente").length,C=S.filter(T=>T.estado==="Tardanza").length,k=S.filter(T=>T.estado==="Falta").length,w=S.filter(T=>T.estado==="Permiso").length,D=S.filter(T=>T.estado==="Licencia").length;this.trabajadorSeleccionado.diasPresente=_,this.trabajadorSeleccionado.diasTardanza=C,this.trabajadorSeleccionado.diasFalta=k,this.trabajadorSeleccionado.diasPermiso=w,this.trabajadorSeleccionado.diasLicencia=D;let I=S.reduce((T,j)=>T+(j.horasTrabajadas||0),0);this.trabajadorSeleccionado.totalHorasTrabajadas=Math.round(I*100)/100;let E=S.filter(T=>{let j=T.fecha.split("-");if(j.length!==3)return!1;let L=new Date(parseInt(j[0],10),parseInt(j[1],10)-1,parseInt(j[2],10),12,0,0).getDay();return L>=1&&L<=5}).length;if(E>0){let T=Math.round((_+C)/E*1e4)/100,j=Math.round(_/E*1e4)/100;this.trabajadorSeleccionado.porcentajeAsistencia=Math.min(T,100),this.trabajadorSeleccionado.porcentajePuntualidad=Math.min(j,100)}console.log("\u{1F50D} ========== ESTAD\xCDSTICAS RECALCULADAS (m\xE9todo principal) =========="),console.log("\u{1F50D} D\xEDas Presente:",_),console.log("\u{1F50D} D\xEDas Tardanza:",C),console.log("\u{1F50D} D\xEDas Falta:",k),console.log("\u{1F50D} Total Horas Trabajadas:",I),console.log("\u{1F50D} % Asistencia:",this.trabajadorSeleccionado.porcentajeAsistencia),console.log("\u{1F50D} % Puntualidad:",this.trabajadorSeleccionado.porcentajePuntualidad)}console.log("\u{1F50D} ========== FIN: cargarDetallesDiarios =========="),this.trabajadorSeleccionado.detallesDiarios=S}else console.log("\u{1F50D} No hay datos en la respuesta"),this.cargarDetallesDiariosAlternativo()},error:M=>{console.error("\u274C Error al cargar detalles diarios:",M),M.status===404&&console.log("\u{1F50D} Endpoint no existe (404), usando m\xE9todo alternativo"),this.cargarDetallesDiariosAlternativo()}})}cargarDetallesDiariosAlternativo(){if(!this.trabajadorSeleccionado)return;let i=this.trabajadorSeleccionado.id||this.trabajadorSeleccionado.TrabajadorID;if(!i)return;let a=this.filtros.mes,s=this.filtros.anio;console.log("\u{1F50D} ========== INICIO: cargarDetallesDiariosAlternativo =========="),console.log("\u{1F50D} Mes seleccionado:",a,"A\xF1o:",s),console.log("\u{1F50D} Trabajador ID:",i);let o=typeof a=="string"?parseInt(a,10):a,r=typeof s=="string"?parseInt(s,10):s;console.log("\u{1F50D} Generando d\xEDas - mesSeleccionado:",a,"->",o,"anioSeleccionado:",s,"->",r);let l=new Date(r,o,0).getDate(),c=[];console.log("\u{1F50D} \xDAltimo d\xEDa del mes:",l);for(let u=1;u<=l;u++){let p=new Date(r,o-1,u,12,0,0),g=p.getMonth()+1,m=p.getFullYear();g===o&&m===r?(c.push(p),(u<=3||u===l)&&console.log(`\u2705 D\xEDa ${u} generado: ${p.toLocaleDateString("es-PE")} (mes: ${g}, a\xF1o: ${m})`)):(console.warn(`\u26A0\uFE0F ADVERTENCIA: D\xEDa ${u} - mes generado: ${g}, esperado: ${o} - Agregando de todas formas`),c.push(p))}if(console.log("\u{1F50D} Total de d\xEDas generados:",c.length,"d\xEDas"),c.length===0){console.warn("\u26A0\uFE0F No se generaron d\xEDas con el m\xE9todo normal, generando de forma alternativa"),c.length=0;for(let u=1;u<=l;u++){let p=new Date(s,a-1,u,12,0,0);c.push(p)}console.log("\u{1F50D} D\xEDas generados de forma alternativa:",c.length)}if(c.length>0){let u=c[0],p=c[c.length-1];console.log("\u{1F50D} Primer d\xEDa:",u.toLocaleDateString("es-PE"),"- Debe ser d\xEDa 1"),console.log("\u{1F50D} \xDAltimo d\xEDa:",p.toLocaleDateString("es-PE"));let g=u.getMonth()+1;g!==o&&console.warn(`\u26A0\uFE0F ADVERTENCIA: El primer d\xEDa pertenece al mes ${g}, esperado ${o}`)}else console.error("\u274C ERROR CR\xCDTICO: No se pudieron generar d\xEDas del mes");let d=localStorage.getItem("token"),h=d?{Authorization:`Bearer ${d}`}:{},f=c.map(u=>{let p=u.getFullYear(),g=String(u.getMonth()+1).padStart(2,"0"),m=String(u.getDate()).padStart(2,"0"),v=`${p}-${g}-${m}`;return Ki(this.http.get(`${this.apiAsistencias}/fecha/${v}`,{headers:h})).catch(M=>(console.warn(`\u26A0\uFE0F Error al cargar asistencia para ${v}:`,M),{data:[]}))});Promise.all(f).then(u=>{console.log("\u{1F50D} ========== PROCESANDO RESPUESTAS DEL BACKEND =========="),console.log("\u{1F50D} Total de respuestas recibidas:",u.length),console.log("\u{1F50D} Trabajador ID:",i),console.log("\u{1F50D} Mes seleccionado (raw):",this.filtros.mes,"A\xF1o (raw):",this.filtros.anio);let p=typeof this.filtros.mes=="string"?parseInt(this.filtros.mes,10):this.filtros.mes,g=typeof this.filtros.anio=="string"?parseInt(this.filtros.anio,10):this.filtros.anio;console.log("\u{1F50D} Mes seleccionado (num):",p,"A\xF1o (num):",g);let m=[],v=0,M=0;u.forEach((S,_)=>{let C=c[_],k=C.getMonth()+1,w=C.getFullYear(),D=typeof p=="string"?parseInt(p,10):p,I=typeof g=="string"?parseInt(g,10):g;if(k!==D||w!==I){console.error(`\u274C ERROR: Fecha fuera del mes seleccionado: ${C.toLocaleDateString("es-PE")} (mes fecha: ${k}, mes seleccionado: ${D}, a\xF1o fecha: ${w}, a\xF1o seleccionado: ${I}) - NO SE INCLUIR\xC1`);return}let E=C.getFullYear(),T=String(C.getMonth()+1).padStart(2,"0"),j=String(C.getDate()).padStart(2,"0"),$=`${E}-${T}-${j}`,L=C.toLocaleDateString("es-PE",{weekday:"long"});(_<3||_===c.length-1)&&console.log(`\u{1F50D} Procesando \xEDndice ${_}: fecha del array = ${$}, fecha objeto = ${C.toLocaleDateString("es-PE")}`);let A=S?.data?.find(N=>(N.trabajadorId||N.TrabajadorID)===i);if((_<5||_===c.length-1)&&(console.log(`\u{1F50D} [D\xEDa ${_+1}/${c.length}] Fecha: ${$}`),console.log(`\u{1F50D}   - Total registros en respuesta: ${S?.data?.length||0}`),console.log(`\u{1F50D}   - Trabajador ID buscado: ${i}`),A?(console.log(`\u{1F50D}   - \u2705 REGISTRO ENCONTRADO para trabajador ${i}`),console.log(`\u{1F50D}   - Fecha del registro: ${A.fecha||A.Fecha}`),console.log(`\u{1F50D}   - Estado: ${A.tipoMarcacion||A.TipoMarcacion||A.estado||A.Estado}`),console.log(`\u{1F50D}   - Hora entrada ma\xF1ana: ${A.horaEntradaManana||A.HoraEntradaManana||"---"}`)):(console.log(`\u{1F50D}   - \u274C NO SE ENCONTR\xD3 REGISTRO para trabajador ${i}`),S?.data&&S.data.length>0&&console.log("\u{1F50D}   - IDs de trabajadores en la respuesta:",S.data.map(N=>N.trabajadorId||N.TrabajadorID).slice(0,5)))),A){v++;let N=A.tipoMarcacion||A.TipoMarcacion||A.estado||A.Estado||"Sin registro";N==="Validado"||N==="Presente"?N="Presente":N==="Tardanza"?N="Tardanza":N==="Falta"?N="Falta":N==="Permiso"?N="Permiso":N==="Licencia"&&(N="Licencia");let Q=0;A.tiempoTrabajado?typeof A.tiempoTrabajado=="string"?Q=parseFloat(A.tiempoTrabajado.replace("h","").replace("hh",""))||0:Q=parseFloat(A.tiempoTrabajado)||0:A.TiempoTrabajado&&(typeof A.TiempoTrabajado=="string"?Q=parseFloat(A.TiempoTrabajado.replace("h","").replace("hh",""))||0:Q=parseFloat(A.TiempoTrabajado)||0),m.push({fecha:$,diaSemana:L.charAt(0).toUpperCase()+L.slice(1),estado:N,horaEntradaManana:A.horaEntradaManana||A.HoraEntradaManana||null,horaSalidaManana:A.horaSalidaManana||A.HoraSalidaManana||null,horaEntradaTarde:A.horaEntradaTarde||A.HoraEntradaTarde||null,horaSalidaTarde:A.horaSalidaTarde||A.HoraSalidaTarde||null,horasTrabajadas:Q,horasExtras:parseFloat(A.horasExtras||A.HorasExtras||0),minutosRetraso:A.minutosTardanza||A.MinutosTardanza||0,minutosTardanza:A.minutosTardanza||A.MinutosTardanza||0,observaciones:A.observaciones||A.Observaciones||"",justificacion:A.justificacion||A.Justificacion||A.motivoJustificacion||A.MotivoJustificacion||""})}else{M++;let N=C.getDay(),Q="Sin registro",et="";N>=1&&N<=5?(Q="Falta",et="Falta autom\xE1tica - Sin registro de asistencia"):(Q="Sin registro",et="D\xEDa no h\xE1bil"),m.push({fecha:$,diaSemana:L.charAt(0).toUpperCase()+L.slice(1),estado:Q,horaEntradaManana:null,horaSalidaManana:null,horaEntradaTarde:null,horaSalidaTarde:null,horasTrabajadas:0,horasExtras:0,minutosRetraso:0,minutosTardanza:0,observaciones:et,justificacion:""})}}),console.log("\u{1F50D} ========== RESUMEN DE PROCESAMIENTO =========="),console.log("\u{1F50D} Total registros ENCONTRADOS del backend:",v),console.log("\u{1F50D} Total registros NO ENCONTRADOS (faltas autom\xE1ticas):",M),console.log("\u{1F50D} Total detalles generados:",m.length);let O=m.filter(S=>{let _=S.fecha.split("-");if(_.length!==3)return!1;let C=parseInt(_[0],10),w=parseInt(_[1],10)===p&&C===g;return w||console.error(`\u274C ERROR: Detalle con fecha fuera del mes: ${S.fecha} - ELIMINADO`),w});if(O.sort((S,_)=>S.fecha.localeCompare(_.fecha)),console.log("\u{1F50D} Total de detalles despu\xE9s de filtrar:",O.length),console.log("\u{1F50D} Total de d\xEDas del mes esperados:",c.length),O.length<c.length){console.warn(`\u26A0\uFE0F Faltan d\xEDas en los detalles. Esperados: ${c.length}, Encontrados: ${O.length}`);let S=new Set(O.map(_=>_.fecha));c.forEach(_=>{let C=_.getFullYear(),k=String(_.getMonth()+1).padStart(2,"0"),w=String(_.getDate()).padStart(2,"0"),D=`${C}-${k}-${w}`;if(!S.has(D)){let I=_.toLocaleDateString("es-PE",{weekday:"long"}),E=_.getDay(),T="Sin registro",j="";E>=1&&E<=5?(T="Falta",j="Falta autom\xE1tica - Sin registro de asistencia"):(T="Sin registro",j="D\xEDa no h\xE1bil"),O.push({fecha:D,diaSemana:I.charAt(0).toUpperCase()+I.slice(1),estado:T,horaEntradaManana:null,horaSalidaManana:null,horaEntradaTarde:null,horaSalidaTarde:null,horasTrabajadas:0,horasExtras:0,minutosRetraso:0,minutosTardanza:0,observaciones:j,justificacion:""})}}),O.sort((_,C)=>_.fecha.localeCompare(C.fecha)),console.log("\u{1F50D} Total de detalles despu\xE9s de completar d\xEDas faltantes:",O.length)}if(O.length>0){console.log("\u{1F50D} Primer fecha:",O[0].fecha),console.log("\u{1F50D} \xDAltima fecha:",O[O.length-1].fecha);let S=O[0].fecha,_=S.split("-"),C=parseInt(_[2],10);C!==1?console.error(`\u274C ERROR CR\xCDTICO: La primera fecha NO es el d\xEDa 1: ${S} (d\xEDa: ${C})`):console.log("\u2705 Verificaci\xF3n: La primera fecha es el d\xEDa 1")}if(this.trabajadorSeleccionado&&O.length>0){let S=O.filter(E=>E.estado==="Presente").length,_=O.filter(E=>E.estado==="Tardanza").length,C=O.filter(E=>E.estado==="Falta").length,k=O.filter(E=>E.estado==="Permiso").length,w=O.filter(E=>E.estado==="Licencia").length;this.trabajadorSeleccionado.diasPresente=S,this.trabajadorSeleccionado.diasTardanza=_,this.trabajadorSeleccionado.diasFalta=C,this.trabajadorSeleccionado.diasPermiso=k,this.trabajadorSeleccionado.diasLicencia=w;let D=O.reduce((E,T)=>E+(T.horasTrabajadas||0),0);this.trabajadorSeleccionado.totalHorasTrabajadas=Math.round(D*100)/100;let I=O.filter(E=>{let T=E.fecha.split("-");if(T.length!==3)return!1;let $=new Date(parseInt(T[0],10),parseInt(T[1],10)-1,parseInt(T[2],10),12,0,0).getDay();return $>=1&&$<=5}).length;if(I>0){let E=Math.round((S+_)/I*1e4)/100,T=Math.round(S/I*1e4)/100;this.trabajadorSeleccionado.porcentajeAsistencia=Math.min(E,100),this.trabajadorSeleccionado.porcentajePuntualidad=Math.min(T,100)}console.log("\u{1F50D} ========== ESTAD\xCDSTICAS RECALCULADAS (m\xE9todo alternativo) =========="),console.log("\u{1F50D} D\xEDas Presente:",S),console.log("\u{1F50D} D\xEDas Tardanza:",_),console.log("\u{1F50D} D\xEDas Falta:",C),console.log("\u{1F50D} Total Horas Trabajadas:",D),console.log("\u{1F50D} % Asistencia:",this.trabajadorSeleccionado.porcentajeAsistencia),console.log("\u{1F50D} % Puntualidad:",this.trabajadorSeleccionado.porcentajePuntualidad)}console.log("\u{1F50D} ========== FIN: cargarDetallesDiariosAlternativo =========="),this.trabajadorSeleccionado.detallesDiarios=O}).catch(u=>{console.error("\u274C Error al cargar detalles diarios (m\xE9todo alternativo):",u),this.trabajadorSeleccionado.detallesDiarios=[]})}formatearFecha(i){if(!i)return"---";if(typeof i=="string"){let l=i.split("T")[0].split("-");if(l.length===3){let p=l[0],g=l[1];return`${l[2]}/${g}/${p}`}let c=new Date(i);if(isNaN(c.getTime()))return"---";let d=new Date(c.getFullYear(),c.getMonth(),c.getDate(),12,0,0),h=String(d.getDate()).padStart(2,"0"),f=String(d.getMonth()+1).padStart(2,"0"),u=d.getFullYear();return`${h}/${f}/${u}`}let a=i;if(isNaN(a.getTime()))return"---";let s=String(a.getDate()).padStart(2,"0"),o=String(a.getMonth()+1).padStart(2,"0"),r=a.getFullYear();return`${s}/${o}/${r}`}inicializarGraficos(){Object.keys(this.charts).forEach(i=>{this.charts[i]&&(this.charts[i]?.destroy(),this.charts[i]=null)}),this.crearGraficoMensual()}crearGraficoMensual(){let i=document.getElementById("grafico-mensual");if(!i){console.error("\u274C No se encontr\xF3 el canvas grafico-mensual");return}let a=i.getContext("2d");if(!a){console.error("\u274C No se pudo obtener el contexto 2d del canvas");return}let s=this.prepararDatosMensuales();console.log("\u{1F4CA} Datos mensuales:",s),this.charts.mensual&&this.charts.mensual?.destroy(),this.charts.mensual=new Ht(a,{type:"bar",data:{labels:s.labels,datasets:[{label:"Presentes",data:s.presentes,backgroundColor:"#10b981",borderRadius:6,borderSkipped:!1},{label:"Tardanzas",data:s.tardanzas,backgroundColor:"#f59e0b",borderRadius:6,borderSkipped:!1},{label:"Faltas",data:s.faltas,backgroundColor:"#ef4444",borderRadius:6,borderSkipped:!1}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{color:"#ffffff",usePointStyle:!0,padding:20,font:{size:14,weight:"normal"}}},title:{display:!1},tooltip:{mode:"index",intersect:!1,backgroundColor:"rgba(17, 24, 39, 0.95)",titleColor:"#ffffff",bodyColor:"#ffffff",borderColor:"#374151",borderWidth:1,padding:12,titleFont:{size:14,weight:"bold"},bodyFont:{size:13},callbacks:{label:o=>{let r=o.dataset.label||"",l=o.parsed.y||0,c=s.totales[o.dataIndex]||0,d=c>0?(l/c*100).toFixed(1):0;return`${r}: ${l} d\xEDas (${d}%)`}}}},scales:{x:{stacked:!0,grid:{color:"rgba(255, 255, 255, 0.1)",display:!1},ticks:{color:"#e5e7eb",font:{size:13}}},y:{beginAtZero:!0,stacked:!0,grid:{color:"rgba(255, 255, 255, 0.1)"},ticks:{color:"#e5e7eb",font:{size:13},stepSize:1,callback:function(o){return o+" d\xEDas"}}}}}})}prepararDatosMensuales(){let i=this.trabajadoresDetalle.map(c=>({nombre:(c.nombreCompleto||c.trabajadorNombre||"Sin nombre").split(",")[0],presentes:c.diasPresente||0,tardanzas:c.diasTardanza||0,faltas:c.diasFalta||0})).sort((c,d)=>{let h=c.presentes+c.tardanzas+c.faltas;return d.presentes+d.tardanzas+d.faltas-h}).slice(0,15),a=i.map(c=>c.nombre.length>20?c.nombre.substring(0,17)+"...":c.nombre),s=i.map(c=>c.presentes),o=i.map(c=>c.tardanzas),r=i.map(c=>c.faltas),l=i.map(c=>c.presentes+c.tardanzas+c.faltas);return{labels:a,presentes:s,tardanzas:o,faltas:r,totales:l}}crearGraficoTendenciaDiaria(){let i=document.getElementById("grafico-tendencia");if(!i){console.error("\u274C No se encontr\xF3 el canvas grafico-tendencia");return}let a=i.getContext("2d");if(!a){console.error("\u274C No se pudo obtener el contexto 2d del canvas");return}let s=this.prepararDatosTendenciaDiaria();console.log("\u{1F4CA} Datos de tendencia diaria:",s),this.charts.tendencia&&this.charts.tendencia?.destroy(),this.charts.tendencia=new Ht(a,{type:"line",data:{labels:s.labels,datasets:[{label:"Presentes",data:s.presentes,borderColor:"#10b981",backgroundColor:"rgba(16, 185, 129, 0.1)",tension:.4,fill:!0},{label:"Tardanzas",data:s.tardanzas,borderColor:"#f59e0b",backgroundColor:"rgba(245, 158, 11, 0.1)",tension:.4,fill:!0},{label:"Faltas",data:s.faltas,borderColor:"#ef4444",backgroundColor:"rgba(239, 68, 68, 0.1)",tension:.4,fill:!0}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{color:"#ffffff",usePointStyle:!0,padding:15,font:{size:13,weight:"normal"}}},title:{display:!0,text:"Tendencia de Asistencia Diaria",color:"#ffffff",font:{size:16,weight:"bold"}},tooltip:{mode:"index",intersect:!1,backgroundColor:"rgba(17, 24, 39, 0.95)",titleColor:"#ffffff",bodyColor:"#ffffff",borderColor:"#374151",borderWidth:1,padding:12,titleFont:{size:14,weight:"bold"},bodyFont:{size:13}}},scales:{x:{grid:{color:"rgba(255, 255, 255, 0.1)"},ticks:{color:"#e5e7eb",font:{size:12}}},y:{beginAtZero:!0,grid:{color:"rgba(255, 255, 255, 0.1)"},ticks:{color:"#e5e7eb",font:{size:12},stepSize:1}}}}})}crearGraficoDistribucionEstados(){let i=document.getElementById("grafico-distribucion");if(!i){console.error("\u274C No se encontr\xF3 el canvas grafico-distribucion");return}let a=i.getContext("2d");if(!a){console.error("\u274C No se pudo obtener el contexto 2d del canvas");return}let s=this.prepararDatosDistribucionEstados();console.log("\u{1F4CA} Datos de distribuci\xF3n:",s),this.charts.distribucion&&this.charts.distribucion?.destroy(),this.charts.distribucion=new Ht(a,{type:"doughnut",data:{labels:s.labels,datasets:[{data:s.values,backgroundColor:["#10b981","#f59e0b","#ef4444","#3b82f6","#8b5cf6"],borderWidth:2,borderColor:"var(--panel)"}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"right",labels:{color:"#ffffff",usePointStyle:!0,padding:15,font:{size:13,weight:"normal"}}},title:{display:!0,text:"Distribuci\xF3n por Estados",color:"#ffffff",font:{size:16,weight:"bold"}},tooltip:{backgroundColor:"rgba(17, 24, 39, 0.95)",titleColor:"#ffffff",bodyColor:"#ffffff",borderColor:"#374151",borderWidth:1,padding:12,titleFont:{size:14,weight:"bold"},bodyFont:{size:13},callbacks:{label:o=>{let r=o.label||"",l=o.parsed||0,c=o.dataset.data.reduce((h,f)=>h+f,0),d=c>0?(l/c*100).toFixed(1):0;return`${r}: ${l} (${d}%)`}}}}}})}crearGraficoComparativaAreas(){let i=document.getElementById("grafico-areas");if(!i){console.error("\u274C No se encontr\xF3 el canvas grafico-areas");return}let a=i.getContext("2d");if(!a){console.error("\u274C No se pudo obtener el contexto 2d del canvas");return}let s=this.prepararDatosComparativaAreas();console.log("\u{1F4CA} Datos de \xE1reas:",s),this.charts.areas&&this.charts.areas?.destroy(),this.charts.areas=new Ht(a,{type:"bar",data:{labels:s.labels,datasets:[{label:"Presentes",data:s.presentes,backgroundColor:"#10b981",borderRadius:4},{label:"Tardanzas",data:s.tardanzas,backgroundColor:"#f59e0b",borderRadius:4},{label:"Faltas",data:s.faltas,backgroundColor:"#ef4444",borderRadius:4}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{color:"#ffffff",usePointStyle:!0,padding:15,font:{size:13,weight:"normal"}}},title:{display:!0,text:"Comparativa de Asistencia por \xC1rea",color:"#ffffff",font:{size:16,weight:"bold"}},tooltip:{backgroundColor:"rgba(17, 24, 39, 0.95)",titleColor:"#ffffff",bodyColor:"#ffffff",borderColor:"#374151",borderWidth:1,padding:12,titleFont:{size:14,weight:"bold"},bodyFont:{size:13}}},scales:{x:{stacked:!0,grid:{color:"rgba(255, 255, 255, 0.1)"},ticks:{color:"#e5e7eb",font:{size:12}}},y:{beginAtZero:!0,stacked:!0,grid:{color:"rgba(255, 255, 255, 0.1)"},ticks:{color:"#e5e7eb",font:{size:12},stepSize:1}}}}})}crearGraficoAnalisisTardanzas(){let i=document.getElementById("grafico-tardanzas");if(!i){console.error("\u274C No se encontr\xF3 el canvas grafico-tardanzas");return}let a=i.getContext("2d");if(!a){console.error("\u274C No se pudo obtener el contexto 2d del canvas");return}let s=this.prepararDatosAnalisisTardanzas();console.log("\u{1F4CA} Datos de tardanzas:",s),this.charts.tardanzas&&this.charts.tardanzas?.destroy(),this.charts.tardanzas=new Ht(a,{type:"bar",data:{labels:s.labels,datasets:[{label:"Tardanzas",data:s.values,backgroundColor:s.colors,borderRadius:4}]},options:{indexAxis:"y",responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},title:{display:!0,text:"An\xE1lisis de Tardanzas por Trabajador",color:"#ffffff",font:{size:16,weight:"bold"}},tooltip:{backgroundColor:"rgba(17, 24, 39, 0.95)",titleColor:"#ffffff",bodyColor:"#ffffff",borderColor:"#374151",borderWidth:1,padding:12,titleFont:{size:14,weight:"bold"},bodyFont:{size:13}}},scales:{x:{beginAtZero:!0,grid:{color:"rgba(255, 255, 255, 0.1)"},ticks:{color:"#e5e7eb",font:{size:12},stepSize:1}},y:{grid:{color:"rgba(255, 255, 255, 0.1)"},ticks:{color:"#e5e7eb",font:{size:12}}}}}})}prepararDatosTendenciaDiaria(){let i=parseInt(this.filtros.mes.toString(),10),a=parseInt(this.filtros.anio.toString(),10),s=new Date(a,i,0).getDate(),o=[],r=[],l=[],c=[],d=this.trabajadoresDetalle.reduce((v,M)=>v+(M.diasPresente||0),0),h=this.trabajadoresDetalle.reduce((v,M)=>v+(M.diasTardanza||0),0),f=this.trabajadoresDetalle.reduce((v,M)=>v+(M.diasFalta||0),0),u=0;for(let v=1;v<=s;v++){let O=new Date(a,i-1,v).getDay();O>=1&&O<=5&&u++}let p=u>0?d/u:0,g=u>0?h/u:0,m=u>0?f/u:0;for(let v=1;v<=s;v++){let O=new Date(a,i-1,v).getDay();O>=1&&O<=5&&(o.push(`${v}/${i}`),r.push(Math.round(p)),l.push(Math.round(g)),c.push(Math.round(m)))}return{labels:o,presentes:r,tardanzas:l,faltas:c}}prepararDatosDistribucionEstados(){let i=this.trabajadoresDetalle.reduce((c,d)=>c+(d.diasPresente||0),0),a=this.trabajadoresDetalle.reduce((c,d)=>c+(d.diasTardanza||0),0),s=this.trabajadoresDetalle.reduce((c,d)=>c+(d.diasFalta||0),0),o=this.trabajadoresDetalle.reduce((c,d)=>c+(d.diasPermiso||0),0),r=this.trabajadoresDetalle.reduce((c,d)=>c+(d.diasLicencia||0),0);return i+a+s+o+r===0?{labels:["Sin datos"],values:[1]}:{labels:["Presentes","Tardanzas","Faltas","Permisos","Licencias"],values:[i,a,s,o,r]}}prepararDatosComparativaAreas(){let i={};this.trabajadoresDetalle.forEach(l=>{let c=l.area||l.trabajadorArea||"Sin \xE1rea";i[c]||(i[c]={presentes:0,tardanzas:0,faltas:0}),i[c].presentes+=l.diasPresente||0,i[c].tardanzas+=l.diasTardanza||0,i[c].faltas+=l.diasFalta||0});let a=Object.keys(i),s=a.map(l=>i[l].presentes),o=a.map(l=>i[l].tardanzas),r=a.map(l=>i[l].faltas);return a.length===0?{labels:["Sin datos"],presentes:[0],tardanzas:[0],faltas:[0]}:{labels:a,presentes:s,tardanzas:o,faltas:r}}prepararDatosAnalisisTardanzas(){let i=this.trabajadoresDetalle.filter(r=>(r.diasTardanza||0)>0).sort((r,l)=>(l.diasTardanza||0)-(r.diasTardanza||0)).slice(0,10);if(i.length===0)return{labels:["Sin tardanzas registradas"],values:[0],colors:["#10b981"]};let a=i.map(r=>{let l=r.nombreCompleto||r.trabajadorNombre||"Sin nombre";return l.length>25?l.substring(0,22)+"...":l}),s=i.map(r=>r.diasTardanza||0),o=s.map(r=>r>=5?"#ef4444":r>=3?"#f59e0b":"#eab308");return{labels:a,values:s,colors:o}}exportarExcel(){console.log("\u{1F4CA} Exportando a Excel...")}exportarPDF(){console.log("\u{1F4C4} Exportando a PDF...")}imprimirReporte(){if(!this.trabajadorSeleccionado){alert("No hay trabajador seleccionado");return}let i=`
      <!DOCTYPE html>
      <html>
      <head>
        <meta charset="UTF-8">
        <title>Reporte de Asistencia - ${this.trabajadorSeleccionado.trabajadorNombre}</title>
        <style>
          @media print {
            @page {
              margin: 1cm;
            }
            body {
              font-family: Arial, sans-serif;
              font-size: 12px;
            }
          }
          body {
            font-family: Arial, sans-serif;
            padding: 20px;
            color: #333;
          }
          .header {
            text-align: center;
            margin-bottom: 30px;
            border-bottom: 2px solid #333;
            padding-bottom: 20px;
          }
          .header h1 {
            margin: 0;
            font-size: 24px;
          }
          .header h2 {
            margin: 10px 0;
            font-size: 18px;
            color: #666;
          }
          .trabajador-info {
            margin-bottom: 20px;
            padding: 15px;
            background: #f5f5f5;
            border-radius: 5px;
          }
          .trabajador-info h3 {
            margin: 0 0 10px 0;
            font-size: 18px;
          }
          .trabajador-info p {
            margin: 5px 0;
            font-size: 14px;
          }
          .estadisticas {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-bottom: 30px;
          }
          .stat-box {
            padding: 15px;
            background: #f9f9f9;
            border: 1px solid #ddd;
            border-radius: 5px;
            text-align: center;
          }
          .stat-box__label {
            display: block;
            font-size: 12px;
            color: #666;
            margin-bottom: 5px;
          }
          .stat-box__value {
            display: block;
            font-size: 24px;
            font-weight: bold;
            color: #333;
          }
          .stat-box__value--success { color: #22c55e; }
          .stat-box__value--warning { color: #f59e0b; }
          .stat-box__value--danger { color: #ef4444; }
          table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
          }
          th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
            font-size: 11px;
          }
          th {
            background: #333;
            color: white;
            font-weight: bold;
          }
          tr:nth-child(even) {
            background: #f9f9f9;
          }
          .badge {
            padding: 3px 8px;
            border-radius: 3px;
            font-size: 10px;
            font-weight: bold;
          }
          .badge--presente { background: #d1fae5; color: #065f46; }
          .badge--tardanza { background: #fef3c7; color: #92400e; }
          .badge--falta { background: #fee2e2; color: #991b1b; }
          .badge--permiso { background: #dbeafe; color: #1e40af; }
          .badge--licencia { background: #e9d5ff; color: #6b21a8; }
          .footer {
            margin-top: 30px;
            text-align: center;
            font-size: 10px;
            color: #666;
            border-top: 1px solid #ddd;
            padding-top: 10px;
          }
        </style>
      </head>
      <body>
        <div class="header">
          <h1>REPORTE DE ASISTENCIA MENSUAL</h1>
          <h2>${this.nombreMesActual} ${this.filtros.anio}</h2>
        </div>
        
        <div class="trabajador-info">
          <h3>${this.trabajadorSeleccionado.trabajadorNombre}</h3>
          <p><strong>DNI:</strong> ${this.trabajadorSeleccionado.trabajadorDni||"N/A"}</p>
          <p><strong>Cargo:</strong> ${this.trabajadorSeleccionado.trabajadorCargo||"N/A"}</p>
          <p><strong>\xC1rea:</strong> ${this.trabajadorSeleccionado.trabajadorArea||"Sin \xE1rea"}</p>
        </div>
        
        <div class="estadisticas">
          <div class="stat-box">
            <span class="stat-box__label">D\xEDas Presente</span>
            <span class="stat-box__value stat-box__value--success">${this.trabajadorSeleccionado.diasPresente||0}</span>
          </div>
          <div class="stat-box">
            <span class="stat-box__label">Tardanzas</span>
            <span class="stat-box__value stat-box__value--warning">${this.trabajadorSeleccionado.diasTardanza||0}</span>
          </div>
          <div class="stat-box">
            <span class="stat-box__label">Faltas</span>
            <span class="stat-box__value stat-box__value--danger">${this.trabajadorSeleccionado.diasFalta||0}</span>
          </div>
          <div class="stat-box">
            <span class="stat-box__label">% Asistencia</span>
            <span class="stat-box__value">${this.trabajadorSeleccionado.porcentajeAsistencia||0}%</span>
          </div>
          <div class="stat-box">
            <span class="stat-box__label">% Puntualidad</span>
            <span class="stat-box__value">${this.trabajadorSeleccionado.porcentajePuntualidad||0}%</span>
          </div>
          <div class="stat-box">
            <span class="stat-box__label">Horas Trabajadas</span>
            <span class="stat-box__value">${this.trabajadorSeleccionado.totalHorasTrabajadas||0}h</span>
          </div>
        </div>
        
        <h3>Registro Detallado Diario</h3>
        <table>
          <thead>
            <tr>
              <th>Fecha</th>
              <th>D\xEDa</th>
              <th>Estado</th>
              <th>Entrada Ma\xF1ana</th>
              <th>Salida Ma\xF1ana</th>
              <th>Entrada Tarde</th>
              <th>Salida Tarde</th>
              <th>Horas</th>
              <th>Retraso</th>
            </tr>
          </thead>
          <tbody>
            ${(this.trabajadorSeleccionado.detallesDiarios||[]).map(s=>`
              <tr>
                <td>${this.formatearFecha(s.fecha)}</td>
                <td>${s.diaSemana||"N/A"}</td>
                <td><span class="badge badge--${(s.estado||"sin-registro").toLowerCase()}">${s.estado||"Sin registro"}</span></td>
                <td>${s.horaEntradaManana||s.horaEntrada||"---"}</td>
                <td>${s.horaSalidaManana||s.horaSalida||"---"}</td>
                <td>${s.horaEntradaTarde||"---"}</td>
                <td>${s.horaSalidaTarde||"---"}</td>
                <td>${s.horasTrabajadas||0}h${s.horasExtras>0?" +"+s.horasExtras+"h":""}</td>
                <td>${(s.minutosRetraso||s.minutosTardanza||0)>0?"+"+(s.minutosRetraso||s.minutosTardanza)+"min":"---"}</td>
              </tr>
            `).join("")}
          </tbody>
        </table>
        
        <div class="footer">
          <p>Generado el ${new Date().toLocaleDateString("es-PE",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}</p>
          <p>GESTORPLAN - Sistema de Planillas</p>
        </div>
      </body>
      </html>
    `,a=window.open("","_blank");a&&(a.document.write(i),a.document.close(),a.onload=()=>{setTimeout(()=>{a.print()},250)})}aplicarFiltros(){console.log("\u{1F50D} Aplicando filtros:",this.filtros);let i=[...this.trabajadoresDetalle];if(this.filtros.busqueda){let a=this.filtros.busqueda.toLowerCase();i=i.filter(s=>s.nombreCompleto.toLowerCase().includes(a)||s.dni.includes(a)||s.area.toLowerCase().includes(a)||s.cargo.toLowerCase().includes(a))}this.filtros.area&&(i=i.filter(a=>a.area===this.filtros.area)),i.sort((a,s)=>{switch(this.filtros.ordenarPor){case"asistencia":return s.porcentajeAsistencia-a.porcentajeAsistencia;case"tardanzas":return s.diasTardanza-a.diasTardanza;case"faltas":return s.diasFalta-a.diasFalta;default:return a.nombreCompleto.localeCompare(s.nombreCompleto)}}),this.trabajadoresFiltrados=i,console.log("\u{1F4CA} Trabajadores filtrados:",this.trabajadoresFiltrados.length)}limpiarFiltros(){this.filtros={mes:new Date().getMonth()+1,anio:new Date().getFullYear(),area:"",ordenarPor:"nombre",busqueda:""},this.aplicarFiltros()}get nombreMesActual(){let i=typeof this.filtros.mes=="string"?parseInt(this.filtros.mes,10):this.filtros.mes,a=this.meses.find(s=>s.valor===i)?.nombre||"";if(!a&&this.meses.length>0){let s=this.meses.find(o=>String(o.valor)===String(this.filtros.mes))?.nombre||"";if(s)return console.log("\u{1F50D} nombreMesActual - encontrado con conversi\xF3n de tipo"),s}return console.log("\u{1F50D} nombreMesActual getter - mes:",this.filtros.mes,"mesNumero:",i,"nombre:",a),a||"Mes desconocido"}get resumenGeneral(){return this.resumenMensual?Ut(Yt({},this.resumenMensual.estadisticas),{trabajadoresDestacados:this.trabajadoresDestacados,trabajadoresAlerta:this.trabajadoresAlerta,diasHabiles:this.resumenMensual.periodo?.diasHabiles||0}):null}get resumenTrabajadoresFiltrados(){return this.trabajadoresFiltrados}getEstadoBadgeClass(i){return i>=95?"badge--excelente":i>=90?"badge--bueno":i>=80?"badge--regular":"badge--malo"}getEstadoCalendarioClass(i){switch(i){case"Presente":return"calendario-dia--presente";case"Tardanza":return"calendario-dia--tardanza";case"Falta":return"calendario-dia--falta";case"Permiso":return"calendario-dia--permiso";case"Licencia":return"calendario-dia--licencia";case"Vacaciones":return"calendario-dia--vacaciones";case"Comision":return"calendario-dia--comision";default:return"calendario-dia--sin-registro"}}};n.\u0275fac=function(a){return new(a||n)(In(ia),In(na))},n.\u0275cmp=Ji({type:n,selectors:[["app-resumen"]],decls:70,vars:24,consts:[[1,"resumen-mensual"],[1,"page-header"],[1,"page-header__left"],[1,"page-title"],[1,"page-title__icon"],[1,"page-subtitle"],[1,"page-subtitle__dots"],[1,"page-subtitle__dot","page-subtitle__dot--large"],[1,"page-subtitle__dot","page-subtitle__dot--medium"],[1,"page-subtitle__dot","page-subtitle__dot--small"],[1,"page-header__right"],[1,"btn","btn--sm","btn--outline","btn-export","btn-export--excel",3,"click"],["src","assets/excel.png","alt","Excel",1,"btn-export__icon","btn-export__icon--excel"],[1,"btn-export__text"],[1,"btn","btn--sm","btn--outline","btn-export","btn-export--pdf",3,"click"],["src","assets/pdf.png","alt","PDF",1,"btn-export__icon","btn-export__icon--pdf"],["class","resumen-general",4,"ngIf"],["class","destacados-alertas",4,"ngIf"],[1,"periodo-selector"],[1,"periodo-selector__top"],[1,"periodo-selector__controls"],[1,"select","select--large",3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"periodo-actual"],[1,"periodo-actual__label"],[1,"periodo-actual__value"],[1,"vista-toggle"],[1,"btn","btn--sm","btn--outline",3,"click"],[1,"periodo-selector__filtros"],[1,"filtros-bar__left"],[1,"search-box"],[1,"search-box__icon"],["type","text","placeholder","Buscar por DNI, nombre, \xE1rea...",1,"search-box__input",3,"ngModelChange","input","ngModel"],[1,"select",3,"ngModelChange","change","ngModel"],["value",""],["value","nombre"],["value","asistencia"],["value","tardanzas"],["value","faltas"],["class","btn btn--ghost btn--sm",3,"click",4,"ngIf"],[1,"filtros-bar__right"],[1,"resultados-count"],["class","tabla-container",4,"ngIf"],["class","detalle-container",4,"ngIf"],["class","graficos-container",4,"ngIf"],["class","modal",3,"click",4,"ngIf"],[1,"resumen-general"],[1,"resumen-card","resumen-card--primary"],[1,"resumen-card__icon"],[1,"resumen-card__content"],[1,"resumen-card__label"],[1,"resumen-card__value"],[1,"resumen-card","resumen-card--success"],[1,"resumen-card","resumen-card--info"],[1,"resumen-card","resumen-card--warning"],[1,"resumen-card","resumen-card--danger"],[1,"resumen-card","resumen-card--secondary"],[1,"destacados-alertas"],[1,"panel","panel--destacados"],[1,"panel__title"],[1,"panel__icon"],[1,"lista-destacados"],["class","destacado-item",4,"ngFor","ngForOf"],["class","panel panel--alertas",4,"ngIf"],[1,"destacado-item"],[1,"destacado-item__avatar"],[1,"destacado-item__info"],[1,"destacado-item__nombre"],[1,"destacado-item__cargo"],[1,"destacado-item__area"],[1,"destacado-item__stats"],[1,"stat","stat--asistencia"],[1,"stat","stat--puntualidad"],[1,"panel","panel--alertas"],[1,"lista-alertas"],["class","alerta-item",4,"ngFor","ngForOf"],[1,"alerta-item"],[1,"alerta-item__avatar"],[1,"alerta-item__info"],[1,"alerta-item__nombre"],[1,"alerta-item__cargo"],[1,"alerta-item__stats"],[1,"stat","stat--asistencia-baja"],[1,"stat","stat--faltas"],[1,"stat","stat--tardanzas"],[3,"value"],[1,"btn","btn--ghost","btn--sm",3,"click"],[1,"tabla-container"],[1,"tabla-scroll"],[1,"tabla"],[4,"ngIf"],[4,"ngFor","ngForOf"],["colspan","12",1,"td-loading"],[1,"loading-spinner"],["colspan","12",1,"td-empty"],[1,"empty-state"],[1,"empty-state__icon"],[1,"empty-state__text"],[1,"td-dni"],[1,"td-trabajador"],[1,"trabajador-info"],[1,"trabajador-info__nombre"],[1,"trabajador-info__cargo"],[1,"td-area"],[1,"td-numero"],[1,"td-numero","td-numero--success"],[1,"td-numero","td-numero--warning"],["class","justif-badge",4,"ngIf"],[1,"td-numero","td-numero--danger"],[1,"td-porcentaje"],[1,"badge",3,"ngClass"],[1,"td-horas"],["class","horas-extras",4,"ngIf"],[1,"td-actions"],["title","Ver detalle",1,"btn-icon",3,"click"],[1,"justif-badge"],[1,"horas-extras"],[1,"detalle-container"],[1,"detalle-header"],[1,"detalle-header__selector"],[1,"detalle-header__label"],[1,"select","select--large","select--premium",3,"ngModelChange","change","ngModel"],["value","-1"],["class","trabajador-info-card",4,"ngIf"],["class","detalle-tabla-container",4,"ngIf"],["class","detalle-empty",4,"ngIf"],[1,"trabajador-info-card"],[1,"trabajador-info-card__header"],[1,"trabajador-info-card__avatar"],[1,"trabajador-info-card__data"],[1,"trabajador-info-card__nombre"],[1,"trabajador-info-card__meta"],[1,"meta-item"],[1,"trabajador-stats"],[1,"stat-card","stat-card--success"],[1,"stat-card__icon"],[1,"stat-card__content"],[1,"stat-card__label"],[1,"stat-card__value"],[1,"stat-card","stat-card--warning"],[1,"stat-card","stat-card--danger"],[1,"stat-card","stat-card--info"],[1,"stat-card","stat-card--primary"],[1,"stat-card","stat-card--secondary"],[1,"detalle-tabla-container"],[1,"detalle-tabla-header"],[1,"detalle-tabla-title"],[1,"detalle-tabla-info"],[1,"info-badge"],[1,"tabla","tabla--detalle"],[3,"fila--presente","fila--tardanza","fila--falta","fila--permiso","fila--licencia",4,"ngFor","ngForOf"],["colspan","10",1,"td-empty"],[1,"empty-state__hint"],[1,"td-fecha"],[1,"td-dia"],[1,"td-estado"],[1,"td-hora"],[1,"td-tardanza"],["class","tardanza-badge",4,"ngIf"],["class","tardanza-badge tardanza-badge--none",4,"ngIf"],[1,"td-observaciones"],[1,"tardanza-badge"],[1,"tardanza-badge","tardanza-badge--none"],[1,"detalle-empty"],[1,"empty-state","empty-state--large"],[1,"empty-state__title"],[1,"graficos-container"],[1,"grafico-principal"],[1,"grafico-card","grafico-card--large"],[1,"grafico-card__header"],[1,"grafico-card__title"],[1,"grafico-card__subtitle"],[1,"grafico-card__body"],["id","grafico-mensual"],[1,"modal",3,"click"],[1,"modal__content","modal__content--large",3,"click"],[1,"modal__header"],[1,"modal__title"],[1,"modal__close",3,"click"],["class","modal__body",4,"ngIf"],[1,"modal__footer"],[1,"btn","btn--ghost",3,"click"],[1,"btn","btn--primary",3,"click"],[1,"modal__body"],[1,"trabajador-card"],[1,"avatar-large"],[1,"trabajador-data"],[1,"estadisticas-detalle"],[1,"stat-box"],[1,"stat-box__label"],[1,"stat-box__value","stat-box__value--success"],[1,"stat-box__value","stat-box__value--warning"],[1,"stat-box__value","stat-box__value--danger"],[1,"stat-box__value"],["class","registro-detallado-modal",4,"ngIf"],["class","registro-detallado-empty",4,"ngIf"],[1,"registro-detallado-modal"],[1,"registro-detallado-title"],[1,"tabla-detalle-scroll"],[1,"tabla","tabla--detalle-modal"],[1,"registro-detallado-empty"]],template:function(a,s){a&1&&(x(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3)(4,"span",4),y(5,"\u{1F4CA}"),b(),y(6," Resumen Mensual de Asistencias "),b(),x(7,"p",5)(8,"span",6),Se(9,"span",7)(10,"span",8)(11,"span",9),b(),y(12," An\xE1lisis estad\xEDstico de asistencia del personal municipal "),b()(),x(13,"div",10)(14,"button",11),it("click",function(){return s.exportarExcel()}),Se(15,"img",12),x(16,"span",13),y(17,"Excel"),b()(),x(18,"button",14),it("click",function(){return s.exportarPDF()}),Se(19,"img",15),x(20,"span",13),y(21,"PDF"),b()()()(),J(22,uh,49,6,"div",16)(23,bh,9,3,"div",17),x(24,"div",18)(25,"div",19)(26,"div",20)(27,"select",21),Kt("ngModelChange",function(r){return qt(s.filtros.mes,r)||(s.filtros.mes=r),r}),it("change",function(){return s.cambiarPeriodo()}),J(28,xh,2,2,"option",22),b(),x(29,"select",21),Kt("ngModelChange",function(r){return qt(s.filtros.anio,r)||(s.filtros.anio=r),r}),it("change",function(){return s.cambiarPeriodo()}),J(30,_h,2,2,"option",22),b(),x(31,"div",23)(32,"span",24),y(33,"Per\xEDodo:"),b(),x(34,"span",25),y(35),b()()(),x(36,"div",26)(37,"button",27),it("click",function(){return s.vistaActual="resumen"}),y(38," \u{1F4CB} Resumen "),b(),x(39,"button",27),it("click",function(){return s.vistaActual="detalle"}),y(40," \u{1F4C5} Detalle "),b(),x(41,"button",27),it("click",function(){return s.cambiarVista("grafico")}),y(42," \u{1F4C8} Gr\xE1ficos "),b()()(),x(43,"div",28)(44,"div",29)(45,"div",30)(46,"span",31),y(47,"\u{1F50D}"),b(),x(48,"input",32),Kt("ngModelChange",function(r){return qt(s.filtros.busqueda,r)||(s.filtros.busqueda=r),r}),it("input",function(){return s.aplicarFiltros()}),b()(),x(49,"select",33),Kt("ngModelChange",function(r){return qt(s.filtros.area,r)||(s.filtros.area=r),r}),it("change",function(){return s.aplicarFiltros()}),x(50,"option",34),y(51,"Todas las \xE1reas"),b(),J(52,yh,2,2,"option",22),b(),x(53,"select",33),Kt("ngModelChange",function(r){return qt(s.filtros.ordenarPor,r)||(s.filtros.ordenarPor=r),r}),it("change",function(){return s.aplicarFiltros()}),x(54,"option",35),y(55,"Ordenar por Nombre"),b(),x(56,"option",36),y(57,"Ordenar por Asistencia"),b(),x(58,"option",37),y(59,"Ordenar por Tardanzas"),b(),x(60,"option",38),y(61,"Ordenar por Faltas"),b()(),J(62,vh,2,0,"button",39),b(),x(63,"div",40)(64,"span",41),y(65),b()()()(),J(66,kh,33,3,"div",42)(67,Lh,12,5,"div",43)(68,Nh,10,2,"div",44)(69,Gh,13,3,"div",45),b()),a&2&&(P(22),R("ngIf",s.resumenGeneral),P(),R("ngIf",s.resumenGeneral),P(4),Xt("ngModel",s.filtros.mes),P(),R("ngForOf",s.meses),P(),Xt("ngModel",s.filtros.anio),P(),R("ngForOf",s.anios),P(5),Gt("",s.nombreMesActual," ",s.filtros.anio),P(2),re("active",s.vistaActual==="resumen"),P(2),re("active",s.vistaActual==="detalle"),P(2),re("active",s.vistaActual==="grafico"),P(7),Xt("ngModel",s.filtros.busqueda),P(),Xt("ngModel",s.filtros.area),P(3),R("ngForOf",s.areas),P(),Xt("ngModel",s.filtros.ordenarPor),P(9),R("ngIf",s.filtros.busqueda||s.filtros.area),P(3),z("",s.resumenTrabajadoresFiltrados.length," trabajadores"),P(),R("ngIf",s.vistaActual==="resumen"),P(),R("ngIf",s.vistaActual==="detalle"),P(),R("ngIf",s.vistaActual==="grafico"),P(),R("ngIf",s.mostrarModalDetalle))},dependencies:[ea,Zi,Qi,ta,da,la,ca,aa,ra,sa,oa],styles:['@charset "UTF-8";.resumen-mensual[_ngcontent-%COMP%]{width:100%;max-width:100%;padding-bottom:40px}.page-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:20px;padding:18px 24px;background:linear-gradient(135deg,#fff,#f8fafc)!important;border-radius:10px;border:1px solid rgba(34,197,94,.15);box-shadow:0 4px 16px #00000014,0 1px 3px #0000000d,inset 0 1px #ffffffe6;position:relative;overflow:hidden;gap:20px;flex-wrap:wrap}.page-header[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:5px;background:linear-gradient(90deg,#22c55e,#16a34a,#22c55e);background-size:200% 100%;animation:_ngcontent-%COMP%_shimmer 3s ease-in-out infinite}.page-header[_ngcontent-%COMP%]:after{content:"";position:absolute;top:0;left:0;width:4px;height:100%;background:linear-gradient(180deg,#22c55e,#16a34a);opacity:.6}.page-header__left[_ngcontent-%COMP%]{flex:1;position:relative;z-index:1;padding-left:12px}.page-header__right[_ngcontent-%COMP%]{display:flex;gap:12px;flex-shrink:0;position:relative;z-index:1}[data-theme=dark][_nghost-%COMP%]   .page-header[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .page-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1e293b,#0f172a)!important;border:1px solid rgba(34,197,94,.2);box-shadow:0 4px 16px #0000004d,0 1px 3px #0003,inset 0 1px #ffffff0d}.page-title[_ngcontent-%COMP%]{font-size:28px;font-weight:700;color:var(--text-1);margin:0 0 8px;display:flex;align-items:center;gap:12px}.page-title__icon[_ngcontent-%COMP%]{font-size:32px}.page-subtitle[_ngcontent-%COMP%]{font-size:11px;color:#64748b;margin:0;font-weight:600;letter-spacing:.05em;display:flex;align-items:center;gap:10px;text-transform:uppercase;position:relative;padding-left:20px}.page-subtitle__dots[_ngcontent-%COMP%]{position:absolute;left:0;top:50%;transform:translateY(-50%);display:flex;flex-direction:column;align-items:flex-start;justify-content:center;gap:3px;width:16px;height:20px}.page-subtitle__dot[_ngcontent-%COMP%]{border-radius:50%;background:linear-gradient(135deg,#22c55e,#16a34a);flex-shrink:0}.page-subtitle__dot--large[_ngcontent-%COMP%]{width:8px;height:8px;box-shadow:0 0 0 2px #22c55e33,0 0 8px #22c55e66;animation:dotPulse 2s ease-in-out infinite;margin-left:0}.page-subtitle__dot--medium[_ngcontent-%COMP%]{width:5px;height:5px;box-shadow:0 0 0 1.5px #22c55e33,0 0 6px #22c55e4d;opacity:.85;margin-left:3px}.page-subtitle__dot--small[_ngcontent-%COMP%]{width:3px;height:3px;box-shadow:0 0 0 1px #22c55e33,0 0 4px #22c55e4d;opacity:.7;margin-left:6px}.btn-export[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;justify-content:center;padding:18px 20px;min-width:66px;overflow:hidden}.btn-export__icon[_ngcontent-%COMP%]{width:42px;height:42px;transition:all .4s cubic-bezier(.34,1.56,.64,1);object-fit:contain;display:block;position:relative;z-index:2;flex-shrink:0}.btn-export__icon--excel[_ngcontent-%COMP%], .btn-export__icon--pdf[_ngcontent-%COMP%]{filter:drop-shadow(0 2px 4px rgba(0,0,0,.25))}.btn-export__text[_ngcontent-%COMP%]{position:absolute;left:50%;transform:translate(-50%) translate(30px);font-size:13px;font-weight:600;white-space:nowrap;opacity:0;visibility:hidden;pointer-events:none;transition:all .4s cubic-bezier(.34,1.56,.64,1);z-index:1;letter-spacing:.3px;color:var(--text-1)}.btn-export[_ngcontent-%COMP%]:hover   .btn-export__icon[_ngcontent-%COMP%]{transform:translate(-45px);opacity:.2}.btn-export[_ngcontent-%COMP%]:hover   .btn-export__text[_ngcontent-%COMP%]{opacity:1;visibility:visible;transform:translate(-50%);transition-delay:.1s}.btn-export--excel[_ngcontent-%COMP%]:hover{background:#2173461a;border-color:#217346}.btn-export--excel[_ngcontent-%COMP%]:hover   .btn-export__text[_ngcontent-%COMP%]{color:#217346;font-weight:700}.btn-export--pdf[_ngcontent-%COMP%]:hover{background:#dc143c1a;border-color:#dc143c}.btn-export--pdf[_ngcontent-%COMP%]:hover   .btn-export__text[_ngcontent-%COMP%]{color:#dc143c;font-weight:700}[data-theme=dark][_nghost-%COMP%]   .page-header[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .page-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--panel) 0%,#1e293b 100%)!important;border-color:var(--border);box-shadow:0 4px 16px #0000004d,0 1px 3px #0003,inset 0 1px #ffffff0d}[data-theme=dark][_nghost-%COMP%]   .btn-export__text[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .btn-export__text[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f1f5f9,#e2e8f0);color:#1e293b}[data-theme=dark][_nghost-%COMP%]   .btn-export__text[_ngcontent-%COMP%]:after, [data-theme=dark]   [_nghost-%COMP%]   .btn-export__text[_ngcontent-%COMP%]:after{border-top-color:#e2e8f0}.periodo-selector[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;padding:20px;background:var(--panel);border:1px solid var(--border);border-radius:8px;margin-bottom:24px;position:relative;overflow:hidden}.periodo-selector__top[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:20px;flex-wrap:wrap}.periodo-selector__controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;flex-wrap:wrap}.periodo-selector__filtros[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:16px;padding-top:16px;border-top:1px solid var(--border);flex-wrap:wrap}.periodo-selector__filtros[_ngcontent-%COMP%]   .filtros-bar__left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;flex-wrap:wrap;flex:1}.periodo-selector__filtros[_ngcontent-%COMP%]   .filtros-bar__right[_ngcontent-%COMP%]{display:flex;align-items:center;flex-shrink:0}.periodo-actual[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:10px 20px;background:linear-gradient(135deg,var(--accent) 0%,#16a34a 100%);border-radius:10px}.periodo-actual__label[_ngcontent-%COMP%]{font-size:13px;font-weight:600;color:#fffc}.periodo-actual__value[_ngcontent-%COMP%]{font-size:16px;font-weight:700;color:#fff}.vista-toggle[_ngcontent-%COMP%]{display:flex;gap:8px}.select[_ngcontent-%COMP%]{padding:10px 14px;border:1px solid var(--border);border-radius:10px;background:var(--panel-2);color:var(--text-1);font-size:14px;outline:none;cursor:pointer;transition:all .2s ease}.select[_ngcontent-%COMP%]:focus{border-color:var(--accent);box-shadow:0 0 0 3px #22c55e1a}.select--large[_ngcontent-%COMP%]{padding:12px 16px;font-size:15px;font-weight:600;min-width:150px}.resumen-general[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:16px;margin-bottom:24px}.resumen-card[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;padding:20px;border-radius:8px;border:2px solid;transition:all .3s ease}.resumen-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 8px 24px #00000026}.resumen-card__icon[_ngcontent-%COMP%]{font-size:36px}.resumen-card__content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.resumen-card__label[_ngcontent-%COMP%]{font-size:12px;font-weight:600;color:var(--text-2);text-transform:uppercase;letter-spacing:.5px}.resumen-card__value[_ngcontent-%COMP%]{font-size:28px;font-weight:700;line-height:1}.resumen-card--primary[_ngcontent-%COMP%]{background:#3b82f61a;border-color:#3b82f64d}.resumen-card--primary[_ngcontent-%COMP%]   .resumen-card__value[_ngcontent-%COMP%]{color:#3b82f6}.resumen-card--success[_ngcontent-%COMP%]{background:#22c55e1a;border-color:#22c55e4d}.resumen-card--success[_ngcontent-%COMP%]   .resumen-card__value[_ngcontent-%COMP%]{color:var(--accent)}.resumen-card--info[_ngcontent-%COMP%]{background:#0ea5e91a;border-color:#0ea5e94d}.resumen-card--info[_ngcontent-%COMP%]   .resumen-card__value[_ngcontent-%COMP%]{color:#0ea5e9}.resumen-card--warning[_ngcontent-%COMP%]{background:#f59e0b1a;border-color:#f59e0b4d}.resumen-card--warning[_ngcontent-%COMP%]   .resumen-card__value[_ngcontent-%COMP%]{color:#f59e0b}.resumen-card--danger[_ngcontent-%COMP%]{background:#ef44441a;border-color:#ef44444d}.resumen-card--danger[_ngcontent-%COMP%]   .resumen-card__value[_ngcontent-%COMP%]{color:#ef4444}.resumen-card--secondary[_ngcontent-%COMP%]{background:#6b72801a;border-color:#6b72804d}.resumen-card--secondary[_ngcontent-%COMP%]   .resumen-card__value[_ngcontent-%COMP%]{color:#6b7280}.destacados-alertas[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(400px,1fr));gap:20px;margin-bottom:24px}.panel[_ngcontent-%COMP%]{background:var(--panel);border:1px solid var(--border);border-radius:12px;padding:20px;position:relative;overflow:hidden}.panel[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:3px;background:linear-gradient(90deg,#22c55e,#16a34a,#22c55e);background-size:200% 100%;animation:_ngcontent-%COMP%_shimmer 3s ease-in-out infinite}.panel__title[_ngcontent-%COMP%]{font-size:18px;font-weight:700;color:var(--text-1);margin:0 0 20px;display:flex;align-items:center;gap:10px}.panel__icon[_ngcontent-%COMP%]{font-size:24px}.panel--destacados[_ngcontent-%COMP%]{border-color:#22c55e4d}.panel--alertas[_ngcontent-%COMP%]{border-color:#ef44444d}.lista-destacados[_ngcontent-%COMP%], .lista-alertas[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.destacado-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;padding:16px;background:#22c55e0d;border:1px solid rgba(34,197,94,.15);border-radius:10px;transition:all .2s ease}.destacado-item[_ngcontent-%COMP%]:hover{background:#22c55e1a;transform:translate(4px)}.destacado-item__avatar[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:50%;background:linear-gradient(135deg,var(--accent) 0%,#16a34a 100%);color:#fff;display:flex;align-items:center;justify-content:center;font-size:20px;font-weight:700;flex-shrink:0}.destacado-item__info[_ngcontent-%COMP%]{flex:1}.destacado-item__nombre[_ngcontent-%COMP%]{font-size:15px;font-weight:700;color:var(--text-1);margin:0 0 4px}.destacado-item__cargo[_ngcontent-%COMP%], .destacado-item__area[_ngcontent-%COMP%]{font-size:12px;color:var(--text-2);margin:0}.destacado-item__stats[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px;align-items:flex-end}.alerta-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;padding:16px;background:#ef44440d;border:1px solid rgba(239,68,68,.15);border-radius:10px;transition:all .2s ease}.alerta-item[_ngcontent-%COMP%]:hover{background:#ef44441a;transform:translate(4px)}.alerta-item__avatar[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:50%;background:linear-gradient(135deg,#ef4444,#dc2626);color:#fff;display:flex;align-items:center;justify-content:center;font-size:20px;font-weight:700;flex-shrink:0}.alerta-item__info[_ngcontent-%COMP%]{flex:1}.alerta-item__nombre[_ngcontent-%COMP%]{font-size:15px;font-weight:700;color:var(--text-1);margin:0 0 4px}.alerta-item__cargo[_ngcontent-%COMP%]{font-size:12px;color:var(--text-2);margin:0}.alerta-item__stats[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px;align-items:flex-end}.stat[_ngcontent-%COMP%]{padding:4px 10px;border-radius:6px;font-size:12px;font-weight:600;white-space:nowrap}.stat--asistencia[_ngcontent-%COMP%]{background:#22c55e26;color:var(--accent)}.stat--puntualidad[_ngcontent-%COMP%]{background:#3b82f626;color:#3b82f6}.stat--asistencia-baja[_ngcontent-%COMP%], .stat--faltas[_ngcontent-%COMP%]{background:#ef444426;color:#ef4444}.stat--tardanzas[_ngcontent-%COMP%]{background:#f59e0b26;color:#f59e0b}.filtros-bar[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:16px;padding:20px 24px;background:linear-gradient(135deg,#fff,#f8fafc)!important;border:1px solid var(--border);border-radius:8px;margin-bottom:24px;flex-wrap:wrap;position:relative;overflow:hidden}.filtros-bar[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:3px;background:linear-gradient(90deg,#22c55e,#16a34a,#22c55e);background-size:200% 100%;animation:_ngcontent-%COMP%_shimmer 3s ease-in-out infinite}.filtros-bar__left[_ngcontent-%COMP%], .filtros-bar__right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;flex-wrap:wrap}@keyframes _ngcontent-%COMP%_shimmer{0%,to{background-position:0% 50%}50%{background-position:100% 50%}}.search-box[_ngcontent-%COMP%]{position:relative;min-width:300px}.search-box__icon[_ngcontent-%COMP%]{position:absolute;left:14px;top:50%;transform:translateY(-50%);font-size:18px;opacity:.5;pointer-events:none}.search-box__input[_ngcontent-%COMP%]{width:100%;padding:10px 14px 10px 44px;border:1px solid var(--border);border-radius:10px;background:var(--panel-2);color:var(--text-1);font-size:14px;outline:none;transition:all .2s ease}.search-box__input[_ngcontent-%COMP%]:focus{border-color:var(--accent);box-shadow:0 0 0 3px #22c55e1a}.resultados-count[_ngcontent-%COMP%]{font-size:14px;color:var(--text-2);font-weight:600}.tabla-container[_ngcontent-%COMP%]{background:var(--panel);border:1px solid var(--border);border-radius:4px;overflow:hidden;margin-bottom:24px}.tabla-scroll[_ngcontent-%COMP%]{overflow-x:auto}.tabla[_ngcontent-%COMP%]{width:100%;border-collapse:separate;border-spacing:0;font-size:13px;border-radius:4px;overflow:hidden}.tabla[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:#059669!important;border-bottom:2px solid #047857!important}.tabla[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:16px 20px!important;text-align:left;font-size:12px!important;font-weight:700!important;color:#fff!important;text-transform:uppercase!important;letter-spacing:1px!important;white-space:nowrap;border-right:1px solid rgba(4,120,87,.3)!important;box-shadow:0 1px 3px #04785733!important}.tabla[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{border-left:none!important;border-top-left-radius:4px}.tabla[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{border-right:none!important;border-top-right-radius:4px}.tabla[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid var(--line-soft);transition:background .15s ease}.tabla[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:var(--panel-2)}.tabla[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child{border-bottom:none}.tabla[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]:first-child{border-bottom-left-radius:4px}.tabla[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]:last-child{border-bottom-right-radius:4px}.tabla[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:14px 12px;color:var(--text-1)}.td-loading[_ngcontent-%COMP%], .td-empty[_ngcontent-%COMP%]{text-align:center;padding:60px 20px}.loading-spinner[_ngcontent-%COMP%]{font-size:16px;color:var(--text-2)}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:12px}.empty-state__icon[_ngcontent-%COMP%]{font-size:48px;opacity:.5}.empty-state__text[_ngcontent-%COMP%]{font-size:16px;color:var(--text-2);margin:0}.trabajador-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.trabajador-info__nombre[_ngcontent-%COMP%]{font-weight:600;color:var(--text-1)}.trabajador-info__cargo[_ngcontent-%COMP%]{font-size:12px;color:var(--text-2)}.td-numero[_ngcontent-%COMP%]{text-align:center;font-weight:600}.td-numero--success[_ngcontent-%COMP%]{color:var(--accent)}.td-numero--warning[_ngcontent-%COMP%]{color:#f59e0b}.td-numero--danger[_ngcontent-%COMP%]{color:#ef4444}.justif-badge[_ngcontent-%COMP%]{display:inline-block;margin-left:4px;padding:2px 6px;background:#22c55e26;border-radius:4px;font-size:10px;color:var(--accent);font-weight:700}.td-porcentaje[_ngcontent-%COMP%]{text-align:center}.td-horas[_ngcontent-%COMP%]{font-weight:600}.horas-extras[_ngcontent-%COMP%]{display:block;font-size:11px;color:var(--accent);font-weight:600;margin-top:4px}.td-actions[_ngcontent-%COMP%]{text-align:center}.btn-icon[_ngcontent-%COMP%]{width:32px;height:32px;display:inline-flex;align-items:center;justify-content:center;border-radius:8px;border:none;background:transparent;cursor:pointer;font-size:16px;transition:all .2s ease}.btn-icon[_ngcontent-%COMP%]:hover{background:var(--panel-2)}.badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:4px;padding:4px 10px;border-radius:6px;font-size:12px;font-weight:600;white-space:nowrap}.badge--excelente[_ngcontent-%COMP%]{background:#22c55e26;color:#22c55e;border:1px solid rgba(34,197,94,.3)}.badge--bueno[_ngcontent-%COMP%]{background:#3b82f626;color:#3b82f6;border:1px solid rgba(59,130,246,.3)}.badge--regular[_ngcontent-%COMP%]{background:#f59e0b26;color:#f59e0b;border:1px solid rgba(245,158,11,.3)}.badge--malo[_ngcontent-%COMP%]{background:#ef444426;color:#ef4444;border:1px solid rgba(239,68,68,.3)}.badge--presente[_ngcontent-%COMP%]{background:#22c55e26;color:#22c55e;border:1px solid rgba(34,197,94,.3)}.badge--tardanza[_ngcontent-%COMP%]{background:#f59e0b26;color:#f59e0b;border:1px solid rgba(245,158,11,.3)}.badge--falta[_ngcontent-%COMP%]{background:#ef444426;color:#ef4444;border:1px solid rgba(239,68,68,.3)}.badge--permiso[_ngcontent-%COMP%]{background:#a855f726;color:#a855f7;border:1px solid rgba(168,85,247,.3)}.badge--licencia[_ngcontent-%COMP%]{background:#0ea5e926;color:#0ea5e9;border:1px solid rgba(14,165,233,.3)}.badge--comision[_ngcontent-%COMP%]{background:#8b5cf626;color:#8b5cf6;border:1px solid rgba(139,92,246,.3)}.calendario-container[_ngcontent-%COMP%]{background:var(--panel);border:1px solid var(--border);border-radius:8px;padding:24px;margin-bottom:24px;position:relative;overflow:hidden}.calendario-container[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:3px;background:linear-gradient(90deg,#22c55e,#16a34a,#22c55e);background-size:200% 100%;animation:_ngcontent-%COMP%_shimmer 3s ease-in-out infinite}.trabajador-selector[_ngcontent-%COMP%]{margin-bottom:24px}.calendario-mensual[_ngcontent-%COMP%]{width:100%}.calendario-header[_ngcontent-%COMP%]{margin-bottom:24px;padding-bottom:16px;border-bottom:2px solid var(--border)}.calendario-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:var(--text-1);margin:0 0 8px}.calendario-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;color:var(--text-2);margin:0}.calendario-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(5,1fr);gap:12px;margin-bottom:24px}.calendario-dia[_ngcontent-%COMP%]{padding:12px;border-radius:8px;border:1px solid var(--border);background:var(--panel-2);min-height:100px;display:flex;flex-direction:column;gap:6px;transition:all .2s ease}.calendario-dia[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #0000001a}.calendario-dia--header[_ngcontent-%COMP%]{background:var(--panel);font-weight:700;text-align:center;min-height:auto;padding:8px;border:none}.calendario-dia--header[_ngcontent-%COMP%]:hover{transform:none;box-shadow:none}.calendario-dia--presente[_ngcontent-%COMP%]{background:#22c55e1a;border-color:#22c55e4d}.calendario-dia--tardanza[_ngcontent-%COMP%]{background:#f59e0b1a;border-color:#f59e0b4d}.calendario-dia--falta[_ngcontent-%COMP%]{background:#ef44441a;border-color:#ef44444d}.calendario-dia--permiso[_ngcontent-%COMP%]{background:#a855f71a;border-color:#a855f74d}.calendario-dia--licencia[_ngcontent-%COMP%]{background:#0ea5e91a;border-color:#0ea5e94d}.calendario-dia--comision[_ngcontent-%COMP%]{background:#8b5cf61a;border-color:#8b5cf64d}.calendario-dia--descanso[_ngcontent-%COMP%]{background:#6b72801a;border-color:#6b728033}.dia-numero[_ngcontent-%COMP%]{font-size:18px;font-weight:700;color:var(--text-1)}.dia-estado[_ngcontent-%COMP%]{font-size:12px;font-weight:600;color:var(--text-2)}.dia-horas[_ngcontent-%COMP%]{font-size:11px;color:var(--text-2);font-family:Courier New,monospace}.dia-retraso[_ngcontent-%COMP%]{font-size:10px;color:#ef4444;font-weight:700}.leyenda[_ngcontent-%COMP%]{margin-top:24px;padding:16px;background:var(--panel-2);border-radius:10px}.leyenda[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:14px;font-weight:700;color:var(--text-1);margin:0 0 12px}.leyenda-items[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:16px}.leyenda-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:13px;color:var(--text-1)}.leyenda-item[_ngcontent-%COMP%]   .color[_ngcontent-%COMP%]{width:20px;height:20px;border-radius:4px;border:1px solid var(--border)}.graficos-container[_ngcontent-%COMP%]{padding:24px}.grafico-principal[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.grafico-card[_ngcontent-%COMP%]{background:var(--panel);border:1px solid var(--border);border-radius:8px;padding:32px;box-shadow:0 4px 16px #0003;transition:transform .2s,box-shadow .2s;width:100%;max-width:1400px;position:relative;overflow:hidden}.grafico-card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:3px;background:linear-gradient(90deg,#22c55e,#16a34a,#22c55e);background-size:200% 100%;animation:_ngcontent-%COMP%_shimmer 3s ease-in-out infinite}.grafico-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 20px #00000040}.grafico-card--large[_ngcontent-%COMP%]{width:100%}.grafico-card__header[_ngcontent-%COMP%]{margin-bottom:24px;padding-bottom:20px;border-bottom:2px solid var(--border)}.grafico-card__title[_ngcontent-%COMP%]{font-size:22px;font-weight:700;color:var(--text-1);margin:0 0 8px;display:flex;align-items:center;gap:10px}.grafico-card__subtitle[_ngcontent-%COMP%]{font-size:14px;color:var(--text-2);margin:0}.grafico-card__body[_ngcontent-%COMP%]{position:relative;height:500px}.grafico-card__body[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{max-height:100%}.modal[_ngcontent-%COMP%]{position:fixed!important;inset:0!important;width:100vw!important;height:100vh!important;min-width:100vw!important;min-height:100vh!important;max-width:100vw!important;max-height:100vh!important;margin:0!important;padding:20px!important;background:#0b1220d9!important;backdrop-filter:blur(8px)!important;-webkit-backdrop-filter:blur(8px)!important;display:flex!important;align-items:center!important;justify-content:center!important;z-index:999999!important;pointer-events:all!important;box-sizing:border-box!important;animation:_ngcontent-%COMP%_fadeIn .2s ease}.modal__content[_ngcontent-%COMP%]{background:var(--panel);border:1px solid var(--border);border-radius:16px;max-width:700px;width:100%;max-height:90vh;overflow-y:auto;box-shadow:0 20px 60px #0000004d;animation:_ngcontent-%COMP%_slideUp .3s ease}.modal__content--large[_ngcontent-%COMP%]{max-width:900px}.modal__header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:16px;padding:24px;border-bottom:1px solid var(--border)}.modal__title[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:var(--text-1);margin:0}.modal__close[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:8px;border:none;background:transparent;cursor:pointer;font-size:18px;transition:all .2s ease}.modal__close[_ngcontent-%COMP%]:hover{background:#ef44441a;color:#ef4444}.modal__body[_ngcontent-%COMP%]{padding:24px}.modal__footer[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end;gap:12px;padding:20px 24px;border-top:1px solid var(--border)}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.trabajador-card[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px;padding:20px;background:var(--panel-2);border-radius:12px;margin-bottom:24px}.avatar-large[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:50%;background:linear-gradient(135deg,var(--accent) 0%,#16a34a 100%);color:#fff;display:flex;align-items:center;justify-content:center;font-size:32px;font-weight:700;flex-shrink:0}.trabajador-data[_ngcontent-%COMP%]{flex:1}.trabajador-data[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:var(--text-1);margin:0 0 12px}.trabajador-data[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;color:var(--text-2);margin:4px 0}.trabajador-data[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:var(--text-1)}.estadisticas-detalle[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:16px;margin-bottom:24px}.stat-box[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;padding:16px;background:var(--panel-2);border:1px solid var(--border);border-radius:10px;text-align:center}.stat-box__label[_ngcontent-%COMP%]{font-size:12px;font-weight:600;color:var(--text-2);text-transform:uppercase}.stat-box__value[_ngcontent-%COMP%]{font-size:28px;font-weight:700;color:var(--text-1)}.stat-box__value--success[_ngcontent-%COMP%]{color:var(--accent)}.stat-box__value--warning[_ngcontent-%COMP%]{color:#f59e0b}.stat-box__value--danger[_ngcontent-%COMP%]{color:#ef4444}.timeline-asistencia[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:16px;font-weight:700;color:var(--text-1);margin:0 0 16px}.timeline-item[_ngcontent-%COMP%]{display:flex;gap:16px;padding:12px;border-left:3px solid var(--accent);background:var(--panel-2);margin-bottom:8px;border-radius:0 8px 8px 0}.timeline-item__fecha[_ngcontent-%COMP%]{font-size:12px;font-weight:600;color:var(--text-2);min-width:150px}.timeline-item__contenido[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;flex:1;flex-wrap:wrap}.timeline-item__horas[_ngcontent-%COMP%]{font-size:13px;color:var(--text-2);font-family:Courier New,monospace}.timeline-item__retraso[_ngcontent-%COMP%]{font-size:12px;color:#ef4444;font-weight:600}.btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;gap:8px;padding:10px 16px;border-radius:10px;font-weight:600;font-size:14px;cursor:pointer;transition:all .2s ease;border:none;white-space:nowrap}.btn--sm[_ngcontent-%COMP%]{padding:8px 14px;font-size:13px}.btn--primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6,#2563eb);color:#fff}.btn--primary[_ngcontent-%COMP%]:hover{box-shadow:0 0 20px #3b82f666;transform:translateY(-1px)}.btn--outline[_ngcontent-%COMP%]{background:transparent;border:1px solid var(--border);color:var(--text-1)}.btn--outline[_ngcontent-%COMP%]:hover{background:var(--panel-2);border-color:var(--accent);color:var(--accent)}.btn--outline.active[_ngcontent-%COMP%]{background:#22c55e1a;border-color:var(--accent);color:var(--accent)}.btn--ghost[_ngcontent-%COMP%]{background:transparent;border:none;color:var(--text-2)}.btn--ghost[_ngcontent-%COMP%]:hover{background:var(--panel-2);color:var(--text-1)}@media (max-width: 1200px){.resumen-general[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}.destacados-alertas[_ngcontent-%COMP%]{grid-template-columns:1fr}}@media (max-width: 768px){.page-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.page-header__right[_ngcontent-%COMP%]{width:100%;justify-content:stretch}.page-header__right[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{flex:1}.periodo-selector[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.periodo-selector__controls[_ngcontent-%COMP%]{width:100%;flex-direction:column}.vista-toggle[_ngcontent-%COMP%]{width:100%}.vista-toggle[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{flex:1}.resumen-general[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.filtros-bar[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.filtros-bar__left[_ngcontent-%COMP%], .filtros-bar__right[_ngcontent-%COMP%]{width:100%;flex-direction:column}.search-box[_ngcontent-%COMP%]{min-width:100%}.calendario-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}.estadisticas-detalle[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}.registro-detallado-modal[_ngcontent-%COMP%]{margin-top:24px}.registro-detallado-title[_ngcontent-%COMP%]{font-size:16px;font-weight:700;color:var(--text-1);margin:0 0 16px;padding-bottom:12px;border-bottom:2px solid var(--border)}.tabla-detalle-scroll[_ngcontent-%COMP%]{max-height:400px;overflow-y:auto;border:1px solid var(--border);border-radius:10px}.tabla--detalle-modal[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-size:12px}.tabla--detalle-modal[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{position:sticky;top:0;z-index:10;background:var(--panel-2);border-bottom:2px solid var(--border)}.tabla--detalle-modal[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:10px 8px;text-align:left;font-weight:600;color:var(--text-1);font-size:11px;text-transform:uppercase;letter-spacing:.5px;white-space:nowrap}.tabla--detalle-modal[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid var(--line-soft);transition:background .15s ease}.tabla--detalle-modal[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:var(--panel-2)}.tabla--detalle-modal[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.fila--presente[_ngcontent-%COMP%]{background:#22c55e0d}.tabla--detalle-modal[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.fila--tardanza[_ngcontent-%COMP%]{background:#f59e0b0d}.tabla--detalle-modal[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.fila--falta[_ngcontent-%COMP%]{background:#ef44440d}.tabla--detalle-modal[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.fila--permiso[_ngcontent-%COMP%]{background:#3b82f60d}.tabla--detalle-modal[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.fila--licencia[_ngcontent-%COMP%]{background:#a855f70d}.tabla--detalle-modal[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px 8px;color:var(--text-1);font-size:12px}.registro-detallado-empty[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;color:var(--text-2)}.registro-detallado-empty[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px}.detalle-container[_ngcontent-%COMP%]{width:100%;animation:_ngcontent-%COMP%_fadeIn .4s ease}.detalle-header[_ngcontent-%COMP%]{margin-bottom:24px;padding:20px;background:var(--panel-1);border-radius:16px;border:1px solid var(--border);box-shadow:0 2px 8px #0000001a}.detalle-header__selector[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.detalle-header__label[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:var(--text-1);display:flex;align-items:center;gap:8px}.select--premium[_ngcontent-%COMP%]{padding:12px 16px;font-size:15px;border:2px solid var(--border);border-radius:12px;background:var(--panel-2);color:var(--text-1);transition:all .3s ease}.select--premium[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--accent);box-shadow:0 0 0 3px #22c55e1a}.select--premium[_ngcontent-%COMP%]:hover{border-color:var(--accent)}.trabajador-info-card[_ngcontent-%COMP%]{margin-bottom:24px;padding:24px;background:linear-gradient(135deg,var(--panel-1) 0%,var(--panel-2) 100%);border-radius:16px;border:1px solid var(--border);box-shadow:0 4px 16px #0000001a,0 1px 4px #0000000d}.trabajador-info-card__header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px;margin-bottom:24px;padding-bottom:24px;border-bottom:2px solid var(--border)}.trabajador-info-card__avatar[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:16px;background:linear-gradient(135deg,var(--accent) 0%,#16a34a 100%);display:flex;align-items:center;justify-content:center;font-size:32px;font-weight:700;color:#fff;box-shadow:0 4px 12px #22c55e4d;flex-shrink:0}.trabajador-info-card__data[_ngcontent-%COMP%]{flex:1}.trabajador-info-card__nombre[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:var(--text-1);margin:0 0 12px;background:linear-gradient(135deg,var(--text-1) 0%,var(--accent) 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.trabajador-info-card__meta[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:20px}.trabajador-info-card[_ngcontent-%COMP%]   .meta-item[_ngcontent-%COMP%]{font-size:14px;color:var(--text-2)}.trabajador-info-card[_ngcontent-%COMP%]   .meta-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:var(--text-1);font-weight:600;margin-right:6px}.trabajador-stats[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(160px,1fr));gap:16px}.stat-card[_ngcontent-%COMP%]{padding:20px;border-radius:12px;border:1px solid var(--border);background:var(--panel-1);display:flex;align-items:center;gap:16px;transition:all .3s ease;box-shadow:0 2px 8px #0000000d}.stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #0000001a}.stat-card__icon[_ngcontent-%COMP%]{font-size:32px;flex-shrink:0}.stat-card__content[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:4px}.stat-card__label[_ngcontent-%COMP%]{font-size:12px;color:var(--text-2);text-transform:uppercase;letter-spacing:.5px;font-weight:600}.stat-card__value[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:var(--text-1)}.stat-card--success[_ngcontent-%COMP%]{background:linear-gradient(135deg,#22c55e1a,#22c55e0d);border-color:#22c55e4d}.stat-card--success[_ngcontent-%COMP%]   .stat-card__value[_ngcontent-%COMP%]{color:var(--accent)}.stat-card--warning[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f59e0b1a,#f59e0b0d);border-color:#f59e0b4d}.stat-card--warning[_ngcontent-%COMP%]   .stat-card__value[_ngcontent-%COMP%]{color:#f59e0b}.stat-card--danger[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ef44441a,#ef44440d);border-color:#ef44444d}.stat-card--danger[_ngcontent-%COMP%]   .stat-card__value[_ngcontent-%COMP%]{color:#ef4444}.stat-card--info[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f61a,#3b82f60d);border-color:#3b82f64d}.stat-card--info[_ngcontent-%COMP%]   .stat-card__value[_ngcontent-%COMP%]{color:#3b82f6}.stat-card--primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#6366f11a,#6366f10d);border-color:#6366f14d}.stat-card--primary[_ngcontent-%COMP%]   .stat-card__value[_ngcontent-%COMP%]{color:#6366f1}.stat-card--secondary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#94a3b81a,#94a3b80d);border-color:#94a3b84d}.stat-card--secondary[_ngcontent-%COMP%]   .stat-card__value[_ngcontent-%COMP%]{color:#94a3b8}.detalle-tabla-container[_ngcontent-%COMP%]{margin-top:24px;background:var(--panel-1);border-radius:16px;border:1px solid var(--border);box-shadow:0 4px 16px #0000001a;overflow:hidden}.detalle-tabla-header[_ngcontent-%COMP%]{padding:20px 24px;background:linear-gradient(135deg,var(--panel-2) 0%,var(--panel-1) 100%);border-bottom:2px solid var(--border);display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:16px}.detalle-tabla-title[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:var(--text-1);margin:0;display:flex;align-items:center;gap:12px}.detalle-tabla-info[_ngcontent-%COMP%]{display:flex;gap:12px}.info-badge[_ngcontent-%COMP%]{padding:8px 16px;background:#3b82f61a;border:1px solid rgba(59,130,246,.3);border-radius:8px;font-size:14px;font-weight:600;color:#3b82f6}.tabla--detalle[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:var(--panel-2)}.tabla--detalle[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:16px 12px;font-weight:700;text-transform:uppercase;font-size:11px;letter-spacing:.5px;color:var(--text-2);border-bottom:2px solid var(--border)}.tabla--detalle[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:all .2s ease}.tabla--detalle[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:var(--panel-2)}.tabla--detalle[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.fila--presente[_ngcontent-%COMP%]{background:#22c55e08}.tabla--detalle[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.fila--tardanza[_ngcontent-%COMP%]{background:#f59e0b08}.tabla--detalle[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.fila--falta[_ngcontent-%COMP%]{background:#ef444408}.tabla--detalle[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.fila--permiso[_ngcontent-%COMP%]{background:#8b5cf608}.tabla--detalle[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.fila--licencia[_ngcontent-%COMP%]{background:#3b82f608}.tabla--detalle[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:16px 12px;font-size:14px;color:var(--text-1)}.td-fecha[_ngcontent-%COMP%]{font-weight:600;font-family:Courier New,monospace}.td-dia[_ngcontent-%COMP%]{text-transform:capitalize;color:var(--text-2);font-size:13px}.td-estado[_ngcontent-%COMP%]{text-align:center}.td-hora[_ngcontent-%COMP%]{font-family:Courier New,monospace;font-weight:600;text-align:center;color:var(--text-1)}.td-horas[_ngcontent-%COMP%]{font-weight:600;text-align:center}.td-horas[_ngcontent-%COMP%]   .horas-extras[_ngcontent-%COMP%]{display:block;font-size:11px;color:var(--accent);margin-top:4px}.td-tardanza[_ngcontent-%COMP%]{text-align:center}.tardanza-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 8px;background:#f59e0b26;border:1px solid rgba(245,158,11,.3);border-radius:6px;font-size:12px;font-weight:600;color:#f59e0b}.tardanza-badge--none[_ngcontent-%COMP%]{background:transparent;border:none;color:var(--text-3)}.td-observaciones[_ngcontent-%COMP%]{font-size:13px;color:var(--text-2);max-width:200px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.detalle-empty[_ngcontent-%COMP%]{margin-top:60px;padding:60px 20px;text-align:center}.empty-state--large[_ngcontent-%COMP%]   .empty-state__icon[_ngcontent-%COMP%]{font-size:64px;margin-bottom:16px}.empty-state--large[_ngcontent-%COMP%]   .empty-state__title[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:var(--text-1);margin:0 0 12px}.empty-state--large[_ngcontent-%COMP%]   .empty-state__text[_ngcontent-%COMP%]{font-size:16px;color:var(--text-2);line-height:1.6;max-width:600px;margin:0 auto}.empty-state--large[_ngcontent-%COMP%]   .empty-state__text[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:var(--text-1);font-weight:600}.empty-state--large[_ngcontent-%COMP%]   .empty-state__hint[_ngcontent-%COMP%]{font-size:14px;color:var(--text-3);margin-top:8px;font-style:italic}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}']});let e=n;return e})();export{ff as ResumenComponent};
