import{$b as et,Ba as z,Bb as R,Ca as w,Ea as y,Fa as i,Ga as _,Gb as Y,Ha as x,Ia as k,Ja as L,Ka as j,L as r,La as C,Ma as v,Mb as $,Na as P,Pb as H,Qb as M,Sb as G,T as I,Tb as J,Ub as K,V as q,Vb as Q,Wb as X,Xb as Z,_ as b,_b as tt,a as T,ac as nt,b as V,cc as ot,dc as it,ec as at,fa as m,fc as rt,ga as n,gc as lt,ha as e,hc as st,ia as S,ic as dt,kb as W,lb as B,p as N,pa as h,rb as U,s as A,sa as g,ta as d,v as p,w as u,wb as F,xb as D}from"./chunk-USIH7JXW.js";var ct=(()=>{let c=class c{constructor(a){this.http=a,this.apiUrl="http://localhost:5000/api/prestamos"}obtenerTodos(a){let o=new F;return a&&(a.trabajadorID&&(o=o.set("trabajadorID",a.trabajadorID.toString())),a.entidadID&&(o=o.set("entidadID",a.entidadID.toString())),a.estado&&(o=o.set("estado",a.estado)),a.tipoPrestamo&&(o=o.set("tipoPrestamo",a.tipoPrestamo))),this.http.get(this.apiUrl,{params:o})}obtenerPorID(a){return this.http.get(`${this.apiUrl}/${a}`)}obtenerPorTrabajador(a){return this.http.get(`${this.apiUrl}/trabajador/${a}`)}crear(a){return this.http.post(this.apiUrl,a)}verificarPIN(a,o){return this.http.post(`${this.apiUrl}/${a}/verificar-pin`,{pin:o})}actualizar(a,o){return this.http.put(`${this.apiUrl}/${a}`,o)}actualizarCuotas(a,o){return this.http.put(`${this.apiUrl}/${a}/cuotas`,{cuotas:o})}liquidar(a,o){return this.http.post(`${this.apiUrl}/${a}/liquidar`,o)}obtenerCronograma(a){return this.http.get(`${this.apiUrl}/${a}/cronograma`)}obtenerEstadisticas(){return this.http.get(`${this.apiUrl}/estadisticas`)}obtenerEntidades(a){let o=new F;return a&&(a.tipo&&(o=o.set("tipo",a.tipo)),a.activo!==void 0&&(o=o.set("activo",a.activo.toString()))),this.http.get(`${this.apiUrl}/entidades`,{params:o})}crearEntidad(a){return this.http.post(`${this.apiUrl}/entidades`,a)}actualizarEntidad(a,o){return this.http.put(`${this.apiUrl}/entidades/${a}`,o)}obtenerTiposEntidades(){return this.http.get(`${this.apiUrl}/entidades/tipos`)}};c.\u0275fac=function(o){return new(o||c)(A(D))},c.\u0275prov=N({token:c,factory:c.\u0275fac,providedIn:"root"});let s=c;return s})();function gt(s,c){if(s&1){let t=h();n(0,"button",41),g("click",function(){p(t);let o=d();return u(o.limpiarFiltros())}),i(1," \u2716\uFE0F Limpiar "),e()}}function _t(s,c){if(s&1&&(n(0,"option",42),i(1),e()),s&2){let t=c.$implicit;m("value",t.EntidadID),r(),x(" ",t.Nombre," ")}}function xt(s,c){if(s&1){let t=h();n(0,"button",61),g("click",function(){p(t);let o=d().$implicit,l=d(2);return u(l.editarPrestamo(o))}),i(1," \u270F\uFE0F "),e()}}function ft(s,c){if(s&1){let t=h();n(0,"button",62),g("click",function(){p(t);let o=d().$implicit,l=d(2);return u(l.liquidarPrestamo(o))}),i(1," \u{1F4B0} "),e()}}function bt(s,c){if(s&1){let t=h();n(0,"tr")(1,"td")(2,"div",50)(3,"strong"),i(4),e()()(),n(5,"td"),i(6),e(),n(7,"td")(8,"div",51)(9,"div",52),i(10),e(),n(11,"div",53),i(12),e()()(),n(13,"td")(14,"span",54),i(15),e()(),n(16,"td"),i(17),e(),n(18,"td",46)(19,"strong"),i(20),e()(),n(21,"td",46),i(22),e(),n(23,"td",47)(24,"span",55),i(25),e()(),n(26,"td",46)(27,"strong",56),i(28),e()(),n(29,"td")(30,"span"),i(31),e()(),n(32,"td")(33,"div",57)(34,"button",58),g("click",function(){let o=p(t).$implicit,l=d(2);return u(l.verDetalle(o))}),i(35," \u{1F441}\uFE0F "),e(),b(36,xt,2,0,"button",59)(37,ft,2,0,"button",60),e()()()}if(s&2){let t=c.$implicit,a=d(2);r(4),_(t.NombreCompleto),r(2),_(t.NumeroDocumento),r(4),_(t.EntidadFinanciera),r(2),_(t.TipoEntidad),r(3),_(t.NumeroContrato),r(2),_(t.TipoPrestamo),r(3),_(a.formatearMonto(t.MontoTotal)),r(2),_(a.formatearMonto(t.MontoCuota)),r(3),k(" ",t.CuotasPagadas,"/",t.NumeroCuotas," "),r(3),_(a.formatearMonto(t.SaldoPendiente)),r(2),y("badge "+a.getEstadoClass(t.Estado)),r(),x(" ",t.Estado," "),r(5),m("ngIf",t.Estado==="Activo"),r(),m("ngIf",t.Estado==="Activo")}}function ht(s,c){if(s&1&&(n(0,"div",63)(1,"div",64),i(2,"\u{1F4B3}"),e(),n(3,"h3",65),i(4,"No se encontraron pr\xE9stamos"),e(),n(5,"p",66),i(6),e()()),s&2){let t=d(2);r(6),x(" ",t.filtroBusqueda||t.filtroEstado||t.filtroEntidad?"Intenta ajustar los filtros de b\xFAsqueda":"Comienza registrando un nuevo pr\xE9stamo"," ")}}function Ct(s,c){if(s&1&&(n(0,"div",43)(1,"div",44)(2,"table",45)(3,"thead")(4,"tr")(5,"th"),i(6,"Trabajador"),e(),n(7,"th"),i(8,"DNI"),e(),n(9,"th"),i(10,"Entidad"),e(),n(11,"th"),i(12,"N\xB0 Contrato"),e(),n(13,"th"),i(14,"Tipo"),e(),n(15,"th",46),i(16,"Monto Total"),e(),n(17,"th",46),i(18,"Cuota"),e(),n(19,"th",47),i(20,"Cuotas"),e(),n(21,"th",46),i(22,"Saldo"),e(),n(23,"th"),i(24,"Estado"),e(),n(25,"th",47),i(26,"Acciones"),e()()(),n(27,"tbody"),b(28,bt,38,16,"tr",48),e()()(),b(29,ht,7,1,"div",49),e()),s&2){let t=d();r(28),m("ngForOf",t.prestamosPaginados),r(),m("ngIf",t.prestamosFiltrados.length===0)}}function vt(s,c){s&1&&(n(0,"div",67),S(1,"div",68),n(2,"p"),i(3,"Cargando pr\xE9stamos..."),e()())}function Pt(s,c){if(s&1){let t=h();n(0,"div",69)(1,"button",70),g("click",function(){p(t);let o=d();return u(o.cambiarPagina(o.paginaActual-1))}),i(2," \u2039 Anterior "),e(),n(3,"div",71),i(4),e(),n(5,"button",70),g("click",function(){p(t);let o=d();return u(o.cambiarPagina(o.paginaActual+1))}),i(6," Siguiente \u203A "),e()()}if(s&2){let t=d();r(),m("disabled",t.paginaActual===1),r(3),k(" P\xE1gina ",t.paginaActual," de ",t.totalPaginas," "),r(),m("disabled",t.paginaActual===t.totalPaginas)}}function Mt(s,c){if(s&1&&(n(0,"option",42),i(1),e()),s&2){let t=c.$implicit;m("value",t.TrabajadorID),r(),j(" ",t.ApellidoPaterno," ",t.ApellidoMaterno,", ",t.Nombres," - DNI: ",t.NumeroDocumento," ")}}function Et(s,c){if(s&1&&(n(0,"option",42),i(1),e()),s&2){let t=c.$implicit;m("value",t.EntidadID),r(),x(" ",t.Nombre," ")}}function St(s,c){if(s&1){let t=h();n(0,"button",112),g("click",function(){p(t);let o=d(2);return u(o.solicitarPIN("montoTotal"))}),i(1," \u{1F513} "),e()}}function wt(s,c){s&1&&(n(0,"span",113),i(1," \u2705 "),e())}function Ot(s,c){if(s&1){let t=h();n(0,"div",80)(1,"label",81)(2,"span",82),i(3,"*"),e(),i(4," Tipo de Cronograma "),e(),n(5,"div",114)(6,"button",115),g("click",function(){p(t);let o=d(2);return u(o.cambiarModoCronograma("automatico"))}),n(7,"span",116),i(8,"\u26A1"),e(),n(9,"div",117)(10,"strong"),i(11,"Autom\xE1tico"),e(),n(12,"small"),i(13,"Cuotas iguales"),e()()(),n(14,"button",115),g("click",function(){p(t);let o=d(2);return u(o.cambiarModoCronograma("manual"))}),n(15,"span",116),i(16,"\u270F\uFE0F"),e(),n(17,"div",117)(18,"strong"),i(19,"Manual"),e(),n(20,"small"),i(21,"Editar cada cuota"),e()()(),n(22,"button",115),g("click",function(){p(t);let o=d(2);return u(o.cambiarModoCronograma("importar"))}),n(23,"span",116),i(24,"\u{1F4E4}"),e(),n(25,"div",117)(26,"strong"),i(27,"Importar"),e(),n(28,"small"),i(29,"Subir Excel/CSV"),e()()()()()}if(s&2){let t=d(2);r(6),w("modo-btn--active",t.modoCronograma==="automatico"),r(8),w("modo-btn--active",t.modoCronograma==="manual"),r(8),w("modo-btn--active",t.modoCronograma==="importar")}}function It(s,c){if(s&1){let t=h();n(0,"div",80)(1,"label",81)(2,"span",82),i(3,"*"),e(),i(4," Monto por Cuota (S/.) "),e(),n(5,"input",118),P("ngModelChange",function(o){p(t);let l=d(2);return v(l.nuevoPrestamo.montoCuota,o)||(l.nuevoPrestamo.montoCuota=o),u(o)}),e(),n(6,"small",119),i(7),e()()}if(s&2){let t=d(2);r(5),C("ngModel",t.nuevoPrestamo.montoCuota),m("disabled",t.esModoEdicion),r(2),k(" Se generar\xE1n ",t.nuevoPrestamo.numeroCuotas||0," cuotas iguales de S/. ",t.nuevoPrestamo.montoCuota||0," ")}}function yt(s,c){s&1&&(n(0,"div",125)(1,"span",126),i(2,"\u{1F4A1}"),e(),n(3,"div")(4,"strong"),i(5,"Paso 1:"),e(),i(6,' Ingresa el n\xFAmero de cuotas y haz clic en "Generar Cuotas"'),S(7,"br"),n(8,"strong"),i(9,"Paso 2:"),e(),i(10," Edita los montos de cada cuota seg\xFAn el cronograma real "),e()())}function kt(s,c){if(s&1){let t=h();n(0,"tr")(1,"td",47)(2,"strong"),i(3),e()(),n(4,"td")(5,"input",134),P("ngModelChange",function(o){let l=p(t).$implicit;return v(l.montoCuota,o)||(l.montoCuota=o),u(o)}),e()(),n(6,"td")(7,"input",135),P("ngModelChange",function(o){let l=p(t).$implicit;return v(l.fechaVencimiento,o)||(l.fechaVencimiento=o),u(o)}),e()()()}if(s&2){let t=c.$implicit,a=c.index;r(3),x("#",t.numeroCuota),r(2),C("ngModel",t.montoCuota),m("name","cuota_monto_"+a),r(2),C("ngModel",t.fechaVencimiento),m("name","cuota_fecha_"+a)}}function Dt(s,c){if(s&1&&(n(0,"div",127)(1,"div",128)(2,"div",129)(3,"label"),i(4,"Total Cronograma:"),e(),n(5,"strong"),i(6),e()(),n(7,"div",129)(8,"label"),i(9,"Monto Pr\xE9stamo:"),e(),n(10,"strong"),i(11),e()(),n(12,"div",129)(13,"label"),i(14,"Diferencia:"),e(),n(15,"strong"),i(16),e()()(),n(17,"div",130)(18,"table",131)(19,"thead")(20,"tr")(21,"th",132),i(22,"N\xB0 Cuota"),e(),n(23,"th",133),i(24,"Monto (S/.)"),e(),n(25,"th"),i(26,"Fecha Vencimiento"),e()()(),n(27,"tbody"),b(28,kt,8,5,"tr",48),e()()()()),s&2){let t=d(3);r(6),x("S/. ",t.calcularTotalCuotasManuales().toFixed(2)),r(5),x("S/. ",t.nuevoPrestamo.montoTotal||0),r(),w("stat--warning",t.Math.abs(t.calcularTotalCuotasManuales()-t.nuevoPrestamo.montoTotal)>.5),r(4),x("S/. ",t.Math.abs(t.calcularTotalCuotasManuales()-t.nuevoPrestamo.montoTotal).toFixed(2)),r(12),m("ngForOf",t.cuotasManuales)}}function Tt(s,c){if(s&1){let t=h();n(0,"div",120)(1,"div",121)(2,"h4"),i(3,"\u{1F4CB} Cronograma Personalizado"),e(),n(4,"button",122),g("click",function(){p(t);let o=d(2);return u(o.generarCuotasManuales())}),i(5," \u{1F504} Generar Cuotas "),e()(),b(6,yt,11,0,"div",123)(7,Dt,29,6,"div",124),e()}if(s&2){let t=d(2);r(4),m("disabled",!t.nuevoPrestamo.numeroCuotas),r(2),m("ngIf",t.cuotasManuales.length===0),r(),m("ngIf",t.cuotasManuales.length>0)}}function Vt(s,c){if(s&1){let t=h();n(0,"div",144)(1,"button",145),g("click",function(){p(t);let o=d(3);return u(o.importarCronograma())}),n(2,"span",13),i(3),e(),i(4),e(),n(5,"button",146),g("click",function(){p(t);let o=d(3);return u(o.limpiarArchivo())}),n(6,"span",13),i(7,"\u{1F5D1}\uFE0F"),e(),i(8," Limpiar "),e()()}if(s&2){let t=d(3);r(),m("disabled",t.importando),r(2),_(t.importando?"\u23F3":"\u{1F4E4}"),r(),x(" ",t.importando?"Procesando...":"Importar Cronograma"," "),r(),m("disabled",t.importando)}}function Ft(s,c){if(s&1&&(n(0,"tr")(1,"td",47)(2,"strong"),i(3),e()(),n(4,"td"),i(5),e(),n(6,"td"),i(7),e()()),s&2){let t=c.$implicit;r(3),x("#",t.numeroCuota),r(2),x("S/. ",t.montoCuota),r(2),_(t.fechaVencimiento)}}function Nt(s,c){if(s&1&&(n(0,"div",148)(1,"small"),i(2),e()()),s&2){let t=d(4);r(2),x("Mostrando las primeras 10 de ",t.cuotasManuales.length," cuotas...")}}function At(s,c){if(s&1&&(n(0,"div",127)(1,"div",128)(2,"div",129)(3,"label"),i(4,"Cuotas Importadas:"),e(),n(5,"strong"),i(6),e()(),n(7,"div",129)(8,"label"),i(9,"Total Cronograma:"),e(),n(10,"strong"),i(11),e()(),n(12,"div",129)(13,"label"),i(14,"Monto Pr\xE9stamo:"),e(),n(15,"strong"),i(16),e()()(),n(17,"div",130)(18,"table",131)(19,"thead")(20,"tr")(21,"th",132),i(22,"N\xB0 Cuota"),e(),n(23,"th",133),i(24,"Monto (S/.)"),e(),n(25,"th"),i(26,"Fecha Vencimiento"),e()()(),n(27,"tbody"),b(28,Ft,8,3,"tr",48),e()(),b(29,Nt,3,1,"div",147),e()()),s&2){let t=d(3);r(6),_(t.cuotasManuales.length),r(5),x("S/. ",t.calcularTotalCuotasManuales().toFixed(2)),r(5),x("S/. ",t.nuevoPrestamo.montoTotal||0),r(12),m("ngForOf",t.cuotasManuales.slice(0,10)),r(),m("ngIf",t.cuotasManuales.length>10)}}function qt(s,c){if(s&1){let t=h();n(0,"div",136)(1,"div",137)(2,"h4"),i(3,"\u{1F4E4} Importar Cronograma desde Excel/CSV"),e()(),n(4,"div",125)(5,"span",126),i(6,"\u{1F4A1}"),e(),n(7,"div")(8,"strong"),i(9,"Formatos aceptados:"),e(),S(10,"br"),i(11," \u{1F4CA} "),n(12,"strong"),i(13,"Excel/CSV:"),e(),i(14," .xlsx, .xls, .csv"),S(15,"br"),i(16," \u{1F4C4} "),n(17,"strong"),i(18,"PDF:"),e(),i(19," Cronogramas del banco en PDF"),S(20,"br"),i(21," \u{1F4F7} "),n(22,"strong"),i(23,"Fotos/Escaneados:"),e(),i(24," .jpg, .png (usamos OCR)"),S(25,"br"),n(26,"small"),i(27,"Tama\xF1o m\xE1ximo: 10 MB"),e()()(),n(28,"div",138)(29,"input",139),g("change",function(o){p(t);let l=d(2);return u(l.onFileSelected(o))}),e(),n(30,"label",140)(31,"span",141),i(32,"\u{1F4C1}"),e(),n(33,"div",142)(34,"strong"),i(35),e(),n(36,"small"),i(37,"Excel, CSV, PDF o Foto/Escaneado del cronograma"),e()()(),b(38,Vt,9,4,"div",143),e(),b(39,At,30,5,"div",124),e()}if(s&2){let t=d(2);r(35),_(t.nombreArchivoImportar||"Seleccionar archivo"),r(3),m("ngIf",t.archivoImportar),r(),m("ngIf",t.cuotasManuales.length>0)}}function zt(s,c){if(s&1){let t=h();n(0,"div",80)(1,"label",81)(2,"span",82),i(3,"*"),e(),i(4," PIN de Seguridad "),e(),n(5,"input",149),P("ngModelChange",function(o){p(t);let l=d(2);return v(l.nuevoPrestamo.pin,o)||(l.nuevoPrestamo.pin=o),u(o)}),e(),n(6,"small",119),i(7," \u{1F512} Este PIN proteger\xE1 la edici\xF3n del monto total y las cuotas. Gu\xE1rdelo de forma segura. "),e()()}if(s&2){let t=d(2);r(5),C("ngModel",t.nuevoPrestamo.pin)}}function Lt(s,c){if(s&1){let t=h();n(0,"button",162),g("click",function(){p(t);let o=d(3);return u(o.solicitarPIN("cuotas"))}),i(1," \u{1F513} Desbloquear para Editar "),e()}}function jt(s,c){s&1&&(n(0,"span",163),i(1," \u2705 Modo Edici\xF3n Activado "),e())}function Wt(s,c){s&1&&(n(0,"span",169),i(1," \u270F\uFE0F "),e())}function Bt(s,c){if(s&1){let t=h();n(0,"tr")(1,"td",47)(2,"strong"),i(3),e()(),n(4,"td")(5,"span"),i(6),e()(),n(7,"td",164)(8,"input",165),P("ngModelChange",function(o){let l=p(t).$implicit;return v(l.MontoCuota,o)||(l.MontoCuota=o),u(o)}),g("blur",function(){let o=p(t).$implicit,l=d(3);return u(l.marcarCuotaComoEditada(o,o.MontoCuota))}),e()(),n(9,"td",166)(10,"input",167),g("change",function(o){let l=p(t).$implicit;return l.FechaVencimiento=o.target.value,u(l.editada=!0)}),e()(),n(11,"td",47)(12,"span"),i(13),e(),b(14,Wt,2,0,"span",168),e()()}if(s&2){let t=c.$implicit,a=d(3);w("row-edited",t.editada),r(3),x("#",t.NumeroCuota),r(2),z("color",t.editada?"#888":"#fff"),r(),x(" S/. ",(t.montoOriginal||t.MontoCuota).toFixed(2)," "),r(2),C("ngModel",t.MontoCuota),m("name","cuota_"+t.CuotaID)("disabled",!a.pinVerificado||t.Estado!=="Pendiente"),r(2),m("value",t.FechaVencimiento?t.FechaVencimiento.split("T")[0]||t.FechaVencimiento:"")("disabled",!a.pinVerificado||t.Estado!=="Pendiente"),r(2),y("badge "+(t.Estado==="Pagada"?"badge--success":t.Estado==="Vencida"?"badge--danger":"badge--warning")),r(),x(" ",t.Estado," "),r(),m("ngIf",t.editada)}}function Ut(s,c){if(s&1&&(n(0,"div",150)(1,"div",151)(2,"label",152),i(3),e(),b(4,Lt,2,0,"button",153)(5,jt,2,0,"span",154),e(),n(6,"div",155)(7,"span",126),i(8,"\u{1F4A1}"),e(),n(9,"div")(10,"strong"),i(11,"Instrucciones:"),e(),i(12," Puede editar el monto de cada cuota individualmente. Algunas cuotas pueden variar por centavos debido a redondeos o ajustes de la entidad financiera. "),e()(),n(13,"div",156)(14,"table",157)(15,"thead")(16,"tr")(17,"th",132),i(18,"N\xB0 Cuota"),e(),n(19,"th",133),i(20,"Monto Original (S/.)"),e(),n(21,"th",158),i(22,"Monto Editado (S/.)"),e(),n(23,"th",159),i(24,"Fecha Vencimiento"),e(),n(25,"th",160),i(26,"Estado"),e()()(),n(27,"tbody"),b(28,Bt,15,15,"tr",161),e()()()()),s&2){let t=d(2);r(3),x(" \u{1F4CB} Cronograma de Cuotas (",t.cronograma.length," cuotas) "),r(),m("ngIf",!t.pinVerificado),r(),m("ngIf",t.pinVerificado),r(23),m("ngForOf",t.cronograma)}}function Rt(s,c){if(s&1){let t=h();n(0,"div",72),g("click",function(){p(t);let o=d();return u(o.cerrarFormulario())}),n(1,"div",73),g("click",function(o){return p(t),u(o.stopPropagation())}),n(2,"div",74)(3,"h2",75)(4,"span",76),i(5),e(),i(6),e(),n(7,"button",77),g("click",function(){p(t);let o=d();return u(o.cerrarFormulario())}),i(8,"\u2716"),e()(),n(9,"div",78)(10,"form",79)(11,"div",80)(12,"label",81)(13,"span",82),i(14,"*"),e(),i(15," Trabajador "),e(),n(16,"select",83),P("ngModelChange",function(o){p(t);let l=d();return v(l.nuevoPrestamo.trabajadorID,o)||(l.nuevoPrestamo.trabajadorID=o),u(o)}),n(17,"option",42),i(18,"Seleccionar trabajador..."),e(),b(19,Mt,2,5,"option",29),e()(),n(20,"div",80)(21,"label",81)(22,"span",82),i(23,"*"),e(),i(24," Tipo de Entidad "),e(),n(25,"select",84),P("ngModelChange",function(o){p(t);let l=d();return v(l.tipoEntidadSeleccionada,o)||(l.tipoEntidadSeleccionada=o),u(o)}),g("change",function(){p(t);let o=d();return u(o.filtrarEntidadesPorTipo())}),n(26,"option",24),i(27,"Seleccionar..."),e(),n(28,"option",85),i(29,"Banco"),e(),n(30,"option",86),i(31,"Caja Municipal"),e(),n(32,"option",87),i(33,"Cooperativa"),e(),n(34,"option",88),i(35,"Financiera"),e()()(),n(36,"div",80)(37,"label",81)(38,"span",82),i(39,"*"),e(),i(40," Entidad Financiera "),e(),n(41,"select",89),P("ngModelChange",function(o){p(t);let l=d();return v(l.nuevoPrestamo.entidadID,o)||(l.nuevoPrestamo.entidadID=o),u(o)}),n(42,"option",24),i(43,"Seleccionar..."),e(),b(44,Et,2,2,"option",29),e()(),n(45,"div",80)(46,"label",81)(47,"span",82),i(48,"*"),e(),i(49," Tipo de Pr\xE9stamo "),e(),n(50,"select",90),P("ngModelChange",function(o){p(t);let l=d();return v(l.nuevoPrestamo.tipoPrestamo,o)||(l.nuevoPrestamo.tipoPrestamo=o),u(o)}),n(51,"option",24),i(52,"Seleccionar..."),e(),n(53,"option",91),i(54,"Personal"),e(),n(55,"option",92),i(56,"Hipotecario"),e(),n(57,"option",93),i(58,"Vehicular"),e(),n(59,"option",94),i(60,"Consumo"),e(),n(61,"option",95),i(62,"Educativo"),e()()(),n(63,"div",80)(64,"label",81)(65,"span",82),i(66,"*"),e(),i(67," N\xFAmero de Contrato "),e(),n(68,"input",96),P("ngModelChange",function(o){p(t);let l=d();return v(l.nuevoPrestamo.numeroContrato,o)||(l.nuevoPrestamo.numeroContrato=o),u(o)}),e()(),n(69,"div",97)(70,"div",80)(71,"label",81)(72,"span",82),i(73,"*"),e(),i(74," Monto Total (S/.) "),e(),n(75,"div",98)(76,"input",99),P("ngModelChange",function(o){p(t);let l=d();return v(l.nuevoPrestamo.montoTotal,o)||(l.nuevoPrestamo.montoTotal=o),u(o)}),e(),b(77,St,2,0,"button",100)(78,wt,2,0,"span",101),e()(),n(79,"div",80)(80,"label",81)(81,"span",82),i(82,"*"),e(),i(83," N\xFAmero de Cuotas "),e(),n(84,"input",102),P("ngModelChange",function(o){p(t);let l=d();return v(l.nuevoPrestamo.numeroCuotas,o)||(l.nuevoPrestamo.numeroCuotas=o),u(o)}),e()()(),n(85,"div",80)(86,"label",81)(87,"span",82),i(88,"*"),e(),i(89," Fecha de Inicio de Pagos "),e(),n(90,"input",103),P("ngModelChange",function(o){p(t);let l=d();return v(l.nuevoPrestamo.fechaInicio,o)||(l.nuevoPrestamo.fechaInicio=o),u(o)}),e()(),b(91,Ot,30,6,"div",104)(92,It,8,4,"div",104)(93,Tt,8,3,"div",105)(94,qt,40,3,"div",106),n(95,"div",80)(96,"label",81),i(97,"C\xF3digo de Descuento (Opcional)"),e(),n(98,"input",107),P("ngModelChange",function(o){p(t);let l=d();return v(l.nuevoPrestamo.codigoDescuento,o)||(l.nuevoPrestamo.codigoDescuento=o),u(o)}),e()(),b(99,zt,8,1,"div",104),n(100,"div",80)(101,"label",81),i(102,"Observaciones"),e(),n(103,"textarea",108),P("ngModelChange",function(o){p(t);let l=d();return v(l.nuevoPrestamo.observaciones,o)||(l.nuevoPrestamo.observaciones=o),u(o)}),e()(),b(104,Ut,29,4,"div",109),e()(),n(105,"div",110)(106,"button",111),g("click",function(){p(t);let o=d();return u(o.cerrarFormulario())}),i(107,"Cancelar"),e(),n(108,"button",12),g("click",function(){p(t);let o=d();return u(o.guardarPrestamo())}),n(109,"span",13),i(110,"\u{1F4BE}"),e(),i(111),e()()()()}if(s&2){let t=d();r(5),_(t.esModoEdicion?"\u270F\uFE0F":"\u2795"),r(),x(" ",t.esModoEdicion?"Editar Pr\xE9stamo":"Registrar Nuevo Pr\xE9stamo"," "),r(10),C("ngModel",t.nuevoPrestamo.trabajadorID),m("disabled",t.esModoEdicion),r(),m("value",""),r(2),m("ngForOf",t.trabajadores),r(6),C("ngModel",t.tipoEntidadSeleccionada),m("disabled",t.esModoEdicion),r(16),C("ngModel",t.nuevoPrestamo.entidadID),m("disabled",t.esModoEdicion),r(3),m("ngForOf",t.obtenerEntidadesPorTipo(t.tipoEntidadSeleccionada)),r(6),C("ngModel",t.nuevoPrestamo.tipoPrestamo),r(18),C("ngModel",t.nuevoPrestamo.numeroContrato),r(8),C("ngModel",t.nuevoPrestamo.montoTotal),m("disabled",t.esModoEdicion&&!t.pinVerificado),r(),m("ngIf",t.esModoEdicion&&!t.pinVerificado),r(),m("ngIf",t.esModoEdicion&&t.pinVerificado),r(6),C("ngModel",t.nuevoPrestamo.numeroCuotas),m("disabled",t.esModoEdicion),r(6),C("ngModel",t.nuevoPrestamo.fechaInicio),m("disabled",t.esModoEdicion),r(),m("ngIf",!t.esModoEdicion),r(),m("ngIf",t.modoCronograma==="automatico"),r(),m("ngIf",t.modoCronograma==="manual"&&!t.esModoEdicion),r(),m("ngIf",t.modoCronograma==="importar"&&!t.esModoEdicion),r(4),C("ngModel",t.nuevoPrestamo.codigoDescuento),r(),m("ngIf",!t.esModoEdicion),r(4),C("ngModel",t.nuevoPrestamo.observaciones),r(),m("ngIf",t.esModoEdicion&&t.cronograma.length>0),r(7),x(" ",t.esModoEdicion?"Actualizar Pr\xE9stamo":"Guardar Pr\xE9stamo"," ")}}function Yt(s,c){if(s&1&&(n(0,"tr")(1,"td",47)(2,"strong"),i(3),e()(),n(4,"td"),i(5),e(),n(6,"td",46),i(7),e(),n(8,"td",47)(9,"span"),i(10),e()(),n(11,"td"),i(12),e(),n(13,"td"),i(14),e()()),s&2){let t=c.$implicit,a=d(2);r(3),x("#",t.NumeroCuota),r(2),_(a.formatearFecha(t.FechaVencimiento)),r(2),_(a.formatearMonto(t.MontoCuota)),r(2),y("badge "+a.getEstadoCuotaClass(t.Estado)),r(),x(" ",t.Estado||"Pendiente"," "),r(2),_(t.FechaPago?a.formatearFecha(t.FechaPago):"-"),r(2),_(t.CodigoPlanilla||"-")}}function $t(s,c){if(s&1){let t=h();n(0,"button",179),g("click",function(){p(t);let o=d(2);return u(o.liquidarPrestamo(o.prestamoSeleccionado))}),n(1,"span",13),i(2,"\u{1F4B0}"),e(),i(3," Liquidar Pr\xE9stamo "),e()}}function Ht(s,c){if(s&1){let t=h();n(0,"div",72),g("click",function(){p(t);let o=d();return u(o.cerrarDetalle())}),n(1,"div",170),g("click",function(o){return p(t),u(o.stopPropagation())}),n(2,"div",74)(3,"h2",75)(4,"span",76),i(5,"\u{1F4CB}"),e(),i(6," Detalle del Pr\xE9stamo "),e(),n(7,"button",77),g("click",function(){p(t);let o=d();return u(o.cerrarDetalle())}),i(8,"\u2716"),e()(),n(9,"div",78)(10,"div",171)(11,"div",172)(12,"label"),i(13,"Trabajador:"),e(),n(14,"strong"),i(15),e()(),n(16,"div",172)(17,"label"),i(18,"DNI:"),e(),n(19,"strong"),i(20),e()(),n(21,"div",172)(22,"label"),i(23,"Entidad:"),e(),n(24,"strong"),i(25),e()(),n(26,"div",172)(27,"label"),i(28,"Tipo:"),e(),n(29,"strong"),i(30),e()(),n(31,"div",172)(32,"label"),i(33,"N\xB0 Contrato:"),e(),n(34,"strong"),i(35),e()(),n(36,"div",172)(37,"label"),i(38,"Tipo Pr\xE9stamo:"),e(),n(39,"strong"),i(40),e()(),n(41,"div",172)(42,"label"),i(43,"Monto Total:"),e(),n(44,"strong",173),i(45),e()(),n(46,"div",172)(47,"label"),i(48,"Cuota Mensual:"),e(),n(49,"strong"),i(50),e()(),n(51,"div",172)(52,"label"),i(53,"Saldo Pendiente:"),e(),n(54,"strong",174),i(55),e()(),n(56,"div",172)(57,"label"),i(58,"Estado:"),e(),n(59,"span"),i(60),e()()(),n(61,"div",175)(62,"h3",176),i(63,"\u{1F4C5} Cronograma de Pagos"),e(),n(64,"div",177)(65,"table",131)(66,"thead")(67,"tr")(68,"th",47),i(69,"N\xB0 Cuota"),e(),n(70,"th"),i(71,"Fecha Vencimiento"),e(),n(72,"th",46),i(73,"Monto"),e(),n(74,"th",47),i(75,"Estado"),e(),n(76,"th"),i(77,"Fecha Pago"),e(),n(78,"th"),i(79,"Planilla"),e()()(),n(80,"tbody"),b(81,Yt,15,8,"tr",48),e()()()()(),n(82,"div",110)(83,"button",111),g("click",function(){p(t);let o=d();return u(o.cerrarDetalle())}),i(84,"Cerrar"),e(),b(85,$t,4,0,"button",178),e()()()}if(s&2){let t=d();r(15),_(t.prestamoSeleccionado.NombreCompleto),r(5),_(t.prestamoSeleccionado.NumeroDocumento),r(5),_(t.prestamoSeleccionado.EntidadFinanciera),r(5),_(t.prestamoSeleccionado.TipoEntidad),r(5),_(t.prestamoSeleccionado.NumeroContrato),r(5),_(t.prestamoSeleccionado.TipoPrestamo),r(5),_(t.formatearMonto(t.prestamoSeleccionado.MontoTotal)),r(5),_(t.formatearMonto(t.prestamoSeleccionado.MontoCuota)),r(5),_(t.formatearMonto(t.prestamoSeleccionado.SaldoPendiente)),r(4),y("badge "+t.getEstadoClass(t.prestamoSeleccionado.Estado)),r(),x(" ",t.prestamoSeleccionado.Estado," "),r(21),m("ngForOf",t.cronograma),r(4),m("ngIf",t.prestamoSeleccionado.Estado==="Activo")}}function Gt(s,c){if(s&1){let t=h();n(0,"div",72),g("click",function(){p(t);let o=d();return u(o.cerrarModalLiquidacion())}),n(1,"div",73),g("click",function(o){return p(t),u(o.stopPropagation())}),n(2,"div",74)(3,"h2",75)(4,"span",76),i(5,"\u{1F4B0}"),e(),i(6," Liquidar Pr\xE9stamo "),e(),n(7,"button",77),g("click",function(){p(t);let o=d();return u(o.cerrarModalLiquidacion())}),i(8,"\u2716"),e()(),n(9,"div",78)(10,"div",180)(11,"span",126),i(12,"\u26A0\uFE0F"),e(),n(13,"div")(14,"strong"),i(15,"\xBFEst\xE1 seguro de liquidar este pr\xE9stamo?"),e(),n(16,"p"),i(17,"Esta acci\xF3n cancelar\xE1 todas las cuotas pendientes y marcar\xE1 el pr\xE9stamo como liquidado."),e()()(),n(18,"div",181)(19,"div",182)(20,"label"),i(21,"Saldo Pendiente:"),e(),n(22,"strong",174),i(23),e()(),n(24,"div",182)(25,"label"),i(26,"Cuotas Pendientes:"),e(),n(27,"strong"),i(28),e()()(),n(29,"div",80)(30,"label",81)(31,"span",82),i(32,"*"),e(),i(33," Monto de Liquidaci\xF3n (S/.) "),e(),n(34,"input",183),P("ngModelChange",function(o){p(t);let l=d();return v(l.montoLiquidacion,o)||(l.montoLiquidacion=o),u(o)}),e()(),n(35,"div",80)(36,"label",81),i(37,"Observaciones"),e(),n(38,"textarea",184),P("ngModelChange",function(o){p(t);let l=d();return v(l.observacionesLiquidacion,o)||(l.observacionesLiquidacion=o),u(o)}),e()()(),n(39,"div",110)(40,"button",111),g("click",function(){p(t);let o=d();return u(o.cerrarModalLiquidacion())}),i(41,"Cancelar"),e(),n(42,"button",179),g("click",function(){p(t);let o=d();return u(o.confirmarLiquidacion())}),n(43,"span",13),i(44,"\u{1F4B0}"),e(),i(45," Confirmar Liquidaci\xF3n "),e()()()()}if(s&2){let t=d();r(23),_(t.formatearMonto((t.prestamoALiquidar==null?null:t.prestamoALiquidar.SaldoPendiente)||0)),r(5),_(((t.prestamoALiquidar==null?null:t.prestamoALiquidar.NumeroCuotas)||0)-((t.prestamoALiquidar==null?null:t.prestamoALiquidar.CuotasPagadas)||0)),r(6),C("ngModel",t.montoLiquidacion),m("placeholder",t.formatearMonto((t.prestamoALiquidar==null?null:t.prestamoALiquidar.SaldoPendiente)||0)),r(4),C("ngModel",t.observacionesLiquidacion)}}function Jt(s,c){if(s&1){let t=h();n(0,"div",194)(1,"div",195)(2,"div",196),i(3,"\u26A0\uFE0F"),e(),n(4,"div",197)(5,"div",198),i(6," PIN Incorrecto "),e(),n(7,"div",199),i(8," El PIN ingresado no es correcto. Por favor, intente nuevamente. "),S(9,"br"),n(10,"strong"),i(11),e()()(),n(12,"button",200),g("click",function(){p(t);let o=d(2);return u(o.cerrarAlertaPIN())}),i(13," \u2715 "),e()()()}if(s&2){let t=d(2);r(11),x("Intentos fallidos: ",t.intentosPINFallidos," de 3")}}function Kt(s,c){if(s&1){let t=h();n(0,"div",201)(1,"div",195)(2,"div",202),i(3,"\u26A0\uFE0F"),e(),n(4,"div",197)(5,"div",203),i(6," \u26A0\uFE0F M\xFAltiples Intentos Fallidos "),e(),n(7,"div",204),i(8," Ha ingresado un PIN incorrecto en varias ocasiones. Por favor, verifique el PIN antes de continuar. "),S(9,"br")(10,"br"),n(11,"strong",205),i(12),e(),S(13,"br"),n(14,"span",206),i(15),e()()(),n(16,"button",207),g("click",function(){p(t);let o=d(2);return u(o.cerrarAlertaPIN())}),i(17," \u2715 "),e()()()}if(s&2){let t=d(2);r(12),x("Intentos fallidos: ",t.intentosPINFallidos," de 5"),r(3),x("Le quedan ",6-t.intentosPINFallidos," intentos antes de que se active el modo de seguridad cr\xEDtico.")}}function Qt(s,c){if(s&1){let t=h();n(0,"div",208),S(1,"div",209),n(2,"div",210)(3,"div",211),i(4,"\u{1F6A8}"),e(),n(5,"div",197)(6,"div",212),i(7," \u{1F6A8} ALERTA DE SEGURIDAD CR\xCDTICA \u{1F6A8} "),e(),n(8,"div",213)(9,"strong"),i(10,"M\xFAltiples intentos fallidos detectados."),e(),S(11,"br")(12,"br"),i(13," Ha intentado ingresar un PIN incorrecto "),n(14,"strong",214),i(15),e(),i(16,". "),S(17,"br")(18,"br"),i(19," Por seguridad, se recomienda verificar el PIN correcto antes de continuar. Si contin\xFAa fallando, puede que el pr\xE9stamo tenga un PIN diferente al que est\xE1 intentando. "),S(20,"br")(21,"br"),n(22,"div",215)(23,"strong",216),i(24,"\u{1F4A1} Consejo:"),e(),i(25," Verifique que est\xE1 ingresando el PIN correcto del pr\xE9stamo. Si olvid\xF3 el PIN, puede necesitar contactar al administrador del sistema. "),e()()(),n(26,"button",217),g("click",function(){p(t);let o=d(2);return u(o.cerrarAlertaPIN())}),i(27," \u2715 "),e()()()}if(s&2){let t=d(2);r(15),x("",t.intentosPINFallidos," veces")}}function Xt(s,c){if(s&1&&(n(0,"span",218),i(1),e()),s&2){let t=d(2);r(),L(" (",t.intentosPINFallidos," intento",t.intentosPINFallidos>1?"s":""," fallido",t.intentosPINFallidos>1?"s":"",") ")}}function Zt(s,c){if(s&1&&(n(0,"div",219)(1,"span",126),i(2,"\u274C"),e(),i(3),e()),s&2){let t=d(2);r(3),x(" ",t.errorPIN," ")}}function te(s,c){if(s&1){let t=h();n(0,"div",72),g("click",function(){p(t);let o=d();return u(o.cerrarModalPIN())}),n(1,"div",185),g("click",function(o){return p(t),u(o.stopPropagation())}),n(2,"div",74)(3,"h2",75)(4,"span",76),i(5),e(),i(6," Ingresar PIN de Seguridad "),e(),n(7,"button",77),g("click",function(){p(t);let o=d();return u(o.cerrarModalPIN())}),i(8,"\u2716"),e()(),n(9,"div",78)(10,"div",186)(11,"span",126),i(12,"\u26A0\uFE0F"),e(),n(13,"div")(14,"strong"),i(15,"Acceso Restringido"),e(),S(16,"br"),i(17),e()(),b(18,Jt,14,1,"div",187)(19,Kt,18,2,"div",188)(20,Qt,28,1,"div",189),n(21,"div",80)(22,"label",81)(23,"span",82),i(24,"*"),e(),i(25," PIN de Seguridad "),b(26,Xt,2,3,"span",190),e(),n(27,"input",191,0),P("ngModelChange",function(o){p(t);let l=d();return v(l.pinIngresado,o)||(l.pinIngresado=o),u(o)}),g("keyup.enter",function(){p(t);let o=d();return u(o.verificarPIN())}),e(),b(29,Zt,4,1,"div",192),e()(),n(30,"div",110)(31,"button",111),g("click",function(){p(t);let o=d();return u(o.cerrarModalPIN())}),i(32,"Cancelar"),e(),n(33,"button",193),g("click",function(){p(t);let o=d();return u(o.verificarPIN())}),n(34,"span",13),i(35),e(),i(36),e()()()()}if(s&2){let t=d();r(),w("modal--shake",t.nivelAlertaPIN==="critica"&&t.mostrarAlertaPIN),r(),w("modal__header--danger",t.nivelAlertaPIN==="critica"),r(3),_(t.nivelAlertaPIN==="critica"?"\u{1F6A8}":t.nivelAlertaPIN==="media"?"\u26A0\uFE0F":"\u{1F512}"),r(12),x(" Para editar ",t.campoProtegidoEditando==="montoTotal"?"el monto total":"las cuotas",", debe ingresar el PIN de seguridad configurado para este pr\xE9stamo. "),r(),m("ngIf",t.mostrarAlertaPIN&&t.nivelAlertaPIN==="normal"),r(),m("ngIf",t.mostrarAlertaPIN&&t.nivelAlertaPIN==="media"),r(),m("ngIf",t.mostrarAlertaPIN&&t.nivelAlertaPIN==="critica"),r(6),m("ngIf",t.intentosPINFallidos>0),r(),w("form-input--error",t.mostrarAlertaPIN)("form-input--error-critical",t.nivelAlertaPIN==="critica"),C("ngModel",t.pinIngresado),r(2),m("ngIf",t.errorPIN&&!t.mostrarAlertaPIN),r(4),w("btn--primary",t.nivelAlertaPIN!=="critica")("btn--danger",t.nivelAlertaPIN==="critica"),m("disabled",!t.pinIngresado||t.cargando),r(2),_(t.nivelAlertaPIN==="critica"?"\u{1F6A8}":"\u{1F513}"),r(),x(" ",t.cargando?"Verificando...":t.nivelAlertaPIN==="critica"?"Verificar (Alerta)":"Verificar PIN"," ")}}var de=(()=>{let c=class c{constructor(a,o,l,f){this.prestamosService=a,this.http=o,this.fb=l,this.router=f,this.vistaActual="lista",this.prestamos=[],this.entidades=[],this.prestamoSeleccionado=null,this.cronograma=[],this.trabajadores=[],this.filtroEstado="",this.filtroEntidad="",this.filtroBusqueda="",this.mostrarFormulario=!1,this.mostrarModalLiquidacion=!1,this.prestamoALiquidar=null,this.prestamoEditando=null,this.esModoEdicion=!1,this.nuevoPrestamo={trabajadorID:"",entidadID:"",numeroContrato:"",tipoPrestamo:"",montoTotal:0,numeroCuotas:0,montoCuota:0,fechaInicio:"",codigoDescuento:"",observaciones:"",pin:""},this.modoCronograma="automatico",this.cuotasManuales=[],this.archivoImportar=null,this.nombreArchivoImportar="",this.importando=!1,this.tipoEntidadSeleccionada="",this.montoLiquidacion=0,this.observacionesLiquidacion="",this.mostrarModalPIN=!1,this.pinIngresado="",this.campoProtegidoEditando=null,this.pinVerificado=!1,this.errorPIN="",this.intentosPINFallidos=0,this.mostrarAlertaPIN=!1,this.nivelAlertaPIN="normal",this.cargando=!1,this.paginaActual=1,this.itemsPorPagina=10,this.Math=Math,this.inicializarFormularios()}ngOnInit(){window.scrollTo(0,0),setTimeout(()=>{let a=document.querySelector(".main-content");a&&(a.scrollTop=0)},100),this.cargarPrestamos(),this.cargarEntidades(),this.cargarTrabajadores()}inicializarFormularios(){this.prestamoForm=this.fb.group({trabajadorID:["",M.required],entidadID:["",M.required],numeroContrato:["",M.required],tipoPrestamo:["Personal",M.required],montoTotal:["",[M.required,M.min(1)]],tea:["",[M.min(0),M.max(100)]],tem:["",[M.min(0),M.max(10)]],numeroCuotas:["",[M.required,M.min(1),M.max(120)]],montoCuota:["",[M.required,M.min(1)]],fechaDesembolso:["",M.required],fechaInicioPago:["",M.required],descuentoAutomatico:[!0],observaciones:[""]}),this.liquidarForm=this.fb.group({saldoCapitalPendiente:[{value:"",disabled:!0}],interesesPendientes:[0],moraPendiente:[0],otrosCargos:[0],montoTotalLiquidado:[{value:"",disabled:!0}],tipoLiquidacion:["Anticipada",M.required],formaPago:["Transferencia",M.required],fechaLiquidacion:[new Date().toISOString().split("T")[0],M.required],numeroComprobante:[""],observaciones:[""]})}cargarPrestamos(){this.cargando=!0;let a={};this.filtroEstado&&(a.estado=this.filtroEstado),this.filtroEntidad&&(a.entidadID=parseInt(this.filtroEntidad)),this.prestamosService.obtenerTodos(a).subscribe({next:o=>{this.prestamos=o.data||[],this.cargando=!1},error:o=>{console.error("Error al cargar pr\xE9stamos:",o),this.cargando=!1,alert("Error al cargar los pr\xE9stamos")}})}cargarEntidades(){this.prestamosService.obtenerEntidades().subscribe({next:a=>{this.entidades=a.data||[],console.log("Entidades cargadas:",this.entidades.length),console.log("Tipos de entidades:",[...new Set(this.entidades.map(o=>o.TipoEntidad))])},error:a=>{console.error("Error al cargar entidades:",a)}})}cargarTrabajadores(){this.http.get("http://localhost:5000/api/trabajadores").subscribe({next:a=>{let o=a.data||a||[];this.trabajadores=o.map(l=>V(T({},l),{NombreCompleto:l.NombreCompleto||`${l.Nombres||""} ${l.ApellidoPaterno||""} ${l.ApellidoMaterno||""}`.trim()})),console.log("Trabajadores cargados:",this.trabajadores.length)},error:a=>{console.error("Error al cargar trabajadores:",a)}})}mostrarNuevo(){this.esModoEdicion=!1,this.prestamoEditando=null,this.modoCronograma="automatico",this.cuotasManuales=[],this.pinVerificado=!1,this.nuevoPrestamo={trabajadorID:"",entidadID:"",numeroContrato:"",tipoPrestamo:"",montoTotal:0,numeroCuotas:0,montoCuota:0,fechaInicio:new Date().toISOString().split("T")[0],codigoDescuento:"",observaciones:"",pin:""},this.tipoEntidadSeleccionada="",this.mostrarFormulario=!0}cerrarFormulario(){this.mostrarFormulario=!1,this.esModoEdicion=!1,this.prestamoEditando=null,this.limpiarFormulario()}limpiarFormulario(){this.nuevoPrestamo={trabajadorID:"",entidadID:"",numeroContrato:"",tipoPrestamo:"",montoTotal:0,numeroCuotas:0,montoCuota:0,fechaInicio:"",codigoDescuento:"",observaciones:"",pin:""},this.modoCronograma="automatico",this.cuotasManuales=[],this.archivoImportar=null,this.nombreArchivoImportar="",this.tipoEntidadSeleccionada="",this.pinVerificado=!1}verDetalle(a){this.prestamoSeleccionado=a,this.cargarCronograma(a.PrestamoID)}cerrarDetalle(){this.prestamoSeleccionado=null,this.cronograma=[]}liquidarPrestamo(a){this.prestamoALiquidar=a,this.montoLiquidacion=a.SaldoPendiente||0,this.observacionesLiquidacion="",this.mostrarModalLiquidacion=!0}editarPrestamo(a){this.prestamoEditando=a,this.esModoEdicion=!0,this.pinVerificado=!1,this.nuevoPrestamo={trabajadorID:a.TrabajadorID.toString(),entidadID:a.EntidadID.toString(),numeroContrato:a.NumeroContrato,tipoPrestamo:a.TipoPrestamo,montoTotal:a.MontoTotal,numeroCuotas:a.NumeroCuotas,montoCuota:a.MontoCuota,fechaInicio:a.FechaInicioPago?a.FechaInicioPago.split("T")[0]:"",codigoDescuento:a.CodigoDescuento||"",observaciones:a.Observaciones||"",pin:""},this.tipoEntidadSeleccionada=a.TipoEntidad,this.cargarCronograma(a.PrestamoID),this.mostrarFormulario=!0,this.modoCronograma="verCuotas"}solicitarPIN(a){this.campoProtegidoEditando=a,this.mostrarModalPIN=!0,this.pinIngresado="",this.errorPIN="",this.intentosPINFallidos=0,this.mostrarAlertaPIN=!1,this.nivelAlertaPIN="normal"}cerrarModalPIN(){this.mostrarModalPIN=!1,this.campoProtegidoEditando=null,this.pinIngresado="",this.errorPIN="",this.intentosPINFallidos=0,this.mostrarAlertaPIN=!1,this.nivelAlertaPIN="normal"}verificarPIN(){if(!this.prestamoEditando||!this.pinIngresado){this.errorPIN="Por favor ingrese el PIN";return}this.cargando=!0,this.errorPIN="",this.mostrarAlertaPIN=!1,this.prestamosService.verificarPIN(this.prestamoEditando.PrestamoID,this.pinIngresado).subscribe({next:a=>{a.success&&(this.intentosPINFallidos=0,this.pinVerificado=!0,this.mostrarModalPIN=!1,this.campoProtegidoEditando=null,this.pinIngresado="",this.cargando=!1,this.mostrarAlertaPIN=!1,this.nivelAlertaPIN="normal")},error:a=>{this.intentosPINFallidos++,this.cargando=!1,this.intentosPINFallidos<=3?this.nivelAlertaPIN="normal":this.intentosPINFallidos<=5?this.nivelAlertaPIN="media":this.nivelAlertaPIN="critica",this.mostrarAlertaPIN=!0,this.errorPIN=a.error?.mensaje||"PIN incorrecto",this.pinIngresado="",this.nivelAlertaPIN!=="critica"&&setTimeout(()=>{this.mostrarAlertaPIN=!1},4e3)}})}cerrarAlertaPIN(){this.mostrarAlertaPIN=!1}habilitarEdicionMontoTotal(){return this.pinVerificado?!0:(this.solicitarPIN("montoTotal"),!1)}habilitarEdicionCuotas(){return this.pinVerificado?!0:(this.solicitarPIN("cuotas"),!1)}cerrarModalLiquidacion(){this.mostrarModalLiquidacion=!1,this.prestamoALiquidar=null}filtrarEntidadesPorTipo(){}limpiarFiltros(){this.filtroBusqueda="",this.filtroEstado="",this.filtroEntidad="",this.cargarPrestamos()}cargarCronograma(a){this.prestamosService.obtenerCronograma(a).subscribe({next:o=>{this.cronograma=(o.data||[]).map(l=>V(T({},l),{editada:!1,montoOriginal:l.MontoCuota,Estado:l.Estado||"Pendiente"})),console.log("\u{1F4CB} Cronograma cargado:",this.cronograma.length,"cuotas"),console.log("\u{1F4CA} Estados encontrados:",[...new Set(this.cronograma.map(l=>l.Estado))])},error:o=>{console.error("Error al cargar cronograma:",o)}})}marcarCuotaComoEditada(a,o){this.habilitarEdicionCuotas()&&(a.editada=!0,a.MontoCuota=o)}cambiarModoCronograma(a){this.modoCronograma=a,a==="manual"&&this.nuevoPrestamo.numeroCuotas>0&&this.generarCuotasManuales(),a==="importar"&&(this.archivoImportar=null,this.nombreArchivoImportar="",this.cuotasManuales=[])}generarCuotasManuales(){let a=parseInt(this.nuevoPrestamo.numeroCuotas);if(!a||a<=0||a>120){alert("Por favor ingrese un n\xFAmero de cuotas v\xE1lido (1-120)");return}let o=this.nuevoPrestamo.montoTotal&&a?(parseFloat(this.nuevoPrestamo.montoTotal)/a).toFixed(2):"0.00",l=this.nuevoPrestamo.fechaInicio?new Date(this.nuevoPrestamo.fechaInicio):new Date;this.cuotasManuales=[];for(let f=1;f<=a;f++){let E=new Date(l);E.setMonth(E.getMonth()+f),this.cuotasManuales.push({numeroCuota:f,montoCuota:o,fechaVencimiento:E.toISOString().split("T")[0]})}}calcularTotalCuotasManuales(){return this.cuotasManuales.reduce((a,o)=>a+parseFloat(o.montoCuota||0),0)}validarCuotasManuales(){if(this.cuotasManuales.length===0)return alert("\u274C No hay cuotas definidas"),!1;for(let f of this.cuotasManuales){if(!f.montoCuota||parseFloat(f.montoCuota)<=0)return alert(`\u274C La cuota #${f.numeroCuota} debe tener un monto mayor a 0`),!1;if(!f.fechaVencimiento)return alert(`\u274C La cuota #${f.numeroCuota} debe tener una fecha de vencimiento`),!1}let a=this.calcularTotalCuotasManuales(),o=parseFloat(this.nuevoPrestamo.montoTotal),l=Math.abs(a-o);return!(l>.5&&!confirm(`\u26A0\uFE0F ADVERTENCIA:

Monto total del pr\xE9stamo: S/. ${o.toFixed(2)}
Total de cuotas: S/. ${a.toFixed(2)}
Diferencia: S/. ${l.toFixed(2)}

\xBFDesea continuar de todas formas?`))}onFileSelected(a){let o=a.target.files[0];if(o){let l=[".xlsx",".xls",".csv",".pdf",".jpg",".jpeg",".png"],f=o.name.substring(o.name.lastIndexOf(".")).toLowerCase();if(!l.includes(f)){alert(`\u274C Formatos permitidos:
\u2022 Excel: .xlsx, .xls
\u2022 CSV: .csv
\u2022 PDF: .pdf
\u2022 Im\xE1genes: .jpg, .jpeg, .png`),a.target.value="";return}if(o.size>10*1024*1024){alert("\u274C El archivo no debe superar los 10 MB"),a.target.value="";return}this.archivoImportar=o,this.nombreArchivoImportar=o.name,[".jpg",".jpeg",".png"].some(E=>o.name.toLowerCase().endsWith(E))?console.log("\u{1F4F7} Imagen detectada - se usar\xE1 OCR para extraer texto"):o.name.toLowerCase().endsWith(".pdf")&&console.log("\u{1F4C4} PDF detectado - se extraer\xE1 el texto autom\xE1ticamente")}}importarCronograma(){if(!this.archivoImportar){alert("Por favor seleccione un archivo");return}this.importando=!0;let a=new FormData;a.append("archivo",this.archivoImportar),this.http.post("http://localhost:5000/api/prestamos/importar-cronograma",a).subscribe({next:o=>{o.success&&o.data&&o.data.cuotas&&(this.cuotasManuales=o.data.cuotas,this.nuevoPrestamo.numeroCuotas=o.data.totalCuotas,(!this.nuevoPrestamo.montoTotal||this.nuevoPrestamo.montoTotal===0)&&(this.nuevoPrestamo.montoTotal=o.data.montoTotal),alert(`\u2705 ${o.mensaje}

Total: S/. ${o.data.montoTotal.toFixed(2)}`),console.log("Cuotas importadas:",this.cuotasManuales)),this.importando=!1},error:o=>{console.error("Error al importar cronograma:",o),alert("\u274C Error al procesar el archivo: "+(o.error?.mensaje||o.message)),this.importando=!1}})}limpiarArchivo(){this.archivoImportar=null,this.nombreArchivoImportar="",this.cuotasManuales=[]}guardarPrestamo(){if(!this.nuevoPrestamo.trabajadorID||!this.nuevoPrestamo.entidadID||!this.nuevoPrestamo.numeroContrato||!this.nuevoPrestamo.tipoPrestamo||!this.nuevoPrestamo.montoTotal||!this.nuevoPrestamo.numeroCuotas||!this.nuevoPrestamo.fechaInicio){alert("Por favor complete todos los campos requeridos");return}if(this.modoCronograma==="automatico"){if(!this.nuevoPrestamo.montoCuota||parseFloat(this.nuevoPrestamo.montoCuota)<=0){alert("Por favor ingrese el monto de la cuota");return}}else if((this.modoCronograma==="manual"||this.modoCronograma==="importar")&&!this.validarCuotasManuales())return;this.cargando=!0;let a={trabajadorID:parseInt(this.nuevoPrestamo.trabajadorID),entidadID:parseInt(this.nuevoPrestamo.entidadID),numeroContrato:this.nuevoPrestamo.numeroContrato,tipoPrestamo:this.nuevoPrestamo.tipoPrestamo,montoTotal:parseFloat(this.nuevoPrestamo.montoTotal),numeroCuotas:parseInt(this.nuevoPrestamo.numeroCuotas),fechaDesembolso:this.nuevoPrestamo.fechaInicio,fechaInicioPago:this.nuevoPrestamo.fechaInicio,codigoDescuento:this.nuevoPrestamo.codigoDescuento,observaciones:this.nuevoPrestamo.observaciones,pin:this.nuevoPrestamo.pin||""};if(this.modoCronograma==="automatico"?(a.montoCuota=parseFloat(this.nuevoPrestamo.montoCuota),a.modoCronograma="automatico"):(a.modoCronograma="manual",a.cronogramaManual=this.cuotasManuales.map(o=>({numeroCuota:o.numeroCuota,montoCuota:parseFloat(o.montoCuota),fechaVencimiento:o.fechaVencimiento})),a.montoCuota=this.calcularTotalCuotasManuales()/this.cuotasManuales.length),this.esModoEdicion&&this.prestamoEditando){let o={numeroContrato:a.numeroContrato,tipoPrestamo:a.tipoPrestamo,observaciones:a.observaciones};this.pinVerificado&&a.montoTotal!==this.prestamoEditando.MontoTotal&&(o.montoTotal=a.montoTotal);let l=o.montoTotal!==void 0&&o.montoTotal!==this.prestamoEditando.MontoTotal;this.prestamosService.actualizar(this.prestamoEditando.PrestamoID,o).subscribe({next:f=>{if(l)setTimeout(()=>{this.cargarCronograma(this.prestamoEditando.PrestamoID)},500),alert(`\u2705 Pr\xE9stamo actualizado exitosamente.

\u{1F504} Las cuotas han sido recalculadas autom\xE1ticamente.

Revise el cronograma actualizado abajo.`),this.cargarPrestamos(),this.cargando=!1,this.prestamoEditando.MontoTotal=o.montoTotal;else if(this.pinVerificado&&this.cronograma.length>0){let E=this.cronograma.filter(O=>O.editada&&O.Estado==="Pendiente").map(O=>({cuotaID:O.CuotaID,montoCuota:O.MontoCuota,fechaVencimiento:O.FechaVencimiento}));E.length>0?this.prestamosService.actualizarCuotas(this.prestamoEditando.PrestamoID,E).subscribe({next:()=>{alert("\u2705 Pr\xE9stamo y cuotas actualizados exitosamente"),this.cargarCronograma(this.prestamoEditando.PrestamoID),this.cargarPrestamos(),this.cargando=!1},error:O=>{console.error("Error al actualizar cuotas:",O),alert("\u2705 Pr\xE9stamo actualizado, pero hubo un error al actualizar las cuotas"),this.cargarPrestamos(),this.cargando=!1}}):(alert(f.mensaje||"\u2705 Pr\xE9stamo actualizado exitosamente"),this.cerrarFormulario(),this.cargarPrestamos(),this.cargando=!1)}else alert(f.mensaje||"\u2705 Pr\xE9stamo actualizado exitosamente"),this.cerrarFormulario(),this.cargarPrestamos(),this.cargando=!1},error:f=>{console.error("Error al actualizar pr\xE9stamo:",f),alert("\u274C Error al actualizar el pr\xE9stamo: "+(f.error?.mensaje||f.message)),this.cargando=!1}})}else this.prestamosService.crear(a).subscribe({next:o=>{alert("\u2705 Pr\xE9stamo creado exitosamente"),this.cerrarFormulario(),this.cargarPrestamos(),this.cargando=!1},error:o=>{console.error("Error al crear pr\xE9stamo:",o),alert("\u274C Error al crear el pr\xE9stamo: "+(o.error?.mensaje||o.message)),this.cargando=!1}})}confirmarLiquidacion(){if(!this.prestamoALiquidar||!this.montoLiquidacion){alert("Por favor ingrese el monto de liquidaci\xF3n");return}if(!confirm("\xBFEst\xE1 seguro de liquidar este pr\xE9stamo? Esta acci\xF3n no se puede deshacer."))return;this.cargando=!0;let a={saldoCapitalPendiente:this.prestamoALiquidar.SaldoPendiente||0,interesesPendientes:0,moraPendiente:0,otrosCargos:0,montoTotalLiquidado:this.montoLiquidacion,tipoLiquidacion:"Anticipada",formaPago:"Transferencia",fechaLiquidacion:new Date().toISOString().split("T")[0],numeroComprobante:"",observaciones:this.observacionesLiquidacion};this.prestamosService.liquidar(this.prestamoALiquidar.PrestamoID,a).subscribe({next:o=>{alert("\u2705 Pr\xE9stamo liquidado exitosamente"),this.cerrarModalLiquidacion(),this.cerrarDetalle(),this.cargarPrestamos(),this.cargando=!1},error:o=>{console.error("Error al liquidar pr\xE9stamo:",o),alert("\u274C Error al liquidar el pr\xE9stamo: "+(o.error?.mensaje||o.message)),this.cargando=!1}})}get prestamosFiltrados(){let a=[...this.prestamos];if(this.filtroBusqueda){let o=this.filtroBusqueda.toLowerCase();a=a.filter(l=>l.NombreCompleto?.toLowerCase().includes(o)||l.NumeroDocumento?.includes(o)||l.NumeroContrato?.toLowerCase().includes(o))}return a}get prestamosPaginados(){let a=(this.paginaActual-1)*this.itemsPorPagina,o=a+this.itemsPorPagina;return this.prestamosFiltrados.slice(a,o)}get totalPaginas(){return Math.ceil(this.prestamosFiltrados.length/this.itemsPorPagina)}cambiarPagina(a){a>=1&&a<=this.totalPaginas&&(this.paginaActual=a)}obtenerNombreTrabajador(a){let o=this.trabajadores.find(l=>l.TrabajadorID===a);return o?`${o.ApellidoPaterno} ${o.ApellidoMaterno}, ${o.Nombres}`:"Desconocido"}getEstadoClass(a){return{Activo:"badge-activo",Cancelado:"badge-cancelado",Liquidado:"badge-liquidado",Suspendido:"badge-suspendido"}[a]||""}getEstadoCuotaClass(a){if(!a)return"badge-pendiente";let o=a.toLowerCase().trim();return{pagada:"badge-pagada",pagado:"badge-pagada",pendiente:"badge-pendiente",vencida:"badge-vencida",vencido:"badge-vencida",condonado:"badge-cancelado",condonada:"badge-cancelado"}[o]||"badge-pendiente"}formatearFecha(a){return a?new Date(a).toLocaleDateString("es-PE"):"-"}formatearMonto(a){return`S/. ${a.toFixed(2)}`}obtenerEntidadesPorTipo(a){if(!a)return[];let o=this.entidades.filter(l=>l.TipoEntidad===a);return console.log(`Filtrando entidades por tipo "${a}":`,o.length,"encontradas"),o}};c.\u0275fac=function(o){return new(o||c)(I(ct),I(D),I(lt),I(Y))},c.\u0275cmp=q({type:c,selectors:[["app-prestamos"]],decls:68,vars:14,consts:[["pinInput",""],[1,"prestamos-lista"],[1,"page-header"],[1,"page-header__left"],[1,"page-title"],[1,"page-title__icon"],[1,"page-subtitle"],[1,"page-subtitle__dots"],[1,"page-subtitle__dot","page-subtitle__dot--large"],[1,"page-subtitle__dot","page-subtitle__dot--medium"],[1,"page-subtitle__dot","page-subtitle__dot--small"],[1,"page-header__right"],[1,"btn","btn--primary",3,"click"],[1,"btn__icon"],[1,"filtros-section"],[1,"filtros-header"],[1,"filtros-header__left"],[1,"filtros-title"],[1,"filtros-header__right"],["class","btn btn--ghost btn--sm",3,"click",4,"ngIf"],[1,"filtros-grid"],[1,"filtro-item"],[1,"filtro-label"],[1,"filtro-select",3,"ngModelChange","change","ngModel"],["value",""],["value","Activo"],["value","Cancelado"],["value","Liquidado"],["value","Suspendido"],[3,"value",4,"ngFor","ngForOf"],[1,"filtro-item","filtro-item--search"],[1,"search-box-wrapper"],[1,"search-box"],[1,"search-box__input-wrapper"],[1,"search-box__icon"],["type","text","placeholder","Buscar por DNI, nombre o n\xFAmero de contrato...",1,"search-box__input",3,"ngModelChange","input","ngModel"],[1,"resultado-texto"],["class","tabla-container",4,"ngIf"],["class","loading-state",4,"ngIf"],["class","pagination",4,"ngIf"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"btn","btn--ghost","btn--sm",3,"click"],[3,"value"],[1,"tabla-container"],[1,"tabla-scroll"],[1,"tabla"],[1,"text-right"],[1,"text-center"],[4,"ngFor","ngForOf"],["class","empty-state",4,"ngIf"],[1,"trabajador-info"],[1,"entidad-info"],[1,"entidad-info__nombre"],[1,"entidad-info__tipo"],[1,"codigo"],[1,"cuotas-badge"],[1,"saldo"],[1,"table-actions"],["title","Ver detalle",1,"btn-icon",3,"click"],["class","btn-icon btn-icon--primary","title","Editar pr\xE9stamo",3,"click",4,"ngIf"],["class","btn-icon btn-icon--warning","title","Liquidar pr\xE9stamo",3,"click",4,"ngIf"],["title","Editar pr\xE9stamo",1,"btn-icon","btn-icon--primary",3,"click"],["title","Liquidar pr\xE9stamo",1,"btn-icon","btn-icon--warning",3,"click"],[1,"empty-state"],[1,"empty-state__icon"],[1,"empty-state__title"],[1,"empty-state__message"],[1,"loading-state"],[1,"spinner"],[1,"pagination"],[1,"pagination__btn",3,"click","disabled"],[1,"pagination__info"],[1,"modal-overlay",3,"click"],[1,"modal",3,"click"],[1,"modal__header"],[1,"modal__title"],[1,"modal__icon"],[1,"modal__close",3,"click"],[1,"modal__body"],[1,"form"],[1,"form-group"],[1,"form-label"],[1,"required"],["name","trabajador","required","",1,"form-input",3,"ngModelChange","ngModel","disabled"],["name","tipoEntidad","required","",1,"form-input",3,"ngModelChange","change","ngModel","disabled"],["value","Banco"],["value","Caja Municipal"],["value","Cooperativa"],["value","Financiera"],["name","entidad","required","",1,"form-input",3,"ngModelChange","ngModel","disabled"],["name","tipo","required","",1,"form-input",3,"ngModelChange","ngModel"],["value","Personal"],["value","Hipotecario"],["value","Vehicular"],["value","Consumo"],["value","Educativo"],["type","text","name","contrato","placeholder","Ej: PRES-2024-001","required","",1,"form-input",3,"ngModelChange","ngModel"],[1,"form-row"],[2,"display","flex","gap","0.5rem","align-items","center"],["type","number","name","monto","placeholder","0.00","step","0.01","min","0","required","",1,"form-input",2,"flex","1",3,"ngModelChange","ngModel","disabled"],["type","button","class","btn btn--sm btn--primary","title","Ingresar PIN para editar",3,"click",4,"ngIf"],["style","color: #4caf50; font-size: 1.2rem;","title","Campo desbloqueado",4,"ngIf"],["type","number","name","cuotas","placeholder","12","min","1","required","",1,"form-input",3,"ngModelChange","ngModel","disabled"],["type","date","name","fechaInicio","required","",1,"form-input",3,"ngModelChange","ngModel","disabled"],["class","form-group",4,"ngIf"],["class","cronograma-manual",4,"ngIf"],["class","importar-section",4,"ngIf"],["type","text","name","codigoDescuento","placeholder","Ej: DESC-BCP-001",1,"form-input",3,"ngModelChange","ngModel"],["name","observaciones","rows","3","placeholder","Notas adicionales sobre el pr\xE9stamo...",1,"form-input",3,"ngModelChange","ngModel"],["class","form-group form-group--full",4,"ngIf"],[1,"modal__footer"],[1,"btn","btn--ghost",3,"click"],["type","button","title","Ingresar PIN para editar",1,"btn","btn--sm","btn--primary",3,"click"],["title","Campo desbloqueado",2,"color","#4caf50","font-size","1.2rem"],[1,"modo-selector","modo-selector--triple"],["type","button",1,"modo-btn",3,"click"],[1,"modo-btn__icon"],[1,"modo-btn__content"],["type","number","name","montoCuota","placeholder","0.00","step","0.01","min","0","required","",1,"form-input",3,"ngModelChange","ngModel","disabled"],[1,"form-help"],[1,"cronograma-manual"],[1,"cronograma-manual__header"],["type","button",1,"btn","btn--sm","btn--secondary",3,"click","disabled"],["class","alert alert--info",4,"ngIf"],["class","cuotas-table-wrapper",4,"ngIf"],[1,"alert","alert--info"],[1,"alert__icon"],[1,"cuotas-table-wrapper"],[1,"cuotas-stats"],[1,"stat"],[1,"cuotas-table"],[1,"table","table--sm"],[1,"text-center",2,"width","80px"],[2,"width","180px"],["type","number","step","0.01","min","0","placeholder","0.00","required","",1,"form-input","form-input--sm",3,"ngModelChange","ngModel","name"],["type","date","required","",1,"form-input","form-input--sm",3,"ngModelChange","ngModel","name"],[1,"importar-section"],[1,"importar-section__header"],[1,"file-upload-area"],["type","file","id","archivoImportar","accept",".xlsx,.xls,.csv,.pdf,.jpg,.jpeg,.png",2,"display","none",3,"change"],["for","archivoImportar",1,"file-upload-label"],[1,"file-upload-icon"],[1,"file-upload-text"],["class","file-upload-actions",4,"ngIf"],[1,"file-upload-actions"],["type","button",1,"btn","btn--primary",3,"click","disabled"],["type","button",1,"btn","btn--ghost",3,"click","disabled"],["class","table-footer",4,"ngIf"],[1,"table-footer"],["type","password","name","pin","placeholder","Ingrese un PIN de 4-6 d\xEDgitos","maxlength","6","minlength","4","required","",1,"form-input",3,"ngModelChange","ngModel"],[1,"form-group","form-group--full"],[2,"display","flex","justify-content","space-between","align-items","center","margin-bottom","1rem"],[1,"form-label",2,"margin","0"],["type","button","class","btn btn--sm btn--primary","title","Ingresar PIN para editar cuotas",3,"click",4,"ngIf"],["style","color: #4caf50; font-weight: 600;",4,"ngIf"],[1,"alert","alert--info",2,"margin-bottom","1rem"],[1,"cronograma-editable",2,"max-height","500px","overflow-y","auto","overflow-x","auto","border","1px solid #333","border-radius","8px","padding","1rem"],[1,"table",2,"width","100%","min-width","750px","font-size","0.9rem","table-layout","auto"],[2,"width","180px","min-width","180px"],[2,"min-width","150px"],[1,"text-center",2,"width","120px"],[3,"row-edited",4,"ngFor","ngForOf"],["type","button","title","Ingresar PIN para editar cuotas",1,"btn","btn--sm","btn--primary",3,"click"],[2,"color","#4caf50","font-weight","600"],[2,"padding","8px","min-width","180px"],["type","number","step","0.01","min","0","placeholder","0.00",1,"form-input","form-input--sm","cuota-monto-input",2,"width","100%","min-width","160px","padding","8px 12px","font-size","14px","box-sizing","border-box",3,"ngModelChange","blur","ngModel","name","disabled"],[2,"padding","8px","min-width","150px"],["type","date",1,"form-input","form-input--sm",2,"width","100%","min-width","140px","padding","8px 12px","font-size","14px","box-sizing","border-box",3,"change","value","disabled"],["style","color: #4caf50; margin-left: 0.5rem;","title","Cuota editada",4,"ngIf"],["title","Cuota editada",2,"color","#4caf50","margin-left","0.5rem"],[1,"modal","modal--large",3,"click"],[1,"detalle-grid"],[1,"detalle-item"],[1,"text-primary"],[1,"text-danger"],[1,"cronograma-section"],[1,"section-title"],[1,"cronograma-table-wrapper"],["class","btn btn--warning",3,"click",4,"ngIf"],[1,"btn","btn--warning",3,"click"],[1,"alert","alert--warning"],[1,"liquidacion-info"],[1,"liquidacion-item"],["type","number","step","0.01","min","0",1,"form-input",3,"ngModelChange","ngModel","placeholder"],["rows","3","placeholder","Motivo de la liquidaci\xF3n anticipada...",1,"form-input",3,"ngModelChange","ngModel"],[1,"modal","modal--small",3,"click"],[1,"alert","alert--warning",2,"margin-bottom","1.5rem"],["class","alerta-pin alerta-pin--normal","style","margin-bottom: 1rem; padding: 1rem; border-radius: 8px; background: linear-gradient(135deg, #fff3cd 0%, #ffe69c 100%); border: 2px solid #ffc107; box-shadow: 0 4px 12px rgba(255, 193, 7, 0.3); animation: slideDown 0.3s ease-out;",4,"ngIf"],["class","alerta-pin alerta-pin--media","style","margin-bottom: 1rem; padding: 1.25rem; border-radius: 8px; background: linear-gradient(135deg, #f8d7da 0%, #f5c6cb 100%); border: 2px solid #dc3545; box-shadow: 0 6px 20px rgba(220, 53, 69, 0.4); animation: slideDownShake 0.4s ease-out;",4,"ngIf"],["class","alerta-pin alerta-pin--critica","style","margin-bottom: 1rem; padding: 1.5rem; border-radius: 10px; background: linear-gradient(135deg, #721c24 0%, #c82333 100%); border: 3px solid #dc3545; box-shadow: 0 8px 30px rgba(220, 53, 69, 0.6), 0 0 0 4px rgba(220, 53, 69, 0.2); animation: criticalAlert 0.5s ease-out; position: relative; overflow: hidden;",4,"ngIf"],["style","margin-left: 0.5rem; color: #dc3545; font-weight: 600;",4,"ngIf"],["type","password","placeholder","Ingrese el PIN","maxlength","6","autofocus","",1,"form-input",2,"transition","all 0.3s ease",3,"ngModelChange","keyup.enter","ngModel"],["class","alert alert--danger","style","margin-top: 0.5rem;",4,"ngIf"],[1,"btn",2,"transition","all 0.3s ease",3,"click","disabled"],[1,"alerta-pin","alerta-pin--normal",2,"margin-bottom","1rem","padding","1rem","border-radius","8px","background","linear-gradient(135deg, #fff3cd 0%, #ffe69c 100%)","border","2px solid #ffc107","box-shadow","0 4px 12px rgba(255, 193, 7, 0.3)","animation","slideDown 0.3s ease-out"],[2,"display","flex","align-items","flex-start","gap","1rem"],[2,"font-size","2rem","line-height","1"],[2,"flex","1"],[2,"font-weight","600","color","#856404","margin-bottom","0.5rem","font-size","1.1rem"],[2,"color","#856404","font-size","0.95rem"],["onmouseover","this.style.opacity='1'","onmouseout","this.style.opacity='0.7'",2,"background","none","border","none","color","#856404","font-size","1.5rem","cursor","pointer","padding","0","line-height","1","opacity","0.7","transition","opacity 0.2s",3,"click"],[1,"alerta-pin","alerta-pin--media",2,"margin-bottom","1rem","padding","1.25rem","border-radius","8px","background","linear-gradient(135deg, #f8d7da 0%, #f5c6cb 100%)","border","2px solid #dc3545","box-shadow","0 6px 20px rgba(220, 53, 69, 0.4)","animation","slideDownShake 0.4s ease-out"],[2,"font-size","2.5rem","line-height","1","animation","pulse 1s infinite"],[2,"font-weight","700","color","#721c24","margin-bottom","0.5rem","font-size","1.2rem"],[2,"color","#721c24","font-size","1rem","line-height","1.5"],[2,"font-size","1.1rem"],[2,"font-size","0.9rem","opacity","0.9"],["onmouseover","this.style.opacity='1'","onmouseout","this.style.opacity='0.7'",2,"background","none","border","none","color","#721c24","font-size","1.5rem","cursor","pointer","padding","0","line-height","1","opacity","0.7","transition","opacity 0.2s",3,"click"],[1,"alerta-pin","alerta-pin--critica",2,"margin-bottom","1rem","padding","1.5rem","border-radius","10px","background","linear-gradient(135deg, #721c24 0%, #c82333 100%)","border","3px solid #dc3545","box-shadow","0 8px 30px rgba(220, 53, 69, 0.6), 0 0 0 4px rgba(220, 53, 69, 0.2)","animation","criticalAlert 0.5s ease-out","position","relative","overflow","hidden"],[2,"position","absolute","top","0","left","0","right","0","bottom","0","background","linear-gradient(45deg, transparent 30%, rgba(255,255,255,0.1) 50%, transparent 70%)","animation","shimmer 2s infinite"],[2,"display","flex","align-items","flex-start","gap","1.25rem","position","relative","z-index","1"],[2,"font-size","3rem","line-height","1","animation","rotate 1s ease-in-out infinite, pulseCritical 0.8s infinite"],[2,"font-weight","800","color","#ffffff","margin-bottom","0.75rem","font-size","1.4rem","text-shadow","2px 2px 4px rgba(0,0,0,0.3)","letter-spacing","0.5px"],[2,"color","#ffffff","font-size","1.05rem","line-height","1.6","text-shadow","1px 1px 2px rgba(0,0,0,0.2)"],[2,"font-size","1.2rem"],[2,"background","rgba(0,0,0,0.3)","padding","0.75rem","border-radius","6px","margin-top","0.5rem","border-left","4px solid #ffc107"],[2,"color","#ffc107"],["onmouseover","this.style.background='rgba(255,255,255,0.3)'; this.style.borderColor='rgba(255,255,255,0.8)'","onmouseout","this.style.background='rgba(255,255,255,0.2)'; this.style.borderColor='rgba(255,255,255,0.5)'",2,"background","rgba(255,255,255,0.2)","border","2px solid rgba(255,255,255,0.5)","color","#ffffff","font-size","1.5rem","cursor","pointer","padding","0.25rem 0.5rem","line-height","1","border-radius","4px","transition","all 0.2s",3,"click"],[2,"margin-left","0.5rem","color","#dc3545","font-weight","600"],[1,"alert","alert--danger",2,"margin-top","0.5rem"]],template:function(o,l){o&1&&(n(0,"div",1)(1,"div",2)(2,"div",3)(3,"h1",4)(4,"span",5),i(5,"\u{1F4B3}"),e(),i(6," Gesti\xF3n de Pr\xE9stamos "),e(),n(7,"p",6)(8,"span",7),S(9,"span",8)(10,"span",9)(11,"span",10),e(),i(12),e()(),n(13,"div",11)(14,"button",12),g("click",function(){return l.mostrarNuevo()}),n(15,"span",13),i(16,"\u2795"),e(),i(17," Nuevo Pr\xE9stamo "),e()()(),n(18,"div",14)(19,"div",15)(20,"div",16)(21,"h3",17),i(22,"\u{1F50D} Filtros de B\xFAsqueda"),e()(),n(23,"div",18),b(24,gt,2,0,"button",19),e()(),n(25,"div",20)(26,"div",21)(27,"label",22),i(28,"Estado:"),e(),n(29,"select",23),P("ngModelChange",function(E){return v(l.filtroEstado,E)||(l.filtroEstado=E),E}),g("change",function(){return l.cargarPrestamos()}),n(30,"option",24),i(31,"Todos"),e(),n(32,"option",25),i(33,"Activos"),e(),n(34,"option",26),i(35,"Cancelados"),e(),n(36,"option",27),i(37,"Liquidados"),e(),n(38,"option",28),i(39,"Suspendidos"),e()()(),n(40,"div",21)(41,"label",22),i(42,"Entidad:"),e(),n(43,"select",23),P("ngModelChange",function(E){return v(l.filtroEntidad,E)||(l.filtroEntidad=E),E}),g("change",function(){return l.cargarPrestamos()}),n(44,"option",24),i(45,"Todas"),e(),b(46,_t,2,2,"option",29),e()(),n(47,"div",30)(48,"div",31)(49,"div",32)(50,"label",22),i(51,"Buscar:"),e(),n(52,"div",33)(53,"span",34),i(54,"\u{1F50D}"),e(),n(55,"input",35),P("ngModelChange",function(E){return v(l.filtroBusqueda,E)||(l.filtroBusqueda=E),E}),g("input",function(){return l.cargarPrestamos()}),e()()()(),n(56,"span",36),i(57," Mostrando "),n(58,"strong"),i(59),e(),i(60," pr\xE9stamos "),e()()()(),b(61,Ct,30,2,"div",37)(62,vt,4,0,"div",38)(63,Pt,7,4,"div",39),e(),b(64,Rt,112,30,"div",40)(65,Ht,86,14,"div",40)(66,Gt,46,5,"div",40)(67,te,37,23,"div",40)),o&2&&(r(12),x(" Administraci\xF3n de pr\xE9stamos bancarios, cooperativas y cajas municipales - ",l.prestamosFiltrados.length," pr\xE9stamos "),r(12),m("ngIf",l.filtroBusqueda||l.filtroEstado||l.filtroEntidad),r(5),C("ngModel",l.filtroEstado),r(14),C("ngModel",l.filtroEntidad),r(3),m("ngForOf",l.entidades),r(9),C("ngModel",l.filtroBusqueda),r(4),_(l.prestamosFiltrados.length),r(2),m("ngIf",!l.cargando),r(),m("ngIf",l.cargando),r(),m("ngIf",l.prestamosFiltrados.length>l.itemsPorPagina),r(),m("ngIf",l.mostrarFormulario),r(),m("ngIf",l.prestamoSeleccionado),r(),m("ngIf",l.mostrarModalLiquidacion),r(),m("ngIf",l.mostrarModalPIN))},dependencies:[U,W,B,$,st,X,et,nt,H,Z,tt,G,J,it,at,rt,ot,Q,K,dt,R],styles:['@charset "UTF-8";.prestamos-lista[_ngcontent-%COMP%]{width:100%;max-width:100%}.page-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:32px;padding:18px 24px;background:linear-gradient(135deg,#fff,#f8fafc)!important;border-radius:8px;border:1px solid rgba(34,197,94,.15);box-shadow:0 4px 16px #00000014,0 1px 3px #0000000d,inset 0 1px #ffffffe6;position:relative;overflow:hidden;gap:20px;flex-wrap:wrap}.page-header[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{color:#1e293b!important}.page-header[_ngcontent-%COMP%]   .page-subtitle[_ngcontent-%COMP%]{color:#64748b!important}.page-header[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:5px;background:linear-gradient(90deg,#22c55e,#16a34a)}.page-header[_ngcontent-%COMP%]:after{content:"";position:absolute;top:0;left:0;width:4px;height:100%;background:linear-gradient(180deg,#22c55e,#16a34a);opacity:.6}.page-header__left[_ngcontent-%COMP%]{flex:1;position:relative;z-index:1;padding-left:12px;min-width:0}.page-header__right[_ngcontent-%COMP%]{flex-shrink:0;display:flex;gap:12px;flex-wrap:wrap;position:relative;z-index:1}[data-theme=dark][_nghost-%COMP%]   .page-header[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .page-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1e293b,#0f172a)!important;border:1px solid rgba(34,197,94,.2);box-shadow:0 4px 16px #0000004d,0 1px 3px #0003,inset 0 1px #ffffff0d}[data-theme=dark][_nghost-%COMP%]   .page-title[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .page-title[_ngcontent-%COMP%]{color:#e2e8f0!important}[data-theme=dark][_nghost-%COMP%]   .page-subtitle[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .page-subtitle[_ngcontent-%COMP%]{color:#94a3b8!important}[data-theme=dark][_nghost-%COMP%]   .filtros-section[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .filtros-section[_ngcontent-%COMP%]{background:var(--panel)!important;border-color:var(--border)!important}[data-theme=dark][_nghost-%COMP%]   .filtros-title[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .filtros-title[_ngcontent-%COMP%]{color:var(--text-1)!important}[data-theme=dark][_nghost-%COMP%]   .tabla-container[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .tabla-container[_ngcontent-%COMP%]{background:var(--panel)!important;border-color:var(--border)!important}[data-theme=dark][_nghost-%COMP%]   .tabla[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .tabla[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{color:var(--text-1)!important}[data-theme=dark][_nghost-%COMP%]   .badge.badge-activo[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .badge.badge-activo[_ngcontent-%COMP%]{background:#22c55e40!important;color:#4ade80!important}[data-theme=dark][_nghost-%COMP%]   .badge.badge-liquidado[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .badge.badge-liquidado[_ngcontent-%COMP%]{background:#3b82f640!important;color:#60a5fa!important}[data-theme=dark][_nghost-%COMP%]   .badge.badge-cancelado[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .badge.badge-cancelado[_ngcontent-%COMP%]{background:#6b728040!important;color:#9ca3af!important}[data-theme=dark][_nghost-%COMP%]   .badge.badge-suspendido[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .badge.badge-suspendido[_ngcontent-%COMP%]{background:#ef444440!important;color:#f87171!important}[data-theme=dark][_nghost-%COMP%]   .badge.badge-pagada[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .badge.badge-pagada[_ngcontent-%COMP%]{background:#22c55e40!important;color:#4ade80!important}[data-theme=dark][_nghost-%COMP%]   .badge.badge-pendiente[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .badge.badge-pendiente[_ngcontent-%COMP%]{background:#f59e0b40!important;color:#fbbf24!important}.page-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin:0 0 8px;font-size:28px;font-weight:700;color:var(--text-1)}.page-title__icon[_ngcontent-%COMP%]{font-size:32px}.page-subtitle[_ngcontent-%COMP%]{font-size:11px;color:#64748b;margin:0;font-weight:600;letter-spacing:.05em;display:flex;align-items:center;gap:10px;text-transform:uppercase;position:relative;padding-left:20px}.page-subtitle__dots[_ngcontent-%COMP%]{position:absolute;left:0;top:50%;transform:translateY(-50%);display:flex;flex-direction:column;align-items:flex-start;justify-content:center;gap:3px;width:16px;height:20px}.page-subtitle__dot[_ngcontent-%COMP%]{border-radius:50%;background:linear-gradient(135deg,#22c55e,#16a34a);box-shadow:0 0 6px #22c55e80}.page-subtitle__dot--large[_ngcontent-%COMP%]{width:8px;height:8px;margin-left:0}.page-subtitle__dot--medium[_ngcontent-%COMP%]{width:5px;height:5px;margin-left:3px}.page-subtitle__dot--small[_ngcontent-%COMP%]{width:3px;height:3px;margin-left:6px}.filtros-section[_ngcontent-%COMP%]{background:var(--panel);border:1px solid var(--border);border-radius:8px;padding:14px 18px;margin-bottom:24px}.filtros-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:14px;gap:12px;flex-wrap:wrap}.filtros-header__left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;flex-wrap:wrap;flex:1}.filtros-header__right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;flex-shrink:0}.filtros-title[_ngcontent-%COMP%]{font-size:14px;font-weight:700;color:var(--text-1);margin:0}.filtros-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:12px;align-items:end}.filtro-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.filtro-item--search[_ngcontent-%COMP%]{grid-column:1/-1;flex-direction:row;align-items:flex-end;justify-content:space-between;gap:16px}.filtro-item--search[_ngcontent-%COMP%]   .search-box-wrapper[_ngcontent-%COMP%]{flex:1;max-width:none}.filtro-label[_ngcontent-%COMP%]{font-size:11px;font-weight:600;color:var(--text-2);text-transform:uppercase;letter-spacing:.3px}.filtro-select[_ngcontent-%COMP%]{padding:7px 10px;border:1px solid var(--border);border-radius:6px;background:var(--panel-2);color:var(--text-1);font-size:13px;outline:none;transition:all .2s ease;cursor:pointer}.filtro-select[_ngcontent-%COMP%]:focus{border-color:var(--accent);box-shadow:0 0 0 2px #22c55e1a}.search-box-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px;flex:1;max-width:250px}.search-box[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.search-box__input-wrapper[_ngcontent-%COMP%]{position:relative}.search-box__icon[_ngcontent-%COMP%]{position:absolute;left:10px;top:50%;transform:translateY(-50%);font-size:14px;opacity:.5;pointer-events:none;z-index:1}.search-box__input[_ngcontent-%COMP%]{width:100%;padding:7px 10px 7px 36px;border:1px solid var(--border);border-radius:6px;background:var(--panel-2);color:var(--text-1);font-size:13px;outline:none;transition:all .2s ease}.search-box__input[_ngcontent-%COMP%]:focus{border-color:var(--accent);box-shadow:0 0 0 2px #22c55e1a}.search-box__input[_ngcontent-%COMP%]::placeholder{color:var(--text-2);opacity:.6}.resultado-texto[_ngcontent-%COMP%]{font-size:11px;color:#22c55e;align-self:flex-end;margin-bottom:4px;white-space:nowrap}.resultado-texto[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#22c55e;font-weight:700}.select[_ngcontent-%COMP%]{padding:10px 14px;border:1px solid var(--border);border-radius:10px;background:var(--panel-2);color:var(--text-1);font-size:14px;outline:none;cursor:pointer;transition:all .2s ease}.select[_ngcontent-%COMP%]:focus{border-color:var(--accent);box-shadow:0 0 0 3px #22c55e1a}.select--sm[_ngcontent-%COMP%]{padding:8px 12px;font-size:13px}.select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{background:#1e293b;color:#e2e8f0;padding:12px;font-size:14px}.select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]:checked, .select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#22c55e,#16a34a);color:#fff}.modal[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{background-color:#1e293b!important;color:#e2e8f0!important}.modal[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{background-color:#1e293b!important;color:#e2e8f0!important;padding:10px;font-weight:500}.modal[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]:hover{background-color:#16a34a!important}.modal[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]:checked, .modal[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]   option[selected][_ngcontent-%COMP%]{background:linear-gradient(135deg,#22c55e,#16a34a)!important;color:#fff!important;font-weight:600}.modo-selector[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:15px;margin-bottom:20px}.modo-selector--triple[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr 1fr}.modo-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:15px;background:var(--panel-1);border:2px solid var(--border-1);border-radius:10px;cursor:pointer;transition:all .3s ease}.modo-btn[_ngcontent-%COMP%]:hover{border-color:var(--primary);background:var(--panel-2);transform:translateY(-2px)}.modo-btn--active[_ngcontent-%COMP%]{border-color:var(--primary);background:linear-gradient(135deg,#22c55e1a,#16a34a0d);box-shadow:0 0 20px #22c55e33}.modo-btn--active[_ngcontent-%COMP%]   .modo-btn__icon[_ngcontent-%COMP%]{transform:scale(1.2)}.modo-btn--active[_ngcontent-%COMP%]   .modo-btn__content[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:var(--primary)}.modo-btn__icon[_ngcontent-%COMP%]{font-size:24px;transition:transform .3s ease}.modo-btn__content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;gap:4px}.modo-btn__content[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:14px;color:var(--text-1);transition:color .3s ease}.modo-btn__content[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:12px;color:var(--text-3)}.cronograma-manual[_ngcontent-%COMP%]{margin-top:20px;padding:20px;background:var(--panel-2);border-radius:10px;border:1px solid var(--border-1)}.cronograma-manual__header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:15px}.cronograma-manual__header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;font-size:16px;color:var(--text-1)}.cuotas-table-wrapper[_ngcontent-%COMP%]{margin-top:15px}.cuotas-stats[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:15px;margin-bottom:20px;padding:15px;background:var(--panel-1);border-radius:8px}.cuotas-stats[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px}.cuotas-stats[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:12px;color:var(--text-3);font-weight:500}.cuotas-stats[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:18px;color:var(--primary)}.cuotas-stats[_ngcontent-%COMP%]   .stat--warning[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:var(--warning)}.cuotas-table[_ngcontent-%COMP%]{max-height:400px;overflow-y:auto;border:1px solid var(--border-1);border-radius:8px}.cuotas-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{margin:0}.cuotas-table[_ngcontent-%COMP%]   .form-input--sm[_ngcontent-%COMP%]{width:100%;padding:8px 12px;font-size:13px;border-radius:6px}.cuotas-table[_ngcontent-%COMP%]   .cuota-monto-input[_ngcontent-%COMP%]{min-width:160px!important;width:100%!important;padding:8px 12px!important;font-size:14px!important;font-weight:500;box-sizing:border-box}.cuotas-table[_ngcontent-%COMP%]   .cuota-monto-input[_ngcontent-%COMP%]::-webkit-inner-spin-button, .cuotas-table[_ngcontent-%COMP%]   .cuota-monto-input[_ngcontent-%COMP%]::-webkit-outer-spin-button{opacity:1}.cuotas-table[_ngcontent-%COMP%]   .cuota-monto-input[_ngcontent-%COMP%]:focus{outline:2px solid var(--accent);outline-offset:-2px}.cuotas-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:var(--panel-2)}.alert[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:12px;padding:15px;border-radius:8px;margin-bottom:20px}.alert__icon[_ngcontent-%COMP%]{font-size:20px}.alert--info[_ngcontent-%COMP%]{background:#3b82f61a;border:1px solid rgba(59,130,246,.3);color:#93c5fd}.alert--info[_ngcontent-%COMP%]   .alert__icon[_ngcontent-%COMP%]{color:#60a5fa}.alert--warning[_ngcontent-%COMP%]{background:#f59e0b1a;border:1px solid rgba(245,158,11,.3);color:#fbbf24}.alert--warning[_ngcontent-%COMP%]   .alert__icon[_ngcontent-%COMP%]{color:#f59e0b}.alert[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{flex:1}.alert[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{display:block;margin-bottom:4px}.alert[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:13px}.btn--sm[_ngcontent-%COMP%]{padding:8px 16px;font-size:13px}.btn--secondary[_ngcontent-%COMP%]{background:var(--panel-2);color:var(--text-1);border:1px solid var(--border-1)}.btn--secondary[_ngcontent-%COMP%]:hover{background:var(--panel-3);border-color:var(--primary)}.form-help[_ngcontent-%COMP%]{display:block;margin-top:8px;font-size:12px;color:var(--text-3);font-style:italic}.importar-section[_ngcontent-%COMP%]{margin-top:20px;padding:20px;background:var(--panel-2);border-radius:10px;border:1px solid var(--border-1)}.importar-section__header[_ngcontent-%COMP%]{margin-bottom:15px}.importar-section__header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;font-size:16px;color:var(--text-1)}.file-upload-area[_ngcontent-%COMP%]{margin-top:20px}.file-upload-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px;padding:20px;background:var(--panel-1);border:2px dashed var(--border-1);border-radius:10px;cursor:pointer;transition:all .3s ease}.file-upload-label[_ngcontent-%COMP%]:hover{border-color:var(--primary);background:var(--panel-2);transform:translateY(-2px)}.file-upload-icon[_ngcontent-%COMP%]{font-size:32px}.file-upload-text[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:4px}.file-upload-text[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:14px;color:var(--text-1)}.file-upload-text[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:12px;color:var(--text-3)}.file-upload-actions[_ngcontent-%COMP%]{display:flex;gap:10px;margin-top:15px}.table-footer[_ngcontent-%COMP%]{padding:12px;text-align:center;background:var(--panel-1);border-top:1px solid var(--border-1);color:var(--text-3)}.btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:8px;padding:10px 16px;border-radius:10px;font-weight:600;font-size:14px;cursor:pointer;transition:all .2s ease;border:none;white-space:nowrap}.btn__icon[_ngcontent-%COMP%]{font-size:16px}.btn--primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#22c55e,#16a34a);color:#fff;border:none}.btn--primary[_ngcontent-%COMP%]:hover{box-shadow:0 0 20px #22c55e66;transform:translateY(-1px)}.btn--warning[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f59e0b,#d97706);color:#fff;border:none}.btn--warning[_ngcontent-%COMP%]:hover{box-shadow:0 0 20px #f59e0b66;transform:translateY(-1px)}.btn--outline[_ngcontent-%COMP%]{background:transparent;border:1px solid var(--border);color:var(--text-1)}.btn--outline[_ngcontent-%COMP%]:hover{background:var(--panel-2);border-color:var(--accent)}.btn--ghost[_ngcontent-%COMP%]{background:transparent;border:none;color:var(--text-2)}.btn--ghost[_ngcontent-%COMP%]:hover{color:var(--text-1);background:var(--panel-2)}.tabla-container[_ngcontent-%COMP%]{background:var(--panel);border:1px solid var(--border);border-radius:8px;overflow:hidden;margin-bottom:24px}.tabla-scroll[_ngcontent-%COMP%]{overflow-x:auto}.tabla[_ngcontent-%COMP%]{width:100%;border-collapse:separate;border-spacing:0;font-size:13px;border-radius:0}.tabla[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:#059669!important;border-bottom:2px solid #047857!important}.tabla[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:16px 20px!important;text-align:left;font-weight:700!important;color:#fff!important;font-size:12px!important;text-transform:uppercase!important;letter-spacing:1px!important;white-space:nowrap;border-radius:0}.tabla[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{border-top-left-radius:4px}.tabla[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{border-top-right-radius:4px}.tabla[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid var(--border);transition:background .15s ease}.tabla[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:var(--panel-2)}.tabla[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child{border-bottom:none}.tabla[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]:first-child{border-bottom-left-radius:8px}.tabla[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]:last-child{border-bottom-right-radius:8px}.tabla[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:14px 12px;color:var(--text-1)}.tabla--sm[_ngcontent-%COMP%]{font-size:13px}.tabla--sm[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .tabla--sm[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px 12px}.text-right[_ngcontent-%COMP%]{text-align:right!important}.text-center[_ngcontent-%COMP%]{text-align:center!important}.text-primary[_ngcontent-%COMP%]{color:var(--accent)!important}.text-danger[_ngcontent-%COMP%]{color:#ef4444!important}.badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;padding:4px 12px;border-radius:20px;font-size:12px;font-weight:600}.badge.badge-activo[_ngcontent-%COMP%]{background:#22c55e26;color:#16a34a}.badge.badge-liquidado[_ngcontent-%COMP%]{background:#3b82f626;color:#2563eb}.badge.badge-cancelado[_ngcontent-%COMP%]{background:#6b728026;color:#6b7280}.badge.badge-suspendido[_ngcontent-%COMP%]{background:#ef444426;color:#dc2626}.badge.badge-pagada[_ngcontent-%COMP%]{background:#22c55e26;color:#16a34a}.badge.badge-pendiente[_ngcontent-%COMP%]{background:#f59e0b26;color:#d97706}.badge.badge-vencida[_ngcontent-%COMP%]{background:#ef444426;color:#dc2626}.trabajador-info[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{display:block;color:var(--text-1)}.entidad-info__nombre[_ngcontent-%COMP%]{display:block;font-weight:600;color:var(--text-1)}.entidad-info__tipo[_ngcontent-%COMP%]{display:block;font-size:12px;color:var(--text-2);margin-top:2px}.codigo[_ngcontent-%COMP%]{font-family:Courier New,monospace;background:var(--panel-1);padding:4px 8px;border-radius:4px;font-size:12px;color:var(--accent)}.cuotas-badge[_ngcontent-%COMP%]{background:var(--panel-1);padding:4px 12px;border-radius:20px;font-weight:600;color:var(--text-1)}.saldo[_ngcontent-%COMP%]{color:#ef4444;font-size:15px}.table-actions[_ngcontent-%COMP%]{display:flex;gap:8px;justify-content:center}.btn-icon[_ngcontent-%COMP%]{width:36px;height:36px;border-radius:8px;border:1px solid var(--border);background:transparent;display:flex;align-items:center;justify-content:center;font-size:16px;cursor:pointer;transition:all .2s ease}.btn-icon[_ngcontent-%COMP%]:hover{background:var(--panel-1);border-color:var(--accent);transform:scale(1.1)}.btn-icon--warning[_ngcontent-%COMP%]:hover{background:#f59e0b1a;border-color:#f59e0b}.empty-state[_ngcontent-%COMP%]{padding:60px 20px;text-align:center}.empty-state__icon[_ngcontent-%COMP%]{font-size:64px;margin-bottom:16px;opacity:.3}.empty-state__title[_ngcontent-%COMP%]{font-size:18px;font-weight:600;color:var(--text-1);margin:0 0 8px}.empty-state__message[_ngcontent-%COMP%]{color:var(--text-2);margin:0}.loading-state[_ngcontent-%COMP%]{padding:60px 20px;text-align:center}.loading-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-2);margin-top:16px}.spinner[_ngcontent-%COMP%]{width:40px;height:40px;margin:0 auto;border:4px solid var(--border);border-top-color:var(--accent);border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.pagination[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:16px;margin-top:20px;padding:16px}.pagination__btn[_ngcontent-%COMP%]{padding:8px 16px;border-radius:8px;border:1px solid var(--border);background:var(--panel-2);color:var(--text-1);font-weight:600;cursor:pointer;transition:all .2s ease}.pagination__btn[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--accent);color:#fff;border-color:var(--accent)}.pagination__btn[_ngcontent-%COMP%]:disabled{opacity:.3;cursor:not-allowed}.pagination__info[_ngcontent-%COMP%]{color:var(--text-2);font-size:14px}.modal-overlay[_ngcontent-%COMP%]{position:fixed!important;inset:0!important;width:100vw!important;height:100vh!important;min-width:100vw!important;min-height:100vh!important;max-width:100vw!important;max-height:100vh!important;margin:0!important;padding:20px!important;background:#0009!important;backdrop-filter:blur(8px)!important;-webkit-backdrop-filter:blur(8px)!important;display:flex!important;align-items:center!important;justify-content:center!important;z-index:999999!important;pointer-events:all!important;box-sizing:border-box!important;animation:_ngcontent-%COMP%_fadeIn .2s ease}.modal[_ngcontent-%COMP%]{background:var(--panel-2);border-radius:16px;max-width:600px;width:100%;max-height:90vh;overflow:hidden;display:flex;flex-direction:column;box-shadow:0 20px 60px #0000004d;animation:_ngcontent-%COMP%_slideUp .3s ease}.modal--large[_ngcontent-%COMP%]{max-width:900px}.modal__header[_ngcontent-%COMP%]{padding:24px;border-bottom:1px solid var(--border);display:flex;align-items:center;justify-content:space-between;flex-shrink:0}.modal__title[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:var(--text-1);margin:0;display:flex;align-items:center;gap:12px}.modal__icon[_ngcontent-%COMP%]{font-size:24px}.modal__close[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:8px;border:none;background:transparent;color:var(--text-2);font-size:18px;cursor:pointer;transition:all .2s ease}.modal__close[_ngcontent-%COMP%]:hover{background:var(--panel-1);color:var(--text-1)}.modal__body[_ngcontent-%COMP%]{padding:24px;overflow-y:auto;flex:1}.modal__footer[_ngcontent-%COMP%]{padding:20px 24px;border-top:1px solid var(--border);display:flex;justify-content:flex-end;gap:12px;flex-shrink:0}.form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:16px}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.form-label[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:var(--text-1)}.form-label[_ngcontent-%COMP%]   .required[_ngcontent-%COMP%]{color:#ef4444;margin-right:4px}.form-input[_ngcontent-%COMP%]{padding:10px 14px;border:1px solid var(--border);border-radius:10px;background:var(--panel-1)!important;color:var(--text-1)!important;font-size:14px;outline:none;transition:all .2s ease;font-family:inherit}.form-input[_ngcontent-%COMP%]:focus{border-color:var(--accent);box-shadow:0 0 0 3px #22c55e1a}.form-input[_ngcontent-%COMP%]::placeholder{color:var(--text-2);opacity:.6}.form-input[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{background-color:#1e293b!important;color:#e2e8f0!important;padding:10px;font-weight:500}.form-input[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]:hover, .form-input[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]:focus, .form-input[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]:active{background:linear-gradient(135deg,#22c55e,#16a34a)!important;color:#fff!important}textarea.form-input[_ngcontent-%COMP%]{resize:vertical;min-height:80px}.detalle-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:16px;margin-bottom:24px;padding:20px;background:var(--panel-1);border-radius:12px;border:1px solid var(--border)}.detalle-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:12px;color:var(--text-2);margin-bottom:4px;text-transform:uppercase;letter-spacing:.5px}.detalle-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{display:block;font-size:15px;color:var(--text-1)}.cronograma-section[_ngcontent-%COMP%]{margin-top:24px}.section-title[_ngcontent-%COMP%]{font-size:16px;font-weight:700;color:var(--text-1);margin:0 0 16px}.cronograma-table-wrapper[_ngcontent-%COMP%]{background:var(--panel-1);border-radius:12px;border:1px solid var(--border);overflow:hidden;max-height:400px;overflow-y:auto}.alert[_ngcontent-%COMP%]{padding:16px;border-radius:12px;display:flex;gap:12px;margin-bottom:20px}.alert--warning[_ngcontent-%COMP%]{background:#f59e0b1a;border:1px solid rgba(245,158,11,.3)}.alert--warning[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#d97706}.alert--warning[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-2);margin:4px 0 0;font-size:14px}.alert__icon[_ngcontent-%COMP%]{font-size:24px;flex-shrink:0}.liquidacion-info[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:16px;margin-bottom:20px;padding:16px;background:var(--panel-1);border-radius:12px}.liquidacion-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:13px;color:var(--text-2);margin-bottom:4px}.liquidacion-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{display:block;font-size:18px;font-weight:700}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@media (max-width: 768px){.page-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.acciones-bar[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.acciones-bar__left[_ngcontent-%COMP%], .acciones-bar__right[_ngcontent-%COMP%]{width:100%}.search-box[_ngcontent-%COMP%]{min-width:100%}.form-row[_ngcontent-%COMP%], .detalle-grid[_ngcontent-%COMP%], .liquidacion-info[_ngcontent-%COMP%]{grid-template-columns:1fr}.table-container[_ngcontent-%COMP%]{overflow-x:auto}.table[_ngcontent-%COMP%]{min-width:900px}}',"@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_slideDownShake{0%{opacity:0;transform:translateY(-20px)}50%{transform:translate(-5px)}75%{transform:translate(5px)}to{opacity:1;transform:translate(0)}}@keyframes _ngcontent-%COMP%_criticalAlert{0%{opacity:0;transform:scale(.9) translateY(-30px)}50%{transform:scale(1.02) translateY(0)}to{opacity:1;transform:scale(1) translateY(0)}}@keyframes _ngcontent-%COMP%_pulse{0%,to{transform:scale(1)}50%{transform:scale(1.1)}}@keyframes _ngcontent-%COMP%_pulseCritical{0%,to{transform:scale(1) rotate(0)}25%{transform:scale(1.15) rotate(-5deg)}50%{transform:scale(1.1) rotate(5deg)}75%{transform:scale(1.15) rotate(-5deg)}}@keyframes _ngcontent-%COMP%_rotate{0%{transform:rotate(0)}25%{transform:rotate(-10deg)}75%{transform:rotate(10deg)}to{transform:rotate(0)}}@keyframes _ngcontent-%COMP%_shimmer{0%{transform:translate(-100%)}to{transform:translate(100%)}}.modal--shake[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_shake .5s ease-in-out}@keyframes _ngcontent-%COMP%_shake{0%,to{transform:translate(0)}10%,30%,50%,70%,90%{transform:translate(-10px)}20%,40%,60%,80%{transform:translate(10px)}}.modal__header--danger[_ngcontent-%COMP%]{background:linear-gradient(135deg,#721c24,#c82333);color:#fff}.form-input--error[_ngcontent-%COMP%]{border-color:#ffc107!important;box-shadow:0 0 0 3px #ffc10733!important}.form-input--error-critical[_ngcontent-%COMP%]{border-color:#dc3545!important;box-shadow:0 0 0 4px #dc35454d!important;animation:_ngcontent-%COMP%_inputPulse 1s infinite}@keyframes _ngcontent-%COMP%_inputPulse{0%,to{box-shadow:0 0 0 4px #dc35454d}50%{box-shadow:0 0 0 8px #dc35451a}}"]});let s=c;return s})();export{de as PrestamosComponent};
