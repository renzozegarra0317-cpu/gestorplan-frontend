import{c as U,d as N,f as V,i as L}from"./chunk-TF6RCWTO.js";import{a as B}from"./chunk-MPWYS2KC.js";import{Ca as F,Eb as ie,Fa as r,Ga as M,Ha as D,I as Y,Ib as oe,Ja as q,K as Z,L as s,La as S,Ma as P,Na as E,Rb as re,T as W,Ub as se,V as K,Xb as ce,Zb as le,_ as T,a as $,b as J,bc as de,cc as me,dc as pe,ec as ge,fa as _,fc as fe,ga as n,gc as _e,ha as i,ia as R,kc as ue,lb as Q,mb as ee,nb as te,pa as k,sa as b,ta as d,tb as ae,v as g,w as f,zb as ne}from"./chunk-KKTR3JM6.js";var he={horaEntradaManana:"08:00",horaSalidaManana:"13:00",horaEntradaTarde:"14:00",horaSalidaTarde:"17:00",minutosTolerancia:15,minutosMaximoRetraso:60},be=["Cita M\xE9dica","Emergencia Familiar","Tr\xE1mite Personal","Capacitaci\xF3n","Comisi\xF3n de Servicio","Permiso Sindical","Licencia por Enfermedad","Licencia por Maternidad","Licencia por Paternidad","Vacaciones","Otro"];function Me(c,h){if(c&1&&(n(0,"div",55)(1,"div",56)(2,"div",57),r(3,"\u{1F465}"),i(),n(4,"div",58)(5,"span",59),r(6,"Total Trabajadores"),i(),n(7,"span",60),r(8),i()()(),n(9,"div",61)(10,"div",57),r(11,"\u2705"),i(),n(12,"div",58)(13,"span",59),r(14,"Presentes"),i(),n(15,"span",60),r(16),i()()(),n(17,"div",62)(18,"div",57),r(19,"\u23F0"),i(),n(20,"div",58)(21,"span",59),r(22,"Tardanzas"),i(),n(23,"span",60),r(24),i()()(),n(25,"div",63)(26,"div",57),r(27,"\u274C"),i(),n(28,"div",58)(29,"span",59),r(30,"Faltas"),i(),n(31,"span",60),r(32),i()()(),n(33,"div",64)(34,"div",57),r(35,"\u{1F4C4}"),i(),n(36,"div",58)(37,"span",59),r(38,"Permisos"),i(),n(39,"span",60),r(40),i()()(),n(41,"div",65)(42,"div",57),r(43,"\u{1F3E5}"),i(),n(44,"div",58)(45,"span",59),r(46,"Licencias"),i(),n(47,"span",60),r(48),i()()(),n(49,"div",66)(50,"div",57),r(51,"\u{1F4CA}"),i(),n(52,"div",58)(53,"span",59),r(54,"% Asistencia"),i(),n(55,"span",60),r(56),i()()()()),c&2){let a=d();s(8),M(a.resumenDiario.totalTrabajadores),s(8),M(a.resumenDiario.presentes),s(8),M(a.resumenDiario.tardanzas),s(8),M(a.resumenDiario.faltas),s(8),M(a.resumenDiario.permisos),s(8),M(a.resumenDiario.licencias),s(8),D("",a.resumenDiario.porcentajeAsistencia,"%")}}function ve(c,h){c&1&&(n(0,"span"),r(1,"\u2705 Marcar Todos Presentes"),i())}function Ce(c,h){c&1&&(n(0,"span"),r(1,"\u274C Marcar Todos como Falta"),i())}function Se(c,h){if(c&1&&(n(0,"option",67),r(1),i()),c&2){let a=h.$implicit;_("value",a),s(),M(a)}}function Pe(c,h){if(c&1&&(n(0,"option",67),r(1),i()),c&2){let a=h.$implicit;_("value",a.Nombre),s(),M(a.Nombre)}}function Ee(c,h){if(c&1){let a=k();n(0,"button",68),b("click",function(){g(a);let e=d();return f(e.limpiarFiltros())}),r(1," \u2716\uFE0F Limpiar "),i()}}function we(c,h){c&1&&(n(0,"tr")(1,"td",73)(2,"div",74),r(3,"Cargando..."),i()()())}function ye(c,h){c&1&&(n(0,"tr")(1,"td",75)(2,"div",76)(3,"span",77),r(4,"\u{1F4ED}"),i(),n(5,"p",78),r(6,"No se encontraron registros"),i()()()())}function Te(c,h){if(c&1&&(n(0,"span",104),r(1),i()),c&2){let a=d().$implicit;s(),D(" +",a.minutosTardanza,"min ")}}function Oe(c,h){if(c&1&&(n(0,"span",105),r(1),i()),c&2){let a=d().$implicit;s(),D("+",a.horasExtras," extra")}}function ke(c,h){c&1&&(n(0,"span",106),r(1," \u2705 "),i())}function je(c,h){c&1&&(n(0,"span",107),r(1," \u26A0\uFE0F "),i())}function Re(c,h){if(c&1){let a=k();n(0,"button",108),b("click",function(e){g(a);let o=d().$implicit;return d(2).marcarPresente(o),f(e.stopPropagation())}),r(1," \u2705 "),i()}}function De(c,h){if(c&1){let a=k();n(0,"button",109),b("click",function(e){g(a);let o=d().$implicit;return d(2).marcarFalta(o),f(e.stopPropagation())}),r(1," \u274C "),i()}}function Ie(c,h){if(c&1){let a=k();n(0,"button",110),b("click",function(e){g(a);let o=d().$implicit;return d(2).abrirModalTardanza(o),f(e.stopPropagation())}),r(1," \u23F0 "),i()}}function Ae(c,h){if(c&1){let a=k();n(0,"button",111),b("click",function(e){g(a);let o=d().$implicit;return d(2).abrirModalPermiso(o),f(e.stopPropagation())}),r(1," \u{1F4CB} "),i()}}function ze(c,h){if(c&1){let a=k();n(0,"button",112),b("click",function(e){g(a);let o=d().$implicit;return d(2).abrirModalLicencia(o),f(e.stopPropagation())}),r(1," \u{1F3E5} "),i()}}function Fe(c,h){if(c&1){let a=k();n(0,"tr")(1,"td",79),r(2),i(),n(3,"td",80)(4,"div",81)(5,"span",82),r(6),i(),n(7,"span",83),r(8),i()()(),n(9,"td",84),r(10),i(),n(11,"td",85),r(12),T(13,Te,2,1,"span",86),i(),n(14,"td",85),r(15),i(),n(16,"td",85),r(17),i(),n(18,"td",85),r(19),i(),n(20,"td",87)(21,"span",88),r(22),i()(),n(23,"td",89)(24,"span",90),r(25),i(),T(26,Oe,2,1,"span",91),i(),n(27,"td",92),T(28,ke,2,0,"span",93)(29,je,2,0,"span",94),i(),n(30,"td",95)(31,"div",96),T(32,Re,2,0,"button",97)(33,De,2,0,"button",98)(34,Ie,2,0,"button",99)(35,Ae,2,0,"button",100)(36,ze,2,0,"button",101),n(37,"button",102),b("click",function(e){let o=g(a).$implicit;return d(2).abrirModalEdicion(o),f(e.stopPropagation())}),r(38," \u2699\uFE0F "),i(),n(39,"button",103),b("click",function(e){let o=g(a).$implicit;return d(2).abrirModalJustificacion(o),f(e.stopPropagation())}),r(40," \u{1F4DD} "),i()()()()}if(c&2){let a=h.$implicit,t=d(2);F("highlight",a.estado==="Falta")("dia-no-habil",t.esDiaNoHabil()),s(2),M(a.trabajadorDni),s(4),M(a.trabajadorNombre),s(2),M(a.trabajadorCargo),s(2),M(a.trabajadorArea),s(),F("td-hora--retraso",a.minutosTardanza>0),s(),D(" ",a.horaEntradaManana&&a.horaEntradaManana!=="---"&&a.horaEntradaManana!=="--:--"?a.horaEntradaManana:a.horarioAsignadoEntradaManana||"---"," "),s(),_("ngIf",a.minutosTardanza>0),s(2),M(a.horaSalidaManana&&a.horaSalidaManana!=="---"&&a.horaSalidaManana!=="--:--"?a.horaSalidaManana:a.horarioAsignadoSalidaManana||"---"),s(2),M(a.horaEntradaTarde&&a.horaEntradaTarde!=="---"&&a.horaEntradaTarde!=="--:--"?a.horaEntradaTarde:a.horarioAsignadoEntradaTarde||"---"),s(2),M(a.horaSalidaTarde&&a.horaSalidaTarde!=="---"&&a.horaSalidaTarde!=="--:--"?a.horaSalidaTarde:a.horarioAsignadoSalidaTarde||"---"),s(2),_("ngClass",t.getEstadoBadgeClass(a.estado)),s(),D(" ",a.estado," "),s(3),M(a.tiempoTrabajado),s(),_("ngIf",a.horasExtras&&a.horasExtras!=="0h"),s(2),_("ngIf",a.tieneJustificacion),s(),_("ngIf",!a.tieneJustificacion&&a.estado!=="Presente"),s(3),_("ngIf",a.estado==="Falta"||a.tipoMarcacion==="Falta"),s(),_("ngIf",a.tipoMarcacion!=="Falta"&&a.tipoMarcacion!=="Permiso"&&a.tipoMarcacion!=="Licencia"),s(),_("ngIf",a.tipoMarcacion!=="Tardanza"),s(),_("ngIf",a.tipoMarcacion!=="Permiso"),s(),_("ngIf",a.tipoMarcacion!=="Licencia")}}function Ve(c,h){if(c&1&&(n(0,"div",69)(1,"div",70)(2,"table",71)(3,"thead")(4,"tr")(5,"th"),r(6,"DNI"),i(),n(7,"th"),r(8,"Trabajador"),i(),n(9,"th"),r(10,"\xC1rea"),i(),n(11,"th"),r(12,"Entrada Ma\xF1ana"),i(),n(13,"th"),r(14,"Salida Ma\xF1ana"),i(),n(15,"th"),r(16,"Entrada Tarde"),i(),n(17,"th"),r(18,"Salida Tarde"),i(),n(19,"th"),r(20,"Estado"),i(),n(21,"th"),r(22,"Tiempo Trabajado"),i(),n(23,"th"),r(24,"Justificaci\xF3n"),i(),n(25,"th"),r(26,"Acciones"),i()()(),n(27,"tbody"),T(28,we,4,0,"tr",33)(29,ye,7,0,"tr",33)(30,Fe,41,26,"tr",72),i()()()()),c&2){let a=d();s(28),_("ngIf",a.cargando),s(),_("ngIf",!a.cargando&&a.registrosFiltrados.length===0),s(),_("ngForOf",a.registrosFiltrados)}}function He(c,h){if(c&1&&(n(0,"div",129)(1,"span",130),r(2,"\u23F0"),i(),n(3,"div",131)(4,"span",132),r(5,"Retraso"),i(),n(6,"span",133),r(7),i()()()),c&2){let a=d().$implicit;s(7),D("",a.minutosTardanza,"min")}}function Ne(c,h){if(c&1&&(n(0,"div",129)(1,"span",130),r(2,"\u2B50"),i(),n(3,"div",131)(4,"span",132),r(5,"Horas Extra"),i(),n(6,"span",133),r(7),i()()()),c&2){let a=d().$implicit;s(7),M(a.horasExtras)}}function Le(c,h){if(c&1&&(n(0,"div",143)(1,"span",144),r(2,"\u{1F4CB}"),i(),n(3,"div",145)(4,"span",146),r(5,"Justificaci\xF3n:"),i(),n(6,"span",147),r(7),i()()()),c&2){let a=d().$implicit;s(7),M(a.motivoJustificacion)}}function We(c,h){if(c&1&&(n(0,"div",148)(1,"span",149),r(2,"\u{1F4AC}"),i(),n(3,"span",150),r(4),i()()),c&2){let a=d().$implicit;s(4),M(a.observaciones)}}function Be(c,h){if(c&1){let a=k();n(0,"button",151),b("click",function(){g(a);let e=d().$implicit,o=d(2);return f(o.marcarPresente(e))}),r(1," \u2705 Marcar Presente "),i()}}function $e(c,h){if(c&1){let a=k();n(0,"button",152),b("click",function(){g(a);let e=d().$implicit,o=d(2);return f(o.marcarFalta(e))}),r(1," \u274C Marcar Falta "),i()}}function Je(c,h){if(c&1){let a=k();n(0,"div",115)(1,"div",116)(2,"div",117)(3,"div",118),r(4),i(),n(5,"div",119)(6,"h4",120),r(7),i(),n(8,"p",121),r(9),i(),n(10,"p",122),r(11),i()()(),n(12,"span",88),r(13),i()(),n(14,"div",123)(15,"div",124)(16,"div",125)(17,"span",126),r(18,"\u{1F305} Entrada Ma\xF1ana"),i(),n(19,"span",127),r(20),i()(),n(21,"div",125)(22,"span",126),r(23,"\u{1F304} Salida Ma\xF1ana"),i(),n(24,"span",127),r(25),i()(),n(26,"div",125)(27,"span",126),r(28,"\u{1F306} Entrada Tarde"),i(),n(29,"span",127),r(30),i()(),n(31,"div",125)(32,"span",126),r(33,"\u{1F303} Salida Tarde"),i(),n(34,"span",127),r(35),i()()(),n(36,"div",128)(37,"div",129)(38,"span",130),r(39,"\u23F1\uFE0F"),i(),n(40,"div",131)(41,"span",132),r(42,"Horas Trabajadas"),i(),n(43,"span",133),r(44),i()()(),T(45,He,8,1,"div",134)(46,Ne,8,1,"div",134),i(),T(47,Le,8,1,"div",135)(48,We,5,1,"div",136),i(),n(49,"div",137)(50,"div",138),T(51,Be,2,0,"button",139)(52,$e,2,0,"button",140),n(53,"button",31),b("click",function(){let e=g(a).$implicit,o=d(2);return f(o.abrirModalEdicion(e))}),r(54," \u23F0 Editar "),i(),n(55,"button",141),b("click",function(){let e=g(a).$implicit,o=d(2);return f(o.abrirModalJustificacion(e))}),r(56," \u{1F4DD} Justificar "),i()(),n(57,"span",142),r(58),i()()()}if(c&2){let a=h.$implicit,t=d(2);F("tarjeta-asistencia--falta",a.estado==="Falta"),s(4),M(a.trabajadorNombre.charAt(0)),s(3),M(a.trabajadorNombre),s(2),M(a.trabajadorCargo),s(2),M(a.trabajadorArea),s(),_("ngClass",t.getEstadoBadgeClass(a.estado)),s(),D(" ",a.estado," "),s(7),M(a.horaEntradaManana||"---"),s(5),M(a.horaSalidaManana||"---"),s(5),M(a.horaEntradaTarde||"---"),s(5),M(a.horaSalidaTarde||"---"),s(9),M(a.tiempoTrabajado),s(),_("ngIf",a.minutosTardanza>0),s(),_("ngIf",a.horasExtras&&a.horasExtras!=="0h"),s(),_("ngIf",a.tieneJustificacion),s(),_("ngIf",a.observaciones),s(3),_("ngIf",a.estado==="Falta"),s(),_("ngIf",a.estado!=="Falta"),s(6),M(a.tipoMarcacion)}}function Ye(c,h){if(c&1&&(n(0,"div",113),T(1,Je,59,20,"div",114),i()),c&2){let a=d();s(),_("ngForOf",a.registrosFiltrados)}}function qe(c,h){if(c&1&&(n(0,"option",67),r(1),i()),c&2){let a=h.$implicit;_("value",a.id),s(),q(" ",a.nombreCompleto," - ",a.dni," (",a.area,") ")}}function Ue(c,h){if(c&1){let a=k();n(0,"div",153),b("click",function(){g(a);let e=d();return e.mostrarModalRegistro=!1,f(e.restaurarTopbarSidebar())}),n(1,"div",154),b("click",function(e){return g(a),f(e.stopPropagation())}),n(2,"div",155)(3,"h3",156),r(4,"\u{1F4DD} Registro Manual de Asistencia"),i(),n(5,"button",157),b("click",function(){g(a);let e=d();return e.mostrarModalRegistro=!1,f(e.restaurarTopbarSidebar())}),r(6,"\u2716\uFE0F"),i()(),n(7,"div",158)(8,"p",159),r(9,"Registrar asistencia manualmente para trabajadores sin marcaci\xF3n biom\xE9trica"),i(),n(10,"div",160)(11,"div",161)(12,"label",162),r(13,"Trabajador *"),i(),n(14,"select",163),E("ngModelChange",function(e){g(a);let o=d();return P(o.formularioRegistro.trabajadorId,e)||(o.formularioRegistro.trabajadorId=e),f(e)}),n(15,"option",42),r(16,"Seleccione un trabajador"),i(),T(17,qe,2,4,"option",43),i()(),n(18,"div",164)(19,"label",162),r(20,"Hora Entrada Ma\xF1ana"),i(),n(21,"input",165),E("ngModelChange",function(e){g(a);let o=d();return P(o.formularioRegistro.horaEntradaManana,e)||(o.formularioRegistro.horaEntradaManana=e),f(e)}),i()(),n(22,"div",164)(23,"label",162),r(24,"Hora Salida Ma\xF1ana"),i(),n(25,"input",165),E("ngModelChange",function(e){g(a);let o=d();return P(o.formularioRegistro.horaSalidaManana,e)||(o.formularioRegistro.horaSalidaManana=e),f(e)}),i()(),n(26,"div",164)(27,"label",162),r(28,"Hora Entrada Tarde"),i(),n(29,"input",165),E("ngModelChange",function(e){g(a);let o=d();return P(o.formularioRegistro.horaEntradaTarde,e)||(o.formularioRegistro.horaEntradaTarde=e),f(e)}),i()(),n(30,"div",164)(31,"label",162),r(32,"Hora Salida Tarde"),i(),n(33,"input",165),E("ngModelChange",function(e){g(a);let o=d();return P(o.formularioRegistro.horaSalidaTarde,e)||(o.formularioRegistro.horaSalidaTarde=e),f(e)}),i()(),n(34,"div",161)(35,"label",162),r(36,"Tipo de Marcaci\xF3n *"),i(),n(37,"select",163),E("ngModelChange",function(e){g(a);let o=d();return P(o.formularioRegistro.tipoMarcacion,e)||(o.formularioRegistro.tipoMarcacion=e),f(e)}),n(38,"option",166),r(39,"Presente"),i(),n(40,"option",167),r(41,"Tardanza"),i(),n(42,"option",168),r(43,"Falta"),i(),n(44,"option",169),r(45,"Permiso"),i(),n(46,"option",170),r(47,"Licencia"),i(),n(48,"option",171),r(49,"Vacaciones"),i(),n(50,"option",172),r(51,"Comisi\xF3n de Servicio"),i()()(),n(52,"div",161)(53,"label",162),r(54,"Justificaci\xF3n"),i(),n(55,"textarea",173),E("ngModelChange",function(e){g(a);let o=d();return P(o.formularioRegistro.justificacion,e)||(o.formularioRegistro.justificacion=e),f(e)}),i()(),n(56,"div",161)(57,"label",162),r(58,"Observaciones"),i(),R(59,"textarea",174),i()()(),n(60,"div",175)(61,"button",176),b("click",function(){g(a);let e=d();return e.mostrarModalRegistro=!1,f(e.restaurarTopbarSidebar())}),r(62,"Cancelar"),i(),n(63,"button",177),b("click",function(){g(a);let e=d();return f(e.registrarAsistenciaManual())}),r(64,"\u{1F4BE} Guardar Registro"),i()()()()}if(c&2){let a=d();s(14),S("ngModel",a.formularioRegistro.trabajadorId),s(3),_("ngForOf",a.trabajadoresActivos),s(4),S("ngModel",a.formularioRegistro.horaEntradaManana),s(4),S("ngModel",a.formularioRegistro.horaSalidaManana),s(4),S("ngModel",a.formularioRegistro.horaEntradaTarde),s(4),S("ngModel",a.formularioRegistro.horaSalidaTarde),s(4),S("ngModel",a.formularioRegistro.tipoMarcacion),s(18),S("ngModel",a.formularioRegistro.justificacion)}}function Ge(c,h){if(c&1){let a=k();n(0,"div",158)(1,"div",179)(2,"div",118),r(3),i(),n(4,"div",119)(5,"h4"),r(6),i(),n(7,"p"),r(8),i()(),n(9,"span",88),r(10),i()(),n(11,"div",160)(12,"div",164)(13,"label",162),r(14,"\u{1F305} Entrada Ma\xF1ana"),i(),n(15,"input",165),E("ngModelChange",function(e){g(a);let o=d(2);return P(o.registroSeleccionado.horaEntradaManana,e)||(o.registroSeleccionado.horaEntradaManana=e),f(e)}),i()(),n(16,"div",164)(17,"label",162),r(18,"\u{1F304} Salida Ma\xF1ana"),i(),n(19,"input",165),E("ngModelChange",function(e){g(a);let o=d(2);return P(o.registroSeleccionado.horaSalidaManana,e)||(o.registroSeleccionado.horaSalidaManana=e),f(e)}),i()(),n(20,"div",164)(21,"label",162),r(22,"\u{1F306} Entrada Tarde"),i(),n(23,"input",165),E("ngModelChange",function(e){g(a);let o=d(2);return P(o.registroSeleccionado.horaEntradaTarde,e)||(o.registroSeleccionado.horaEntradaTarde=e),f(e)}),i()(),n(24,"div",164)(25,"label",162),r(26,"\u{1F303} Salida Tarde"),i(),n(27,"input",165),E("ngModelChange",function(e){g(a);let o=d(2);return P(o.registroSeleccionado.horaSalidaTarde,e)||(o.registroSeleccionado.horaSalidaTarde=e),f(e)}),i()(),n(28,"div",161)(29,"label",162),r(30,"Estado"),i(),n(31,"select",180),E("ngModelChange",function(e){g(a);let o=d(2);return P(o.registroSeleccionado.estado,e)||(o.registroSeleccionado.estado=e),f(e)}),n(32,"option",166),r(33,"\u2705 Presente"),i(),n(34,"option",167),r(35,"\u23F0 Tardanza"),i(),n(36,"option",168),r(37,"\u274C Falta"),i(),n(38,"option",169),r(39,"\u{1F4C4} Permiso"),i(),n(40,"option",170),r(41,"\u{1F3E5} Licencia"),i(),n(42,"option",171),r(43,"\u{1F3D6}\uFE0F Vacaciones"),i(),n(44,"option",172),r(45,"\u{1F697} Comisi\xF3n"),i()()(),n(46,"div",161)(47,"label",162),r(48,"Observaciones"),i(),n(49,"textarea",181),E("ngModelChange",function(e){g(a);let o=d(2);return P(o.registroSeleccionado.observaciones,e)||(o.registroSeleccionado.observaciones=e),f(e)}),i()()()()}if(c&2){let a=d(2);s(3),M(a.registroSeleccionado.trabajadorNombre.charAt(0)),s(3),M(a.registroSeleccionado.trabajadorNombre),s(2),M(a.registroSeleccionado.trabajadorArea),s(),_("ngClass",a.getEstadoBadgeClass(a.registroSeleccionado.estado)),s(),D(" ",a.registroSeleccionado.estado," "),s(5),S("ngModel",a.registroSeleccionado.horaEntradaManana),s(4),S("ngModel",a.registroSeleccionado.horaSalidaManana),s(4),S("ngModel",a.registroSeleccionado.horaEntradaTarde),s(4),S("ngModel",a.registroSeleccionado.horaSalidaTarde),s(4),S("ngModel",a.registroSeleccionado.estado),s(18),S("ngModel",a.registroSeleccionado.observaciones)}}function Xe(c,h){if(c&1){let a=k();n(0,"div",153),b("click",function(){g(a);let e=d();return f(e.mostrarModalEdicion=!1)}),n(1,"div",154),b("click",function(e){return g(a),f(e.stopPropagation())}),n(2,"div",155)(3,"h3",156),r(4,"\u23F0 Editar Horarios de Asistencia"),i(),n(5,"button",157),b("click",function(){g(a);let e=d();return f(e.mostrarModalEdicion=!1)}),r(6,"\u2716\uFE0F"),i()(),T(7,Ge,50,11,"div",178),n(8,"div",175)(9,"button",176),b("click",function(){g(a);let e=d();return f(e.mostrarModalEdicion=!1)}),r(10,"Cancelar"),i(),n(11,"button",177),b("click",function(){g(a);let e=d();return f(e.guardarEdicion())}),r(12,"\u{1F4BE} Guardar Cambios"),i()()()()}if(c&2){let a=d();s(7),_("ngIf",a.registroSeleccionado)}}function Ze(c,h){if(c&1&&(n(0,"option",67),r(1),i()),c&2){let a=h.$implicit;_("value",a),s(),M(a)}}function Ke(c,h){if(c&1){let a=k();n(0,"div",158)(1,"div",179)(2,"div",118),r(3),i(),n(4,"div",119)(5,"h4"),r(6),i(),n(7,"p"),r(8),i()(),n(9,"span",88),r(10),i()(),n(11,"div",160)(12,"div",161)(13,"label",162),r(14,"Tipo de Justificaci\xF3n"),i(),n(15,"select",180),E("ngModelChange",function(e){g(a);let o=d(2);return P(o.registroSeleccionado.motivoJustificacion,e)||(o.registroSeleccionado.motivoJustificacion=e),f(e)}),n(16,"option",42),r(17,"Seleccione un motivo"),i(),T(18,Ze,2,2,"option",43),i()(),n(19,"div",161)(20,"label",162),r(21,"Documento de Sustento"),i(),R(22,"input",183),n(23,"span",184),r(24,"Adjunte certificado m\xE9dico, papeleta de permiso, etc."),i()(),n(25,"div",161)(26,"label",162),r(27,"Observaciones"),i(),R(28,"textarea",185),i()()()}if(c&2){let a=d(2);s(3),M(a.registroSeleccionado.trabajadorNombre.charAt(0)),s(3),M(a.registroSeleccionado.trabajadorNombre),s(2),M(a.registroSeleccionado.trabajadorArea),s(),_("ngClass",a.getEstadoBadgeClass(a.registroSeleccionado.estado)),s(),D(" ",a.registroSeleccionado.estado," "),s(5),S("ngModel",a.registroSeleccionado.motivoJustificacion),s(3),_("ngForOf",a.tiposJustificacion)}}function Qe(c,h){if(c&1){let a=k();n(0,"div",153),b("click",function(){g(a);let e=d();return f(e.mostrarModalJustificacion=!1)}),n(1,"div",154),b("click",function(e){return g(a),f(e.stopPropagation())}),n(2,"div",155)(3,"h3",156),r(4,"\u{1F4CB} Justificaci\xF3n de Asistencia"),i(),n(5,"button",157),b("click",function(){g(a);let e=d();return f(e.mostrarModalJustificacion=!1)}),r(6,"\u2716\uFE0F"),i()(),T(7,Ke,29,7,"div",178),n(8,"div",175)(9,"button",176),b("click",function(){g(a);let e=d();return f(e.mostrarModalJustificacion=!1)}),r(10,"Cancelar"),i(),n(11,"button",182),b("click",function(){g(a);let e=d();return f(e.guardarJustificacion())}),r(12,"\u2705 Guardar Justificaci\xF3n"),i()()()()}if(c&2){let a=d();s(7),_("ngIf",a.registroSeleccionado)}}function et(c,h){if(c&1){let a=k();n(0,"div",158)(1,"div",179)(2,"div",118),r(3),i(),n(4,"div",119)(5,"h4"),r(6),i(),n(7,"p"),r(8),i(),n(9,"p"),r(10),i()()(),n(11,"div",160)(12,"div",164)(13,"label",162),r(14,"Hora de Entrada Real"),i(),n(15,"input",187),E("ngModelChange",function(e){g(a);let o=d(2);return P(o.formTardanza.horaEntradaManana,e)||(o.formTardanza.horaEntradaManana=e),f(e)}),i()(),n(16,"div",164)(17,"label",162),r(18,"Minutos de Retraso"),i(),n(19,"input",188),E("ngModelChange",function(e){g(a);let o=d(2);return P(o.formTardanza.minutosRetraso,e)||(o.formTardanza.minutosRetraso=e),f(e)}),i()(),n(20,"div",161)(21,"label",162),r(22,"Observaciones"),i(),n(23,"textarea",189),E("ngModelChange",function(e){g(a);let o=d(2);return P(o.formTardanza.observaciones,e)||(o.formTardanza.observaciones=e),f(e)}),i()()()()}if(c&2){let a=d(2);s(3),M(a.registroSeleccionado.trabajadorNombre.charAt(0)),s(3),M(a.registroSeleccionado.trabajadorNombre),s(2),M(a.registroSeleccionado.trabajadorCargo),s(2),M(a.registroSeleccionado.trabajadorArea),s(5),S("ngModel",a.formTardanza.horaEntradaManana),s(4),S("ngModel",a.formTardanza.minutosRetraso),s(4),S("ngModel",a.formTardanza.observaciones)}}function tt(c,h){if(c&1){let a=k();n(0,"div",153),b("click",function(){g(a);let e=d();return f(e.mostrarModalTardanza=!1)}),n(1,"div",154),b("click",function(e){return g(a),f(e.stopPropagation())}),n(2,"div",155)(3,"h3",156),r(4,"\u23F0 Registrar Tardanza"),i(),n(5,"button",157),b("click",function(){g(a);let e=d();return f(e.mostrarModalTardanza=!1)}),r(6,"\u2716\uFE0F"),i()(),T(7,et,24,7,"div",178),n(8,"div",175)(9,"button",176),b("click",function(){g(a);let e=d();return f(e.mostrarModalTardanza=!1)}),r(10,"Cancelar"),i(),n(11,"button",186),b("click",function(){g(a);let e=d();return f(e.guardarTardanza())}),r(12,"\u23F0 Guardar Tardanza"),i()()()()}if(c&2){let a=d();s(7),_("ngIf",a.registroSeleccionado)}}function at(c,h){if(c&1){let a=k();n(0,"div",164)(1,"label",162),r(2,"Horas de Permiso"),i(),n(3,"input",197),E("ngModelChange",function(e){g(a);let o=d(3);return P(o.formPermiso.horas,e)||(o.formPermiso.horas=e),f(e)}),i()()}if(c&2){let a=d(3);s(3),S("ngModel",a.formPermiso.horas)}}function nt(c,h){if(c&1){let a=k();n(0,"div",158)(1,"div",179)(2,"div",118),r(3),i(),n(4,"div",119)(5,"h4"),r(6),i(),n(7,"p"),r(8),i(),n(9,"p"),r(10),i()()(),n(11,"div",160)(12,"div",164)(13,"label",162),r(14,"Tipo de Permiso"),i(),n(15,"select",180),E("ngModelChange",function(e){g(a);let o=d(2);return P(o.formPermiso.tipoPermiso,e)||(o.formPermiso.tipoPermiso=e),f(e)}),n(16,"option",191),r(17,"Medio d\xEDa"),i(),n(18,"option",192),r(19,"Todo el d\xEDa"),i(),n(20,"option",193),r(21,"Horas espec\xEDficas"),i()()(),T(22,at,4,1,"div",194),n(23,"div",161)(24,"label",162),r(25,"Motivo del Permiso *"),i(),n(26,"input",195),E("ngModelChange",function(e){g(a);let o=d(2);return P(o.formPermiso.motivo,e)||(o.formPermiso.motivo=e),f(e)}),i()(),n(27,"div",161)(28,"label",162),r(29,"Observaciones"),i(),n(30,"textarea",196),E("ngModelChange",function(e){g(a);let o=d(2);return P(o.formPermiso.observaciones,e)||(o.formPermiso.observaciones=e),f(e)}),i()()()()}if(c&2){let a=d(2);s(3),M(a.registroSeleccionado.trabajadorNombre.charAt(0)),s(3),M(a.registroSeleccionado.trabajadorNombre),s(2),M(a.registroSeleccionado.trabajadorCargo),s(2),M(a.registroSeleccionado.trabajadorArea),s(5),S("ngModel",a.formPermiso.tipoPermiso),s(7),_("ngIf",a.formPermiso.tipoPermiso==="Horas espec\xEDficas"),s(4),S("ngModel",a.formPermiso.motivo),s(4),S("ngModel",a.formPermiso.observaciones)}}function it(c,h){if(c&1){let a=k();n(0,"div",153),b("click",function(){g(a);let e=d();return f(e.mostrarModalPermiso=!1)}),n(1,"div",154),b("click",function(e){return g(a),f(e.stopPropagation())}),n(2,"div",155)(3,"h3",156),r(4,"\u{1F4CB} Registrar Permiso"),i(),n(5,"button",157),b("click",function(){g(a);let e=d();return f(e.mostrarModalPermiso=!1)}),r(6,"\u2716\uFE0F"),i()(),T(7,nt,31,8,"div",178),n(8,"div",175)(9,"button",176),b("click",function(){g(a);let e=d();return f(e.mostrarModalPermiso=!1)}),r(10,"Cancelar"),i(),n(11,"button",190),b("click",function(){g(a);let e=d();return f(e.guardarPermiso())}),r(12,"\u{1F4CB} Guardar Permiso"),i()()()()}if(c&2){let a=d();s(7),_("ngIf",a.registroSeleccionado)}}function ot(c,h){if(c&1){let a=k();n(0,"div",158)(1,"div",179)(2,"div",118),r(3),i(),n(4,"div",119)(5,"h4"),r(6),i(),n(7,"p"),r(8),i(),n(9,"p"),r(10),i()()(),n(11,"div",160)(12,"div",164)(13,"label",162),r(14,"Tipo de Licencia"),i(),n(15,"select",180),E("ngModelChange",function(e){g(a);let o=d(2);return P(o.formLicencia.tipoLicencia,e)||(o.formLicencia.tipoLicencia=e),f(e)}),n(16,"option",199),r(17,"Con goce de haber"),i(),n(18,"option",200),r(19,"Sin goce de haber"),i(),n(20,"option",201),r(21,"Licencia m\xE9dica"),i(),n(22,"option",202),r(23,"Licencia por maternidad"),i(),n(24,"option",203),r(25,"Licencia por paternidad"),i()()(),n(26,"div",164)(27,"label",162),r(28,"D\xEDas de Licencia"),i(),n(29,"input",204),E("ngModelChange",function(e){g(a);let o=d(2);return P(o.formLicencia.dias,e)||(o.formLicencia.dias=e),f(e)}),i()(),n(30,"div",161)(31,"label",162),r(32,"Motivo de la Licencia *"),i(),n(33,"input",205),E("ngModelChange",function(e){g(a);let o=d(2);return P(o.formLicencia.motivo,e)||(o.formLicencia.motivo=e),f(e)}),i()(),n(34,"div",161)(35,"label",162),r(36,"Observaciones"),i(),n(37,"textarea",206),E("ngModelChange",function(e){g(a);let o=d(2);return P(o.formLicencia.observaciones,e)||(o.formLicencia.observaciones=e),f(e)}),i()()()()}if(c&2){let a=d(2);s(3),M(a.registroSeleccionado.trabajadorNombre.charAt(0)),s(3),M(a.registroSeleccionado.trabajadorNombre),s(2),M(a.registroSeleccionado.trabajadorCargo),s(2),M(a.registroSeleccionado.trabajadorArea),s(5),S("ngModel",a.formLicencia.tipoLicencia),s(14),S("ngModel",a.formLicencia.dias),s(4),S("ngModel",a.formLicencia.motivo),s(4),S("ngModel",a.formLicencia.observaciones)}}function rt(c,h){if(c&1){let a=k();n(0,"div",153),b("click",function(){g(a);let e=d();return f(e.mostrarModalLicencia=!1)}),n(1,"div",154),b("click",function(e){return g(a),f(e.stopPropagation())}),n(2,"div",155)(3,"h3",156),r(4,"\u{1F3E5} Registrar Licencia"),i(),n(5,"button",157),b("click",function(){g(a);let e=d();return f(e.mostrarModalLicencia=!1)}),r(6,"\u2716\uFE0F"),i()(),T(7,ot,38,8,"div",178),n(8,"div",175)(9,"button",176),b("click",function(){g(a);let e=d();return f(e.mostrarModalLicencia=!1)}),r(10,"Cancelar"),i(),n(11,"button",198),b("click",function(){g(a);let e=d();return f(e.guardarLicencia())}),r(12,"\u{1F3E5} Guardar Licencia"),i()()()()}if(c&2){let a=d();s(7),_("ngIf",a.registroSeleccionado)}}function st(c,h){c&1&&(n(0,"span"),r(1,"\u2705"),i())}function ct(c,h){c&1&&(n(0,"span"),r(1,"\u274C"),i())}function lt(c,h){c&1&&(n(0,"span"),r(1,"\u26A0\uFE0F"),i())}function dt(c,h){c&1&&(n(0,"span"),r(1,"\u2139\uFE0F"),i())}function mt(c,h){c&1&&(n(0,"div",215),R(1,"div",216),i())}function pt(c,h){if(c&1){let a=k();n(0,"button",217),b("click",function(){g(a);let e=d(2);return f(e.cerrarNotificacion())}),r(1,"\u2716\uFE0F"),i()}}function gt(c,h){if(c&1&&(n(0,"div",207)(1,"div",208)(2,"div",209),T(3,st,2,0,"span",33)(4,ct,2,0,"span",33)(5,lt,2,0,"span",33)(6,dt,2,0,"span",33)(7,mt,2,0,"div",210),i(),n(8,"div",211)(9,"div",212),r(10),i(),R(11,"div",213),i(),T(12,pt,2,0,"button",214),i()()),c&2){let a=d();_("@slideInOut",void 0),s(),_("ngClass","notificacion--"+a.notificacion.tipo),s(2),_("ngIf",a.notificacion.tipo==="success"),s(),_("ngIf",a.notificacion.tipo==="error"),s(),_("ngIf",a.notificacion.tipo==="warning"),s(),_("ngIf",a.notificacion.tipo==="info"),s(),_("ngIf",a.notificacion.tipo==="loading"),s(3),M(a.notificacion.titulo),s(),_("innerHTML",a.formatearMensajeNotificacion(a.notificacion.mensaje),Y),s(),_("ngIf",a.notificacion.tipo!=="loading")}}function ft(c,h){c&1&&(n(0,"span"),r(1,"\u2705"),i())}function _t(c,h){c&1&&(n(0,"span"),r(1,"\u26A0\uFE0F"),i())}function ut(c,h){c&1&&(n(0,"span"),r(1,"\u26A0\uFE0F"),i())}function ht(c,h){c&1&&(n(0,"span"),r(1,"\u2139\uFE0F"),i())}function bt(c,h){if(c&1){let a=k();n(0,"div",218),b("click",function(){g(a);let e=d();return f(e.cancelarAccion())}),n(1,"div",219),b("click",function(e){return g(a),f(e.stopPropagation())}),n(2,"div",220)(3,"div",221),T(4,ft,2,0,"span",33)(5,_t,2,0,"span",33)(6,ut,2,0,"span",33)(7,ht,2,0,"span",33),i(),n(8,"h3",222),r(9),i()(),n(10,"div",223),R(11,"p",224),i(),n(12,"div",225)(13,"button",176),b("click",function(){g(a);let e=d();return f(e.cancelarAccion())}),r(14,"Cancelar"),i(),n(15,"button",226),b("click",function(){g(a);let e=d();return f(e.confirmarAccion())}),r(16," Confirmar "),i()()()()}if(c&2){let a=d();s(),_("@scaleInOut",void 0),s(),_("ngClass","modal-confirmacion__header--"+a.confirmacion.tipo),s(2),_("ngIf",a.confirmacion.tipo==="success"),s(),_("ngIf",a.confirmacion.tipo==="danger"),s(),_("ngIf",a.confirmacion.tipo==="warning"),s(),_("ngIf",a.confirmacion.tipo==="info"),s(2),M(a.confirmacion.titulo),s(2),_("innerHTML",a.confirmacion.mensaje,Y),s(4),_("ngClass","btn--"+(a.confirmacion.tipo==="danger"?"danger":a.confirmacion.tipo==="warning"?"warning":"primary"))}}function xt(c,h){if(c&1&&(n(0,"option",67),r(1),i()),c&2){let a=h.$implicit;_("value",a.RegimenID||a.regimenID||a.id),s(),D(" ",a.Nombre||a.nombre," ")}}function Mt(c,h){if(c&1){let a=k();n(0,"div",161)(1,"label",162),r(2,"R\xE9gimen Laboral *"),i(),n(3,"select",163),E("ngModelChange",function(e){g(a);let o=d(2);return P(o.formHorariosMasivos.regimenLaboralId,e)||(o.formHorariosMasivos.regimenLaboralId=e),f(e)}),n(4,"option",42),r(5,"Seleccione un r\xE9gimen laboral"),i(),T(6,xt,2,2,"option",43),i()()}if(c&2){let a=d(2);s(3),S("ngModel",a.formHorariosMasivos.regimenLaboralId),s(3),_("ngForOf",a.regimenesLaborales)}}function vt(c,h){c&1&&(n(0,"p"),r(1," Se asignar\xE1 este horario a "),n(2,"strong"),r(3,"TODOS"),i(),r(4," los trabajadores activos del sistema. "),i())}function Ct(c,h){c&1&&(n(0,"p"),r(1," Se asignar\xE1 este horario a todos los trabajadores del r\xE9gimen laboral seleccionado. "),i())}function St(c,h){if(c&1){let a=k();n(0,"div",153),b("click",function(){g(a);let e=d();return f(e.mostrarModalHorariosMasivos=!1)}),n(1,"div",227),b("click",function(e){return g(a),f(e.stopPropagation())}),n(2,"div",155)(3,"h3",156),r(4,"\u23F0 Asignar Horarios Masivamente"),i(),n(5,"button",157),b("click",function(){g(a);let e=d();return f(e.mostrarModalHorariosMasivos=!1)}),r(6,"\u2716\uFE0F"),i()(),n(7,"div",158)(8,"div",161)(9,"label",162),r(10,"Tipo de Asignaci\xF3n *"),i(),n(11,"select",228),E("ngModelChange",function(e){g(a);let o=d();return P(o.formHorariosMasivos.tipoAsignacion,e)||(o.formHorariosMasivos.tipoAsignacion=e),f(e)}),b("change",function(){g(a);let e=d();return f(e.formHorariosMasivos.regimenLaboralId=null)}),n(12,"option",229),r(13,"\u{1F465} Todos los Trabajadores"),i(),n(14,"option",230),r(15,"\u{1F4CB} Por R\xE9gimen Laboral"),i()()(),T(16,Mt,7,2,"div",231),R(17,"div",232),n(18,"h4",233),r(19,"\u{1F550} Horarios a Asignar"),i(),n(20,"div",160)(21,"div",164)(22,"label",162),r(23,"\u{1F305} Entrada Ma\xF1ana"),i(),n(24,"input",187),E("ngModelChange",function(e){g(a);let o=d();return P(o.formHorariosMasivos.horaEntradaManana,e)||(o.formHorariosMasivos.horaEntradaManana=e),f(e)}),i()(),n(25,"div",164)(26,"label",162),r(27,"\u{1F304} Salida Ma\xF1ana"),i(),n(28,"input",187),E("ngModelChange",function(e){g(a);let o=d();return P(o.formHorariosMasivos.horaSalidaManana,e)||(o.formHorariosMasivos.horaSalidaManana=e),f(e)}),i()(),n(29,"div",164)(30,"label",162),r(31,"\u{1F306} Entrada Tarde"),i(),n(32,"input",187),E("ngModelChange",function(e){g(a);let o=d();return P(o.formHorariosMasivos.horaEntradaTarde,e)||(o.formHorariosMasivos.horaEntradaTarde=e),f(e)}),i()(),n(33,"div",164)(34,"label",162),r(35,"\u{1F303} Salida Tarde"),i(),n(36,"input",187),E("ngModelChange",function(e){g(a);let o=d();return P(o.formHorariosMasivos.horaSalidaTarde,e)||(o.formHorariosMasivos.horaSalidaTarde=e),f(e)}),i()()(),n(37,"div",234)(38,"strong"),r(39,"\u2139\uFE0F Informaci\xF3n:"),i(),T(40,vt,5,0,"p",33)(41,Ct,2,0,"p",33),i()(),n(42,"div",175)(43,"button",176),b("click",function(){g(a);let e=d();return f(e.mostrarModalHorariosMasivos=!1)}),r(44,"Cancelar"),i(),n(45,"button",235),b("click",function(){g(a);let e=d();return f(e.guardarHorariosMasivos())}),r(46," \u{1F4BE} Guardar Horarios "),i()()()()}if(c&2){let a=d();s(11),S("ngModel",a.formHorariosMasivos.tipoAsignacion),s(5),_("ngIf",a.formHorariosMasivos.tipoAsignacion==="regimen"),s(8),S("ngModel",a.formHorariosMasivos.horaEntradaManana),s(4),S("ngModel",a.formHorariosMasivos.horaSalidaManana),s(4),S("ngModel",a.formHorariosMasivos.horaEntradaTarde),s(4),S("ngModel",a.formHorariosMasivos.horaSalidaTarde),s(4),_("ngIf",a.formHorariosMasivos.tipoAsignacion==="todos"),s(),_("ngIf",a.formHorariosMasivos.tipoAsignacion==="regimen"&&a.formHorariosMasivos.regimenLaboralId),s(4),_("disabled",!a.formHorariosMasivos.horaEntradaManana||!a.formHorariosMasivos.horaSalidaManana||a.formHorariosMasivos.tipoAsignacion==="regimen"&&!a.formHorariosMasivos.regimenLaboralId)}}var zt=(()=>{let h=class h{constructor(t,e,o){this.router=t,this.http=e,this.sanitizer=o,this.fechaSeleccionada="",this.horaActual="",this.horaCompleta="",this.minutos="",this.segundos="",this.ampm="",this.diaSemana="",this.diaMes="",this.mesNombre="",this.anio="",this.fechaCompleta="",this.registros=[],this.registrosFiltrados=[],this.resumenDiario=null,this.horario=he,this.tiposJustificacion=be,this.filtros={fecha:"",estado:"",regimenLaboral:"",busqueda:""},this.regimenesLaborales=[],this.cargando=!1,this.vistaActual="lista",this.mostrarModalRegistro=!1,this.mostrarModalJustificacion=!1,this.mostrarModalEdicion=!1,this.mostrarModalTardanza=!1,this.mostrarModalPermiso=!1,this.mostrarModalLicencia=!1,this.mostrarModalHorariosMasivos=!1,this.registroSeleccionado=null,this.formHorariosMasivos={tipoAsignacion:"todos",regimenLaboralId:null,horaEntradaManana:"08:00",horaSalidaManana:"13:00",horaEntradaTarde:"14:00",horaSalidaTarde:"17:00"},this.menuAbiertoId=null,this.notificacion={mostrar:!1,tipo:"info",titulo:"",mensaje:""},this.confirmacion={mostrar:!1,titulo:"",mensaje:"",tipo:"info"},this.procesandoAccion={tipo:null,registroId:null},this.formTardanza={horaEntradaManana:"",minutosRetraso:0,observaciones:""},this.formPermiso={tipoPermiso:"Medio d\xEDa",horas:"",motivo:"",observaciones:""},this.formLicencia={tipoLicencia:"Con goce de haber",dias:1,motivo:"",observaciones:""},this.areas=["Gerencia Municipal","Oficina de Recursos Humanos","Oficina de Administraci\xF3n","Gerencia de Desarrollo Social","Gerencia de Infraestructura","Serenazgo","Registro Civil"],this.estados=["Presente","Tardanza","Falta","Permiso","Licencia","Vacaciones","Comision"],this.apiAsistencias=`${B.apiUrl}/asistencias`,this.apiTrabajadores=`${B.apiUrl}/trabajadores`,this.apiRegimenesLaborales=`${B.apiUrl}/regimenes-laborales`,this.trabajadoresActivos=[],this.formularioRegistro={trabajadorId:"",fecha:"",horaEntradaManana:"",horaSalidaManana:"",horaEntradaTarde:"",horaSalidaTarde:"",tipoMarcacion:"Presente",justificacion:"",motivoJustificacion:"",observaciones:""},this._esDiaNoHabilCache=null}ngOnInit(){window.scrollTo(0,0),setTimeout(()=>{let t=document.querySelector(".main-content");t&&(t.scrollTop=0)},100),this.inicializarFecha(),this.inicializarReloj(),this.cargarRegimenesLaborales(),this.cargarAsistencias()}cargarRegimenesLaborales(){let t=localStorage.getItem("token"),e=t?{Authorization:`Bearer ${t}`}:{};this.http.get(`${this.apiRegimenesLaborales}`,{headers:e}).subscribe({next:o=>{console.log("\u{1F4CB} Reg\xEDmenes laborales cargados:",o.data),this.regimenesLaborales=o.data||[]},error:o=>{console.error("\u274C Error al cargar reg\xEDmenes laborales:",o),this.regimenesLaborales=[]}})}inicializarFecha(){let t=new Date;this.fechaSeleccionada=this.formatearFecha(t),this.filtros.fecha=this.fechaSeleccionada}inicializarReloj(){this.actualizarHora(),setInterval(()=>{this.actualizarHora()},1e3)}actualizarHora(){let t=new Date,e=t.getHours(),o=t.getMinutes(),l=t.getSeconds();this.ampm=e>=12?"p. m.":"a. m.",e=e%12,e=e||12,this.horaCompleta=String(e).padStart(2,"0"),this.minutos=String(o).padStart(2,"0"),this.segundos=String(l).padStart(2,"0"),this.horaActual=`${this.horaCompleta}:${this.minutos}:${this.segundos} ${this.ampm}`;let u=["Domingo","Lunes","Martes","Mi\xE9rcoles","Jueves","Viernes","S\xE1bado"],p=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"];this.diaSemana=u[t.getDay()],this.diaMes=String(t.getDate()).padStart(2,"0"),this.mesNombre=p[t.getMonth()],this.anio=String(t.getFullYear()),this.fechaCompleta=`${this.diaSemana}, ${this.diaMes} de ${this.mesNombre} de ${this.anio}`,this.fechaSeleccionada||(this.fechaSeleccionada=this.formatearFecha(t))}formatearFecha(t){let e=t.getFullYear(),o=String(t.getMonth()+1).padStart(2,"0"),l=String(t.getDate()).padStart(2,"0");return`${e}-${o}-${l}`}cargarAsistencias(){this._esDiaNoHabilCache=null,this.cargando=!0,console.log("\u{1F4CB} Cargando asistencias para:",this.fechaSeleccionada),console.log("\u{1F310} URL del backend:",`${this.apiAsistencias}/fecha/${this.fechaSeleccionada}`);let t=localStorage.getItem("token"),e=t?{Authorization:`Bearer ${t}`}:{};this.http.get(`${this.apiAsistencias}/fecha/${this.fechaSeleccionada}`,{headers:e,params:{estado:this.filtros.estado||"",regimenLaboral:this.filtros.regimenLaboral||"",busqueda:this.filtros.busqueda||""}}).subscribe({next:o=>{console.log("\u2705 Asistencias cargadas del backend:",o),console.log("\u{1F4CA} Datos recibidos:",o.data),this.registros=(o.data||[]).map(l=>{let u=this.fechaSeleccionada;l.fecha&&(typeof l.fecha=="string"?u=l.fecha.split("T")[0]:l.fecha instanceof Date&&(u=this.formatearFecha(l.fecha)));let p={id:l.id,trabajadorId:l.trabajadorId,trabajadorDni:l.trabajadorDni,trabajadorNombre:l.trabajadorNombre,trabajadorArea:l.trabajadorArea,trabajadorCargo:l.trabajadorCargo,trabajadorRegimenLaboral:l.regimenLaboralNombre||null,fecha:u,horaEntradaManana:l.horaEntradaManana||null,horaSalidaManana:l.horaSalidaManana||null,horaEntradaTarde:l.horaEntradaTarde||null,horaSalidaTarde:l.horaSalidaTarde||null,horarioAsignadoEntradaManana:l.horarioAsignadoEntradaManana||l.horaEntradaManana||null,horarioAsignadoSalidaManana:l.horarioAsignadoSalidaManana||l.horaSalidaManana||null,horarioAsignadoEntradaTarde:l.horarioAsignadoEntradaTarde||l.horaEntradaTarde||null,horarioAsignadoSalidaTarde:l.horarioAsignadoSalidaTarde||l.horaSalidaTarde||null,tipoMarcacion:l.tipoMarcacion||null,estado:this.mapearEstado(l.estado,l.tipoMarcacion,l.horaEntradaManana),minutosRetraso:l.minutosTardanza||0,horasTrabajadas:0,horasExtras:0,tieneJustificacion:!!l.justificacion,motivoJustificacion:l.motivoJustificacion||"",observaciones:l.observaciones||"",registradoPor:l.usuarioRegistro||"sistema",fechaRegistro:l.fechaRegistro?new Date(l.fechaRegistro):new Date};return console.log("\u{1F50D} Registro normalizado:",p),p}),console.log("\u{1F4CB} Total registros mapeados:",this.registros.length),this.http.get(`${this.apiTrabajadores}`,{headers:e}).subscribe({next:l=>{let u=l?.data||[];this.trabajadoresActivos=u.filter(m=>{let v=m.Activo===!0||m.Activo===1||m.Activo==="1"||m.Activo===void 0,C=(m.UsuarioCreacion||"").toString().toUpperCase(),x=(m.Codigo||"").toString().toUpperCase(),y=C.includes("DEMO")||x.startsWith("DEMO");return v&&!y}),console.log("\u{1F465} Trabajadores activos (para combinar asistencia):",this.trabajadoresActivos.length),this.trabajadoresActivos.length>0&&(console.log("\u{1F550} Verificando horarios asignados en trabajadores activos:"),this.trabajadoresActivos.slice(0,3).forEach((m,v)=>{console.log(`  Trabajador ${v+1} (${m.Nombres||m.nombres}):`,{entradaManana:m.HorarioHabitualEntradaManana||m.horarioHabitualEntradaManana,salidaManana:m.HorarioHabitualSalidaManana||m.horarioHabitualSalidaManana,entradaTarde:m.HorarioHabitualEntradaTarde||m.horarioHabitualEntradaTarde,salidaTarde:m.HorarioHabitualSalidaTarde||m.horarioHabitualSalidaTarde})}));let p=new Set(this.trabajadoresActivos.map(m=>m.TrabajadorID||m.trabajadorId||m.id));this.registros=(this.registros||[]).filter(m=>p.has(m.trabajadorId)),this.registros=this.registros.map(m=>{let v=this.trabajadoresActivos.find(C=>(C.TrabajadorID||C.trabajadorId||C.id)===m.trabajadorId);if(v){let C=v.HorarioHabitualEntradaManana||v.horarioHabitualEntradaManana||v.HorarioHabitualEntradaManana||null,x=v.HorarioHabitualSalidaManana||v.horarioHabitualSalidaManana||v.HorarioHabitualSalidaManana||null,y=v.HorarioHabitualEntradaTarde||v.horarioHabitualEntradaTarde||v.HorarioHabitualEntradaTarde||null,j=v.HorarioHabitualSalidaTarde||v.horarioHabitualSalidaTarde||v.HorarioHabitualSalidaTarde||null;m.horarioAsignadoEntradaManana=C,m.horarioAsignadoSalidaManana=x,m.horarioAsignadoEntradaTarde=y,m.horarioAsignadoSalidaTarde=j,this.registros.indexOf(m)<3&&console.log(`\u{1F550} Horarios actualizados para ${m.trabajadorNombre}:`,{entradaManana:C,salidaManana:x,entradaTarde:y,salidaTarde:j})}else console.warn(`\u26A0\uFE0F No se encontr\xF3 trabajador activo para registro ID: ${m.trabajadorId}`);return m});let w=new Set(this.registros.map(m=>m.trabajadorId)),O=[...this.registros];for(let m of this.trabajadoresActivos){let v=m.TrabajadorID||m.trabajadorId||m.id;if(!w.has(v)){let C=`${(m.ApellidoPaterno||m.apellidoPaterno||"").trim()} ${(m.ApellidoMaterno||m.apellidoMaterno||"").trim()}, ${(m.Nombres||m.nombres||"").trim()}`.replace(/\s+/g," ").trim(),x=m.HorarioHabitualEntradaManana||m.horarioHabitualEntradaManana||null,y=m.HorarioHabitualSalidaManana||m.horarioHabitualSalidaManana||null,j=m.HorarioHabitualEntradaTarde||m.horarioHabitualEntradaTarde||null,I=m.HorarioHabitualSalidaTarde||m.horarioHabitualSalidaTarde||null;O.length<3&&console.log(`\u{1F550} Creando registro para trabajador faltante ${C}:`,{entradaManana:x,salidaManana:y,entradaTarde:j,salidaTarde:I,trabajadorData:{HorarioHabitualEntradaManana:m.HorarioHabitualEntradaManana,horarioHabitualEntradaManana:m.horarioHabitualEntradaManana,todasLasPropiedades:Object.keys(m).filter(A=>A.toLowerCase().includes("horario"))}}),O.push({id:0,fecha:this.fechaSeleccionada,trabajadorId:v,trabajadorDni:m.NumeroDocumento||m.dni||"",trabajadorNombre:C,trabajadorArea:m.AreaNombre||m.areaNombre||m.area||"",trabajadorCargo:(m.CargoNombre||m.cargoNombre||m.cargo||"").toUpperCase(),trabajadorRegimenLaboral:m.RegimenLaboralNombre||m.regimenLaboralNombre||null,horaEntradaManana:null,horaSalidaManana:null,horaEntradaTarde:null,horaSalidaTarde:null,horarioAsignadoEntradaManana:x,horarioAsignadoSalidaManana:y,horarioAsignadoEntradaTarde:j,horarioAsignadoSalidaTarde:I,estado:"Falta",tipoMarcacion:"Sistema",minutosRetraso:0,horasTrabajadas:0,horasExtras:0,tieneJustificacion:!1,motivoJustificacion:"",documentoJustificacion:"",observaciones:"",registradoPor:"sistema",fechaRegistro:new Date})}}this.registros=O,this.registrosFiltrados=[...this.registros],this.cargando=!1,console.log("\u{1F4CB} Registros finales antes de calcular resumen:",this.registros.length),console.log("\u{1F4CB} Primer registro final:",this.registros[0]),this.actualizarResumenDesdeRegistros()},error:l=>{console.warn("\u26A0\uFE0F No se pudo cargar trabajadores activos, usando solo registros del d\xEDa:",l),this.registrosFiltrados=[...this.registros],this.cargando=!1,this.cargarResumenDiario()}})},error:o=>{console.error("\u274C Error al cargar asistencias:",o),console.error("\u{1F50D} Detalles del error:",o),this.http.get(`${this.apiTrabajadores}`,{headers:e}).subscribe({next:l=>{let u=l?.data||[];this.trabajadoresActivos=u.filter(p=>{let w=p.Activo===!0||p.Activo===1||p.Activo==="1"||p.Activo===void 0,O=(p.UsuarioCreacion||"").toString().toUpperCase(),m=(p.Codigo||"").toString().toUpperCase(),v=O.includes("DEMO")||m.startsWith("DEMO");return w&&!v}),this.registros=(this.trabajadoresActivos||[]).map(p=>({id:0,fecha:this.fechaSeleccionada,trabajadorId:p.TrabajadorID||p.trabajadorId||p.id,trabajadorDni:p.NumeroDocumento||p.dni||"",trabajadorNombre:`${(p.ApellidoPaterno||"").trim()} ${(p.ApellidoMaterno||"").trim()}, ${(p.Nombres||"").trim()}`.replace(/\s+/g," ").trim(),trabajadorArea:p.AreaNombre||p.areaNombre||p.area||"",trabajadorCargo:(p.CargoNombre||p.cargoNombre||p.cargo||"").toUpperCase(),horaEntradaManana:"---",horaSalidaManana:"---",horaEntradaTarde:"---",horaSalidaTarde:"---",estado:"Falta",tipoMarcacion:"Sistema",minutosRetraso:0,horasTrabajadas:0,horasExtras:0,tieneJustificacion:!1,motivoJustificacion:"",documentoJustificacion:"",observaciones:"",registradoPor:"sistema",fechaRegistro:new Date})),this.registrosFiltrados=[...this.registros],this.cargando=!1,this.cargarResumenDiario()},error:()=>{this.cargando=!1,console.log("\u26A0\uFE0F Cargando datos de ejemplo debido al error"),this.cargarDatosEjemplo()}})}})}cargarResumenDiario(){console.log("\u{1F4CA} Cargando resumen diario para:",this.fechaSeleccionada),console.log("\u{1F310} URL del resumen:",`${this.apiAsistencias}/resumen/${this.fechaSeleccionada}`);let t=localStorage.getItem("token"),e=t?{Authorization:`Bearer ${t}`}:{};this.http.get(`${this.apiAsistencias}/resumen/${this.fechaSeleccionada}`,{headers:e}).subscribe({next:o=>{console.log("\u{1F4CA} Resumen diario cargado exitosamente del backend:",o),this.actualizarResumenDesdeRegistros()},error:o=>{console.error("\u274C Error al cargar resumen:",o),console.log("\u26A0\uFE0F Calculando resumen desde registros locales"),this.actualizarResumenDesdeRegistros()}})}actualizarResumenDesdeRegistros(){let t=this.registros.filter(x=>{let y=x.fecha;return typeof y=="string"&&y.includes("T")&&(y=y.split("T")[0]),y===this.fechaSeleccionada});console.log("\u{1F50D} Fecha seleccionada:",this.fechaSeleccionada),console.log("\u{1F50D} Registros totales:",this.registros.length),console.log("\u{1F50D} Registros del d\xEDa filtrados:",t.length),t.length>0&&(console.log("\u{1F50D} Primer registro del d\xEDa:",t[0]),console.log("\u{1F50D} Primer registro - estado:",t[0].estado),console.log("\u{1F50D} Primer registro - tipoMarcacion:",t[0].tipoMarcacion),console.log("\u{1F50D} Primer registro - horas:",{entradaManana:t[0].horaEntradaManana,entradaTarde:t[0].horaEntradaTarde}));let e=this.trabajadoresActivos?.length||t.length,o=t.filter(x=>{let y=x.tipoMarcacion,j=x.horaEntradaManana&&x.horaEntradaManana!=="---"||x.horaEntradaTarde&&x.horaEntradaTarde!=="---";return!!(y==="Presente"||x.estado==="Validado"&&j||x.estado==="Presente")}).length,l=t.filter(x=>x.tipoMarcacion==="Tardanza"||x.estado==="Tardanza").length,u=t.filter(x=>{let y=x.horaEntradaManana&&x.horaEntradaManana!=="---"||x.horaEntradaTarde&&x.horaEntradaTarde!=="---";return x.tipoMarcacion==="Falta"||x.estado==="Falta"||!y}).length,p=t.filter(x=>x.tipoMarcacion==="Permiso"||x.estado==="Permiso").length,w=t.filter(x=>x.tipoMarcacion==="Licencia"||x.estado==="Licencia").length,O=t.filter(x=>x.tipoMarcacion==="Vacaciones"||x.estado==="Vacaciones").length,m=t.filter(x=>x.tipoMarcacion==="Comision"||x.estado==="Comision").length,v=o+l+m,C=e>0?Math.round(v/e*100*100)/100:0;this.resumenDiario={fecha:this.fechaSeleccionada,totalTrabajadores:e,presentes:o,tardanzas:l,faltas:u,permisos:p,licencias:w,vacaciones:O,comisiones:m,porcentajeAsistencia:C},console.log(`\u{1F4CA} Resumen calculado para ${this.fechaSeleccionada}:`,this.resumenDiario),console.log("\u{1F50D} Debug - Primer registro:",t[0]),console.log("\u{1F50D} Debug - Registros con tipoMarcacion Presente:",t.filter(x=>x.tipoMarcacion==="Presente").length),console.log("\u{1F50D} Debug - Registros con estado Validado y horas:",t.filter(x=>{let y=x.horaEntradaManana&&x.horaEntradaManana!=="---"||x.horaEntradaTarde&&x.horaEntradaTarde!=="---";return x.estado==="Validado"&&y}).length)}cargarTrabajadoresActivos(){let t=localStorage.getItem("token"),e=t?{Authorization:`Bearer ${t}`}:{};this.http.get(`${this.apiAsistencias}/trabajadores`,{headers:e}).subscribe({next:o=>{console.log("\u{1F465} Trabajadores activos cargados:",o.data),this.trabajadoresActivos=o.data},error:o=>{console.error("\u274C Error al cargar trabajadores:",o),this.trabajadoresActivos=[]}})}cargarDatosEjemplo(){this.registros=[{id:1,fecha:this.fechaSeleccionada,trabajadorId:1,trabajadorDni:"43256789",trabajadorNombre:"Garc\xEDa Rodr\xEDguez, Carlos Alberto",trabajadorArea:"Gerencia Municipal",trabajadorCargo:"Gerente Municipal",horaEntrada:"07:55",horaSalida:"13:05",horaEntradaTarde:"14:00",horaSalidaTarde:"17:30",estado:"Presente",tipoMarcacion:"Biometrico",minutosRetraso:0,horasTrabajadas:8.5,horasExtras:0,tieneJustificacion:!1,motivoJustificacion:"",documentoJustificacion:"",observaciones:"",ubicacionEntrada:"",ubicacionSalida:"",registradoPor:"admin",fechaRegistro:new Date,modificadoPor:"",fechaModificacion:void 0}],this.registrosFiltrados=[...this.registros],this.cargando=!1,this.calcularResumen()}aplicarFiltros(){if(this.filtros.regimenLaboral){this.cargarAsistencias();return}let t=[...this.registros];if(this.filtros.busqueda){let e=this.filtros.busqueda.toLowerCase();t=t.filter(o=>o.trabajadorNombre.toLowerCase().includes(e)||o.trabajadorDni.includes(e)||o.trabajadorArea.toLowerCase().includes(e)||o.trabajadorRegimenLaboral&&o.trabajadorRegimenLaboral.toLowerCase().includes(e))}this.filtros.estado&&(t=t.filter(e=>e.estado===this.filtros.estado||e.tipoMarcacion===this.filtros.estado)),this.registrosFiltrados=t}calcularResumen(){let t=this.registros.length,e=this.registros.filter(C=>C.estado==="Presente").length,o=this.registros.filter(C=>C.estado==="Tardanza").length,l=this.registros.filter(C=>C.estado==="Falta").length,u=this.registros.filter(C=>C.estado==="Permiso").length,p=this.registros.filter(C=>C.estado==="Licencia").length,w=this.registros.filter(C=>C.estado==="Vacaciones").length,O=this.registros.filter(C=>C.estado==="Comision").length,m=e+o+O,v=t>0?m/t*100:0;this.resumenDiario={fecha:this.fechaSeleccionada,totalTrabajadores:t,presentes:e,tardanzas:o,faltas:l,permisos:u,licencias:p,vacaciones:w,comisiones:O,porcentajeAsistencia:Math.round(v*100)/100}}cambiarFecha(t){console.log(`\u{1F4C5} Cambiando fecha: ${this.fechaSeleccionada} ${t>0?"+":""}${t} d\xEDas`);let e=this.fechaSeleccionada.split("-");if(e.length!==3){console.error("\u274C Formato de fecha inv\xE1lido:",this.fechaSeleccionada);return}let o=parseInt(e[0],10),l=parseInt(e[1],10)-1,u=parseInt(e[2],10),p=new Date(o,l,u);console.log("\u{1F4C5} Fecha parseada:",p),p.setDate(p.getDate()+t),console.log("\u{1F4C5} Nueva fecha calculada:",p),this.fechaSeleccionada=this.formatearFecha(p),this.filtros.fecha=this.fechaSeleccionada,this._esDiaNoHabilCache=null,console.log("\u{1F4C5} Fecha actualizada a:",this.fechaSeleccionada),this.cargarAsistencias()}irHoy(){this.inicializarFecha(),this.cargarAsistencias()}registrarAsistenciaManual(){if(console.log("\u{1F4DD} Registrando asistencia manual:",this.formularioRegistro),!this.formularioRegistro.trabajadorId||!this.formularioRegistro.fecha){this.mostrarNotificacion("warning","\u26A0\uFE0F Advertencia","Debe seleccionar un trabajador y una fecha",3e3);return}let t=J($({},this.formularioRegistro),{horaEntradaManana:this.formularioRegistro.horaEntradaManana&&this.formularioRegistro.horaEntradaManana.trim()?this.formularioRegistro.horaEntradaManana:null,horaSalidaManana:this.formularioRegistro.horaSalidaManana&&this.formularioRegistro.horaSalidaManana.trim()?this.formularioRegistro.horaSalidaManana:null,horaEntradaTarde:this.formularioRegistro.horaEntradaTarde&&this.formularioRegistro.horaEntradaTarde.trim()?this.formularioRegistro.horaEntradaTarde:null,horaSalidaTarde:this.formularioRegistro.horaSalidaTarde&&this.formularioRegistro.horaSalidaTarde.trim()?this.formularioRegistro.horaSalidaTarde:null,justificacion:this.formularioRegistro.justificacion&&this.formularioRegistro.justificacion.trim()?this.formularioRegistro.justificacion:null,motivoJustificacion:this.formularioRegistro.motivoJustificacion&&this.formularioRegistro.motivoJustificacion.trim()?this.formularioRegistro.motivoJustificacion:null,observaciones:this.formularioRegistro.observaciones&&this.formularioRegistro.observaciones.trim()?this.formularioRegistro.observaciones:null});console.log("\u{1F4E4} Datos a enviar:",t);let e=localStorage.getItem("token"),o=e?{Authorization:`Bearer ${e}`}:{};this.http.post(`${this.apiAsistencias}/registrar`,t,{headers:o}).subscribe({next:l=>{console.log("\u2705 Asistencia registrada:",l),this.mostrarNotificacion("success","\u2705 \xC9xito","Asistencia registrada exitosamente",3e3),this.mostrarModalRegistro=!1,this.restaurarTopbarSidebar(),this.limpiarFormulario(),this.cargarAsistencias()},error:l=>{console.error("\u274C Error al registrar asistencia:",l),this.mostrarNotificacion("error","\u274C Error","Error al registrar la asistencia: "+(l.error?.message||l.message),4e3)}})}limpiarFormulario(){this.formularioRegistro={trabajadorId:"",fecha:this.fechaSeleccionada,horaEntradaManana:"",horaSalidaManana:"",horaEntradaTarde:"",horaSalidaTarde:"",tipoMarcacion:"Presente",justificacion:"",motivoJustificacion:"",observaciones:""}}abrirModalRegistro(){this.formularioRegistro.fecha=this.fechaSeleccionada,this.cargarTrabajadoresActivos(),this.mostrarModalRegistro=!0,setTimeout(()=>{document.documentElement.classList.add("modal-open"),document.body.classList.add("modal-open");let t=document.querySelector("app-topbar");if(t){t.style.setProperty("z-index","1","important");let o=t.querySelector(".topbar");o&&(o.style.setProperty("z-index","1","important"),o.style.setProperty("pointer-events","none","important"))}let e=document.querySelector("app-sidebar");e&&(e.style.setProperty("z-index","1","important"),e.style.setProperty("pointer-events","none","important"))},100)}restaurarTopbarSidebar(){setTimeout(()=>{document.documentElement.classList.remove("modal-open"),document.body.classList.remove("modal-open");let t=document.querySelector("app-topbar");if(t){t.style.setProperty("z-index","100000","important"),t.style.setProperty("pointer-events","auto","important"),t.style.setProperty("visibility","visible","important");let o=t.querySelector(".topbar");o&&(o.style.setProperty("z-index","100000","important"),o.style.setProperty("pointer-events","auto","important"),o.style.setProperty("visibility","visible","important"))}let e=document.querySelector("app-sidebar");e&&(e.style.setProperty("z-index","1000","important"),e.style.setProperty("pointer-events","auto","important"),e.style.setProperty("visibility","visible","important")),document.body.offsetHeight},150)}marcarEntrada(t){let e=new Date,o=`${String(e.getHours()).padStart(2,"0")}:${String(e.getMinutes()).padStart(2,"0")}`;console.log(`Marcar entrada: Trabajador ${t} a las ${o}`)}marcarSalida(t){let e=new Date,o=`${String(e.getHours()).padStart(2,"0")}:${String(e.getMinutes()).padStart(2,"0")}`;console.log(`Marcar salida: Trabajador ${t} a las ${o}`)}abrirModalJustificacion(t){this.registroSeleccionado=t,this.mostrarModalJustificacion=!0}guardarJustificacion(){console.log("Guardar justificaci\xF3n:",this.registroSeleccionado),this.mostrarModalJustificacion=!1}abrirModalTardanza(t){this.registroSeleccionado=t;let e=new Date,o=`${String(e.getHours()).padStart(2,"0")}:${String(e.getMinutes()).padStart(2,"0")}`;this.formTardanza={horaEntradaManana:t.horaEntradaManana&&t.horaEntradaManana!=="---"?t.horaEntradaManana:o,minutosRetraso:t.minutosTardanza||t.minutosRetraso||0,observaciones:t.observaciones||""},this.mostrarModalTardanza=!0}guardarTardanza(){if(!this.registroSeleccionado||!this.formTardanza.horaEntradaManana){this.mostrarNotificacion("warning","\u26A0\uFE0F Advertencia","Por favor complete la hora de entrada",3e3);return}let t={trabajadorId:this.registroSeleccionado.trabajadorId,fecha:this.fechaSeleccionada,horaEntradaManana:this.formTardanza.horaEntradaManana,horaSalidaManana:this.registroSeleccionado.horaSalidaManana&&this.registroSeleccionado.horaSalidaManana!=="---"?this.registroSeleccionado.horaSalidaManana:null,horaEntradaTarde:this.registroSeleccionado.horaEntradaTarde&&this.registroSeleccionado.horaEntradaTarde!=="---"?this.registroSeleccionado.horaEntradaTarde:null,horaSalidaTarde:this.registroSeleccionado.horaSalidaTarde&&this.registroSeleccionado.horaSalidaTarde!=="---"?this.registroSeleccionado.horaSalidaTarde:null,tipoMarcacion:"Tardanza",minutosTardanza:parseInt(this.formTardanza.minutosRetraso)||0,observaciones:this.formTardanza.observaciones||"Marcado como tardanza"};console.log("\u{1F4E4} [Frontend] Enviando datos de tardanza:",{trabajadorId:t.trabajadorId,fecha:t.fecha,horaEntradaManana:t.horaEntradaManana,minutosTardanza:t.minutosTardanza,minutosTardanza_TIPO:typeof t.minutosTardanza,formTardanza_minutosRetraso:this.formTardanza.minutosRetraso,tipoMarcacion:t.tipoMarcacion});let e=localStorage.getItem("token"),o=e?{Authorization:`Bearer ${e}`}:{};this.iniciarProcesamiento("marcar-tardanza",this.obtenerIdRegistro(this.registroSeleccionado)),this.mostrarNotificacion("loading","Procesando...",`Registrando tardanza para ${this.registroSeleccionado?.trabajadorNombre}`,0),this.http.post(`${this.apiAsistencias}/marcar-tardanza`,t,{headers:o}).subscribe({next:l=>{this.finalizarProcesamiento(),this.cerrarNotificacion(),this.mostrarNotificacion("success","\u2705 \xC9xito",`${this.registroSeleccionado?.trabajadorNombre} marcado con TARDANZA`,3e3),this.mostrarModalTardanza=!1,this.cargarAsistencias()},error:l=>{console.error("\u274C Error al marcar tardanza:",l),this.finalizarProcesamiento(),this.cerrarNotificacion(),this.mostrarNotificacion("error","\u274C Error","Error al marcar tardanza: "+(l.error?.message||l.message),4e3)}})}abrirModalPermiso(t){this.registroSeleccionado=t,this.formPermiso={tipoPermiso:"Medio d\xEDa",horas:"",motivo:"",observaciones:""},this.mostrarModalPermiso=!0}guardarPermiso(){if(!this.registroSeleccionado||!this.formPermiso.motivo){this.mostrarNotificacion("warning","\u26A0\uFE0F Advertencia","Por favor complete el motivo del permiso",3e3);return}let t={trabajadorId:this.registroSeleccionado.trabajadorId,fecha:this.fechaSeleccionada,tipoPermiso:this.formPermiso.tipoPermiso,horas:this.formPermiso.horas||null,motivo:this.formPermiso.motivo,horaEntradaManana:this.formPermiso.tipoPermiso==="Todo el d\xEDa"?null:this.registroSeleccionado.horaEntradaManana&&this.registroSeleccionado.horaEntradaManana!=="---"?this.registroSeleccionado.horaEntradaManana:null,horaSalidaManana:this.formPermiso.tipoPermiso==="Todo el d\xEDa"?null:this.registroSeleccionado.horaSalidaManana&&this.registroSeleccionado.horaSalidaManana!=="---"?this.registroSeleccionado.horaSalidaManana:null,horaEntradaTarde:this.formPermiso.tipoPermiso==="Todo el d\xEDa"?null:this.registroSeleccionado.horaEntradaTarde&&this.registroSeleccionado.horaEntradaTarde!=="---"?this.registroSeleccionado.horaEntradaTarde:null,horaSalidaTarde:this.formPermiso.tipoPermiso==="Todo el d\xEDa"?null:this.registroSeleccionado.horaSalidaTarde&&this.registroSeleccionado.horaSalidaTarde!=="---"?this.registroSeleccionado.horaSalidaTarde:null,tipoMarcacion:"Permiso",observaciones:this.formPermiso.observaciones||`Permiso: ${this.formPermiso.motivo}`},e=localStorage.getItem("token"),o=e?{Authorization:`Bearer ${e}`}:{};this.iniciarProcesamiento("marcar-permiso",this.obtenerIdRegistro(this.registroSeleccionado)),this.mostrarNotificacion("loading","Procesando...",`Registrando permiso para ${this.registroSeleccionado?.trabajadorNombre}`,0),this.http.post(`${this.apiAsistencias}/marcar-permiso`,t,{headers:o}).subscribe({next:l=>{this.finalizarProcesamiento(),this.cerrarNotificacion(),this.mostrarNotificacion("success","\u2705 \xC9xito",`${this.registroSeleccionado?.trabajadorNombre} marcado con PERMISO`,3e3),this.mostrarModalPermiso=!1,this.cargarAsistencias()},error:l=>{console.error("\u274C Error al marcar permiso:",l),this.finalizarProcesamiento(),this.cerrarNotificacion(),this.mostrarNotificacion("error","\u274C Error","Error al marcar permiso: "+(l.error?.message||l.message),4e3)}})}abrirModalLicencia(t){this.registroSeleccionado=t,this.formLicencia={tipoLicencia:"Con goce de haber",dias:1,motivo:"",observaciones:""},this.mostrarModalLicencia=!0}guardarLicencia(){if(!this.registroSeleccionado||!this.formLicencia.motivo){this.mostrarNotificacion("warning","\u26A0\uFE0F Advertencia","Por favor complete el motivo de la licencia",3e3);return}let t={trabajadorId:this.registroSeleccionado.trabajadorId,fecha:this.fechaSeleccionada,tipoLicencia:this.formLicencia.tipoLicencia,dias:this.formLicencia.dias,motivo:this.formLicencia.motivo,horaEntradaManana:null,horaSalidaManana:null,horaEntradaTarde:null,horaSalidaTarde:null,tipoMarcacion:"Licencia",observaciones:this.formLicencia.observaciones||`Licencia ${this.formLicencia.tipoLicencia}: ${this.formLicencia.motivo}`},e=localStorage.getItem("token"),o=e?{Authorization:`Bearer ${e}`}:{};this.iniciarProcesamiento("marcar-licencia",this.obtenerIdRegistro(this.registroSeleccionado)),this.mostrarNotificacion("loading","Procesando...",`Registrando licencia para ${this.registroSeleccionado?.trabajadorNombre}`,0),this.http.post(`${this.apiAsistencias}/marcar-licencia`,t,{headers:o}).subscribe({next:l=>{this.finalizarProcesamiento(),this.cerrarNotificacion(),this.mostrarNotificacion("success","\u2705 \xC9xito",`${this.registroSeleccionado?.trabajadorNombre} marcado con LICENCIA`,3e3),this.mostrarModalLicencia=!1,this.cargarAsistencias()},error:l=>{console.error("\u274C Error al marcar licencia:",l),this.finalizarProcesamiento(),this.cerrarNotificacion(),this.mostrarNotificacion("error","\u274C Error","Error al marcar licencia: "+(l.error?.message||l.message),4e3)}})}exportarExcel(){console.log("Exportar a Excel:",this.registrosFiltrados.length,"registros")}exportarPDF(){console.log("Exportar a PDF:",this.registrosFiltrados.length,"registros")}limpiarFiltros(){this.filtros={fecha:this.fechaSeleccionada,estado:"",regimenLaboral:"",busqueda:""},this.aplicarFiltros()}mapearEstado(t,e,o){return e||(!o||o==="---"||o==="--:--"?"Falta":t==="Validado"&&o?"Presente":t==="Falta"?"Falta":t||"Falta")}getEstadoBadgeClass(t){return{Presente:"badge--presente",Tardanza:"badge--tardanza",Falta:"badge--falta",Permiso:"badge--permiso",Licencia:"badge--licencia",Vacaciones:"badge--vacaciones",Comision:"badge--comision",Validado:""}[t]||""}formatearHora(t){return t||"--:--"}calcularTiempoTrabajado(t,e){if(!t||!e)return"--";let[o,l]=t.split(":").map(Number),[u,p]=e.split(":").map(Number),w=o*60+l,m=u*60+p-w,v=Math.floor(m/60),C=m%60;return`${v}h ${C}m`}marcarPresente(t){console.log("\u{1F535} marcarPresente llamado para:",t.trabajadorNombre),t.horarioAsignadoEntradaManana&&t.horarioAsignadoSalidaManana||this.mostrarNotificacion("info","\u2139\uFE0F Informaci\xF3n",`El trabajador ${t.trabajadorNombre} no tiene horarios asignados. Puede marcar como presente, pero se recomienda asignar horarios para calcular tardanzas autom\xE1ticamente.`,3e3),this.mostrarConfirmacion("Marcar como Presente",`\xBFDeseas marcar a <strong>${t.trabajadorNombre}</strong> como PRESENTE?`,"success",()=>{console.log("\u2705 Confirmaci\xF3n aceptada para marcar presente");let o=t.horarioAsignadoEntradaManana||null,l=t.horarioAsignadoSalidaManana||null,u=t.horarioAsignadoEntradaTarde||null,p=t.horarioAsignadoSalidaTarde||null,w={trabajadorId:t.trabajadorId,fecha:this.fechaSeleccionada,horaEntradaManana:o&&o!=="---"&&o!=="--:--"?o:null,horaSalidaManana:l&&l!=="---"&&l!=="--:--"?l:null,horaEntradaTarde:u&&u!=="---"&&u!=="--:--"?u:null,horaSalidaTarde:p&&p!=="---"&&p!=="--:--"?p:null,tipoMarcacion:"Presente",estado:"Presente",observaciones:"Marcado manualmente como presente"};console.log("\u2705 Marcando presente:",w),this.iniciarProcesamiento("marcar-presente",this.obtenerIdRegistro(t)),this.mostrarNotificacion("loading","Procesando...",`Marcando a ${t.trabajadorNombre} como presente`,0);let O=localStorage.getItem("token"),m=O?{Authorization:`Bearer ${O}`}:{};this.http.post(`${this.apiAsistencias}/marcar-presente`,w,{headers:m}).subscribe({next:v=>{console.log("\u2705 Marcado como presente:",v),window.parent&&window.parent.postMessage({type:"asistencia-actualizada"},"*"),window.dispatchEvent(new CustomEvent("asistencia-actualizada")),this.finalizarProcesamiento(),this.cerrarNotificacion(),this.mostrarNotificacion("success","\u2705 \xC9xito",`${t.trabajadorNombre} marcado como PRESENTE`,3e3),this.cargarAsistencias()},error:v=>{console.error("\u274C Error al marcar presente:",v),this.finalizarProcesamiento(),this.cerrarNotificacion(),this.mostrarNotificacion("error","\u274C Error","Error al marcar presente: "+(v.error?.message||v.message),4e3)}})})}todosEstanPresentes(){return this.registrosFiltrados.length===0?!1:this.registrosFiltrados.every(e=>{let o=e.estado||e.tipoMarcacion||"";return o==="Presente"||o==="Tardanza"})}marcarTodosPresentes(){let t=this.registrosFiltrados.filter(p=>{let w=p.estado||p.tipoMarcacion||"";return w!=="Presente"&&w!=="Tardanza"});if(t.length===0){this.mostrarNotificacion("info","\u2139\uFE0F Informaci\xF3n","Todos los trabajadores ya est\xE1n marcados como presentes",3e3);return}let e=t.filter(p=>p.horarioAsignadoEntradaManana&&p.horarioAsignadoSalidaManana);if(e.length===0){this.mostrarNotificacion("warning","\u26A0\uFE0F Advertencia",'Ning\xFAn trabajador tiene horarios asignados. Por favor, asigne horarios primero usando la opci\xF3n "Asignar Horarios".',4e3);return}let o=e.length,l=t.length-e.length,u=`\xBFDeseas marcar a <strong>${o} trabajador(es)</strong> como PRESENTE?`;l>0&&(u+=`<br><small style="color: #fbbf24;">\u26A0\uFE0F ${l} trabajador(es) sin horarios asignados ser\xE1n omitidos.</small>`),this.mostrarConfirmacion("Marcar Todos como Presentes",u,"success",()=>{console.log(`\u2705 Marcando ${o} trabajadores como presentes...`),this.iniciarProcesamiento("marcar-todos-presentes","masivo"),this.mostrarNotificacion("loading","Procesando...",`Marcando ${o} trabajador(es) como presentes...`,0);let p=localStorage.getItem("token"),w=p?{Authorization:`Bearer ${p}`}:{},O=e.map((m,v)=>{let C=m.horarioAsignadoEntradaManana||null,x=m.horarioAsignadoSalidaManana||null,y=m.horarioAsignadoEntradaTarde||null,j=m.horarioAsignadoSalidaTarde||null,I={trabajadorId:m.trabajadorId,fecha:this.fechaSeleccionada,horaEntradaManana:C&&C!=="---"&&C!=="--:--"?C:null,horaSalidaManana:x&&x!=="---"&&x!=="--:--"?x:null,horaEntradaTarde:y&&y!=="---"&&y!=="--:--"?y:null,horaSalidaTarde:j&&j!=="---"&&j!=="--:--"?j:null,tipoMarcacion:"Presente",estado:"Presente",observaciones:"Marcado masivamente como presente"};return this.http.post(`${this.apiAsistencias}/marcar-presente`,I,{headers:w}).toPromise()});Promise.all(O).then(m=>{console.log(`\u2705 ${m.length} trabajadores marcados como presentes`),this.finalizarProcesamiento(),this.cerrarNotificacion(),this.mostrarNotificacion("success","\u2705 \xC9xito",`${o} trabajador(es) marcado(s) como PRESENTE`,4e3),setTimeout(()=>{this.cargarAsistencias()},500)}).catch(m=>{console.error("\u274C Error al marcar todos como presentes:",m),this.finalizarProcesamiento(),this.cerrarNotificacion(),this.mostrarNotificacion("error","\u274C Error","Error al marcar trabajadores: "+(m.error?.message||m.message),4e3)})})}marcarTodosFalta(){let t=this.registrosFiltrados.filter(o=>{let l=o.estado||o.tipoMarcacion||"";return l==="Presente"||l==="Tardanza"});if(t.length===0){this.mostrarNotificacion("info","\u2139\uFE0F Informaci\xF3n","No hay trabajadores marcados como presentes para cambiar a falta",3e3);return}let e=t.length;this.mostrarConfirmacion("Marcar Todos como Falta",`\xBFDeseas marcar a <strong>${e} trabajador(es)</strong> como FALTA?`,"danger",()=>{console.log(`\u274C Marcando ${e} trabajadores como falta...`),this.iniciarProcesamiento("marcar-todos-falta","masivo"),this.mostrarNotificacion("loading","Procesando...",`Marcando ${e} trabajador(es) como falta...`,0);let o=localStorage.getItem("token"),l=o?{Authorization:`Bearer ${o}`}:{},u=t.map(p=>{let w=p.horarioAsignadoEntradaManana||(p.horaEntradaManana&&p.horaEntradaManana!=="---"?p.horaEntradaManana:null),O=p.horarioAsignadoSalidaManana||(p.horaSalidaManana&&p.horaSalidaManana!=="---"?p.horaSalidaManana:null),m=p.horarioAsignadoEntradaTarde||(p.horaEntradaTarde&&p.horaEntradaTarde!=="---"?p.horaEntradaTarde:null),v=p.horarioAsignadoSalidaTarde||(p.horaSalidaTarde&&p.horaSalidaTarde!=="---"?p.horaSalidaTarde:null),C={trabajadorId:p.trabajadorId,fecha:this.fechaSeleccionada,horaEntradaManana:w,horaSalidaManana:O,horaEntradaTarde:m,horaSalidaTarde:v,tipoMarcacion:"Falta",estado:"Falta",observaciones:"Marcado masivamente como falta"};return this.http.post(`${this.apiAsistencias}/marcar-falta`,C,{headers:l}).toPromise()});Promise.all(u).then(p=>{console.log(`\u274C ${p.length} trabajadores marcados como falta`),this.finalizarProcesamiento(),this.cerrarNotificacion(),this.mostrarNotificacion("success","\u2705 \xC9xito",`${e} trabajador(es) marcado(s) como FALTA`,4e3),setTimeout(()=>{this.cargarAsistencias()},500)}).catch(p=>{console.error("\u274C Error al marcar todos como falta:",p),this.finalizarProcesamiento(),this.cerrarNotificacion(),this.mostrarNotificacion("error","\u274C Error","Error al marcar trabajadores: "+(p.error?.message||p.message),4e3)})})}marcarFalta(t){this.mostrarConfirmacion("Marcar como Falta",`\xBFDeseas marcar a <strong>${t.trabajadorNombre}</strong> como FALTA?`,"danger",()=>{let e=t.horarioAsignadoEntradaManana||(t.horaEntradaManana&&t.horaEntradaManana!=="---"?t.horaEntradaManana:null),o=t.horarioAsignadoSalidaManana||(t.horaSalidaManana&&t.horaSalidaManana!=="---"?t.horaSalidaManana:null),l=t.horarioAsignadoEntradaTarde||(t.horaEntradaTarde&&t.horaEntradaTarde!=="---"?t.horaEntradaTarde:null),u=t.horarioAsignadoSalidaTarde||(t.horaSalidaTarde&&t.horaSalidaTarde!=="---"?t.horaSalidaTarde:null),p={trabajadorId:t.trabajadorId,fecha:this.fechaSeleccionada,horaEntradaManana:e,horaSalidaManana:o,horaEntradaTarde:l,horaSalidaTarde:u,tipoMarcacion:"Falta",estado:"Falta",observaciones:"Marcado manualmente como falta"};console.log("\u274C Marcando falta:",p),this.iniciarProcesamiento("marcar-falta",this.obtenerIdRegistro(t)),this.mostrarNotificacion("loading","Procesando...",`Marcando a ${t.trabajadorNombre} como falta`,0);let w=localStorage.getItem("token"),O=w?{Authorization:`Bearer ${w}`}:{};this.http.post(`${this.apiAsistencias}/marcar-falta`,p,{headers:O}).subscribe({next:m=>{console.log("\u274C Marcado como falta:",m),this.finalizarProcesamiento(),this.cerrarNotificacion(),this.mostrarNotificacion("success","\u2705 \xC9xito",`${t.trabajadorNombre} marcado como FALTA`,3e3),this.cargarAsistencias()},error:m=>{console.error("\u274C Error al marcar falta:",m),this.finalizarProcesamiento(),this.cerrarNotificacion(),this.mostrarNotificacion("error","\u274C Error","Error al marcar falta: "+(m.error?.message||m.message),4e3)}})})}abrirModalEdicion(t){this.registroSeleccionado=J($({},t),{horaEntradaManana:t.horaEntradaManana&&t.horaEntradaManana!=="---"?t.horaEntradaManana:t.horarioAsignadoEntradaManana||"",horaSalidaManana:t.horaSalidaManana&&t.horaSalidaManana!=="---"?t.horaSalidaManana:t.horarioAsignadoSalidaManana||"",horaEntradaTarde:t.horaEntradaTarde&&t.horaEntradaTarde!=="---"?t.horaEntradaTarde:t.horarioAsignadoEntradaTarde||"",horaSalidaTarde:t.horaSalidaTarde&&t.horaSalidaTarde!=="---"?t.horaSalidaTarde:t.horarioAsignadoSalidaTarde||""}),this.mostrarModalEdicion=!0,console.log("\u{1F4DD} Modal abierto con datos:",this.registroSeleccionado)}guardarEdicion(){if(!this.registroSeleccionado)return;console.log("\u{1F4BE} Guardando edici\xF3n:",this.registroSeleccionado);let t=!!(this.registroSeleccionado.horaEntradaManana?.trim()||this.registroSeleccionado.horaEntradaTarde?.trim()),e=this.registroSeleccionado.tipoMarcacion,o=e,l=this.registroSeleccionado.estado;!e&&t?(o="Presente",l="Presente"):e&&(o=e,l=this.registroSeleccionado.estado);let u=this.registroSeleccionado.horarioAsignadoEntradaManana||this.registroSeleccionado.horaEntradaManana||null,p=this.registroSeleccionado.horarioAsignadoSalidaManana||this.registroSeleccionado.horaSalidaManana||null,w=this.registroSeleccionado.horarioAsignadoEntradaTarde||this.registroSeleccionado.horaEntradaTarde||null,O=this.registroSeleccionado.horarioAsignadoSalidaTarde||this.registroSeleccionado.horaSalidaTarde||null,m=this.registroSeleccionado.horaEntradaManana?.trim()||u||null,v=this.registroSeleccionado.horaSalidaManana?.trim()||p||null,C=this.registroSeleccionado.horaEntradaTarde?.trim()||w||null,x=this.registroSeleccionado.horaSalidaTarde?.trim()||O||null,y={trabajadorId:this.registroSeleccionado.trabajadorId,fecha:this.fechaSeleccionada,horaEntradaManana:m&&m!=="---"?m:null,horaSalidaManana:v&&v!=="---"?v:null,horaEntradaTarde:C&&C!=="---"?C:null,horaSalidaTarde:x&&x!=="---"?x:null,estado:l,tipoMarcacion:o||"Manual",observaciones:this.registroSeleccionado.observaciones?.trim()||null};console.log("\u{1F4E4} Datos a enviar:",y);let j=localStorage.getItem("token"),I=j?{Authorization:`Bearer ${j}`}:{};this.iniciarProcesamiento("editar-horarios",this.obtenerIdRegistro(this.registroSeleccionado)),this.mostrarNotificacion("loading","Procesando...",`Actualizando horarios de ${this.registroSeleccionado?.trabajadorNombre}`,0),this.http.post(`${this.apiAsistencias}/actualizar`,y,{headers:I}).subscribe({next:A=>{if(console.log("\u2705 Asistencia actualizada:",A),m&&m!=="---"&&v&&v!=="---"){let z={horarioHabitualEntradaManana:m,horarioHabitualSalidaManana:v,horarioHabitualEntradaTarde:C&&C!=="---"?C:null,horarioHabitualSalidaTarde:x&&x!=="---"?x:null};console.log("\u{1F4BE} Actualizando horario habitual del trabajador:",z),this.http.put(`${this.apiTrabajadores}/${this.registroSeleccionado.trabajadorId}`,z,{headers:I}).subscribe({next:H=>{console.log("\u2705 Horario habitual actualizado:",H),this.finalizarProcesamiento(),this.cerrarNotificacion(),this.mostrarNotificacion("success","\u2705 \xC9xito","Horarios guardados permanentemente",3e3),this.mostrarModalEdicion=!1,this.registroSeleccionado=null,this.cargarAsistencias()},error:H=>{console.error("\u26A0\uFE0F Error al actualizar horario habitual (pero asistencia guardada):",H),this.finalizarProcesamiento(),this.cerrarNotificacion(),this.mostrarNotificacion("success","\u2705 \xC9xito","Asistencia actualizada (horario habitual no se pudo actualizar)",3e3),this.mostrarModalEdicion=!1,this.registroSeleccionado=null,this.cargarAsistencias()}})}else this.finalizarProcesamiento(),this.cerrarNotificacion(),this.mostrarNotificacion("success","\u2705 \xC9xito","Asistencia actualizada exitosamente",3e3),this.mostrarModalEdicion=!1,this.registroSeleccionado=null,this.cargarAsistencias()},error:A=>{console.error("\u274C Error al actualizar asistencia:",A),this.finalizarProcesamiento(),this.cerrarNotificacion(),this.mostrarNotificacion("error","\u274C Error","Error al actualizar: "+(A.error?.message||A.message),4e3)}})}abrirModalHorariosMasivos(){this.formHorariosMasivos={tipoAsignacion:"todos",regimenLaboralId:null,horaEntradaManana:"08:00",horaSalidaManana:"13:00",horaEntradaTarde:"14:00",horaSalidaTarde:"17:00"},this.mostrarModalHorariosMasivos=!0}guardarHorariosMasivos(){if(!this.formHorariosMasivos.horaEntradaManana||!this.formHorariosMasivos.horaSalidaManana){this.mostrarNotificacion("error","\u274C Error","Debe completar al menos los horarios de ma\xF1ana",3e3);return}if(this.formHorariosMasivos.tipoAsignacion==="regimen"&&!this.formHorariosMasivos.regimenLaboralId){this.mostrarNotificacion("error","\u274C Error","Debe seleccionar un r\xE9gimen laboral",3e3);return}let t=this.formHorariosMasivos.tipoAsignacion==="todos"?"\xBFDeseas asignar este horario a <strong>TODOS</strong> los trabajadores activos?":"\xBFDeseas asignar este horario a todos los trabajadores del r\xE9gimen laboral seleccionado?";this.mostrarConfirmacion("Asignar Horarios Masivamente",t,"warning",()=>{let e={tipoAsignacion:this.formHorariosMasivos.tipoAsignacion,regimenLaboralId:this.formHorariosMasivos.regimenLaboralId||null,horarioHabitualEntradaManana:this.formHorariosMasivos.horaEntradaManana,horarioHabitualSalidaManana:this.formHorariosMasivos.horaSalidaManana,horarioHabitualEntradaTarde:this.formHorariosMasivos.horaEntradaTarde||null,horarioHabitualSalidaTarde:this.formHorariosMasivos.horaSalidaTarde||null};console.log("\u{1F4BE} Asignando horarios masivamente:",e),this.iniciarProcesamiento("horarios-masivos","masivo"),this.mostrarNotificacion("loading","Procesando...","Asignando horarios a los trabajadores...",0);let o=localStorage.getItem("token"),l=o?{Authorization:`Bearer ${o}`}:{};this.http.post(`${this.apiTrabajadores}/asignar-horarios-masivo`,e,{headers:l}).subscribe({next:u=>{console.log("\u2705 Horarios asignados masivamente:",u),this.finalizarProcesamiento(),this.cerrarNotificacion();let p=u.data?.trabajadoresAfectados||0;this.mostrarNotificacion("success","\u2705 \xC9xito",`Horarios asignados a ${p} trabajador(es)`,4e3),this.mostrarModalHorariosMasivos=!1,this.trabajadoresActivos=[],setTimeout(()=>{console.log("\u{1F504} Recargando asistencias despu\xE9s de asignaci\xF3n masiva..."),this.cargarAsistencias()},500)},error:u=>{console.error("\u274C Error al asignar horarios masivamente:",u),this.finalizarProcesamiento(),this.cerrarNotificacion(),this.mostrarNotificacion("error","\u274C Error","Error al asignar horarios: "+(u.error?.message||u.message),4e3)}})})}obtenerIdRegistro(t){return t.id||t.trabajadorDni||""}toggleMenuAcciones(t,e){e&&(e.stopPropagation(),e.preventDefault()),this.menuAbiertoId===t?this.cerrarMenuAcciones():(this.menuAbiertoId=t,setTimeout(()=>{this.ajustarPosicionDropdown()},10))}cerrarMenuAcciones(){this.menuAbiertoId=null}ajustarPosicionDropdown(){let t=document.querySelector(".actions-dropdown--open .dropdown-menu");if(!t)return;let e=document.querySelector(".actions-dropdown--open");if(!e)return;let o=e.getBoundingClientRect(),l=window.innerWidth,u=window.innerHeight,p=o.bottom+8,w=l-o.right;t.style.position="fixed",t.style.top=`${p}px`,t.style.right=`${w}px`,t.style.left="auto",t.style.bottom="auto",t.style.zIndex="999999",setTimeout(()=>{let O=t.getBoundingClientRect();O.right>l&&(t.style.right="auto",t.style.left=`${o.left}px`),O.bottom>u&&(t.style.top="auto",t.style.bottom=`${u-o.top+8}px`)},0)}onClickOutside(t){let e=t.target;e.closest(".actions-dropdown")||e.closest(".dropdown-menu")||e.closest(".dropdown-item")||e.closest(".btn-icon--primary")||e.classList.contains("dropdown-item")||e.classList.contains("dropdown-menu")||e.closest("button.dropdown-item")||setTimeout(()=>{this.cerrarMenuAcciones()},150)}mostrarNotificacion(t,e,o,l=3e3){this.notificacion={mostrar:!0,tipo:t,titulo:e,mensaje:o,duracion:l},t!=="loading"&&l>0&&setTimeout(()=>{this.cerrarNotificacion()},l)}cerrarNotificacion(){this.notificacion.mostrar=!1}mostrarConfirmacion(t,e,o,l,u){console.log("\u{1F535} mostrarConfirmacion llamado:",t),this.confirmacion={mostrar:!0,titulo:t,mensaje:e,tipo:o,onConfirm:l,onCancel:u},console.log("\u{1F535} confirmacion.mostrar:",this.confirmacion.mostrar)}confirmarAccion(){console.log("\u{1F535} confirmarAccion llamado");let t=this.confirmacion.onConfirm;this.confirmacion.mostrar=!1,t&&(console.log("\u{1F535} Ejecutando onConfirm"),t())}cancelarAccion(){console.log("\u{1F535} cancelarAccion llamado");let t=this.confirmacion.onCancel;this.confirmacion.mostrar=!1,t&&t()}iniciarProcesamiento(t,e){this.procesandoAccion={tipo:t,registroId:e}}finalizarProcesamiento(){this.procesandoAccion={tipo:null,registroId:null}}formatearMensajeNotificacion(t){if(!t)return this.sanitizer.bypassSecurityTrustHtml("");let e=t.replace(/\bFALTA\b/gi,'<span class="notificacion__palabra-destacada notificacion__palabra-destacada--rojo">FALTA</span>');return this.sanitizer.bypassSecurityTrustHtml(e)}obtenerFeriadosPeru(t){let e=[];e.push(new Date(t,0,1)),e.push(new Date(t,4,1)),e.push(new Date(t,6,28)),e.push(new Date(t,6,29)),e.push(new Date(t,7,30)),e.push(new Date(t,9,8)),e.push(new Date(t,10,1)),e.push(new Date(t,11,8)),e.push(new Date(t,11,25));let o=t%19,l=Math.floor(t/100),u=t%100,p=Math.floor(l/4),w=l%4,O=Math.floor((l+8)/25),m=Math.floor((l-O+1)/3),v=(19*o+l-p-m+15)%30,C=Math.floor(u/4),x=u%4,y=(32+2*w+2*C-v-x)%7,j=Math.floor((o+11*v+22*y)/451),I=Math.floor((v+y-7*j+114)/31)-1,A=(v+y-7*j+114)%31+1,z=new Date(t,I,A);z.setHours(0,0,0,0);let H=new Date(z);H.setDate(z.getDate()-3),e.push(H);let G=new Date(z);return G.setDate(z.getDate()-2),e.push(G),e.map(xe=>{let X=new Date(xe);return X.setHours(0,0,0,0),X})}esFeriado(t,e){let o=new Date(t.getFullYear(),t.getMonth(),t.getDate());return e.some(l=>new Date(l.getFullYear(),l.getMonth(),l.getDate()).getTime()===o.getTime())}parsearFecha(t){if(!t)return new Date;let e=t.split("-");if(e.length===3){let l=parseInt(e[0],10),u=parseInt(e[1],10)-1,p=parseInt(e[2],10);return isNaN(l)||isNaN(u)||isNaN(p)?(console.error("\u274C Error al parsear fecha:",t),new Date):new Date(l,u,p,12,0,0)}let o=new Date(t);return isNaN(o.getTime())?(console.error("\u274C Error al parsear fecha:",t),new Date):o}esDiaNoHabil(){if(!this.fechaSeleccionada)return!1;if(this._esDiaNoHabilCache&&this._esDiaNoHabilCache.fecha===this.fechaSeleccionada)return this._esDiaNoHabilCache.resultado;let t=this.parsearFecha(this.fechaSeleccionada);if(isNaN(t.getTime()))return console.error("\u274C Fecha inv\xE1lida:",this.fechaSeleccionada),this._esDiaNoHabilCache={fecha:this.fechaSeleccionada,resultado:!1},!1;let e=t.getDay(),o=t.toLocaleDateString("es-PE",{weekday:"long"}),l=t.toLocaleDateString("es-PE"),u=!1;if(e===0||e===6)(!this._esDiaNoHabilCache||this._esDiaNoHabilCache.fecha!==this.fechaSeleccionada)&&console.log(`\u{1F4C5} ${l} (${o}) es d\xEDa NO H\xC1BIL (fin de semana)`),u=!0;else{let p=t.getFullYear(),w=this.obtenerFeriadosPeru(p);this.esFeriado(t,w)?((!this._esDiaNoHabilCache||this._esDiaNoHabilCache.fecha!==this.fechaSeleccionada)&&console.log(`\u{1F4C5} ${l} (${o}) es d\xEDa NO H\xC1BIL (feriado)`),u=!0):((!this._esDiaNoHabilCache||this._esDiaNoHabilCache.fecha!==this.fechaSeleccionada)&&console.log(`\u{1F4C5} ${l} (${o}) es d\xEDa H\xC1BIL`),u=!1)}return this._esDiaNoHabilCache={fecha:this.fechaSeleccionada,resultado:u},u}};h.\u0275fac=function(e){return new(e||h)(W(oe),W(ne),W(ie))},h.\u0275cmp=K({type:h,selectors:[["app-registro"]],hostBindings:function(e,o){e&1&&b("click",function(u){return o.onClickOutside(u)},Z)},decls:94,vars:38,consts:[[1,"registro-asistencia"],[1,"page-header"],[1,"page-header__left"],[1,"page-title"],[1,"page-title__icon"],[1,"page-title__text"],[1,"page-subtitle"],[1,"page-subtitle__dots"],[1,"page-subtitle__dot","page-subtitle__dot--large"],[1,"page-subtitle__dot","page-subtitle__dot--medium"],[1,"page-subtitle__dot","page-subtitle__dot--small"],[1,"page-header__right"],[1,"reloj-digital"],[1,"reloj-digital__time"],[1,"reloj-digital__hora"],[1,"reloj-digital__separador"],[1,"reloj-digital__minutos"],[1,"reloj-digital__segundos"],[1,"reloj-digital__ampm"],[1,"reloj-digital__date"],[1,"reloj-digital__dia-semana"],[1,"reloj-digital__fecha-completa"],["class","resumen-diario",4,"ngIf"],[1,"fecha-navigation"],[1,"fecha-navigation__controls"],["title","D\xEDa anterior",1,"btn-nav",3,"click"],[1,"fecha-selector"],["type","date",1,"fecha-input",3,"ngModelChange","change","ngModel"],[1,"btn","btn--sm","btn--accent",3,"click"],["title","D\xEDa siguiente",1,"btn-nav",3,"click"],[1,"fecha-navigation__actions"],[1,"btn","btn--sm","btn--outline",3,"click"],[1,"btn","btn--sm",3,"click","title"],[4,"ngIf"],["title","Asignar horarios masivamente",1,"btn","btn--sm","btn--accent",3,"click"],[1,"btn","btn--sm","btn--primary",3,"click"],[1,"filtros-bar"],[1,"filtros-bar__left"],[1,"search-box"],[1,"search-box__icon"],["type","text","placeholder","Buscar por DNI, nombre, \xE1rea...",1,"search-box__input",3,"ngModelChange","input","ngModel"],[1,"select",3,"ngModelChange","change","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["class","btn btn--ghost btn--sm",3,"click",4,"ngIf"],[1,"filtros-bar__right"],[1,"btn-icon-export",3,"click"],["src","assets/excel.png","alt","Excel",1,"btn-icon-export__icon"],[1,"btn-icon-export__text"],["src","assets/pdf.png","alt","PDF",1,"btn-icon-export__icon"],["class","tabla-container",4,"ngIf"],["class","tarjetas-container",4,"ngIf"],["class","modal",3,"click",4,"ngIf"],["class","notificacion-container",4,"ngIf"],["class","modal-overlay modal-confirmacion",3,"click",4,"ngIf"],[1,"resumen-diario"],[1,"resumen-card","resumen-card--total"],[1,"resumen-card__icon"],[1,"resumen-card__content"],[1,"resumen-card__label"],[1,"resumen-card__value"],[1,"resumen-card","resumen-card--presente"],[1,"resumen-card","resumen-card--tardanza"],[1,"resumen-card","resumen-card--falta"],[1,"resumen-card","resumen-card--permiso"],[1,"resumen-card","resumen-card--licencia"],[1,"resumen-card","resumen-card--asistencia"],[3,"value"],[1,"btn","btn--ghost","btn--sm",3,"click"],[1,"tabla-container"],[1,"tabla-scroll"],[1,"tabla"],[3,"highlight","dia-no-habil",4,"ngFor","ngForOf"],["colspan","11",1,"td-loading"],[1,"loading-spinner"],["colspan","11",1,"td-empty"],[1,"empty-state"],[1,"empty-state__icon"],[1,"empty-state__text"],[1,"td-dni"],[1,"td-trabajador"],[1,"trabajador-info"],[1,"trabajador-info__nombre"],[1,"trabajador-info__cargo"],[1,"td-area"],[1,"td-hora"],["class","retraso-badge",4,"ngIf"],[1,"td-estado"],[1,"badge",3,"ngClass"],[1,"td-tiempo"],[1,"tiempo-trabajado"],["class","horas-extras",4,"ngIf"],[1,"td-justificacion"],["class","justificacion-icon","title","Tiene justificaci\xF3n",4,"ngIf"],["class","justificacion-icon justificacion-icon--no","title","Sin justificaci\xF3n",4,"ngIf"],[1,"td-actions"],[1,"actions-menu"],["class","btn-icon btn-icon--success","title","Marcar Presente","type","button",3,"click",4,"ngIf"],["class","btn-icon btn-icon--danger","title","Marcar Falta","type","button",3,"click",4,"ngIf"],["class","btn-icon btn-icon--warning","title","Marcar Tardanza","type","button",3,"click",4,"ngIf"],["class","btn-icon btn-icon--info","title","Marcar Permiso","type","button",3,"click",4,"ngIf"],["class","btn-icon btn-icon--info","title","Marcar Licencia","type","button",3,"click",4,"ngIf"],["title","Editar Horarios","type","button",1,"btn-icon","btn-icon--primary",3,"click"],["title","Justificar","type","button",1,"btn-icon","btn-icon--primary",3,"click"],[1,"retraso-badge"],[1,"horas-extras"],["title","Tiene justificaci\xF3n",1,"justificacion-icon"],["title","Sin justificaci\xF3n",1,"justificacion-icon","justificacion-icon--no"],["title","Marcar Presente","type","button",1,"btn-icon","btn-icon--success",3,"click"],["title","Marcar Falta","type","button",1,"btn-icon","btn-icon--danger",3,"click"],["title","Marcar Tardanza","type","button",1,"btn-icon","btn-icon--warning",3,"click"],["title","Marcar Permiso","type","button",1,"btn-icon","btn-icon--info",3,"click"],["title","Marcar Licencia","type","button",1,"btn-icon","btn-icon--info",3,"click"],[1,"tarjetas-container"],["class","tarjeta-asistencia",3,"tarjeta-asistencia--falta",4,"ngFor","ngForOf"],[1,"tarjeta-asistencia"],[1,"tarjeta-asistencia__header"],[1,"tarjeta-asistencia__trabajador"],[1,"avatar"],[1,"info"],[1,"nombre"],[1,"cargo"],[1,"area"],[1,"tarjeta-asistencia__body"],[1,"marcacion-grid"],[1,"marcacion-item"],[1,"marcacion-item__label"],[1,"marcacion-item__hora"],[1,"estadisticas-grid"],[1,"stat-item"],[1,"stat-item__icon"],[1,"stat-item__content"],[1,"stat-item__label"],[1,"stat-item__value"],["class","stat-item",4,"ngIf"],["class","justificacion-info",4,"ngIf"],["class","observaciones-info",4,"ngIf"],[1,"tarjeta-asistencia__footer"],[1,"footer-actions"],["class","btn btn--sm btn--success",3,"click",4,"ngIf"],["class","btn btn--sm btn--danger",3,"click",4,"ngIf"],[1,"btn","btn--sm","btn--warning",3,"click"],[1,"tipo-marcacion"],[1,"justificacion-info"],[1,"justificacion-info__icon"],[1,"justificacion-info__content"],[1,"justificacion-info__label"],[1,"justificacion-info__texto"],[1,"observaciones-info"],[1,"observaciones-info__icon"],[1,"observaciones-info__texto"],[1,"btn","btn--sm","btn--success",3,"click"],[1,"btn","btn--sm","btn--danger",3,"click"],[1,"modal",3,"click"],[1,"modal__content",3,"click"],[1,"modal__header"],[1,"modal__title"],[1,"modal__close",3,"click"],[1,"modal__body"],[1,"modal__info"],[1,"form-grid"],[1,"form-group","form-group--full"],[1,"form-label"],["required","",1,"form-select",3,"ngModelChange","ngModel"],[1,"form-group"],["type","time",1,"form-input",3,"ngModelChange","ngModel"],["value","Presente"],["value","Tardanza"],["value","Falta"],["value","Permiso"],["value","Licencia"],["value","Vacaciones"],["value","Comision"],["placeholder","Motivo de la ausencia o tardanza...",1,"form-textarea",3,"ngModelChange","ngModel"],["rows","3","placeholder","Ingrese observaciones...",1,"form-textarea"],[1,"modal__footer"],[1,"btn","btn--ghost",3,"click"],[1,"btn","btn--primary",3,"click"],["class","modal__body",4,"ngIf"],[1,"trabajador-selected"],[1,"form-select",3,"ngModelChange","ngModel"],["rows","3","placeholder","Observaciones adicionales...",1,"form-textarea",3,"ngModelChange","ngModel"],[1,"btn","btn--accent",3,"click"],["type","file","accept",".pdf,.jpg,.png",1,"form-input"],[1,"form-hint"],["rows","4","placeholder","Detalles adicionales...",1,"form-textarea"],[1,"btn","btn--orange",3,"click"],["type","time","required","",1,"form-input",3,"ngModelChange","ngModel"],["type","number","min","0","placeholder","Minutos",1,"form-input",3,"ngModelChange","ngModel"],["rows","3","placeholder","Motivo de la tardanza...",1,"form-textarea",3,"ngModelChange","ngModel"],[1,"btn","btn--purple",3,"click"],["value","Medio d\xEDa"],["value","Todo el d\xEDa"],["value","Horas espec\xEDficas"],["class","form-group",4,"ngIf"],["type","text","placeholder","Ej: Tr\xE1mite personal, Emergencia familiar...","required","",1,"form-input",3,"ngModelChange","ngModel"],["rows","3","placeholder","Detalles adicionales...",1,"form-textarea",3,"ngModelChange","ngModel"],["type","number","min","1","max","8","placeholder","Horas",1,"form-input",3,"ngModelChange","ngModel"],[1,"btn","btn--cyan",3,"click"],["value","Con goce de haber"],["value","Sin goce de haber"],["value","Licencia m\xE9dica"],["value","Licencia por maternidad"],["value","Licencia por paternidad"],["type","number","min","1","max","365","required","",1,"form-input",3,"ngModelChange","ngModel"],["type","text","placeholder","Ej: Enfermedad, Maternidad, Paternidad...","required","",1,"form-input",3,"ngModelChange","ngModel"],["rows","3","placeholder","Detalles adicionales, n\xFAmero de documento m\xE9dico si aplica...",1,"form-textarea",3,"ngModelChange","ngModel"],[1,"notificacion-container"],[1,"notificacion",3,"ngClass"],[1,"notificacion__icon"],["class","spinner",4,"ngIf"],[1,"notificacion__content"],[1,"notificacion__titulo"],[1,"notificacion__mensaje",3,"innerHTML"],["class","notificacion__close",3,"click",4,"ngIf"],[1,"spinner"],[1,"spinner__circle"],[1,"notificacion__close",3,"click"],[1,"modal-overlay","modal-confirmacion",3,"click"],[1,"modal-confirmacion__content",3,"click"],[1,"modal-confirmacion__header",3,"ngClass"],[1,"modal-confirmacion__icon"],[1,"modal-confirmacion__titulo"],[1,"modal-confirmacion__body"],[1,"modal-confirmacion__mensaje",3,"innerHTML"],[1,"modal-confirmacion__footer"],[1,"btn",3,"click","ngClass"],[1,"modal__content","modal__content--large",3,"click"],[1,"form-select",3,"ngModelChange","change","ngModel"],["value","todos"],["value","regimen"],["class","form-group form-group--full",4,"ngIf"],[1,"form-divider"],[1,"form-section-title"],[1,"alert","alert--info",2,"margin-top","20px"],[1,"btn","btn--primary",3,"click","disabled"]],template:function(e,o){e&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3)(4,"span",4),r(5,"\u{1F4CB}"),i(),n(6,"span",5),r(7,"Registro de Asistencias"),i()(),n(8,"p",6)(9,"span",7),R(10,"span",8)(11,"span",9)(12,"span",10),i(),r(13," Control diario de asistencia del personal municipal "),i()(),n(14,"div",11)(15,"div",12)(16,"div",13)(17,"span",14),r(18),i(),n(19,"span",15),r(20,":"),i(),n(21,"span",16),r(22),i(),n(23,"span",15),r(24,":"),i(),n(25,"span",17),r(26),i(),n(27,"span",18),r(28),i()(),n(29,"div",19)(30,"span",20),r(31),i(),n(32,"span",21),r(33),i()()()()(),T(34,Me,57,7,"div",22),n(35,"div",23)(36,"div",24)(37,"button",25),b("click",function(){return o.cambiarFecha(-1)}),n(38,"span"),r(39,"\u25C0\uFE0F"),i()(),n(40,"div",26)(41,"input",27),E("ngModelChange",function(u){return P(o.fechaSeleccionada,u)||(o.fechaSeleccionada=u),u}),b("change",function(){return o.cargarAsistencias()}),i(),n(42,"button",28),b("click",function(){return o.irHoy()}),r(43," \u{1F4C5} Hoy "),i()(),n(44,"button",29),b("click",function(){return o.cambiarFecha(1)}),n(45,"span"),r(46,"\u25B6\uFE0F"),i()()(),n(47,"div",30)(48,"button",31),b("click",function(){return o.vistaActual="lista"}),r(49," \u{1F4CB} Lista "),i(),n(50,"button",31),b("click",function(){return o.vistaActual="tarjetas"}),r(51," \u{1F3B4} Tarjetas "),i(),n(52,"button",32),b("click",function(){return o.todosEstanPresentes()?o.marcarTodosFalta():o.marcarTodosPresentes()}),T(53,ve,2,0,"span",33)(54,Ce,2,0,"span",33),i(),n(55,"button",34),b("click",function(){return o.abrirModalHorariosMasivos()}),r(56," \u23F0 Asignar Horarios "),i(),n(57,"button",35),b("click",function(){return o.abrirModalRegistro()}),r(58," \u2795 Registro Manual "),i()()(),n(59,"div",36)(60,"div",37)(61,"div",38)(62,"span",39),r(63,"\u{1F50D}"),i(),n(64,"input",40),E("ngModelChange",function(u){return P(o.filtros.busqueda,u)||(o.filtros.busqueda=u),u}),b("input",function(){return o.aplicarFiltros()}),i()(),n(65,"select",41),E("ngModelChange",function(u){return P(o.filtros.estado,u)||(o.filtros.estado=u),u}),b("change",function(){return o.aplicarFiltros()}),n(66,"option",42),r(67,"Todos los estados"),i(),T(68,Se,2,2,"option",43),i(),n(69,"select",41),E("ngModelChange",function(u){return P(o.filtros.regimenLaboral,u)||(o.filtros.regimenLaboral=u),u}),b("change",function(){return o.aplicarFiltros()}),n(70,"option",42),r(71,"Todos los reg\xEDmenes"),i(),T(72,Pe,2,2,"option",43),i(),T(73,Ee,2,0,"button",44),i(),n(74,"div",45)(75,"button",46),b("click",function(){return o.exportarExcel()}),R(76,"img",47),n(77,"span",48),r(78,"Excel"),i()(),n(79,"button",46),b("click",function(){return o.exportarPDF()}),R(80,"img",49),n(81,"span",48),r(82,"PDF"),i()()()(),T(83,Ve,31,3,"div",50)(84,Ye,2,1,"div",51)(85,Ue,65,8,"div",52)(86,Xe,13,1,"div",52)(87,Qe,13,1,"div",52)(88,tt,13,1,"div",52)(89,it,13,1,"div",52)(90,rt,13,1,"div",52)(91,gt,13,10,"div",53)(92,bt,17,9,"div",54)(93,St,47,9,"div",52),i()),e&2&&(s(18),M(o.horaCompleta),s(4),M(o.minutos),s(4),M(o.segundos),s(2),M(o.ampm),s(3),M(o.diaSemana),s(2),q("",o.diaMes," de ",o.mesNombre,", ",o.anio),s(),_("ngIf",o.resumenDiario),s(7),S("ngModel",o.fechaSeleccionada),s(7),F("active",o.vistaActual==="lista"),s(2),F("active",o.vistaActual==="tarjetas"),s(2),F("btn--success",!o.todosEstanPresentes())("btn--danger",o.todosEstanPresentes()),_("title",o.todosEstanPresentes()?"Marcar a todos los trabajadores como falta":"Marcar a todos los trabajadores como presentes"),s(),_("ngIf",!o.todosEstanPresentes()),s(),_("ngIf",o.todosEstanPresentes()),s(10),S("ngModel",o.filtros.busqueda),s(),S("ngModel",o.filtros.estado),s(3),_("ngForOf",o.estados),s(),S("ngModel",o.filtros.regimenLaboral),s(3),_("ngForOf",o.regimenesLaborales),s(),_("ngIf",o.filtros.busqueda||o.filtros.estado||o.filtros.regimenLaboral),s(10),_("ngIf",o.vistaActual==="lista"),s(),_("ngIf",o.vistaActual==="tarjetas"),s(),_("ngIf",o.mostrarModalRegistro),s(),_("ngIf",o.mostrarModalEdicion),s(),_("ngIf",o.mostrarModalJustificacion),s(),_("ngIf",o.mostrarModalTardanza),s(),_("ngIf",o.mostrarModalPermiso),s(),_("ngIf",o.mostrarModalLicencia),s(),_("ngIf",o.notificacion.mostrar),s(),_("ngIf",o.confirmacion.mostrar),s(),_("ngIf",o.mostrarModalHorariosMasivos))},dependencies:[ae,Q,ee,te,ue,me,pe,re,le,de,se,_e,fe,ge,ce],styles:['@charset "UTF-8";.registro-asistencia[_ngcontent-%COMP%]{width:100%;max-width:100%;padding-bottom:40px}.page-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:20px;padding:18px 24px;background:linear-gradient(135deg,#fff,#f8fafc)!important;border-radius:10px;border:1px solid rgba(34,197,94,.15);box-shadow:0 4px 16px #00000014,0 1px 3px #0000000d,inset 0 1px #ffffffe6;position:relative;overflow:hidden}.page-header[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:3px;background:linear-gradient(90deg,#22c55e,#16a34a,#22c55e);background-size:200% 100%;animation:_ngcontent-%COMP%_shimmer 3s ease-in-out infinite}.page-header[_ngcontent-%COMP%]:after{content:"";position:absolute;top:0;left:0;width:4px;height:100%;background:linear-gradient(180deg,#22c55e,#16a34a);opacity:.6}.page-header__left[_ngcontent-%COMP%]{flex:1;position:relative;z-index:1;padding-left:12px}.page-header__right[_ngcontent-%COMP%]{flex-shrink:0;position:relative;z-index:1}[data-theme=dark][_nghost-%COMP%]   .page-header[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .page-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1e293b,#0f172a)!important;border:1px solid rgba(34,197,94,.2);box-shadow:0 4px 16px #0000004d,0 1px 3px #0003,inset 0 1px #ffffff0d}[data-theme=dark][_nghost-%COMP%]   .page-title[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .page-title[_ngcontent-%COMP%]{color:#e2e8f0!important}[data-theme=dark][_nghost-%COMP%]   .page-title__text[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .page-title__text[_ngcontent-%COMP%]{color:#e2e8f0!important}[data-theme=dark][_nghost-%COMP%]   .page-subtitle[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .page-subtitle[_ngcontent-%COMP%]{color:#94a3b8!important}[data-theme=dark][_nghost-%COMP%]   .fecha-navigation[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .fecha-navigation[_ngcontent-%COMP%], [data-theme=dark][_nghost-%COMP%]   .filtros-bar[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .filtros-bar[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--panel) 0%,#1e293b 100%)!important;border-color:var(--border);box-shadow:0 4px 16px #0000004d,0 1px 3px #0003,inset 0 1px #ffffff0d}[data-theme=dark][_nghost-%COMP%]   .tabla[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .tabla[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:#1e293b!important}[data-theme=dark][_nghost-%COMP%]   .tabla[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .tabla[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#1e293b!important;color:#e2e8f0!important;border-bottom:2px solid #334155!important;border-right:1px solid rgba(255,255,255,.05)!important}@keyframes _ngcontent-%COMP%_shimmer{0%,to{background-position:0% 50%}50%{background-position:100% 50%}}.page-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;font-size:24px;font-weight:800;margin:0 0 6px;letter-spacing:-.02em;line-height:1.2;color:#1e293b}.page-title__icon[_ngcontent-%COMP%]{font-size:28px;filter:drop-shadow(0 2px 4px rgba(34,197,94,.4));display:inline-flex;align-items:center;justify-content:center;width:40px;height:40px;background:linear-gradient(135deg,#22c55e1a,#16a34a1a);border-radius:10px;flex-shrink:0;border:1px solid rgba(34,197,94,.2)}.page-title__text[_ngcontent-%COMP%]{color:#1e293b;font-weight:800;letter-spacing:-.02em}@keyframes _ngcontent-%COMP%_iconPulse{0%,to{transform:scale(1)}50%{transform:scale(1.05)}}.page-subtitle[_ngcontent-%COMP%]{font-size:11px;color:#64748b;margin:0;font-weight:600;letter-spacing:.05em;display:flex;align-items:center;gap:10px;text-transform:uppercase;position:relative;padding-left:20px}.page-subtitle__dots[_ngcontent-%COMP%]{position:absolute;left:0;top:50%;transform:translateY(-50%);display:flex;flex-direction:column;align-items:flex-start;justify-content:center;gap:3px;width:16px;height:20px}.page-subtitle__dot[_ngcontent-%COMP%]{border-radius:50%;background:linear-gradient(135deg,#22c55e,#16a34a);box-shadow:0 0 6px #22c55e80}.page-subtitle__dot--large[_ngcontent-%COMP%]{width:8px;height:8px;margin-left:0}.page-subtitle__dot--medium[_ngcontent-%COMP%]{width:5px;height:5px;margin-left:3px}.page-subtitle__dot--small[_ngcontent-%COMP%]{width:3px;height:3px;margin-left:6px}@keyframes _ngcontent-%COMP%_pulse{0%,to{transform:scale(1);opacity:1}50%{transform:scale(1.2);opacity:.8}}.reloj-digital[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-end;gap:6px;padding:14px 20px;background:linear-gradient(135deg,#22c55e,#16a34a,#15803d);border-radius:10px;box-shadow:0 6px 24px #22c55e66,0 3px 12px #22c55e40,inset 0 1px #fff3,inset 0 -1px #0000001a;position:relative;overflow:hidden;border:2px solid rgba(255,255,255,.15);min-width:220px}.reloj-digital[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background:radial-gradient(circle at 50% 50%,rgba(255,255,255,.08) 0%,transparent 70%);pointer-events:none;animation:_ngcontent-%COMP%_subtleGlow 3s ease-in-out infinite}.reloj-digital[_ngcontent-%COMP%]:after{content:"";position:absolute;inset:0;background:radial-gradient(circle at 30% 30%,rgba(255,255,255,.06) 0%,transparent 50%);pointer-events:none}.reloj-digital__time[_ngcontent-%COMP%]{display:flex;align-items:baseline;gap:4px;position:relative;z-index:2}.reloj-digital__hora[_ngcontent-%COMP%]{font-size:32px;font-weight:800;color:#fff;font-family:SF Mono,Monaco,Courier New,monospace;letter-spacing:1.5px;text-shadow:0 2px 8px rgba(0,0,0,.35),0 0 15px rgba(255,255,255,.15),0 1px 2px rgba(0,0,0,.4);position:relative;line-height:1}.reloj-digital__separador[_ngcontent-%COMP%]{font-size:32px;font-weight:800;color:#ffffffe6;font-family:SF Mono,Monaco,Courier New,monospace;text-shadow:0 2px 6px rgba(0,0,0,.25);line-height:1}.reloj-digital__minutos[_ngcontent-%COMP%]{font-size:32px;font-weight:800;color:#fff;font-family:SF Mono,Monaco,Courier New,monospace;letter-spacing:1.5px;text-shadow:0 2px 8px rgba(0,0,0,.35),0 0 15px rgba(255,255,255,.15),0 1px 2px rgba(0,0,0,.4);line-height:1}.reloj-digital__segundos[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:#fffffff2;font-family:SF Mono,Monaco,Courier New,monospace;letter-spacing:1px;text-shadow:0 2px 6px rgba(0,0,0,.25),0 0 12px rgba(255,255,255,.12);line-height:1}.reloj-digital__ampm[_ngcontent-%COMP%]{font-size:12px;font-weight:700;color:#ffffffe6;font-family:SF Mono,Monaco,Courier New,monospace;letter-spacing:.5px;text-transform:lowercase;margin-left:6px;text-shadow:0 1px 3px rgba(0,0,0,.25);line-height:1;padding-top:6px}.reloj-digital__date[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-end;gap:2px;position:relative;z-index:2}.reloj-digital__dia-semana[_ngcontent-%COMP%]{font-size:11px;font-weight:700;color:#fffffff2;text-transform:uppercase;letter-spacing:1px;text-shadow:0 1px 3px rgba(0,0,0,.25);font-family:Inter,-apple-system,BlinkMacSystemFont,sans-serif}.reloj-digital__fecha-completa[_ngcontent-%COMP%]{font-size:10px;font-weight:600;color:#ffffffd9;text-shadow:0 1px 2px rgba(0,0,0,.2);font-family:Inter,-apple-system,BlinkMacSystemFont,sans-serif;letter-spacing:.3px}@keyframes _ngcontent-%COMP%_subtleGlow{0%,to{opacity:.6;transform:scale(1)}50%{opacity:.8;transform:scale(1.05)}}@keyframes _ngcontent-%COMP%_blink{0%,50%{opacity:1}51%,to{opacity:.3}}.fecha-navigation[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:20px;padding:24px;background:linear-gradient(135deg,#fff,#f8fafc)!important;border-radius:10px;border:1px solid rgba(34,197,94,.15);box-shadow:0 4px 16px #00000014,0 1px 3px #0000000d,inset 0 1px #ffffffe6;margin-bottom:32px;flex-wrap:wrap;position:relative;overflow:hidden}.fecha-navigation[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:3px;background:linear-gradient(90deg,#22c55e,#16a34a,#22c55e);background-size:200% 100%;animation:_ngcontent-%COMP%_shimmer 3s ease-in-out infinite}.fecha-navigation__controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}.fecha-navigation__actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.btn-nav[_ngcontent-%COMP%]{width:44px;height:44px;display:flex;align-items:center;justify-content:center;border-radius:12px;border:1.5px solid var(--border);background:var(--panel-2);cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);font-size:18px;box-shadow:0 2px 8px #0000001a}.btn-nav[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,var(--accent) 0%,#16a34a 100%);border-color:var(--accent);color:#fff;transform:scale(1.1) translateY(-2px);box-shadow:0 6px 16px #22c55e66,inset 0 1px #fff3}.btn-nav[_ngcontent-%COMP%]:active{transform:scale(.95)}.fecha-selector[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.fecha-input[_ngcontent-%COMP%]{padding:10px 16px;border:1px solid var(--border);border-radius:10px;background:var(--panel-2);color:var(--text-1);font-size:14px;font-weight:600;outline:none;cursor:pointer;transition:all .2s ease}.fecha-input[_ngcontent-%COMP%]:focus{border-color:var(--accent);box-shadow:0 0 0 3px #22c55e1a}.resumen-diario[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:20px;margin-bottom:32px}.resumen-card[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;padding:24px;border-radius:16px;border:2px solid;transition:all .4s cubic-bezier(.4,0,.2,1);position:relative;overflow:hidden;box-shadow:0 4px 16px #0000001a,inset 0 1px #ffffff0d}.resumen-card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.1),transparent);transition:left .5s ease}.resumen-card[_ngcontent-%COMP%]:hover{transform:translateY(-6px) scale(1.02);box-shadow:0 12px 32px #0003,inset 0 1px #ffffff1a}.resumen-card[_ngcontent-%COMP%]:hover:before{left:100%}.resumen-card[_ngcontent-%COMP%]:hover   .resumen-card__icon[_ngcontent-%COMP%]{transform:scale(1.15) rotate(5deg)}.resumen-card__icon[_ngcontent-%COMP%]{font-size:42px;transition:all .4s cubic-bezier(.4,0,.2,1);filter:drop-shadow(0 2px 8px rgba(0,0,0,.2));animation:_ngcontent-%COMP%_cardIconFloat 3s ease-in-out infinite}.resumen-card__content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px;flex:1}.resumen-card__label[_ngcontent-%COMP%]{font-size:11px;font-weight:700;color:var(--text-2);text-transform:uppercase;letter-spacing:1px;opacity:.8}.resumen-card__value[_ngcontent-%COMP%]{font-size:32px;font-weight:900;line-height:1;text-shadow:0 2px 8px rgba(0,0,0,.2)}.resumen-card--total[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f626,#3b82f60d);border-color:#3b82f666}.resumen-card--total[_ngcontent-%COMP%]   .resumen-card__value[_ngcontent-%COMP%]{color:#60a5fa;text-shadow:0 0 20px rgba(59,130,246,.5)}.resumen-card--presente[_ngcontent-%COMP%]{background:linear-gradient(135deg,#22c55e26,#22c55e0d);border-color:#22c55e66}.resumen-card--presente[_ngcontent-%COMP%]   .resumen-card__value[_ngcontent-%COMP%]{color:var(--accent);text-shadow:0 0 20px rgba(34,197,94,.5)}.resumen-card--tardanza[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f59e0b26,#f59e0b0d);border-color:#f59e0b66}.resumen-card--tardanza[_ngcontent-%COMP%]   .resumen-card__value[_ngcontent-%COMP%]{color:#fbbf24;text-shadow:0 0 20px rgba(245,158,11,.5)}.resumen-card--falta[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ef444426,#ef44440d);border-color:#ef444466}.resumen-card--falta[_ngcontent-%COMP%]   .resumen-card__value[_ngcontent-%COMP%]{color:#f87171;text-shadow:0 0 20px rgba(239,68,68,.5)}.resumen-card--permiso[_ngcontent-%COMP%]{background:linear-gradient(135deg,#a855f726,#a855f70d);border-color:#a855f766}.resumen-card--permiso[_ngcontent-%COMP%]   .resumen-card__value[_ngcontent-%COMP%]{color:#c084fc;text-shadow:0 0 20px rgba(168,85,247,.5)}.resumen-card--licencia[_ngcontent-%COMP%]{background:linear-gradient(135deg,#0ea5e926,#0ea5e90d);border-color:#0ea5e966}.resumen-card--licencia[_ngcontent-%COMP%]   .resumen-card__value[_ngcontent-%COMP%]{color:#38bdf8;text-shadow:0 0 20px rgba(14,165,233,.5)}.resumen-card--asistencia[_ngcontent-%COMP%]{background:linear-gradient(135deg,#22c55e26,#22c55e0d);border-color:#22c55e66}.resumen-card--asistencia[_ngcontent-%COMP%]   .resumen-card__value[_ngcontent-%COMP%]{color:var(--accent);font-size:32px;text-shadow:0 0 20px rgba(34,197,94,.5)}@keyframes _ngcontent-%COMP%_cardIconFloat{0%,to{transform:translateY(0)}50%{transform:translateY(-4px)}}.filtros-bar[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:16px;padding:20px 24px;background:linear-gradient(135deg,#fff,#f8fafc)!important;border-radius:8px;border:1px solid var(--border);box-shadow:0 4px 16px #00000014,0 1px 3px #0000000d,inset 0 1px #ffffffe6;margin-bottom:24px;flex-wrap:wrap;position:relative;overflow:hidden}.filtros-bar__left[_ngcontent-%COMP%], .filtros-bar__right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;flex-wrap:wrap}.search-box[_ngcontent-%COMP%]{position:relative;min-width:300px}.search-box__icon[_ngcontent-%COMP%]{position:absolute;left:14px;top:50%;transform:translateY(-50%);font-size:18px;opacity:.5;pointer-events:none}.search-box__input[_ngcontent-%COMP%]{width:100%;padding:10px 14px 10px 44px;border:1px solid var(--border);border-radius:10px;background:var(--panel-2);color:var(--text-1);font-size:14px;outline:none;transition:all .2s ease}.search-box__input[_ngcontent-%COMP%]:focus{border-color:var(--accent);box-shadow:0 0 0 3px #22c55e1a}.select[_ngcontent-%COMP%]{padding:10px 14px;border:1px solid var(--border);border-radius:10px;background:var(--panel-2);color:var(--text-1);font-size:14px;outline:none;cursor:pointer;transition:all .2s ease}.select[_ngcontent-%COMP%]:focus{border-color:var(--accent);box-shadow:0 0 0 3px #22c55e1a}.tabla-container[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--panel-1) 0%,var(--panel-2) 100%);border-radius:4px;border:1px solid rgba(34,197,94,.15);overflow:visible;margin-bottom:20px;box-shadow:0 8px 32px #00000014,0 0 0 1px #ffffff0d inset;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);position:relative;z-index:1}.tabla-scroll[_ngcontent-%COMP%]{overflow-x:auto}.tabla[_ngcontent-%COMP%]{width:100%;border-collapse:separate;border-spacing:0;font-size:14px;border-radius:4px;overflow:hidden}.tabla[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:#059669!important;border-bottom:2px solid #047857!important}.tabla[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:16px 20px!important;text-align:left;font-size:12px!important;font-weight:700!important;color:#fff!important;text-transform:uppercase!important;letter-spacing:1px!important;white-space:nowrap;border-right:1px solid rgba(4,120,87,.3)!important;box-shadow:0 1px 3px #04785733!important}.tabla[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{border-left:none!important;border-top-left-radius:4px!important}.tabla[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{border-right:none!important;border-top-right-radius:4px!important}.tabla[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid var(--line-soft);transition:background .15s ease}.tabla[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:var(--panel-2)}.tabla[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.highlight[_ngcontent-%COMP%]{background:#ef44440d}.tabla[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child{border-bottom:none}.tabla[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]:first-child{border-bottom-left-radius:4px}.tabla[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]:last-child{border-bottom-right-radius:4px}.tabla[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:14px 12px;color:var(--text-1)}.td-loading[_ngcontent-%COMP%], .td-empty[_ngcontent-%COMP%]{text-align:center;padding:60px 20px}.loading-spinner[_ngcontent-%COMP%]{font-size:16px;color:var(--text-2)}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:12px}.empty-state__icon[_ngcontent-%COMP%]{font-size:48px;opacity:.5}.empty-state__text[_ngcontent-%COMP%]{font-size:16px;color:var(--text-2);margin:0}.trabajador-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.trabajador-info__nombre[_ngcontent-%COMP%]{font-weight:600;color:var(--text-1)}.trabajador-info__cargo[_ngcontent-%COMP%]{font-size:12px;color:var(--text-2)}.td-hora[_ngcontent-%COMP%]{font-family:Courier New,monospace;font-weight:600}.td-hora--retraso[_ngcontent-%COMP%]{color:#f59e0b}.retraso-badge[_ngcontent-%COMP%]{display:inline-block;margin-left:6px;padding:2px 6px;background:#ef444426;border-radius:4px;font-size:11px;color:#ef4444;font-weight:700}.tiempo-trabajado[_ngcontent-%COMP%]{font-weight:600;color:var(--text-1)}.horas-extras[_ngcontent-%COMP%]{display:block;font-size:11px;color:var(--accent);font-weight:600;margin-top:4px}.justificacion-icon[_ngcontent-%COMP%]{font-size:18px}.justificacion-icon--no[_ngcontent-%COMP%]{opacity:.5}.actions-menu[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:6px;position:relative;z-index:1;flex-wrap:wrap}.actions-dropdown[_ngcontent-%COMP%]{position:relative;display:inline-block;z-index:1}.actions-dropdown--open[_ngcontent-%COMP%]{z-index:999999!important;position:relative!important}.actions-dropdown--open[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{display:block!important;opacity:1!important;visibility:visible!important;transform:translateY(0)!important;pointer-events:all!important;z-index:999999!important;position:fixed!important;background:#111827!important;backdrop-filter:none!important;-webkit-backdrop-filter:none!important}[data-theme=light][_nghost-%COMP%]   .actions-dropdown--open[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%], [data-theme=light]   [_nghost-%COMP%]   .actions-dropdown--open[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{background:#fff!important}.dropdown-menu[_ngcontent-%COMP%]{position:fixed!important;inset:auto!important;min-width:200px;background:#111827!important;border:2px solid #1f2937;border-radius:12px;box-shadow:0 10px 40px #000,0 0 0 1px #1f2937 inset;z-index:999999!important;display:none;opacity:0;visibility:hidden;transform:translateY(-10px);transition:opacity .2s ease,transform .2s ease,visibility .2s ease;pointer-events:none;overflow:hidden;backdrop-filter:none!important;-webkit-backdrop-filter:none!important;-webkit-opacity:1!important;-moz-opacity:1!important;opacity:1!important}.dropdown-menu[_ngcontent-%COMP%]:before{content:"";position:absolute;top:-2px;left:0;right:0;height:2px;background:linear-gradient(90deg,var(--accent) 0%,var(--accent-light) 100%);z-index:1;pointer-events:none}[data-theme=light][_nghost-%COMP%]   .dropdown-menu[_ngcontent-%COMP%], [data-theme=light]   [_nghost-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{background:#fff!important;border-color:#e7e5e4;box-shadow:0 10px 40px #000,0 0 0 1px #e7e5e4 inset}.dropdown-item[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;gap:12px;padding:12px 16px;background:#0f1b2d!important;border:none;color:#e5e7eb!important;font-size:14px;font-weight:600;cursor:pointer!important;transition:all .2s ease;text-align:left;position:relative;z-index:100001!important;pointer-events:auto!important;user-select:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-webkit-opacity:1!important;-moz-opacity:1!important;opacity:1!important;background-color:#0f1b2d!important}.dropdown-item[_ngcontent-%COMP%]:hover{background:#111827!important;background-color:#111827!important;color:#22c55e!important;transform:translate(4px);box-shadow:0 2px 8px #000}.dropdown-item[_ngcontent-%COMP%]:active{background:#1f2937!important;background-color:#1f2937!important;transform:translate(2px);box-shadow:0 1px 4px #000}.dropdown-item[_ngcontent-%COMP%]:focus{outline:2px solid var(--accent);outline-offset:-2px;background:#111827!important;background-color:#111827!important}.dropdown-item[_ngcontent-%COMP%]:first-child{border-radius:12px 12px 0 0}.dropdown-item[_ngcontent-%COMP%]:last-child{border-radius:0 0 12px 12px}.dropdown-item__icon[_ngcontent-%COMP%]{font-size:18px;flex-shrink:0;pointer-events:none;width:24px;text-align:center;-webkit-user-select:none;user-select:none;opacity:1!important;-webkit-opacity:1!important;-moz-opacity:1!important;color:inherit!important;display:inline-block}.dropdown-item__text[_ngcontent-%COMP%]{flex:1;pointer-events:none;-webkit-user-select:none;user-select:none;opacity:1!important;-webkit-opacity:1!important;-moz-opacity:1!important;font-weight:600;color:inherit!important;display:block;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}[data-theme=light][_nghost-%COMP%]   .dropdown-item[_ngcontent-%COMP%], [data-theme=light]   [_nghost-%COMP%]   .dropdown-item[_ngcontent-%COMP%]{background:#fff!important;background-color:#fff!important;color:#0c0a09!important}[data-theme=light][_nghost-%COMP%]   .dropdown-item[_ngcontent-%COMP%]:hover, [data-theme=light]   [_nghost-%COMP%]   .dropdown-item[_ngcontent-%COMP%]:hover{background:#f5f5f4!important;background-color:#f5f5f4!important;color:#059669!important}[data-theme=light][_nghost-%COMP%]   .dropdown-item[_ngcontent-%COMP%]:active, [data-theme=light]   [_nghost-%COMP%]   .dropdown-item[_ngcontent-%COMP%]:active{background:#e7e5e4!important;background-color:#e7e5e4!important}[data-theme=light][_nghost-%COMP%]   .dropdown-item[_ngcontent-%COMP%]:focus, [data-theme=light]   [_nghost-%COMP%]   .dropdown-item[_ngcontent-%COMP%]:focus{background:#f5f5f4!important;background-color:#f5f5f4!important}.dropdown-divider[_ngcontent-%COMP%]{height:1px;background:var(--border);margin:4px 0;opacity:.5}.notificacion-container[_ngcontent-%COMP%]{position:fixed;top:20px;right:20px;z-index:10000;max-width:400px;width:100%}.notificacion[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:16px;padding:20px 24px;background:var(--panel);border:2px solid var(--border);border-radius:16px;box-shadow:0 20px 60px #0006,0 0 0 1px #ffffff0d inset;backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);animation:_ngcontent-%COMP%_slideInRight .4s cubic-bezier(.4,0,.2,1);position:relative;overflow:hidden}.notificacion[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:4px;height:100%;background:var(--accent);transition:all .3s ease}.notificacion--success[_ngcontent-%COMP%]{border-color:#22c55e4d}.notificacion--success[_ngcontent-%COMP%]:before{background:linear-gradient(180deg,#22c55e,#16a34a)}.notificacion--error[_ngcontent-%COMP%]{border-color:#ef44444d}.notificacion--error[_ngcontent-%COMP%]:before{background:linear-gradient(180deg,#ef4444,#dc2626)}.notificacion--warning[_ngcontent-%COMP%]{border-color:#f59e0b4d}.notificacion--warning[_ngcontent-%COMP%]:before{background:linear-gradient(180deg,#f59e0b,#d97706)}.notificacion--info[_ngcontent-%COMP%]{border-color:#3b82f64d}.notificacion--info[_ngcontent-%COMP%]:before{background:linear-gradient(180deg,#3b82f6,#2563eb)}.notificacion--loading[_ngcontent-%COMP%]{border-color:#8b5cf64d}.notificacion--loading[_ngcontent-%COMP%]:before{background:linear-gradient(180deg,#8b5cf6,#7c3aed)}.notificacion__icon[_ngcontent-%COMP%]{font-size:24px;flex-shrink:0;width:32px;height:32px;display:flex;align-items:center;justify-content:center;border-radius:10px;background:var(--bg-2)}.notificacion__content[_ngcontent-%COMP%]{flex:1;min-width:0}.notificacion__titulo[_ngcontent-%COMP%]{font-size:16px;font-weight:700;color:var(--text-1);margin-bottom:4px;line-height:1.4}.notificacion__mensaje[_ngcontent-%COMP%]{font-size:14px;color:var(--text-2);line-height:1.5}.notificacion__palabra-destacada[_ngcontent-%COMP%]{font-weight:800;padding:2px 6px;border-radius:6px;display:inline-block}.notificacion__palabra-destacada--rojo[_ngcontent-%COMP%]{color:#ef4444!important;background:#ef444433!important;text-shadow:0 0 10px rgba(239,68,68,.6);font-weight:900;letter-spacing:.5px}.notificacion__close[_ngcontent-%COMP%]{background:transparent;border:none;color:var(--text-3);font-size:18px;cursor:pointer;padding:4px;border-radius:6px;transition:all .2s ease;flex-shrink:0}.notificacion__close[_ngcontent-%COMP%]:hover{background:var(--bg-2);color:var(--text-1);transform:rotate(90deg)}.spinner[_ngcontent-%COMP%]{width:24px;height:24px;position:relative}.spinner__circle[_ngcontent-%COMP%]{width:100%;height:100%;border:3px solid rgba(139,92,246,.2);border-top-color:#8b5cf6;border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}@keyframes _ngcontent-%COMP%_slideInRight{0%{opacity:0;transform:translate(100%)}to{opacity:1;transform:translate(0)}}.modal-overlay[_ngcontent-%COMP%]{position:fixed!important;inset:0!important;width:100vw!important;height:100vh!important;min-width:100vw!important;min-height:100vh!important;max-width:100vw!important;max-height:100vh!important;margin:0!important;padding:20px!important;background:#000000b3!important;backdrop-filter:blur(8px)!important;-webkit-backdrop-filter:blur(8px)!important;z-index:999999!important;display:flex!important;align-items:center!important;justify-content:center!important;pointer-events:all!important;box-sizing:border-box!important}.modal-confirmacion[_ngcontent-%COMP%]{backdrop-filter:blur(8px);-webkit-backdrop-filter:blur(8px);background:#0009;position:fixed;inset:0;z-index:10000;display:flex;align-items:center;justify-content:center;padding:20px}.modal-confirmacion__content[_ngcontent-%COMP%]{max-width:450px;width:90%;background:var(--panel);border:2px solid var(--border);border-radius:20px;box-shadow:0 25px 80px #00000080,0 0 0 1px #ffffff0d inset;overflow:hidden;animation:_ngcontent-%COMP%_scaleIn .3s cubic-bezier(.4,0,.2,1)}.modal-confirmacion__header[_ngcontent-%COMP%]{padding:24px 28px;display:flex;align-items:center;gap:16px;border-bottom:2px solid var(--border)}.modal-confirmacion__header--success[_ngcontent-%COMP%]{background:linear-gradient(135deg,#22c55e1a,#22c55e0d);border-bottom-color:#22c55e4d}.modal-confirmacion__header--danger[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ef44441a,#ef44440d);border-bottom-color:#ef44444d}.modal-confirmacion__header--warning[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f59e0b1a,#f59e0b0d);border-bottom-color:#f59e0b4d}.modal-confirmacion__header--info[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f61a,#3b82f60d);border-bottom-color:#3b82f64d}.modal-confirmacion__icon[_ngcontent-%COMP%]{font-size:32px;width:48px;height:48px;display:flex;align-items:center;justify-content:center;border-radius:12px;background:var(--bg-2);flex-shrink:0}.modal-confirmacion__titulo[_ngcontent-%COMP%]{font-size:20px;font-weight:800;color:var(--text-1);margin:0;flex:1}.modal-confirmacion__body[_ngcontent-%COMP%]{padding:24px 28px}.modal-confirmacion__mensaje[_ngcontent-%COMP%]{font-size:15px;color:var(--text-2);line-height:1.6;margin:0}.modal-confirmacion__mensaje[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:var(--text-1);font-weight:700}.modal-confirmacion__footer[_ngcontent-%COMP%]{padding:20px 28px;display:flex;justify-content:flex-end;gap:12px;border-top:2px solid var(--border);background:var(--bg-2)}@keyframes _ngcontent-%COMP%_scaleIn{0%{opacity:0;transform:scale(.9) translateY(-20px)}to{opacity:1;transform:scale(1) translateY(0)}}.btn-icon[_ngcontent-%COMP%]{width:36px;height:36px;display:flex;align-items:center;justify-content:center;z-index:1;border-radius:10px;border:none;background:transparent;cursor:pointer;font-size:18px;transition:all .3s cubic-bezier(.4,0,.2,1);position:relative;overflow:hidden;box-shadow:0 2px 6px #0000001a}.btn-icon[_ngcontent-%COMP%]:before{content:"";position:absolute;top:50%;left:50%;width:0;height:0;border-radius:50%;background:#fff3;transform:translate(-50%,-50%);transition:width .4s ease,height .4s ease}.btn-icon[_ngcontent-%COMP%]:hover{background:var(--panel-2);transform:scale(1.15) translateY(-2px);box-shadow:0 4px 12px #0003}.btn-icon[_ngcontent-%COMP%]:hover:before{width:100px;height:100px}.btn-icon--success[_ngcontent-%COMP%]{background:linear-gradient(135deg,#22c55e33,#22c55e1a);color:#22c55e;border:1px solid rgba(34,197,94,.3)}.btn-icon--success[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#22c55e4d,#22c55e33);box-shadow:0 6px 16px #22c55e66;color:#16a34a}.btn-icon--danger[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ef444433,#ef44441a);color:#ef4444;border:1px solid rgba(239,68,68,.3)}.btn-icon--danger[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#ef44444d,#ef444433);box-shadow:0 6px 16px #ef444466;color:#dc2626}.btn-icon--primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f633,#3b82f61a);color:#3b82f6;border:1px solid rgba(59,130,246,.3)}.btn-icon--primary[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#3b82f64d,#3b82f633);box-shadow:0 6px 16px #3b82f666;color:#2563eb}.btn-icon--warning[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f59e0b33,#f59e0b1a);color:#f59e0b;border:1px solid rgba(245,158,11,.3)}.btn-icon--warning[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#f59e0b4d,#f59e0b33);box-shadow:0 6px 16px #f59e0b66;color:#d97706}.btn-icon--info[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f633,#3b82f61a);color:#3b82f6;border:1px solid rgba(59,130,246,.3)}.btn-icon--info[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#3b82f64d,#3b82f633);box-shadow:0 6px 16px #3b82f666;color:#2563eb}.btn-icon--orange[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f9731633,#f973161a);color:#f97316;border:1px solid rgba(249,115,22,.3)}.btn-icon--orange[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#f973164d,#f9731633);box-shadow:0 6px 16px #f9731666;color:#ea580c}.btn-icon--purple[_ngcontent-%COMP%]{background:linear-gradient(135deg,#a855f733,#a855f71a);color:#a855f7;border:1px solid rgba(168,85,247,.3)}.btn-icon--purple[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#a855f74d,#a855f733);box-shadow:0 6px 16px #a855f766;color:#9333ea}.btn-icon--cyan[_ngcontent-%COMP%]{background:linear-gradient(135deg,#06b6d433,#06b6d41a);color:#06b6d4;border:1px solid rgba(6,182,212,.3)}.btn-icon--cyan[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#06b6d44d,#06b6d433);box-shadow:0 6px 16px #06b6d466;color:#0891b2}.badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:4px;padding:4px 10px;border-radius:6px;font-size:12px;font-weight:600;white-space:nowrap}.badge--presente[_ngcontent-%COMP%]{background:#22c55e26;color:#22c55e;border:1px solid rgba(34,197,94,.3)}.badge--tardanza[_ngcontent-%COMP%]{background:#f59e0b26;color:#f59e0b;border:1px solid rgba(245,158,11,.3)}.badge--falta[_ngcontent-%COMP%]{background:#ef444433!important;color:#ef4444!important;border:1px solid rgba(239,68,68,.4)!important;font-weight:700;box-shadow:0 0 8px #ef444433}.badge--permiso[_ngcontent-%COMP%]{background:#a855f726;color:#a855f7;border:1px solid rgba(168,85,247,.3)}.badge--licencia[_ngcontent-%COMP%]{background:#0ea5e926;color:#0ea5e9;border:1px solid rgba(14,165,233,.3)}.badge--vacaciones[_ngcontent-%COMP%]{background:#3b82f626;color:#3b82f6;border:1px solid rgba(59,130,246,.3)}.badge--comision[_ngcontent-%COMP%]{background:#8b5cf626;color:#8b5cf6;border:1px solid rgba(139,92,246,.3)}.tarjetas-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(350px,1fr));gap:24px;margin-bottom:32px}.tarjeta-asistencia[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--panel-1) 0%,var(--panel-2) 100%);border:1px solid var(--border);border-radius:16px;padding:24px;transition:all .4s cubic-bezier(.4,0,.2,1);position:relative;overflow:hidden;box-shadow:0 4px 16px #0000001a,inset 0 1px #ffffff0d}.tarjeta-asistencia[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:3px;background:linear-gradient(90deg,transparent,rgba(34,197,94,.4),transparent);transform:scaleX(0);transition:transform .4s ease}.tarjeta-asistencia[_ngcontent-%COMP%]:hover{transform:translateY(-6px) scale(1.02);box-shadow:0 12px 32px #0003,inset 0 1px #ffffff1a;border-color:#22c55e4d}.tarjeta-asistencia[_ngcontent-%COMP%]:hover:before{transform:scaleX(1)}.tarjeta-asistencia--falta[_ngcontent-%COMP%]{border-color:#ef444480;background:linear-gradient(135deg,#ef444414,#ef444408)}.tarjeta-asistencia--falta[_ngcontent-%COMP%]:before{background:linear-gradient(90deg,transparent,rgba(239,68,68,.4),transparent)}.tarjeta-asistencia__header[_ngcontent-%COMP%]{display:flex;align-items:flex-start;justify-content:space-between;gap:16px;margin-bottom:20px;padding-bottom:16px;border-bottom:1px solid var(--line-soft)}.tarjeta-asistencia__trabajador[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;flex:1}.tarjeta-asistencia__body[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.tarjeta-asistencia__footer[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-top:16px;padding-top:16px;border-top:1px solid var(--line-soft);flex-wrap:wrap}.footer-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;flex-wrap:wrap}.avatar[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:50%;background:linear-gradient(135deg,var(--accent) 0%,#16a34a 100%);color:#fff;display:flex;align-items:center;justify-content:center;font-size:20px;font-weight:700}.info[_ngcontent-%COMP%]{flex:1}.info[_ngcontent-%COMP%]   .nombre[_ngcontent-%COMP%]{font-size:15px;font-weight:700;color:var(--text-1);margin:0 0 4px}.info[_ngcontent-%COMP%]   .cargo[_ngcontent-%COMP%], .info[_ngcontent-%COMP%]   .area[_ngcontent-%COMP%]{font-size:12px;color:var(--text-2);margin:0}.marcacion-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}.marcacion-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px;padding:12px;background:var(--panel-2);border-radius:8px}.marcacion-item__label[_ngcontent-%COMP%]{font-size:11px;color:var(--text-2);font-weight:600}.marcacion-item__hora[_ngcontent-%COMP%]{font-size:18px;font-weight:700;color:var(--text-1);font-family:Courier New,monospace}.estadisticas-grid[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.stat-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:10px 12px;background:#22c55e0d;border:1px solid rgba(34,197,94,.15);border-radius:8px}.stat-item__icon[_ngcontent-%COMP%]{font-size:20px}.stat-item__content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px}.stat-item__label[_ngcontent-%COMP%]{font-size:11px;color:var(--text-2);font-weight:600}.stat-item__value[_ngcontent-%COMP%]{font-size:16px;font-weight:700;color:var(--text-1)}.justificacion-info[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:12px;padding:12px;background:#22c55e14;border:1px solid rgba(34,197,94,.2);border-radius:8px}.justificacion-info__icon[_ngcontent-%COMP%]{font-size:18px;flex-shrink:0}.justificacion-info__content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.justificacion-info__label[_ngcontent-%COMP%]{font-size:11px;color:var(--text-2);font-weight:600}.justificacion-info__texto[_ngcontent-%COMP%]{font-size:13px;color:var(--text-1)}.observaciones-info[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:10px;padding:10px 12px;background:var(--panel-2);border-radius:8px;font-size:13px;color:var(--text-2)}.observaciones-info__icon[_ngcontent-%COMP%]{font-size:16px}.tipo-marcacion[_ngcontent-%COMP%]{font-size:11px;color:var(--text-2);font-weight:600;text-transform:uppercase;letter-spacing:.5px}.form-divider[_ngcontent-%COMP%]{height:1px;background:var(--border);margin:24px 0;opacity:.5}.form-section-title[_ngcontent-%COMP%]{font-size:16px;font-weight:700;color:var(--text-1);margin:0 0 16px;display:flex;align-items:center;gap:8px}.alert[_ngcontent-%COMP%]{padding:16px 20px;border-radius:12px;border:2px solid;margin:16px 0}.alert--info[_ngcontent-%COMP%]{background:#3b82f61a;border-color:#3b82f64d;color:var(--text-1)}.alert--info[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#3b82f6;font-weight:700}.alert--info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:8px 0 0;line-height:1.5;color:var(--text-2)}.modal__content--large[_ngcontent-%COMP%]{max-width:600px;width:90%}.modal[_ngcontent-%COMP%]{position:fixed;inset:0;background:#0b1220d9;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);display:flex;align-items:center;justify-content:center;z-index:1000;padding:20px;animation:_ngcontent-%COMP%_fadeIn .2s ease}.modal__content[_ngcontent-%COMP%]{background:var(--panel);border:1px solid var(--border);border-radius:16px;max-width:600px;width:100%;max-height:90vh;overflow-y:auto;box-shadow:0 20px 60px #0000004d;animation:_ngcontent-%COMP%_slideUp .3s ease}.modal__header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:16px;padding:24px;border-bottom:1px solid var(--border)}.modal__title[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:var(--text-1);margin:0}.modal__close[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:8px;border:none;background:transparent;cursor:pointer;font-size:18px;transition:all .2s ease}.modal__close[_ngcontent-%COMP%]:hover{background:#ef44441a;color:#ef4444}.modal__body[_ngcontent-%COMP%]{padding:24px}.modal__info[_ngcontent-%COMP%]{font-size:14px;color:var(--text-2);margin:0 0 20px}.modal__footer[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end;gap:12px;padding:20px 24px;border-top:1px solid var(--border)}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.trabajador-selected[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:16px;background:var(--panel-2);border-radius:10px;margin-bottom:24px}.trabajador-selected[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{flex:1}.trabajador-selected[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:16px;font-weight:700;color:var(--text-1);margin:0 0 4px}.trabajador-selected[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:13px;color:var(--text-2);margin:0}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:16px}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px}.form-group--full[_ngcontent-%COMP%]{grid-column:1/-1}.form-label[_ngcontent-%COMP%]{font-size:13px;font-weight:600;color:var(--text-1)}.form-input[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%], .form-textarea[_ngcontent-%COMP%]{padding:10px 12px;border:1px solid var(--border);border-radius:8px;background:var(--panel-2);color:var(--text-1);font-size:14px;outline:none;transition:all .2s ease}.form-input[_ngcontent-%COMP%]:focus, .form-select[_ngcontent-%COMP%]:focus, .form-textarea[_ngcontent-%COMP%]:focus{border-color:var(--accent);box-shadow:0 0 0 3px #22c55e1a}.form-textarea[_ngcontent-%COMP%]{resize:vertical;font-family:inherit}.form-hint[_ngcontent-%COMP%]{font-size:12px;color:var(--text-2);font-style:italic;margin-top:4px}.btn--orange[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f97316,#ea580c);color:#fff}.btn--orange[_ngcontent-%COMP%]:hover{box-shadow:0 0 20px #f9731666;transform:translateY(-1px)}.btn--purple[_ngcontent-%COMP%]{background:linear-gradient(135deg,#a855f7,#9333ea);color:#fff}.btn--purple[_ngcontent-%COMP%]:hover{box-shadow:0 0 20px #a855f766;transform:translateY(-1px)}.btn--cyan[_ngcontent-%COMP%]{background:linear-gradient(135deg,#06b6d4,#0891b2);color:#fff}.btn--cyan[_ngcontent-%COMP%]:hover{box-shadow:0 0 20px #06b6d466;transform:translateY(-1px)}.btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;gap:8px;padding:10px 16px;border-radius:10px;font-weight:600;font-size:14px;cursor:pointer;transition:all .2s ease;border:none;white-space:nowrap}.btn--sm[_ngcontent-%COMP%]{padding:8px 14px;font-size:13px}.btn--primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6,#2563eb);color:#fff;box-shadow:0 4px 16px #3b82f64d,inset 0 1px #fff3;position:relative;overflow:hidden}.btn--primary[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.3),transparent);transition:left .5s ease}.btn--primary[_ngcontent-%COMP%]:hover{box-shadow:0 6px 20px #3b82f680,inset 0 1px #ffffff4d;transform:translateY(-2px)}.btn--primary[_ngcontent-%COMP%]:hover:before{left:100%}.btn--accent[_ngcontent-%COMP%]{background:linear-gradient(135deg,#22c55e,#16a34a);color:#fff;box-shadow:0 4px 16px #22c55e4d,inset 0 1px #fff3;position:relative;overflow:hidden}.btn--accent[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.3),transparent);transition:left .5s ease}.btn--accent[_ngcontent-%COMP%]:hover{box-shadow:0 6px 20px #22c55e80,inset 0 1px #ffffff4d;transform:translateY(-2px)}.btn--accent[_ngcontent-%COMP%]:hover:before{left:100%}.btn--success[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--accent) 0%,#16a34a 100%);color:#fff;box-shadow:0 4px 16px #22c55e4d,inset 0 1px #fff3;position:relative;overflow:hidden}.btn--success[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.3),transparent);transition:left .5s ease}.btn--success[_ngcontent-%COMP%]:hover{box-shadow:0 6px 20px #22c55e80,inset 0 1px #ffffff4d;transform:translateY(-2px)}.btn--success[_ngcontent-%COMP%]:hover:before{left:100%}.btn--success[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none}.btn--danger[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ef4444,#dc2626);color:#fff;box-shadow:0 4px 16px #ef44444d,inset 0 1px #fff3;position:relative;overflow:hidden}.btn--danger[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.3),transparent);transition:left .5s ease}.btn--danger[_ngcontent-%COMP%]:hover{box-shadow:0 6px 20px #ef444480,inset 0 1px #ffffff4d;transform:translateY(-2px)}.btn--danger[_ngcontent-%COMP%]:hover:before{left:100%}.btn--danger[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none}.btn--outline[_ngcontent-%COMP%]{background:transparent;border:1.5px solid var(--border);color:var(--text-1);position:relative;overflow:hidden}.btn--outline[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:0;height:100%;background:var(--accent);transition:width .3s ease;z-index:0}.btn--outline[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{position:relative;z-index:1}.btn--outline[_ngcontent-%COMP%]:hover{background:#22c55e1a;border-color:var(--accent);color:var(--accent)}.btn--outline[_ngcontent-%COMP%]:hover:before{width:100%}.btn--outline.active[_ngcontent-%COMP%]{background:linear-gradient(135deg,#22c55e26,#22c55e1a);border-color:var(--accent);color:var(--accent);box-shadow:0 4px 12px #22c55e33}.btn--ghost[_ngcontent-%COMP%]{background:transparent;border:none;color:var(--text-2)}.btn--ghost[_ngcontent-%COMP%]:hover{background:var(--panel-2);color:var(--text-1)}@media (max-width: 1200px){.resumen-diario[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(160px,1fr))}.tarjetas-container[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(300px,1fr))}}@media (max-width: 768px){.page-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.reloj-digital[_ngcontent-%COMP%]{width:100%;align-items:center}.fecha-navigation[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.fecha-navigation__controls[_ngcontent-%COMP%], .fecha-navigation__actions[_ngcontent-%COMP%]{width:100%;justify-content:space-between}.resumen-diario[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.filtros-bar[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.filtros-bar__left[_ngcontent-%COMP%], .filtros-bar__right[_ngcontent-%COMP%]{width:100%;flex-direction:column}.search-box[_ngcontent-%COMP%]{min-width:100%}.tarjetas-container[_ngcontent-%COMP%], .form-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}.btn-icon-export[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;justify-content:center;padding:8px;background:transparent;border:1px solid var(--border);border-radius:8px;cursor:pointer;transition:all .2s ease;box-shadow:0 2px 8px #0000001a;overflow:hidden;min-width:60px}.btn-icon-export__icon[_ngcontent-%COMP%]{width:44px;height:44px;object-fit:contain;transition:all .4s cubic-bezier(.34,1.56,.64,1);position:relative;z-index:2;flex-shrink:0}.btn-icon-export__text[_ngcontent-%COMP%]{position:absolute;left:50%;transform:translate(-50%) translate(30px);font-size:13px;font-weight:600;white-space:nowrap;opacity:0;visibility:hidden;pointer-events:none;transition:all .4s cubic-bezier(.34,1.56,.64,1);z-index:1;color:var(--text-1)}.btn-icon-export[_ngcontent-%COMP%]:hover{box-shadow:0 4px 12px #00000026}.btn-icon-export[_ngcontent-%COMP%]:hover   .btn-icon-export__icon[_ngcontent-%COMP%]{transform:translate(-45px) scale(1.1);opacity:.2}.btn-icon-export[_ngcontent-%COMP%]:hover   .btn-icon-export__text[_ngcontent-%COMP%]{opacity:1;visibility:visible;transform:translate(-50%);transition-delay:.1s}.btn-icon-export[_ngcontent-%COMP%]:first-child:hover{border-color:#217346}.btn-icon-export[_ngcontent-%COMP%]:first-child:hover   .btn-icon-export__text[_ngcontent-%COMP%]{color:#217346}.btn-icon-export[_ngcontent-%COMP%]:last-child:hover{border-color:#dc143c}.btn-icon-export[_ngcontent-%COMP%]:last-child:hover   .btn-icon-export__text[_ngcontent-%COMP%]{color:#dc143c}'],data:{animation:[U("slideInOut",[L(":enter",[V({opacity:0,transform:"translateX(100%)"}),N("0.4s cubic-bezier(0.4, 0, 0.2, 1)",V({opacity:1,transform:"translateX(0)"}))]),L(":leave",[N("0.3s cubic-bezier(0.4, 0, 0.2, 1)",V({opacity:0,transform:"translateX(100%)"}))])]),U("scaleInOut",[L(":enter",[V({opacity:0,transform:"scale(0.9) translateY(-20px)"}),N("0.3s cubic-bezier(0.4, 0, 0.2, 1)",V({opacity:1,transform:"scale(1) translateY(0)"}))]),L(":leave",[N("0.2s cubic-bezier(0.4, 0, 0.2, 1)",V({opacity:0,transform:"scale(0.9) translateY(-20px)"}))])])]}});let c=h;return c})();export{zt as RegistroComponent};
