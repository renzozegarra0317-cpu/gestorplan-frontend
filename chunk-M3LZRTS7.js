import{a as K,b as Me}from"./chunk-JZILJLXX.js";import{a as fe}from"./chunk-MPWYS2KC.js";import{Ca as Q,Fa as n,Ga as v,Ha as b,Ia as U,Ib as be,L as i,La as q,Ma as J,Na as Z,Ra as te,Rb as ue,T as re,Ub as xe,V as le,Xb as _e,_ as z,a as ne,b as oe,bc as he,cc as Ce,dc as ve,fa as x,ga as a,h as se,ha as t,ia as X,kc as Pe,lb as de,mb as ce,nb as pe,pa as ee,sa as $,ta as j,tb as ge,v as W,w as B,zb as me}from"./chunk-KKTR3JM6.js";var Se=[{valor:1,nombre:"Enero"},{valor:2,nombre:"Febrero"},{valor:3,nombre:"Marzo"},{valor:4,nombre:"Abril"},{valor:5,nombre:"Mayo"},{valor:6,nombre:"Junio"},{valor:7,nombre:"Julio"},{valor:8,nombre:"Agosto"},{valor:9,nombre:"Septiembre"},{valor:10,nombre:"Octubre"},{valor:11,nombre:"Noviembre"},{valor:12,nombre:"Diciembre"}];var ie=()=>[];function Oe(l,m){if(l&1&&(a(0,"div",46)(1,"div",47)(2,"div",48),n(3,"\u{1F465}"),t(),a(4,"div",49)(5,"span",50),n(6,"Total Trabajadores"),t(),a(7,"span",51),n(8),t()()(),a(9,"div",52)(10,"div",48),n(11,"\u2705"),t(),a(12,"div",49)(13,"span",50),n(14,"Promedio Asistencia"),t(),a(15,"span",51),n(16),t()()(),a(17,"div",53)(18,"div",48),n(19,"\u23F0"),t(),a(20,"div",49)(21,"span",50),n(22,"Promedio Puntualidad"),t(),a(23,"span",51),n(24),t()()(),a(25,"div",54)(26,"div",48),n(27,"\u26A0\uFE0F"),t(),a(28,"div",49)(29,"span",50),n(30,"Total Tardanzas"),t(),a(31,"span",51),n(32),t()()(),a(33,"div",55)(34,"div",48),n(35,"\u274C"),t(),a(36,"div",49)(37,"span",50),n(38,"Total Faltas"),t(),a(39,"span",51),n(40),t()()(),a(41,"div",56)(42,"div",48),n(43,"\u{1F4C5}"),t(),a(44,"div",49)(45,"span",50),n(46,"D\xEDas H\xE1biles"),t(),a(47,"span",51),n(48),t()()()()),l&2){let e=j();i(8),v((e.resumenGeneral==null?null:e.resumenGeneral.totalTrabajadores)||0),i(8),b("",(e.resumenGeneral==null?null:e.resumenGeneral.promedioAsistencia)||0,"%"),i(8),b("",(e.resumenGeneral==null?null:e.resumenGeneral.promedioPuntualidad)||0,"%"),i(8),v((e.resumenGeneral==null?null:e.resumenGeneral.totalTardanzas)||0),i(8),v((e.resumenGeneral==null?null:e.resumenGeneral.totalFaltas)||0),i(8),v((e.resumenGeneral==null?null:e.resumenGeneral.diasHabiles)||0)}}function je(l,m){if(l&1&&(a(0,"div",64)(1,"div",65),n(2),t(),a(3,"div",66)(4,"h4",67),n(5),t(),a(6,"p",68),n(7),t(),a(8,"p",69),n(9),t()(),a(10,"div",70)(11,"span",71),n(12),t(),a(13,"span",72),n(14),t()()()),l&2){let e=m.$implicit;i(2),v((e.nombreCompleto==null?null:e.nombreCompleto.charAt(0))||"?"),i(3),v(e.nombreCompleto||"Sin nombre"),i(2),v(e.cargo||"Sin cargo"),i(2),v(e.area||"Sin \xE1rea"),i(3),b("",e.porcentajeAsistencia,"% Asistencia"),i(2),b("",e.porcentajePuntualidad,"% Puntualidad")}}function Ee(l,m){if(l&1&&(a(0,"div",76)(1,"div",77),n(2),t(),a(3,"div",78)(4,"h4",79),n(5),t(),a(6,"p",80),n(7),t()(),a(8,"div",81)(9,"span",82),n(10),t(),a(11,"span",83),n(12),t(),a(13,"span",84),n(14),t()()()),l&2){let e=m.$implicit;i(2),v((e.nombreCompleto==null?null:e.nombreCompleto.charAt(0))||"?"),i(3),v(e.nombreCompleto||"Sin nombre"),i(2),v(e.cargo||"Sin cargo"),i(3),b("",e.porcentajeAsistencia,"% Asistencia"),i(2),b("",e.diasFalta," Faltas"),i(2),b("",e.diasTardanza," Tardanzas")}}function ye(l,m){if(l&1&&(a(0,"div",73)(1,"h3",59)(2,"span",60),n(3,"\u26A0\uFE0F"),t(),n(4," Trabajadores en Alerta "),t(),a(5,"div",74),z(6,Ee,15,6,"div",75),t()()),l&2){let e=j(2);i(6),x("ngForOf",(e.resumenGeneral==null?null:e.resumenGeneral.trabajadoresAlerta)||te(1,ie))}}function De(l,m){if(l&1&&(a(0,"div",57)(1,"div",58)(2,"h3",59)(3,"span",60),n(4,"\u{1F31F}"),t(),n(5," Trabajadores Destacados "),t(),a(6,"div",61),z(7,je,15,6,"div",62),t()(),z(8,ye,7,2,"div",63),t()),l&2){let e=j();i(7),x("ngForOf",(e.resumenGeneral==null?null:e.resumenGeneral.trabajadoresDestacados)||te(2,ie)),i(),x("ngIf",e.resumenGeneral&&e.resumenGeneral.trabajadoresAlerta&&e.resumenGeneral.trabajadoresAlerta.length>0)}}function Te(l,m){if(l&1&&(a(0,"option",85),n(1),t()),l&2){let e=m.$implicit;x("value",e.valor),i(),v(e.nombre)}}function we(l,m){if(l&1&&(a(0,"option",85),n(1),t()),l&2){let e=m.$implicit;x("value",e),i(),v(e)}}function ze(l,m){if(l&1&&(a(0,"option",85),n(1),t()),l&2){let e=m.$implicit;x("value",e),i(),v(e)}}function Ie(l,m){if(l&1){let e=ee();a(0,"button",86),$("click",function(){W(e);let s=j();return B(s.limpiarFiltros())}),n(1," \u2716\uFE0F Limpiar "),t()}}function ke(l,m){l&1&&(a(0,"tr")(1,"td",92)(2,"div",93),n(3,"Cargando..."),t()()())}function Fe(l,m){l&1&&(a(0,"tr")(1,"td",94)(2,"div",95)(3,"span",96),n(4,"\u{1F4ED}"),t(),a(5,"p",97),n(6,"No se encontraron registros"),t()()()())}function Ae(l,m){if(l&1&&(a(0,"span",115),n(1),t()),l&2){let e=j().$implicit;i(),b(" \u2713",e.tardanzasJustificadas," ")}}function Re(l,m){if(l&1&&(a(0,"span",115),n(1),t()),l&2){let e=j().$implicit;i(),b(" \u2713",e.faltasJustificadas," ")}}function $e(l,m){if(l&1&&(a(0,"span",116),n(1),t()),l&2){let e=j().$implicit;i(),b(" +",e.totalHorasExtras,"h ")}}function Ne(l,m){if(l&1){let e=ee();a(0,"tr")(1,"td",98),n(2),t(),a(3,"td",99)(4,"div",100)(5,"span",101),n(6),t(),a(7,"span",102),n(8),t()()(),a(9,"td",103),n(10),t(),a(11,"td",104),n(12),t(),a(13,"td",105),n(14),t(),a(15,"td",106),n(16),z(17,Ae,2,1,"span",107),t(),a(18,"td",108),n(19),z(20,Re,2,1,"span",107),t(),a(21,"td",104),n(22),t(),a(23,"td",109)(24,"span",110),n(25),t()(),a(26,"td",109)(27,"span",110),n(28),t()(),a(29,"td",111),n(30),z(31,$e,2,1,"span",112),t(),a(32,"td",113)(33,"button",114),$("click",function(){let s=W(e).$implicit,o=j(2);return B(o.verDetalleTrabajador(s))}),n(34," \u{1F441}\uFE0F "),t()()()}if(l&2){let e=m.$implicit,r=j(2);i(2),v(e.dni),i(4),v(e.nombreCompleto),i(2),v(e.cargo),i(2),v(e.area),i(2),v(e.diasHabiles),i(2),v(e.diasPresente),i(2),b(" ",e.diasTardanza," "),i(),x("ngIf",e.tardanzasJustificadas>0),i(2),b(" ",e.diasFalta," "),i(),x("ngIf",e.faltasJustificadas>0),i(2),v(e.diasPermiso+e.diasLicencia),i(2),x("ngClass",r.getEstadoBadgeClass(e.porcentajeAsistencia)),i(),b(" ",e.porcentajeAsistencia,"% "),i(2),x("ngClass",r.getEstadoBadgeClass(e.porcentajePuntualidad)),i(),b(" ",e.porcentajePuntualidad,"% "),i(2),b(" ",e.totalHorasTrabajadas,"h "),i(),x("ngIf",e.totalHorasExtras>0)}}function Le(l,m){if(l&1&&(a(0,"div",87)(1,"div",88)(2,"table",89)(3,"thead")(4,"tr")(5,"th"),n(6,"DNI"),t(),a(7,"th"),n(8,"Trabajador"),t(),a(9,"th"),n(10,"\xC1rea"),t(),a(11,"th"),n(12,"D\xEDas H\xE1biles"),t(),a(13,"th"),n(14,"Presente"),t(),a(15,"th"),n(16,"Tardanzas"),t(),a(17,"th"),n(18,"Faltas"),t(),a(19,"th"),n(20,"Permisos"),t(),a(21,"th"),n(22,"% Asistencia"),t(),a(23,"th"),n(24,"% Puntualidad"),t(),a(25,"th"),n(26,"Horas Trabajadas"),t(),a(27,"th"),n(28,"Acciones"),t()()(),a(29,"tbody"),z(30,ke,4,0,"tr",90)(31,Fe,7,0,"tr",90)(32,Ne,35,17,"tr",91),t()()()()),l&2){let e=j();i(30),x("ngIf",e.cargando),i(),x("ngIf",!e.cargando&&e.resumenTrabajadoresFiltrados.length===0),i(),x("ngForOf",e.resumenTrabajadoresFiltrados)}}function He(l,m){if(l&1&&(a(0,"option",85),n(1),t()),l&2){let e=m.$implicit,r=m.index;x("value",r),i(),U(" ",e.nombreCompleto||e.trabajadorNombre," - DNI: ",e.dni||e.trabajadorDni," ")}}function Ge(l,m){if(l&1&&(a(0,"div",126)(1,"div",127)(2,"div",128),n(3),t(),a(4,"div",129)(5,"h2",130),n(6),t(),a(7,"div",131)(8,"span",132)(9,"strong"),n(10,"DNI:"),t(),n(11),t(),a(12,"span",132)(13,"strong"),n(14,"Cargo:"),t(),n(15),t(),a(16,"span",132)(17,"strong"),n(18,"\xC1rea:"),t(),n(19),t()()()(),a(20,"div",133)(21,"div",134)(22,"div",135),n(23,"\u2705"),t(),a(24,"div",136)(25,"span",137),n(26,"D\xEDas Presente"),t(),a(27,"span",138),n(28),t()()(),a(29,"div",139)(30,"div",135),n(31,"\u23F0"),t(),a(32,"div",136)(33,"span",137),n(34,"Tardanzas"),t(),a(35,"span",138),n(36),t()()(),a(37,"div",140)(38,"div",135),n(39,"\u274C"),t(),a(40,"div",136)(41,"span",137),n(42,"Faltas"),t(),a(43,"span",138),n(44),t()()(),a(45,"div",141)(46,"div",135),n(47,"\u{1F4CA}"),t(),a(48,"div",136)(49,"span",137),n(50,"% Asistencia"),t(),a(51,"span",138),n(52),t()()(),a(53,"div",142)(54,"div",135),n(55,"\u23F1\uFE0F"),t(),a(56,"div",136)(57,"span",137),n(58,"% Puntualidad"),t(),a(59,"span",138),n(60),t()()(),a(61,"div",143)(62,"div",135),n(63,"\u{1F550}"),t(),a(64,"div",136)(65,"span",137),n(66,"Horas Trabajadas"),t(),a(67,"span",138),n(68),t()()()()()),l&2){let e=j(2);i(3),b(" ",((e.trabajadorSeleccionado.nombreCompleto||e.trabajadorSeleccionado.trabajadorNombre)==null?null:(e.trabajadorSeleccionado.nombreCompleto||e.trabajadorSeleccionado.trabajadorNombre).charAt(0))||"?"," "),i(3),b(" ",e.trabajadorSeleccionado.nombreCompleto||e.trabajadorSeleccionado.trabajadorNombre," "),i(5),b(" ",e.trabajadorSeleccionado.dni||e.trabajadorSeleccionado.trabajadorDni," "),i(4),b(" ",e.trabajadorSeleccionado.cargo||e.trabajadorSeleccionado.trabajadorCargo||"Sin cargo"," "),i(4),b(" ",e.trabajadorSeleccionado.area||e.trabajadorSeleccionado.trabajadorArea||"Sin \xE1rea"," "),i(9),v(e.trabajadorSeleccionado.diasPresente||0),i(8),v(e.trabajadorSeleccionado.diasTardanza||0),i(8),v(e.trabajadorSeleccionado.diasFalta||0),i(8),b("",e.trabajadorSeleccionado.porcentajeAsistencia||0,"%"),i(8),b("",e.trabajadorSeleccionado.porcentajePuntualidad||0,"%"),i(8),b("",e.trabajadorSeleccionado.totalHorasTrabajadas||0,"h")}}function Ve(l,m){l&1&&(a(0,"tr")(1,"td",151)(2,"div",95)(3,"span",96),n(4,"\u{1F4ED}"),t(),a(5,"p",97),n(6,"No hay registros detallados disponibles para este trabajador"),t(),a(7,"p",152),n(8,"Los detalles d\xEDa por d\xEDa se cargar\xE1n pr\xF3ximamente"),t()()()())}function Ye(l,m){if(l&1&&(a(0,"span",116),n(1),t()),l&2){let e=j().$implicit;i(),b(" +",e.horasExtras,"h ")}}function We(l,m){if(l&1&&(a(0,"span",161),n(1),t()),l&2){let e=j().$implicit;i(),b(" +",e.minutosRetraso||e.minutosTardanza,"min ")}}function Be(l,m){l&1&&(a(0,"span",162),n(1," --- "),t())}function Ue(l,m){if(l&1&&(a(0,"tr")(1,"td",153),n(2),t(),a(3,"td",154),n(4),t(),a(5,"td",155)(6,"span",110),n(7),t()(),a(8,"td",156),n(9),t(),a(10,"td",156),n(11),t(),a(12,"td",156),n(13),t(),a(14,"td",156),n(15),t(),a(16,"td",111),n(17),z(18,Ye,2,1,"span",112),t(),a(19,"td",157),z(20,We,2,1,"span",158)(21,Be,2,0,"span",159),t(),a(22,"td",160),n(23),t()()),l&2){let e=m.$implicit,r=j(3);Q("fila--presente",e.estado==="Presente")("fila--tardanza",e.estado==="Tardanza")("fila--falta",e.estado==="Falta")("fila--permiso",e.estado==="Permiso")("fila--licencia",e.estado==="Licencia"),i(2),b(" ",r.formatearFecha(e.fecha)," "),i(2),b(" ",e.diaSemana||"N/A"," "),i(2),x("ngClass","badge--"+((e.estado==null?null:e.estado.toLowerCase())||"sin-registro")),i(),b(" ",e.estado||"Sin registro"," "),i(2),b(" ",e.horaEntradaManana||e.horaEntrada||"---"," "),i(2),b(" ",e.horaSalidaManana||e.horaSalida||"---"," "),i(2),b(" ",e.horaEntradaTarde||"---"," "),i(2),b(" ",e.horaSalidaTarde||"---"," "),i(2),b(" ",e.horasTrabajadas||0,"h "),i(),x("ngIf",e.horasExtras>0),i(2),x("ngIf",e.minutosRetraso>0||e.minutosTardanza>0),i(),x("ngIf",!e.minutosRetraso&&!e.minutosTardanza),i(2),b(" ",e.observaciones||e.justificacion||"---"," ")}}function qe(l,m){if(l&1&&(a(0,"div",144)(1,"div",145)(2,"h3",146),n(3),t(),a(4,"div",147)(5,"span",148),n(6),t()()(),a(7,"div",88)(8,"table",149)(9,"thead")(10,"tr")(11,"th"),n(12,"Fecha"),t(),a(13,"th"),n(14,"D\xEDa"),t(),a(15,"th"),n(16,"Estado"),t(),a(17,"th"),n(18,"Entrada Ma\xF1ana"),t(),a(19,"th"),n(20,"Salida Ma\xF1ana"),t(),a(21,"th"),n(22,"Entrada Tarde"),t(),a(23,"th"),n(24,"Salida Tarde"),t(),a(25,"th"),n(26,"Horas Trabajadas"),t(),a(27,"th"),n(28,"Tardanza"),t(),a(29,"th"),n(30,"Observaciones"),t()()(),a(31,"tbody"),z(32,Ve,9,0,"tr",90)(33,Ue,24,23,"tr",150),t()()()()),l&2){let e=j(2);i(3),U(" \u{1F4C5} Registro Detallado - ",e.nombreMesActual," ",e.filtros.anio," "),i(3),b(" \u{1F4CA} ",e.trabajadorSeleccionado.diasHabiles||0," d\xEDas h\xE1biles "),i(26),x("ngIf",!e.trabajadorSeleccionado.detallesDiarios||e.trabajadorSeleccionado.detallesDiarios.length===0),i(),x("ngForOf",e.trabajadorSeleccionado.detallesDiarios||te(5,ie))}}function Je(l,m){if(l&1&&(a(0,"div",163)(1,"div",164)(2,"span",96),n(3,"\u{1F464}"),t(),a(4,"h3",165),n(5,"Selecciona un Trabajador"),t(),a(6,"p",97),n(7," Por favor, selecciona un trabajador del men\xFA desplegable para ver su registro detallado de asistencia para el per\xEDodo de "),a(8,"strong"),n(9),t(),n(10,". "),t()()()),l&2){let e=j(2);i(9),U("",e.nombreMesActual," ",e.filtros.anio)}}function Ze(l,m){if(l&1){let e=ee();a(0,"div",117)(1,"div",118)(2,"div",119)(3,"label",120),n(4,"\u{1F464} Seleccionar Trabajador:"),t(),a(5,"select",121),Z("ngModelChange",function(s){W(e);let o=j();return J(o.trabajadorSeleccionadoIndex,s)||(o.trabajadorSeleccionadoIndex=s),B(s)}),$("change",function(){W(e);let s=j();return B(s.seleccionarTrabajador())}),a(6,"option",122),n(7,"-- Seleccione un trabajador para ver su detalle --"),t(),z(8,He,2,3,"option",22),t()()(),z(9,Ge,69,11,"div",123)(10,qe,34,6,"div",124)(11,Je,11,2,"div",125),t()}if(l&2){let e=j();i(5),q("ngModel",e.trabajadorSeleccionadoIndex),i(3),x("ngForOf",e.resumenTrabajadoresFiltrados),i(),x("ngIf",e.trabajadorSeleccionado),i(),x("ngIf",e.trabajadorSeleccionado),i(),x("ngIf",!e.trabajadorSeleccionado)}}function Ke(l,m){if(l&1&&(a(0,"div",166)(1,"div",167)(2,"div",168)(3,"div",169)(4,"h3",170),n(5),t(),a(6,"p",171),n(7,"An\xE1lisis completo de asistencia, tardanzas y faltas del mes"),t()(),a(8,"div",172),X(9,"canvas",173),t()()()()),l&2){let e=j();i(5),U("\u{1F4CA} Resumen Mensual de Asistencia - ",e.nombreMesActual," ",e.filtros.anio)}}function Qe(l,m){if(l&1&&(a(0,"span",116),n(1),t()),l&2){let e=j().$implicit;i(),b(" +",e.horasExtras,"h ")}}function Xe(l,m){if(l&1&&(a(0,"span",161),n(1),t()),l&2){let e=j().$implicit;i(),b(" +",e.minutosRetraso||e.minutosTardanza,"min ")}}function et(l,m){l&1&&(a(0,"span",162),n(1," --- "),t())}function tt(l,m){if(l&1&&(a(0,"tr")(1,"td"),n(2),t(),a(3,"td"),n(4),t(),a(5,"td")(6,"span",110),n(7),t()(),a(8,"td"),n(9),t(),a(10,"td"),n(11),t(),a(12,"td"),n(13),t(),a(14,"td"),n(15),t(),a(16,"td"),n(17),z(18,Qe,2,1,"span",112),t(),a(19,"td"),z(20,Xe,2,1,"span",158)(21,et,2,0,"span",159),t()()),l&2){let e=m.$implicit,r=j(4);Q("fila--presente",e.estado==="Presente")("fila--tardanza",e.estado==="Tardanza")("fila--falta",e.estado==="Falta")("fila--permiso",e.estado==="Permiso")("fila--licencia",e.estado==="Licencia"),i(2),v(r.formatearFecha(e.fecha)),i(2),v(e.diaSemana||"N/A"),i(2),x("ngClass","badge--"+((e.estado==null?null:e.estado.toLowerCase())||"sin-registro")),i(),b(" ",e.estado||"Sin registro"," "),i(2),v(e.horaEntradaManana||e.horaEntrada||"---"),i(2),v(e.horaSalidaManana||e.horaSalida||"---"),i(2),v(e.horaEntradaTarde||"---"),i(2),v(e.horaSalidaTarde||"---"),i(2),b(" ",e.horasTrabajadas||0,"h "),i(),x("ngIf",e.horasExtras>0),i(2),x("ngIf",e.minutosRetraso>0||e.minutosTardanza>0),i(),x("ngIf",!e.minutosRetraso&&!e.minutosTardanza)}}function at(l,m){if(l&1&&(a(0,"div",196)(1,"h4",197),n(2,"\u{1F4C5} Registro Detallado:"),t(),a(3,"div",198)(4,"table",199)(5,"thead")(6,"tr")(7,"th"),n(8,"Fecha"),t(),a(9,"th"),n(10,"D\xEDa"),t(),a(11,"th"),n(12,"Estado"),t(),a(13,"th"),n(14,"Entrada Ma\xF1ana"),t(),a(15,"th"),n(16,"Salida Ma\xF1ana"),t(),a(17,"th"),n(18,"Entrada Tarde"),t(),a(19,"th"),n(20,"Salida Tarde"),t(),a(21,"th"),n(22,"Horas"),t(),a(23,"th"),n(24,"Retraso"),t()()(),a(25,"tbody"),z(26,tt,22,22,"tr",150),t()()()()),l&2){let e=j(3);i(26),x("ngForOf",e.trabajadorSeleccionado.detallesDiarios)}}function nt(l,m){l&1&&(a(0,"div",200)(1,"p"),n(2,"\u{1F4ED} No hay registros detallados disponibles para este per\xEDodo"),t()())}function ot(l,m){if(l&1&&(a(0,"div",183)(1,"div",184)(2,"div",185),n(3),t(),a(4,"div",186)(5,"h2"),n(6),t(),a(7,"p")(8,"strong"),n(9,"DNI:"),t(),n(10),t(),a(11,"p")(12,"strong"),n(13,"Cargo:"),t(),n(14),t(),a(15,"p")(16,"strong"),n(17,"Area:"),t(),n(18),t()()(),a(19,"div",187)(20,"div",188)(21,"span",189),n(22,"Dias Presente"),t(),a(23,"span",190),n(24),t()(),a(25,"div",188)(26,"span",189),n(27,"Tardanzas"),t(),a(28,"span",191),n(29),t()(),a(30,"div",188)(31,"span",189),n(32,"Faltas"),t(),a(33,"span",192),n(34),t()(),a(35,"div",188)(36,"span",189),n(37,"% Asistencia"),t(),a(38,"span",193),n(39),t()(),a(40,"div",188)(41,"span",189),n(42,"% Puntualidad"),t(),a(43,"span",193),n(44),t()(),a(45,"div",188)(46,"span",189),n(47,"Horas Trabajadas"),t(),a(48,"span",193),n(49),t()()(),z(50,at,27,1,"div",194)(51,nt,3,0,"div",195),t()),l&2){let e=j(2);i(3),v((e.trabajadorSeleccionado.trabajadorNombre||e.trabajadorSeleccionado.nombreCompleto||"?").charAt(0)),i(3),v(e.trabajadorSeleccionado.trabajadorNombre||e.trabajadorSeleccionado.nombreCompleto||"Sin nombre"),i(4),b(" ",e.trabajadorSeleccionado.trabajadorDni||e.trabajadorSeleccionado.dni||"N/A"),i(4),b(" ",e.trabajadorSeleccionado.trabajadorCargo||e.trabajadorSeleccionado.cargo||"Sin cargo"),i(4),b(" ",e.trabajadorSeleccionado.trabajadorArea||e.trabajadorSeleccionado.area||"Sin \xE1rea"),i(6),v(e.trabajadorSeleccionado.diasPresente),i(5),v(e.trabajadorSeleccionado.diasTardanza),i(5),v(e.trabajadorSeleccionado.diasFalta),i(5),b("",e.trabajadorSeleccionado.porcentajeAsistencia,"%"),i(5),b("",e.trabajadorSeleccionado.porcentajePuntualidad,"%"),i(5),b("",e.trabajadorSeleccionado.totalHorasTrabajadas,"h"),i(),x("ngIf",e.trabajadorSeleccionado.detallesDiarios&&e.trabajadorSeleccionado.detallesDiarios.length>0),i(),x("ngIf",!e.trabajadorSeleccionado.detallesDiarios||e.trabajadorSeleccionado.detallesDiarios.length===0)}}function rt(l,m){if(l&1){let e=ee();a(0,"div",174),$("click",function(){W(e);let s=j();return B(s.cerrarModalDetalle())}),a(1,"div",175),$("click",function(s){return W(e),B(s.stopPropagation())}),a(2,"div",176)(3,"h3",177),n(4),t(),a(5,"button",178),$("click",function(){W(e);let s=j();return B(s.cerrarModalDetalle())}),n(6,"\u2716\uFE0F"),t()(),z(7,ot,52,13,"div",179),a(8,"div",180)(9,"button",181),$("click",function(){W(e);let s=j();return B(s.mostrarModalDetalle=!1)}),n(10,"Cerrar"),t(),a(11,"button",182),$("click",function(){W(e);let s=j();return B(s.imprimirReporte())}),n(12,"\u{1F4C4} Imprimir Reporte"),t()()()()}if(l&2){let e=j();i(4),U("\u{1F4CA} Detalle de Asistencia - ",e.nombreMesActual," ",e.filtros.anio),i(3),x("ngIf",e.trabajadorSeleccionado)}}K.register(...Me);var _t=(()=>{let m=class m{ngOnInit(){window.scrollTo(0,0),setTimeout(()=>{let r=document.querySelector(".main-content");r&&(r.scrollTop=0)},100),this.trabajadoresDestacados=[],this.trabajadoresAlerta=[],this.trabajadoresDetalle=[],this.trabajadoresFiltrados=[],this.inicializarAnios(),this.cargarResumen()}ngAfterViewInit(){}ngOnDestroy(){Object.keys(this.charts).forEach(r=>{this.charts[r]&&(this.charts[r]?.destroy(),this.charts[r]=null)})}constructor(r,s){this.router=r,this.http=s,this.apiAsistencias=`${fe.apiUrl}/asistencias`,this.resumenMensual=null,this.trabajadoresDestacados=[],this.trabajadoresAlerta=[],this.trabajadoresDetalle=[],this.trabajadoresFiltrados=[],this.filtros={mes:new Date().getMonth()+1,anio:new Date().getFullYear(),area:"",ordenarPor:"nombre",busqueda:""},this.cargando=!1,this.vistaActual="resumen",this.trabajadorSeleccionado=null,this.trabajadorSeleccionadoIndex=-1,this.mostrarModalDetalle=!1,this.charts={},this.meses=Se,this.anios=[],this.areas=["Gerencia Municipal","Oficina de Recursos Humanos","Oficina de Administraci\xF3n","Gerencia de Desarrollo Social","Gerencia de Infraestructura","Serenazgo","Registro Civil"]}inicializarAnios(){let r=new Date().getFullYear();for(let s=r;s>=r-5;s--)this.anios.push(s)}cargarResumen(){this.cargando=!0,console.log("\u{1F4CA} Cargando resumen mensual para:",this.filtros.anio,this.filtros.mes);let r=localStorage.getItem("token"),s=r?{Authorization:`Bearer ${r}`}:{};this.http.get(`${this.apiAsistencias}/resumen-mensual/${this.filtros.anio}/${this.filtros.mes}`,{headers:s}).subscribe({next:o=>{console.log("\u2705 Resumen mensual cargado:",o.data),o.demoMode?(this.resumenMensual={periodo:{anio:this.filtros.anio,mes:this.filtros.mes,diasHabiles:0},totales:{totalTrabajadores:0,presentes:0,tardanzas:0,faltas:0,permisos:0,licencias:0,porcentajeAsistencia:0},trabajadoresDetalle:[],trabajadoresDestacados:[],trabajadoresAlerta:[]},this.trabajadoresDestacados=[],this.trabajadoresAlerta=[],this.trabajadoresDetalle=[],this.trabajadoresFiltrados=[]):(this.resumenMensual=o.data,this.trabajadoresDestacados=o.data.trabajadoresDestacados||[],this.trabajadoresAlerta=o.data.trabajadoresAlerta||[],this.trabajadoresDetalle=o.data.trabajadoresDetalle||[],this.trabajadoresFiltrados=[...this.trabajadoresDetalle]),this.cargando=!1,console.log("\u{1F4CA} Trabajadores cargados:",this.trabajadoresDetalle.length),console.log("\u{1F31F} Destacados:",this.trabajadoresDestacados.length),console.log("\u26A0\uFE0F Alerta:",this.trabajadoresAlerta.length),console.log("\u{1F4CB} Detalle completo:",this.trabajadoresDetalle),this.vistaActual==="grafico"&&setTimeout(()=>this.inicializarGraficos(),100)},error:o=>{console.error("\u274C Error al cargar resumen mensual:",o),this.cargando=!1,this.cargarDatosEjemplo()}})}cargarDatosEjemplo(){this.resumenMensual={periodo:{anio:this.filtros.anio,mes:this.filtros.mes,diasHabiles:22},estadisticas:{totalTrabajadores:5,promedioAsistencia:96.36,promedioPuntualidad:89.09,totalTardanzas:6,totalFaltas:4}},this.trabajadoresDestacados=[{id:1,dni:"43256789",nombreCompleto:"Garc\xEDa Rodr\xEDguez, Carlos Alberto",cargo:"Gerente Municipal",area:"Gerencia Municipal",porcentajeAsistencia:100,porcentajePuntualidad:90.91,promedioHorasTrabajadas:8.5},{id:2,dni:"12345678",nombreCompleto:"Ram\xEDrez L\xF3pez, Juan Carlos",cargo:"Contador",area:"Oficina de Administraci\xF3n",porcentajeAsistencia:100,porcentajePuntualidad:100,promedioHorasTrabajadas:8},{id:3,dni:"42345678",nombreCompleto:"V\xE1squez Ruiz, Roberto Miguel",cargo:"Inspector de Obra",area:"Gerencia de Infraestructura",porcentajeAsistencia:100,porcentajePuntualidad:100,promedioHorasTrabajadas:8}],this.trabajadoresAlerta=[{id:4,dni:"98765432",nombreCompleto:"Fern\xE1ndez Silva, Ana Patricia",cargo:"Asistente Administrativo",area:"Oficina de Recursos Humanos",porcentajeAsistencia:86.36,diasFalta:3,diasTardanza:1,promedioHorasTrabajadas:7.2}],this.trabajadoresDetalle=[{id:1,dni:"43256789",nombreCompleto:"Garc\xEDa Rodr\xEDguez, Carlos Alberto",cargo:"Gerente Municipal",area:"Gerencia Municipal",diasHabiles:22,diasPresente:20,diasTardanza:2,diasFalta:0,porcentajeAsistencia:100,porcentajePuntualidad:90.91,totalHorasTrabajadas:176.5},{id:2,dni:"12345678",nombreCompleto:"Ram\xEDrez L\xF3pez, Juan Carlos",cargo:"Contador",area:"Oficina de Administraci\xF3n",diasHabiles:22,diasPresente:22,diasTardanza:0,diasFalta:0,porcentajeAsistencia:100,porcentajePuntualidad:100,totalHorasTrabajadas:176}],this.trabajadoresFiltrados=[...this.trabajadoresDetalle]}cambiarPeriodo(){console.log("\u{1F4C5} Cambiando per\xEDodo a:",this.filtros.anio,this.filtros.mes);let r=this.trabajadorSeleccionado?.id||this.trabajadorSeleccionado?.TrabajadorID,s=this.trabajadorSeleccionadoIndex;this.trabajadorSeleccionado&&(this.trabajadorSeleccionado.detallesDiarios=[]),this.cargarResumen(),this.vistaActual==="grafico"&&setTimeout(()=>this.inicializarGraficos(),300),setTimeout(()=>{if(r&&s>=0){let o=this.resumenTrabajadoresFiltrados.find(p=>(p.id||p.TrabajadorID)===r);if(o){this.trabajadorSeleccionado=o;let p=this.resumenTrabajadoresFiltrados.indexOf(o);p>=0&&(this.trabajadorSeleccionadoIndex=p),console.log("\u{1F4C5} Recargando detalles del trabajador seleccionado para el nuevo per\xEDodo"),this.trabajadorSeleccionado.detallesDiarios=[],this.cargarDetallesDiarios()}}},500)}irMesAnterior(){this.filtros.mes>1?this.filtros.mes--:(this.filtros.mes=12,this.filtros.anio--),this.cambiarPeriodo()}irMesSiguiente(){this.filtros.mes<12?this.filtros.mes++:(this.filtros.mes=1,this.filtros.anio++),this.cambiarPeriodo()}irMesActual(){let r=new Date;this.filtros.mes=r.getMonth()+1,this.filtros.anio=r.getFullYear(),this.cambiarPeriodo()}cambiarVista(r){this.vistaActual=r,r==="grafico"&&setTimeout(()=>{console.log("\u{1F4CA} Inicializando gr\xE1ficos..."),this.inicializarGraficos()},300)}verDetalleTrabajador(r){this.trabajadorSeleccionado=oe(ne({},r),{trabajadorNombre:r.trabajadorNombre||r.nombreCompleto||"Sin nombre",trabajadorDni:r.trabajadorDni||r.dni||"N/A",trabajadorCargo:r.trabajadorCargo||r.cargo||"Sin cargo",trabajadorArea:r.trabajadorArea||r.area||"Sin \xE1rea",id:r.id||r.trabajadorId||r.TrabajadorID,diasPresente:r.diasPresente||0,diasTardanza:r.diasTardanza||0,diasFalta:r.diasFalta||0,porcentajeAsistencia:r.porcentajeAsistencia||0,porcentajePuntualidad:r.porcentajePuntualidad||0,totalHorasTrabajadas:r.totalHorasTrabajadas||0,detallesDiarios:r.detallesDiarios||[]}),console.log("\u{1F441}\uFE0F Trabajador seleccionado para modal:",this.trabajadorSeleccionado),this.mostrarModalDetalle=!0,setTimeout(()=>{this.cargarDetallesDiarios()},100)}cerrarModalDetalle(){this.mostrarModalDetalle=!1,this.trabajadorSeleccionado=null,setTimeout(()=>{document.documentElement.classList.remove("modal-open"),document.body.classList.remove("modal-open");let r=document.querySelector("app-topbar");if(r){r.style.setProperty("z-index","100000","important"),r.style.setProperty("pointer-events","auto","important"),r.style.setProperty("visibility","visible","important");let o=r.querySelector(".topbar");o&&(o.style.setProperty("z-index","100000","important"),o.style.setProperty("pointer-events","auto","important"),o.style.setProperty("visibility","visible","important"))}let s=document.querySelector("app-sidebar");s&&(s.style.setProperty("z-index","1000","important"),s.style.setProperty("pointer-events","auto","important"),s.style.setProperty("visibility","visible","important")),document.body.offsetHeight},150)}seleccionarTrabajador(){this.trabajadorSeleccionadoIndex>=0&&this.trabajadorSeleccionadoIndex<this.resumenTrabajadoresFiltrados.length?(this.trabajadorSeleccionado=this.resumenTrabajadoresFiltrados[this.trabajadorSeleccionadoIndex],this.cargarDetallesDiarios()):this.trabajadorSeleccionado=null}cargarDetallesDiarios(){if(!this.trabajadorSeleccionado){console.warn("\u26A0\uFE0F No hay trabajador seleccionado");return}let r=this.trabajadorSeleccionado.id||this.trabajadorSeleccionado.trabajadorId||this.trabajadorSeleccionado.TrabajadorID;if(!r){console.warn("\u26A0\uFE0F No se pudo obtener el ID del trabajador. Objeto completo:",this.trabajadorSeleccionado);let w=this.trabajadorSeleccionado.trabajadorDni||this.trabajadorSeleccionado.dni;if(!w){console.error("\u274C No se puede cargar detalles: falta ID y DNI");return}console.log("\u26A0\uFE0F Usando DNI como alternativa:",w)}let s=this.filtros.mes,o=this.filtros.anio;console.log("\u{1F50D} ========== INICIO: cargarDetallesDiarios =========="),console.log("\u{1F50D} Mes seleccionado:",s,"A\xF1o:",o),console.log("\u{1F50D} Trabajador ID:",r);let p=new Date(o,s-1,1,12,0,0),g=new Date(o,s,0,12,0,0),h=p.getFullYear(),c=String(p.getMonth()+1).padStart(2,"0"),y=String(p.getDate()).padStart(2,"0"),G=`${h}-${c}-${y}`,V=g.getFullYear(),P=String(g.getMonth()+1).padStart(2,"0"),I=String(g.getDate()).padStart(2,"0"),F=`${V}-${P}-${I}`;console.log("\u{1F50D} Fecha inicio calculada:",p.toLocaleDateString("es-PE"),"->",G),console.log("\u{1F50D} Fecha fin calculada:",g.toLocaleDateString("es-PE"),"->",F),console.log("\u{1F50D} Verificaci\xF3n: fechaInicio debe ser d\xEDa 1 del mes",s),console.log("\u{1F50D} Verificaci\xF3n: fechaFin debe ser \xFAltimo d\xEDa del mes",s);let L=localStorage.getItem("token"),k=L?{Authorization:`Bearer ${L}`}:{};this.http.get(`${this.apiAsistencias}/trabajador/${r}/rango/${G}/${F}`,{headers:k}).subscribe({next:w=>{if(console.log("\u{1F50D} Respuesta del backend recibida"),console.log("\u{1F50D} Total de registros recibidos:",w.data?.length||0),w.data&&Array.isArray(w.data)){console.log("\u{1F50D} Primeros 5 registros recibidos:"),w.data.slice(0,5).forEach((d,f)=>{console.log(`  ${f+1}. Fecha: ${d.fecha||d.Fecha}`)});let _=w.data.filter(d=>{let f=d.fecha||d.Fecha;if(!f)return console.log("\u274C Item sin fecha, filtrado"),!1;let M=f.split("T")[0].split("-");if(M.length!==3)return console.log("\u274C Fecha con formato inv\xE1lido:",f),!1;let S=parseInt(M[0],10),T=parseInt(M[1],10),A=parseInt(M[2],10),E=T===s&&S===o;return console.log(E?`\u2705 FECHA ACEPTADA: ${f} (mes: ${T}, a\xF1o: ${S}, d\xEDa: ${A})`:`\u274C FECHA FILTRADA: ${f} (mes: ${T}, a\xF1o: ${S}, d\xEDa: ${A}) - NO pertenece a ${s}/${o}`),E}).map(d=>{let f=d.fecha||d.Fecha,M=f.split("T")[0].split("-"),S=parseInt(M[0],10),T=parseInt(M[1],10),A=parseInt(M[2],10);if(T!==s||S!==o)return console.error(`\u274C ERROR CR\xCDTICO: Fecha ${f} pas\xF3 el filtro pero no pertenece al mes (mes: ${T}, a\xF1o: ${S})`),null;let C=new Date(S,T-1,A,12,0,0).toLocaleDateString("es-PE",{weekday:"long"}),O=d.tipoMarcacion||d.TipoMarcacion||d.estado||d.Estado||"Sin registro";O==="Validado"||O==="Presente"?O="Presente":O==="Tardanza"?O="Tardanza":O==="Falta"?O="Falta":O==="Permiso"?O="Permiso":O==="Licencia"&&(O="Licencia");let N=0;d.tiempoTrabajado?typeof d.tiempoTrabajado=="string"?N=parseFloat(d.tiempoTrabajado.replace("h","").replace("hh",""))||0:N=parseFloat(d.tiempoTrabajado)||0:d.TiempoTrabajado&&(typeof d.TiempoTrabajado=="string"?N=parseFloat(d.TiempoTrabajado.replace("h","").replace("hh",""))||0:N=parseFloat(d.TiempoTrabajado)||0);let H=`${S}-${String(T).padStart(2,"0")}-${String(A).padStart(2,"0")}`;return console.log(`\u2705 Mapeando fecha: ${H} (mes: ${T}, a\xF1o: ${S}, d\xEDa: ${A})`),{fecha:H,diaSemana:C.charAt(0).toUpperCase()+C.slice(1),estado:O,horaEntradaManana:d.horaEntradaManana||d.HoraEntradaManana||null,horaSalidaManana:d.horaSalidaManana||d.HoraSalidaManana||null,horaEntradaTarde:d.horaEntradaTarde||d.HoraEntradaTarde||null,horaSalidaTarde:d.horaSalidaTarde||d.HoraSalidaTarde||null,horasTrabajadas:N,horasExtras:parseFloat(d.horasExtras||d.HorasExtras||0),minutosRetraso:d.minutosTardanza||d.MinutosTardanza||0,minutosTardanza:d.minutosTardanza||d.MinutosTardanza||0,observaciones:d.observaciones||d.Observaciones||"",justificacion:d.justificacion||d.Justificacion||d.motivoJustificacion||d.MotivoJustificacion||""}}).filter(d=>d!==null).filter(d=>{let f=d.fecha.split("-");if(f.length!==3)return console.error("\u274C ERROR: Fecha con formato inv\xE1lido:",d.fecha),!1;let M=parseInt(f[0],10),S=parseInt(f[1],10),T=S===s&&M===o;return T||console.error(`\u274C ERROR CR\xCDTICO: Detalle con fecha fuera del mes: ${d.fecha} (mes: ${S}, a\xF1o: ${M}) - ELIMINADO`),T});if(_.sort((d,f)=>d.fecha.localeCompare(f.fecha)),console.log("\u{1F50D} Total de detalles despu\xE9s de filtrar:",_.length),_.length>0){console.log("\u{1F50D} Primer fecha:",_[0].fecha),console.log("\u{1F50D} \xDAltima fecha:",_[_.length-1].fecha);let d=_[0].fecha,f=d.split("-"),M=parseInt(f[2],10);M!==1&&console.error(`\u274C ERROR CR\xCDTICO: La primera fecha NO es el d\xEDa 1: ${d} (d\xEDa: ${M})`)}if(console.log("\u{1F50D} Total de detalles despu\xE9s de filtrar:",_.length),_.length>0){let d=new Date(o,s,0).getDate(),f=new Set(_.map(M=>M.fecha));for(let M=1;M<=d;M++){let S=new Date(o,s-1,M,12,0,0),T=S.getFullYear(),A=String(S.getMonth()+1).padStart(2,"0"),E=String(S.getDate()).padStart(2,"0"),C=`${T}-${A}-${E}`;if(!f.has(C)){let O=S.toLocaleDateString("es-PE",{weekday:"long"}),N=S.getDay(),H="Sin registro",u="";N>=1&&N<=5?(H="Falta",u="Falta autom\xE1tica - Sin registro de asistencia"):(H="Sin registro",u="D\xEDa no h\xE1bil"),_.push({fecha:C,diaSemana:O.charAt(0).toUpperCase()+O.slice(1),estado:H,horaEntradaManana:null,horaSalidaManana:null,horaEntradaTarde:null,horaSalidaTarde:null,horasTrabajadas:0,horasExtras:0,minutosRetraso:0,minutosTardanza:0,observaciones:u,justificacion:""})}}_.sort((M,S)=>M.fecha.localeCompare(S.fecha)),console.log("\u{1F50D} Total de detalles despu\xE9s de completar d\xEDas faltantes:",_.length)}else{console.log("\u{1F50D} No hay datos en la respuesta del m\xE9todo principal, usando m\xE9todo alternativo"),this.cargarDetallesDiariosAlternativo();return}if(this.trabajadorSeleccionado&&_.length>0){let d=_.filter(C=>C.estado==="Presente").length,f=_.filter(C=>C.estado==="Tardanza").length,M=_.filter(C=>C.estado==="Falta").length,S=_.filter(C=>C.estado==="Permiso").length,T=_.filter(C=>C.estado==="Licencia").length;this.trabajadorSeleccionado.diasPresente=d,this.trabajadorSeleccionado.diasTardanza=f,this.trabajadorSeleccionado.diasFalta=M,this.trabajadorSeleccionado.diasPermiso=S,this.trabajadorSeleccionado.diasLicencia=T;let A=_.reduce((C,O)=>C+(O.horasTrabajadas||0),0);this.trabajadorSeleccionado.totalHorasTrabajadas=Math.round(A*100)/100;let E=_.filter(C=>{let O=C.fecha.split("-");if(O.length!==3)return!1;let H=new Date(parseInt(O[0],10),parseInt(O[1],10)-1,parseInt(O[2],10),12,0,0).getDay();return H>=1&&H<=5}).length;if(E>0){let C=Math.round((d+f)/E*1e4)/100,O=Math.round(d/E*1e4)/100;this.trabajadorSeleccionado.porcentajeAsistencia=Math.min(C,100),this.trabajadorSeleccionado.porcentajePuntualidad=Math.min(O,100)}console.log("\u{1F50D} ========== ESTAD\xCDSTICAS RECALCULADAS (m\xE9todo principal) =========="),console.log("\u{1F50D} D\xEDas Presente:",d),console.log("\u{1F50D} D\xEDas Tardanza:",f),console.log("\u{1F50D} D\xEDas Falta:",M),console.log("\u{1F50D} Total Horas Trabajadas:",A),console.log("\u{1F50D} % Asistencia:",this.trabajadorSeleccionado.porcentajeAsistencia),console.log("\u{1F50D} % Puntualidad:",this.trabajadorSeleccionado.porcentajePuntualidad)}console.log("\u{1F50D} ========== FIN: cargarDetallesDiarios =========="),this.trabajadorSeleccionado.detallesDiarios=_}else console.log("\u{1F50D} No hay datos en la respuesta"),this.cargarDetallesDiariosAlternativo()},error:w=>{console.error("\u274C Error al cargar detalles diarios:",w),w.status===404&&console.log("\u{1F50D} Endpoint no existe (404), usando m\xE9todo alternativo"),this.cargarDetallesDiariosAlternativo()}})}cargarDetallesDiariosAlternativo(){if(!this.trabajadorSeleccionado)return;let r=this.trabajadorSeleccionado.id||this.trabajadorSeleccionado.TrabajadorID;if(!r)return;let s=this.filtros.mes,o=this.filtros.anio;console.log("\u{1F50D} ========== INICIO: cargarDetallesDiariosAlternativo =========="),console.log("\u{1F50D} Mes seleccionado:",s,"A\xF1o:",o),console.log("\u{1F50D} Trabajador ID:",r);let p=typeof s=="string"?parseInt(s,10):s,g=typeof o=="string"?parseInt(o,10):o;console.log("\u{1F50D} Generando d\xEDas - mesSeleccionado:",s,"->",p,"anioSeleccionado:",o,"->",g);let h=new Date(g,p,0).getDate(),c=[];console.log("\u{1F50D} \xDAltimo d\xEDa del mes:",h);for(let P=1;P<=h;P++){let I=new Date(g,p-1,P,12,0,0),F=I.getMonth()+1,L=I.getFullYear();F===p&&L===g?(c.push(I),(P<=3||P===h)&&console.log(`\u2705 D\xEDa ${P} generado: ${I.toLocaleDateString("es-PE")} (mes: ${F}, a\xF1o: ${L})`)):(console.warn(`\u26A0\uFE0F ADVERTENCIA: D\xEDa ${P} - mes generado: ${F}, esperado: ${p} - Agregando de todas formas`),c.push(I))}if(console.log("\u{1F50D} Total de d\xEDas generados:",c.length,"d\xEDas"),c.length===0){console.warn("\u26A0\uFE0F No se generaron d\xEDas con el m\xE9todo normal, generando de forma alternativa"),c.length=0;for(let P=1;P<=h;P++){let I=new Date(o,s-1,P,12,0,0);c.push(I)}console.log("\u{1F50D} D\xEDas generados de forma alternativa:",c.length)}if(c.length>0){let P=c[0],I=c[c.length-1];console.log("\u{1F50D} Primer d\xEDa:",P.toLocaleDateString("es-PE"),"- Debe ser d\xEDa 1"),console.log("\u{1F50D} \xDAltimo d\xEDa:",I.toLocaleDateString("es-PE"));let F=P.getMonth()+1;F!==p&&console.warn(`\u26A0\uFE0F ADVERTENCIA: El primer d\xEDa pertenece al mes ${F}, esperado ${p}`)}else console.error("\u274C ERROR CR\xCDTICO: No se pudieron generar d\xEDas del mes");let y=localStorage.getItem("token"),G=y?{Authorization:`Bearer ${y}`}:{},V=c.map(P=>{let I=P.getFullYear(),F=String(P.getMonth()+1).padStart(2,"0"),L=String(P.getDate()).padStart(2,"0"),k=`${I}-${F}-${L}`;return se(this.http.get(`${this.apiAsistencias}/fecha/${k}`,{headers:G})).catch(w=>(console.warn(`\u26A0\uFE0F Error al cargar asistencia para ${k}:`,w),{data:[]}))});Promise.all(V).then(P=>{console.log("\u{1F50D} ========== PROCESANDO RESPUESTAS DEL BACKEND =========="),console.log("\u{1F50D} Total de respuestas recibidas:",P.length),console.log("\u{1F50D} Trabajador ID:",r),console.log("\u{1F50D} Mes seleccionado (raw):",this.filtros.mes,"A\xF1o (raw):",this.filtros.anio);let I=typeof this.filtros.mes=="string"?parseInt(this.filtros.mes,10):this.filtros.mes,F=typeof this.filtros.anio=="string"?parseInt(this.filtros.anio,10):this.filtros.anio;console.log("\u{1F50D} Mes seleccionado (num):",I,"A\xF1o (num):",F);let L=[],k=0,w=0;P.forEach((_,d)=>{let f=c[d],M=f.getMonth()+1,S=f.getFullYear(),T=typeof I=="string"?parseInt(I,10):I,A=typeof F=="string"?parseInt(F,10):F;if(M!==T||S!==A){console.error(`\u274C ERROR: Fecha fuera del mes seleccionado: ${f.toLocaleDateString("es-PE")} (mes fecha: ${M}, mes seleccionado: ${T}, a\xF1o fecha: ${S}, a\xF1o seleccionado: ${A}) - NO SE INCLUIR\xC1`);return}let E=f.getFullYear(),C=String(f.getMonth()+1).padStart(2,"0"),O=String(f.getDate()).padStart(2,"0"),N=`${E}-${C}-${O}`,H=f.toLocaleDateString("es-PE",{weekday:"long"});(d<3||d===c.length-1)&&console.log(`\u{1F50D} Procesando \xEDndice ${d}: fecha del array = ${N}, fecha objeto = ${f.toLocaleDateString("es-PE")}`);let u=_?.data?.find(R=>(R.trabajadorId||R.TrabajadorID)===r);if((d<5||d===c.length-1)&&(console.log(`\u{1F50D} [D\xEDa ${d+1}/${c.length}] Fecha: ${N}`),console.log(`\u{1F50D}   - Total registros en respuesta: ${_?.data?.length||0}`),console.log(`\u{1F50D}   - Trabajador ID buscado: ${r}`),u?(console.log(`\u{1F50D}   - \u2705 REGISTRO ENCONTRADO para trabajador ${r}`),console.log(`\u{1F50D}   - Fecha del registro: ${u.fecha||u.Fecha}`),console.log(`\u{1F50D}   - Estado: ${u.tipoMarcacion||u.TipoMarcacion||u.estado||u.Estado}`),console.log(`\u{1F50D}   - Hora entrada ma\xF1ana: ${u.horaEntradaManana||u.HoraEntradaManana||"---"}`)):(console.log(`\u{1F50D}   - \u274C NO SE ENCONTR\xD3 REGISTRO para trabajador ${r}`),_?.data&&_.data.length>0&&console.log("\u{1F50D}   - IDs de trabajadores en la respuesta:",_.data.map(R=>R.trabajadorId||R.TrabajadorID).slice(0,5)))),u){k++;let R=u.tipoMarcacion||u.TipoMarcacion||u.estado||u.Estado||"Sin registro";R==="Validado"||R==="Presente"?R="Presente":R==="Tardanza"?R="Tardanza":R==="Falta"?R="Falta":R==="Permiso"?R="Permiso":R==="Licencia"&&(R="Licencia");let Y=0;u.tiempoTrabajado?typeof u.tiempoTrabajado=="string"?Y=parseFloat(u.tiempoTrabajado.replace("h","").replace("hh",""))||0:Y=parseFloat(u.tiempoTrabajado)||0:u.TiempoTrabajado&&(typeof u.TiempoTrabajado=="string"?Y=parseFloat(u.TiempoTrabajado.replace("h","").replace("hh",""))||0:Y=parseFloat(u.TiempoTrabajado)||0),L.push({fecha:N,diaSemana:H.charAt(0).toUpperCase()+H.slice(1),estado:R,horaEntradaManana:u.horaEntradaManana||u.HoraEntradaManana||null,horaSalidaManana:u.horaSalidaManana||u.HoraSalidaManana||null,horaEntradaTarde:u.horaEntradaTarde||u.HoraEntradaTarde||null,horaSalidaTarde:u.horaSalidaTarde||u.HoraSalidaTarde||null,horasTrabajadas:Y,horasExtras:parseFloat(u.horasExtras||u.HorasExtras||0),minutosRetraso:u.minutosTardanza||u.MinutosTardanza||0,minutosTardanza:u.minutosTardanza||u.MinutosTardanza||0,observaciones:u.observaciones||u.Observaciones||"",justificacion:u.justificacion||u.Justificacion||u.motivoJustificacion||u.MotivoJustificacion||""})}else{w++;let R=f.getDay(),Y="Sin registro",ae="";R>=1&&R<=5?(Y="Falta",ae="Falta autom\xE1tica - Sin registro de asistencia"):(Y="Sin registro",ae="D\xEDa no h\xE1bil"),L.push({fecha:N,diaSemana:H.charAt(0).toUpperCase()+H.slice(1),estado:Y,horaEntradaManana:null,horaSalidaManana:null,horaEntradaTarde:null,horaSalidaTarde:null,horasTrabajadas:0,horasExtras:0,minutosRetraso:0,minutosTardanza:0,observaciones:ae,justificacion:""})}}),console.log("\u{1F50D} ========== RESUMEN DE PROCESAMIENTO =========="),console.log("\u{1F50D} Total registros ENCONTRADOS del backend:",k),console.log("\u{1F50D} Total registros NO ENCONTRADOS (faltas autom\xE1ticas):",w),console.log("\u{1F50D} Total detalles generados:",L.length);let D=L.filter(_=>{let d=_.fecha.split("-");if(d.length!==3)return!1;let f=parseInt(d[0],10),S=parseInt(d[1],10)===I&&f===F;return S||console.error(`\u274C ERROR: Detalle con fecha fuera del mes: ${_.fecha} - ELIMINADO`),S});if(D.sort((_,d)=>_.fecha.localeCompare(d.fecha)),console.log("\u{1F50D} Total de detalles despu\xE9s de filtrar:",D.length),console.log("\u{1F50D} Total de d\xEDas del mes esperados:",c.length),D.length<c.length){console.warn(`\u26A0\uFE0F Faltan d\xEDas en los detalles. Esperados: ${c.length}, Encontrados: ${D.length}`);let _=new Set(D.map(d=>d.fecha));c.forEach(d=>{let f=d.getFullYear(),M=String(d.getMonth()+1).padStart(2,"0"),S=String(d.getDate()).padStart(2,"0"),T=`${f}-${M}-${S}`;if(!_.has(T)){let A=d.toLocaleDateString("es-PE",{weekday:"long"}),E=d.getDay(),C="Sin registro",O="";E>=1&&E<=5?(C="Falta",O="Falta autom\xE1tica - Sin registro de asistencia"):(C="Sin registro",O="D\xEDa no h\xE1bil"),D.push({fecha:T,diaSemana:A.charAt(0).toUpperCase()+A.slice(1),estado:C,horaEntradaManana:null,horaSalidaManana:null,horaEntradaTarde:null,horaSalidaTarde:null,horasTrabajadas:0,horasExtras:0,minutosRetraso:0,minutosTardanza:0,observaciones:O,justificacion:""})}}),D.sort((d,f)=>d.fecha.localeCompare(f.fecha)),console.log("\u{1F50D} Total de detalles despu\xE9s de completar d\xEDas faltantes:",D.length)}if(D.length>0){console.log("\u{1F50D} Primer fecha:",D[0].fecha),console.log("\u{1F50D} \xDAltima fecha:",D[D.length-1].fecha);let _=D[0].fecha,d=_.split("-"),f=parseInt(d[2],10);f!==1?console.error(`\u274C ERROR CR\xCDTICO: La primera fecha NO es el d\xEDa 1: ${_} (d\xEDa: ${f})`):console.log("\u2705 Verificaci\xF3n: La primera fecha es el d\xEDa 1")}if(this.trabajadorSeleccionado&&D.length>0){let _=D.filter(E=>E.estado==="Presente").length,d=D.filter(E=>E.estado==="Tardanza").length,f=D.filter(E=>E.estado==="Falta").length,M=D.filter(E=>E.estado==="Permiso").length,S=D.filter(E=>E.estado==="Licencia").length;this.trabajadorSeleccionado.diasPresente=_,this.trabajadorSeleccionado.diasTardanza=d,this.trabajadorSeleccionado.diasFalta=f,this.trabajadorSeleccionado.diasPermiso=M,this.trabajadorSeleccionado.diasLicencia=S;let T=D.reduce((E,C)=>E+(C.horasTrabajadas||0),0);this.trabajadorSeleccionado.totalHorasTrabajadas=Math.round(T*100)/100;let A=D.filter(E=>{let C=E.fecha.split("-");if(C.length!==3)return!1;let N=new Date(parseInt(C[0],10),parseInt(C[1],10)-1,parseInt(C[2],10),12,0,0).getDay();return N>=1&&N<=5}).length;if(A>0){let E=Math.round((_+d)/A*1e4)/100,C=Math.round(_/A*1e4)/100;this.trabajadorSeleccionado.porcentajeAsistencia=Math.min(E,100),this.trabajadorSeleccionado.porcentajePuntualidad=Math.min(C,100)}console.log("\u{1F50D} ========== ESTAD\xCDSTICAS RECALCULADAS (m\xE9todo alternativo) =========="),console.log("\u{1F50D} D\xEDas Presente:",_),console.log("\u{1F50D} D\xEDas Tardanza:",d),console.log("\u{1F50D} D\xEDas Falta:",f),console.log("\u{1F50D} Total Horas Trabajadas:",T),console.log("\u{1F50D} % Asistencia:",this.trabajadorSeleccionado.porcentajeAsistencia),console.log("\u{1F50D} % Puntualidad:",this.trabajadorSeleccionado.porcentajePuntualidad)}console.log("\u{1F50D} ========== FIN: cargarDetallesDiariosAlternativo =========="),this.trabajadorSeleccionado.detallesDiarios=D}).catch(P=>{console.error("\u274C Error al cargar detalles diarios (m\xE9todo alternativo):",P),this.trabajadorSeleccionado.detallesDiarios=[]})}formatearFecha(r){if(!r)return"---";if(typeof r=="string"){let h=r.split("T")[0].split("-");if(h.length===3){let I=h[0],F=h[1];return`${h[2]}/${F}/${I}`}let c=new Date(r);if(isNaN(c.getTime()))return"---";let y=new Date(c.getFullYear(),c.getMonth(),c.getDate(),12,0,0),G=String(y.getDate()).padStart(2,"0"),V=String(y.getMonth()+1).padStart(2,"0"),P=y.getFullYear();return`${G}/${V}/${P}`}let s=r;if(isNaN(s.getTime()))return"---";let o=String(s.getDate()).padStart(2,"0"),p=String(s.getMonth()+1).padStart(2,"0"),g=s.getFullYear();return`${o}/${p}/${g}`}inicializarGraficos(){Object.keys(this.charts).forEach(r=>{this.charts[r]&&(this.charts[r]?.destroy(),this.charts[r]=null)}),this.crearGraficoMensual()}crearGraficoMensual(){let r=document.getElementById("grafico-mensual");if(!r){console.error("\u274C No se encontr\xF3 el canvas grafico-mensual");return}let s=r.getContext("2d");if(!s){console.error("\u274C No se pudo obtener el contexto 2d del canvas");return}let o=this.prepararDatosMensuales();console.log("\u{1F4CA} Datos mensuales:",o),this.charts.mensual&&this.charts.mensual?.destroy(),this.charts.mensual=new K(s,{type:"bar",data:{labels:o.labels,datasets:[{label:"Presentes",data:o.presentes,backgroundColor:"#10b981",borderRadius:6,borderSkipped:!1},{label:"Tardanzas",data:o.tardanzas,backgroundColor:"#f59e0b",borderRadius:6,borderSkipped:!1},{label:"Faltas",data:o.faltas,backgroundColor:"#ef4444",borderRadius:6,borderSkipped:!1}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{color:"#ffffff",usePointStyle:!0,padding:20,font:{size:14,weight:"normal"}}},title:{display:!1},tooltip:{mode:"index",intersect:!1,backgroundColor:"rgba(17, 24, 39, 0.95)",titleColor:"#ffffff",bodyColor:"#ffffff",borderColor:"#374151",borderWidth:1,padding:12,titleFont:{size:14,weight:"bold"},bodyFont:{size:13},callbacks:{label:p=>{let g=p.dataset.label||"",h=p.parsed.y||0,c=o.totales[p.dataIndex]||0,y=c>0?(h/c*100).toFixed(1):0;return`${g}: ${h} d\xEDas (${y}%)`}}}},scales:{x:{stacked:!0,grid:{color:"rgba(255, 255, 255, 0.1)",display:!1},ticks:{color:"#e5e7eb",font:{size:13}}},y:{beginAtZero:!0,stacked:!0,grid:{color:"rgba(255, 255, 255, 0.1)"},ticks:{color:"#e5e7eb",font:{size:13},stepSize:1,callback:function(p){return p+" d\xEDas"}}}}}})}prepararDatosMensuales(){let r=this.trabajadoresDetalle.map(c=>({nombre:(c.nombreCompleto||c.trabajadorNombre||"Sin nombre").split(",")[0],presentes:c.diasPresente||0,tardanzas:c.diasTardanza||0,faltas:c.diasFalta||0})).sort((c,y)=>{let G=c.presentes+c.tardanzas+c.faltas;return y.presentes+y.tardanzas+y.faltas-G}).slice(0,15),s=r.map(c=>c.nombre.length>20?c.nombre.substring(0,17)+"...":c.nombre),o=r.map(c=>c.presentes),p=r.map(c=>c.tardanzas),g=r.map(c=>c.faltas),h=r.map(c=>c.presentes+c.tardanzas+c.faltas);return{labels:s,presentes:o,tardanzas:p,faltas:g,totales:h}}crearGraficoTendenciaDiaria(){let r=document.getElementById("grafico-tendencia");if(!r){console.error("\u274C No se encontr\xF3 el canvas grafico-tendencia");return}let s=r.getContext("2d");if(!s){console.error("\u274C No se pudo obtener el contexto 2d del canvas");return}let o=this.prepararDatosTendenciaDiaria();console.log("\u{1F4CA} Datos de tendencia diaria:",o),this.charts.tendencia&&this.charts.tendencia?.destroy(),this.charts.tendencia=new K(s,{type:"line",data:{labels:o.labels,datasets:[{label:"Presentes",data:o.presentes,borderColor:"#10b981",backgroundColor:"rgba(16, 185, 129, 0.1)",tension:.4,fill:!0},{label:"Tardanzas",data:o.tardanzas,borderColor:"#f59e0b",backgroundColor:"rgba(245, 158, 11, 0.1)",tension:.4,fill:!0},{label:"Faltas",data:o.faltas,borderColor:"#ef4444",backgroundColor:"rgba(239, 68, 68, 0.1)",tension:.4,fill:!0}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{color:"#ffffff",usePointStyle:!0,padding:15,font:{size:13,weight:"normal"}}},title:{display:!0,text:"Tendencia de Asistencia Diaria",color:"#ffffff",font:{size:16,weight:"bold"}},tooltip:{mode:"index",intersect:!1,backgroundColor:"rgba(17, 24, 39, 0.95)",titleColor:"#ffffff",bodyColor:"#ffffff",borderColor:"#374151",borderWidth:1,padding:12,titleFont:{size:14,weight:"bold"},bodyFont:{size:13}}},scales:{x:{grid:{color:"rgba(255, 255, 255, 0.1)"},ticks:{color:"#e5e7eb",font:{size:12}}},y:{beginAtZero:!0,grid:{color:"rgba(255, 255, 255, 0.1)"},ticks:{color:"#e5e7eb",font:{size:12},stepSize:1}}}}})}crearGraficoDistribucionEstados(){let r=document.getElementById("grafico-distribucion");if(!r){console.error("\u274C No se encontr\xF3 el canvas grafico-distribucion");return}let s=r.getContext("2d");if(!s){console.error("\u274C No se pudo obtener el contexto 2d del canvas");return}let o=this.prepararDatosDistribucionEstados();console.log("\u{1F4CA} Datos de distribuci\xF3n:",o),this.charts.distribucion&&this.charts.distribucion?.destroy(),this.charts.distribucion=new K(s,{type:"doughnut",data:{labels:o.labels,datasets:[{data:o.values,backgroundColor:["#10b981","#f59e0b","#ef4444","#3b82f6","#8b5cf6"],borderWidth:2,borderColor:"var(--panel)"}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"right",labels:{color:"#ffffff",usePointStyle:!0,padding:15,font:{size:13,weight:"normal"}}},title:{display:!0,text:"Distribuci\xF3n por Estados",color:"#ffffff",font:{size:16,weight:"bold"}},tooltip:{backgroundColor:"rgba(17, 24, 39, 0.95)",titleColor:"#ffffff",bodyColor:"#ffffff",borderColor:"#374151",borderWidth:1,padding:12,titleFont:{size:14,weight:"bold"},bodyFont:{size:13},callbacks:{label:p=>{let g=p.label||"",h=p.parsed||0,c=p.dataset.data.reduce((G,V)=>G+V,0),y=c>0?(h/c*100).toFixed(1):0;return`${g}: ${h} (${y}%)`}}}}}})}crearGraficoComparativaAreas(){let r=document.getElementById("grafico-areas");if(!r){console.error("\u274C No se encontr\xF3 el canvas grafico-areas");return}let s=r.getContext("2d");if(!s){console.error("\u274C No se pudo obtener el contexto 2d del canvas");return}let o=this.prepararDatosComparativaAreas();console.log("\u{1F4CA} Datos de \xE1reas:",o),this.charts.areas&&this.charts.areas?.destroy(),this.charts.areas=new K(s,{type:"bar",data:{labels:o.labels,datasets:[{label:"Presentes",data:o.presentes,backgroundColor:"#10b981",borderRadius:4},{label:"Tardanzas",data:o.tardanzas,backgroundColor:"#f59e0b",borderRadius:4},{label:"Faltas",data:o.faltas,backgroundColor:"#ef4444",borderRadius:4}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{color:"#ffffff",usePointStyle:!0,padding:15,font:{size:13,weight:"normal"}}},title:{display:!0,text:"Comparativa de Asistencia por \xC1rea",color:"#ffffff",font:{size:16,weight:"bold"}},tooltip:{backgroundColor:"rgba(17, 24, 39, 0.95)",titleColor:"#ffffff",bodyColor:"#ffffff",borderColor:"#374151",borderWidth:1,padding:12,titleFont:{size:14,weight:"bold"},bodyFont:{size:13}}},scales:{x:{stacked:!0,grid:{color:"rgba(255, 255, 255, 0.1)"},ticks:{color:"#e5e7eb",font:{size:12}}},y:{beginAtZero:!0,stacked:!0,grid:{color:"rgba(255, 255, 255, 0.1)"},ticks:{color:"#e5e7eb",font:{size:12},stepSize:1}}}}})}crearGraficoAnalisisTardanzas(){let r=document.getElementById("grafico-tardanzas");if(!r){console.error("\u274C No se encontr\xF3 el canvas grafico-tardanzas");return}let s=r.getContext("2d");if(!s){console.error("\u274C No se pudo obtener el contexto 2d del canvas");return}let o=this.prepararDatosAnalisisTardanzas();console.log("\u{1F4CA} Datos de tardanzas:",o),this.charts.tardanzas&&this.charts.tardanzas?.destroy(),this.charts.tardanzas=new K(s,{type:"bar",data:{labels:o.labels,datasets:[{label:"Tardanzas",data:o.values,backgroundColor:o.colors,borderRadius:4}]},options:{indexAxis:"y",responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},title:{display:!0,text:"An\xE1lisis de Tardanzas por Trabajador",color:"#ffffff",font:{size:16,weight:"bold"}},tooltip:{backgroundColor:"rgba(17, 24, 39, 0.95)",titleColor:"#ffffff",bodyColor:"#ffffff",borderColor:"#374151",borderWidth:1,padding:12,titleFont:{size:14,weight:"bold"},bodyFont:{size:13}}},scales:{x:{beginAtZero:!0,grid:{color:"rgba(255, 255, 255, 0.1)"},ticks:{color:"#e5e7eb",font:{size:12},stepSize:1}},y:{grid:{color:"rgba(255, 255, 255, 0.1)"},ticks:{color:"#e5e7eb",font:{size:12}}}}}})}prepararDatosTendenciaDiaria(){let r=parseInt(this.filtros.mes.toString(),10),s=parseInt(this.filtros.anio.toString(),10),o=new Date(s,r,0).getDate(),p=[],g=[],h=[],c=[],y=this.trabajadoresDetalle.reduce((k,w)=>k+(w.diasPresente||0),0),G=this.trabajadoresDetalle.reduce((k,w)=>k+(w.diasTardanza||0),0),V=this.trabajadoresDetalle.reduce((k,w)=>k+(w.diasFalta||0),0),P=0;for(let k=1;k<=o;k++){let D=new Date(s,r-1,k).getDay();D>=1&&D<=5&&P++}let I=P>0?y/P:0,F=P>0?G/P:0,L=P>0?V/P:0;for(let k=1;k<=o;k++){let D=new Date(s,r-1,k).getDay();D>=1&&D<=5&&(p.push(`${k}/${r}`),g.push(Math.round(I)),h.push(Math.round(F)),c.push(Math.round(L)))}return{labels:p,presentes:g,tardanzas:h,faltas:c}}prepararDatosDistribucionEstados(){let r=this.trabajadoresDetalle.reduce((c,y)=>c+(y.diasPresente||0),0),s=this.trabajadoresDetalle.reduce((c,y)=>c+(y.diasTardanza||0),0),o=this.trabajadoresDetalle.reduce((c,y)=>c+(y.diasFalta||0),0),p=this.trabajadoresDetalle.reduce((c,y)=>c+(y.diasPermiso||0),0),g=this.trabajadoresDetalle.reduce((c,y)=>c+(y.diasLicencia||0),0);return r+s+o+p+g===0?{labels:["Sin datos"],values:[1]}:{labels:["Presentes","Tardanzas","Faltas","Permisos","Licencias"],values:[r,s,o,p,g]}}prepararDatosComparativaAreas(){let r={};this.trabajadoresDetalle.forEach(h=>{let c=h.area||h.trabajadorArea||"Sin \xE1rea";r[c]||(r[c]={presentes:0,tardanzas:0,faltas:0}),r[c].presentes+=h.diasPresente||0,r[c].tardanzas+=h.diasTardanza||0,r[c].faltas+=h.diasFalta||0});let s=Object.keys(r),o=s.map(h=>r[h].presentes),p=s.map(h=>r[h].tardanzas),g=s.map(h=>r[h].faltas);return s.length===0?{labels:["Sin datos"],presentes:[0],tardanzas:[0],faltas:[0]}:{labels:s,presentes:o,tardanzas:p,faltas:g}}prepararDatosAnalisisTardanzas(){let r=this.trabajadoresDetalle.filter(g=>(g.diasTardanza||0)>0).sort((g,h)=>(h.diasTardanza||0)-(g.diasTardanza||0)).slice(0,10);if(r.length===0)return{labels:["Sin tardanzas registradas"],values:[0],colors:["#10b981"]};let s=r.map(g=>{let h=g.nombreCompleto||g.trabajadorNombre||"Sin nombre";return h.length>25?h.substring(0,22)+"...":h}),o=r.map(g=>g.diasTardanza||0),p=o.map(g=>g>=5?"#ef4444":g>=3?"#f59e0b":"#eab308");return{labels:s,values:o,colors:p}}exportarExcel(){console.log("\u{1F4CA} Exportando a Excel...")}exportarPDF(){console.log("\u{1F4C4} Exportando a PDF...")}imprimirReporte(){if(!this.trabajadorSeleccionado){alert("No hay trabajador seleccionado");return}let r=`
      <!DOCTYPE html>
      <html>
      <head>
        <meta charset="UTF-8">
        <title>Reporte de Asistencia - ${this.trabajadorSeleccionado.trabajadorNombre}</title>
        <style>
          @media print {
            @page {
              margin: 1cm;
            }
            body {
              font-family: Arial, sans-serif;
              font-size: 12px;
            }
          }
          body {
            font-family: Arial, sans-serif;
            padding: 20px;
            color: #333;
          }
          .header {
            text-align: center;
            margin-bottom: 30px;
            border-bottom: 2px solid #333;
            padding-bottom: 20px;
          }
          .header h1 {
            margin: 0;
            font-size: 24px;
          }
          .header h2 {
            margin: 10px 0;
            font-size: 18px;
            color: #666;
          }
          .trabajador-info {
            margin-bottom: 20px;
            padding: 15px;
            background: #f5f5f5;
            border-radius: 5px;
          }
          .trabajador-info h3 {
            margin: 0 0 10px 0;
            font-size: 18px;
          }
          .trabajador-info p {
            margin: 5px 0;
            font-size: 14px;
          }
          .estadisticas {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-bottom: 30px;
          }
          .stat-box {
            padding: 15px;
            background: #f9f9f9;
            border: 1px solid #ddd;
            border-radius: 5px;
            text-align: center;
          }
          .stat-box__label {
            display: block;
            font-size: 12px;
            color: #666;
            margin-bottom: 5px;
          }
          .stat-box__value {
            display: block;
            font-size: 24px;
            font-weight: bold;
            color: #333;
          }
          .stat-box__value--success { color: #22c55e; }
          .stat-box__value--warning { color: #f59e0b; }
          .stat-box__value--danger { color: #ef4444; }
          table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
          }
          th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
            font-size: 11px;
          }
          th {
            background: #333;
            color: white;
            font-weight: bold;
          }
          tr:nth-child(even) {
            background: #f9f9f9;
          }
          .badge {
            padding: 3px 8px;
            border-radius: 3px;
            font-size: 10px;
            font-weight: bold;
          }
          .badge--presente { background: #d1fae5; color: #065f46; }
          .badge--tardanza { background: #fef3c7; color: #92400e; }
          .badge--falta { background: #fee2e2; color: #991b1b; }
          .badge--permiso { background: #dbeafe; color: #1e40af; }
          .badge--licencia { background: #e9d5ff; color: #6b21a8; }
          .footer {
            margin-top: 30px;
            text-align: center;
            font-size: 10px;
            color: #666;
            border-top: 1px solid #ddd;
            padding-top: 10px;
          }
        </style>
      </head>
      <body>
        <div class="header">
          <h1>REPORTE DE ASISTENCIA MENSUAL</h1>
          <h2>${this.nombreMesActual} ${this.filtros.anio}</h2>
        </div>
        
        <div class="trabajador-info">
          <h3>${this.trabajadorSeleccionado.trabajadorNombre}</h3>
          <p><strong>DNI:</strong> ${this.trabajadorSeleccionado.trabajadorDni||"N/A"}</p>
          <p><strong>Cargo:</strong> ${this.trabajadorSeleccionado.trabajadorCargo||"N/A"}</p>
          <p><strong>\xC1rea:</strong> ${this.trabajadorSeleccionado.trabajadorArea||"Sin \xE1rea"}</p>
        </div>
        
        <div class="estadisticas">
          <div class="stat-box">
            <span class="stat-box__label">D\xEDas Presente</span>
            <span class="stat-box__value stat-box__value--success">${this.trabajadorSeleccionado.diasPresente||0}</span>
          </div>
          <div class="stat-box">
            <span class="stat-box__label">Tardanzas</span>
            <span class="stat-box__value stat-box__value--warning">${this.trabajadorSeleccionado.diasTardanza||0}</span>
          </div>
          <div class="stat-box">
            <span class="stat-box__label">Faltas</span>
            <span class="stat-box__value stat-box__value--danger">${this.trabajadorSeleccionado.diasFalta||0}</span>
          </div>
          <div class="stat-box">
            <span class="stat-box__label">% Asistencia</span>
            <span class="stat-box__value">${this.trabajadorSeleccionado.porcentajeAsistencia||0}%</span>
          </div>
          <div class="stat-box">
            <span class="stat-box__label">% Puntualidad</span>
            <span class="stat-box__value">${this.trabajadorSeleccionado.porcentajePuntualidad||0}%</span>
          </div>
          <div class="stat-box">
            <span class="stat-box__label">Horas Trabajadas</span>
            <span class="stat-box__value">${this.trabajadorSeleccionado.totalHorasTrabajadas||0}h</span>
          </div>
        </div>
        
        <h3>Registro Detallado Diario</h3>
        <table>
          <thead>
            <tr>
              <th>Fecha</th>
              <th>D\xEDa</th>
              <th>Estado</th>
              <th>Entrada Ma\xF1ana</th>
              <th>Salida Ma\xF1ana</th>
              <th>Entrada Tarde</th>
              <th>Salida Tarde</th>
              <th>Horas</th>
              <th>Retraso</th>
            </tr>
          </thead>
          <tbody>
            ${(this.trabajadorSeleccionado.detallesDiarios||[]).map(o=>`
              <tr>
                <td>${this.formatearFecha(o.fecha)}</td>
                <td>${o.diaSemana||"N/A"}</td>
                <td><span class="badge badge--${(o.estado||"sin-registro").toLowerCase()}">${o.estado||"Sin registro"}</span></td>
                <td>${o.horaEntradaManana||o.horaEntrada||"---"}</td>
                <td>${o.horaSalidaManana||o.horaSalida||"---"}</td>
                <td>${o.horaEntradaTarde||"---"}</td>
                <td>${o.horaSalidaTarde||"---"}</td>
                <td>${o.horasTrabajadas||0}h${o.horasExtras>0?" +"+o.horasExtras+"h":""}</td>
                <td>${(o.minutosRetraso||o.minutosTardanza||0)>0?"+"+(o.minutosRetraso||o.minutosTardanza)+"min":"---"}</td>
              </tr>
            `).join("")}
          </tbody>
        </table>
        
        <div class="footer">
          <p>Generado el ${new Date().toLocaleDateString("es-PE",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}</p>
          <p>GESTORPLAN - Sistema de Planillas</p>
        </div>
      </body>
      </html>
    `,s=window.open("","_blank");s&&(s.document.write(r),s.document.close(),s.onload=()=>{setTimeout(()=>{s.print()},250)})}aplicarFiltros(){console.log("\u{1F50D} Aplicando filtros:",this.filtros);let r=[...this.trabajadoresDetalle];if(this.filtros.busqueda){let s=this.filtros.busqueda.toLowerCase();r=r.filter(o=>o.nombreCompleto.toLowerCase().includes(s)||o.dni.includes(s)||o.area.toLowerCase().includes(s)||o.cargo.toLowerCase().includes(s))}this.filtros.area&&(r=r.filter(s=>s.area===this.filtros.area)),r.sort((s,o)=>{switch(this.filtros.ordenarPor){case"asistencia":return o.porcentajeAsistencia-s.porcentajeAsistencia;case"tardanzas":return o.diasTardanza-s.diasTardanza;case"faltas":return o.diasFalta-s.diasFalta;default:return s.nombreCompleto.localeCompare(o.nombreCompleto)}}),this.trabajadoresFiltrados=r,console.log("\u{1F4CA} Trabajadores filtrados:",this.trabajadoresFiltrados.length)}limpiarFiltros(){this.filtros={mes:new Date().getMonth()+1,anio:new Date().getFullYear(),area:"",ordenarPor:"nombre",busqueda:""},this.aplicarFiltros()}get nombreMesActual(){let r=typeof this.filtros.mes=="string"?parseInt(this.filtros.mes,10):this.filtros.mes,s=this.meses.find(o=>o.valor===r)?.nombre||"";if(!s&&this.meses.length>0){let o=this.meses.find(p=>String(p.valor)===String(this.filtros.mes))?.nombre||"";if(o)return console.log("\u{1F50D} nombreMesActual - encontrado con conversi\xF3n de tipo"),o}return console.log("\u{1F50D} nombreMesActual getter - mes:",this.filtros.mes,"mesNumero:",r,"nombre:",s),s||"Mes desconocido"}get resumenGeneral(){return this.resumenMensual?oe(ne({},this.resumenMensual.estadisticas),{trabajadoresDestacados:this.trabajadoresDestacados,trabajadoresAlerta:this.trabajadoresAlerta,diasHabiles:this.resumenMensual.periodo?.diasHabiles||0}):null}get resumenTrabajadoresFiltrados(){return this.trabajadoresFiltrados}getEstadoBadgeClass(r){return r>=95?"badge--excelente":r>=90?"badge--bueno":r>=80?"badge--regular":"badge--malo"}getEstadoCalendarioClass(r){switch(r){case"Presente":return"calendario-dia--presente";case"Tardanza":return"calendario-dia--tardanza";case"Falta":return"calendario-dia--falta";case"Permiso":return"calendario-dia--permiso";case"Licencia":return"calendario-dia--licencia";case"Vacaciones":return"calendario-dia--vacaciones";case"Comision":return"calendario-dia--comision";default:return"calendario-dia--sin-registro"}}};m.\u0275fac=function(s){return new(s||m)(re(be),re(me))},m.\u0275cmp=le({type:m,selectors:[["app-resumen"]],decls:70,vars:24,consts:[[1,"resumen-mensual"],[1,"page-header"],[1,"page-header__left"],[1,"page-title"],[1,"page-title__icon"],[1,"page-subtitle"],[1,"page-subtitle__dots"],[1,"page-subtitle__dot","page-subtitle__dot--large"],[1,"page-subtitle__dot","page-subtitle__dot--medium"],[1,"page-subtitle__dot","page-subtitle__dot--small"],[1,"page-header__right"],[1,"btn","btn--sm","btn--outline","btn-export","btn-export--excel",3,"click"],["src","assets/excel.png","alt","Excel",1,"btn-export__icon","btn-export__icon--excel"],[1,"btn-export__text"],[1,"btn","btn--sm","btn--outline","btn-export","btn-export--pdf",3,"click"],["src","assets/pdf.png","alt","PDF",1,"btn-export__icon","btn-export__icon--pdf"],["class","resumen-general",4,"ngIf"],["class","destacados-alertas",4,"ngIf"],[1,"periodo-selector"],[1,"periodo-selector__top"],[1,"periodo-selector__controls"],[1,"select","select--large",3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"periodo-actual"],[1,"periodo-actual__label"],[1,"periodo-actual__value"],[1,"vista-toggle"],[1,"btn","btn--sm","btn--outline",3,"click"],[1,"periodo-selector__filtros"],[1,"filtros-bar__left"],[1,"search-box"],[1,"search-box__icon"],["type","text","placeholder","Buscar por DNI, nombre, \xE1rea...",1,"search-box__input",3,"ngModelChange","input","ngModel"],[1,"select",3,"ngModelChange","change","ngModel"],["value",""],["value","nombre"],["value","asistencia"],["value","tardanzas"],["value","faltas"],["class","btn btn--ghost btn--sm",3,"click",4,"ngIf"],[1,"filtros-bar__right"],[1,"resultados-count"],["class","tabla-container",4,"ngIf"],["class","detalle-container",4,"ngIf"],["class","graficos-container",4,"ngIf"],["class","modal",3,"click",4,"ngIf"],[1,"resumen-general"],[1,"resumen-card","resumen-card--primary"],[1,"resumen-card__icon"],[1,"resumen-card__content"],[1,"resumen-card__label"],[1,"resumen-card__value"],[1,"resumen-card","resumen-card--success"],[1,"resumen-card","resumen-card--info"],[1,"resumen-card","resumen-card--warning"],[1,"resumen-card","resumen-card--danger"],[1,"resumen-card","resumen-card--secondary"],[1,"destacados-alertas"],[1,"panel","panel--destacados"],[1,"panel__title"],[1,"panel__icon"],[1,"lista-destacados"],["class","destacado-item",4,"ngFor","ngForOf"],["class","panel panel--alertas",4,"ngIf"],[1,"destacado-item"],[1,"destacado-item__avatar"],[1,"destacado-item__info"],[1,"destacado-item__nombre"],[1,"destacado-item__cargo"],[1,"destacado-item__area"],[1,"destacado-item__stats"],[1,"stat","stat--asistencia"],[1,"stat","stat--puntualidad"],[1,"panel","panel--alertas"],[1,"lista-alertas"],["class","alerta-item",4,"ngFor","ngForOf"],[1,"alerta-item"],[1,"alerta-item__avatar"],[1,"alerta-item__info"],[1,"alerta-item__nombre"],[1,"alerta-item__cargo"],[1,"alerta-item__stats"],[1,"stat","stat--asistencia-baja"],[1,"stat","stat--faltas"],[1,"stat","stat--tardanzas"],[3,"value"],[1,"btn","btn--ghost","btn--sm",3,"click"],[1,"tabla-container"],[1,"tabla-scroll"],[1,"tabla"],[4,"ngIf"],[4,"ngFor","ngForOf"],["colspan","12",1,"td-loading"],[1,"loading-spinner"],["colspan","12",1,"td-empty"],[1,"empty-state"],[1,"empty-state__icon"],[1,"empty-state__text"],[1,"td-dni"],[1,"td-trabajador"],[1,"trabajador-info"],[1,"trabajador-info__nombre"],[1,"trabajador-info__cargo"],[1,"td-area"],[1,"td-numero"],[1,"td-numero","td-numero--success"],[1,"td-numero","td-numero--warning"],["class","justif-badge",4,"ngIf"],[1,"td-numero","td-numero--danger"],[1,"td-porcentaje"],[1,"badge",3,"ngClass"],[1,"td-horas"],["class","horas-extras",4,"ngIf"],[1,"td-actions"],["title","Ver detalle",1,"btn-icon",3,"click"],[1,"justif-badge"],[1,"horas-extras"],[1,"detalle-container"],[1,"detalle-header"],[1,"detalle-header__selector"],[1,"detalle-header__label"],[1,"select","select--large","select--premium",3,"ngModelChange","change","ngModel"],["value","-1"],["class","trabajador-info-card",4,"ngIf"],["class","detalle-tabla-container",4,"ngIf"],["class","detalle-empty",4,"ngIf"],[1,"trabajador-info-card"],[1,"trabajador-info-card__header"],[1,"trabajador-info-card__avatar"],[1,"trabajador-info-card__data"],[1,"trabajador-info-card__nombre"],[1,"trabajador-info-card__meta"],[1,"meta-item"],[1,"trabajador-stats"],[1,"stat-card","stat-card--success"],[1,"stat-card__icon"],[1,"stat-card__content"],[1,"stat-card__label"],[1,"stat-card__value"],[1,"stat-card","stat-card--warning"],[1,"stat-card","stat-card--danger"],[1,"stat-card","stat-card--info"],[1,"stat-card","stat-card--primary"],[1,"stat-card","stat-card--secondary"],[1,"detalle-tabla-container"],[1,"detalle-tabla-header"],[1,"detalle-tabla-title"],[1,"detalle-tabla-info"],[1,"info-badge"],[1,"tabla","tabla--detalle"],[3,"fila--presente","fila--tardanza","fila--falta","fila--permiso","fila--licencia",4,"ngFor","ngForOf"],["colspan","10",1,"td-empty"],[1,"empty-state__hint"],[1,"td-fecha"],[1,"td-dia"],[1,"td-estado"],[1,"td-hora"],[1,"td-tardanza"],["class","tardanza-badge",4,"ngIf"],["class","tardanza-badge tardanza-badge--none",4,"ngIf"],[1,"td-observaciones"],[1,"tardanza-badge"],[1,"tardanza-badge","tardanza-badge--none"],[1,"detalle-empty"],[1,"empty-state","empty-state--large"],[1,"empty-state__title"],[1,"graficos-container"],[1,"grafico-principal"],[1,"grafico-card","grafico-card--large"],[1,"grafico-card__header"],[1,"grafico-card__title"],[1,"grafico-card__subtitle"],[1,"grafico-card__body"],["id","grafico-mensual"],[1,"modal",3,"click"],[1,"modal__content","modal__content--large",3,"click"],[1,"modal__header"],[1,"modal__title"],[1,"modal__close",3,"click"],["class","modal__body",4,"ngIf"],[1,"modal__footer"],[1,"btn","btn--ghost",3,"click"],[1,"btn","btn--primary",3,"click"],[1,"modal__body"],[1,"trabajador-card"],[1,"avatar-large"],[1,"trabajador-data"],[1,"estadisticas-detalle"],[1,"stat-box"],[1,"stat-box__label"],[1,"stat-box__value","stat-box__value--success"],[1,"stat-box__value","stat-box__value--warning"],[1,"stat-box__value","stat-box__value--danger"],[1,"stat-box__value"],["class","registro-detallado-modal",4,"ngIf"],["class","registro-detallado-empty",4,"ngIf"],[1,"registro-detallado-modal"],[1,"registro-detallado-title"],[1,"tabla-detalle-scroll"],[1,"tabla","tabla--detalle-modal"],[1,"registro-detallado-empty"]],template:function(s,o){s&1&&(a(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3)(4,"span",4),n(5,"\u{1F4CA}"),t(),n(6," Resumen Mensual de Asistencias "),t(),a(7,"p",5)(8,"span",6),X(9,"span",7)(10,"span",8)(11,"span",9),t(),n(12," An\xE1lisis estad\xEDstico de asistencia del personal municipal "),t()(),a(13,"div",10)(14,"button",11),$("click",function(){return o.exportarExcel()}),X(15,"img",12),a(16,"span",13),n(17,"Excel"),t()(),a(18,"button",14),$("click",function(){return o.exportarPDF()}),X(19,"img",15),a(20,"span",13),n(21,"PDF"),t()()()(),z(22,Oe,49,6,"div",16)(23,De,9,3,"div",17),a(24,"div",18)(25,"div",19)(26,"div",20)(27,"select",21),Z("ngModelChange",function(g){return J(o.filtros.mes,g)||(o.filtros.mes=g),g}),$("change",function(){return o.cambiarPeriodo()}),z(28,Te,2,2,"option",22),t(),a(29,"select",21),Z("ngModelChange",function(g){return J(o.filtros.anio,g)||(o.filtros.anio=g),g}),$("change",function(){return o.cambiarPeriodo()}),z(30,we,2,2,"option",22),t(),a(31,"div",23)(32,"span",24),n(33,"Per\xEDodo:"),t(),a(34,"span",25),n(35),t()()(),a(36,"div",26)(37,"button",27),$("click",function(){return o.vistaActual="resumen"}),n(38," \u{1F4CB} Resumen "),t(),a(39,"button",27),$("click",function(){return o.vistaActual="detalle"}),n(40," \u{1F4C5} Detalle "),t(),a(41,"button",27),$("click",function(){return o.cambiarVista("grafico")}),n(42," \u{1F4C8} Gr\xE1ficos "),t()()(),a(43,"div",28)(44,"div",29)(45,"div",30)(46,"span",31),n(47,"\u{1F50D}"),t(),a(48,"input",32),Z("ngModelChange",function(g){return J(o.filtros.busqueda,g)||(o.filtros.busqueda=g),g}),$("input",function(){return o.aplicarFiltros()}),t()(),a(49,"select",33),Z("ngModelChange",function(g){return J(o.filtros.area,g)||(o.filtros.area=g),g}),$("change",function(){return o.aplicarFiltros()}),a(50,"option",34),n(51,"Todas las \xE1reas"),t(),z(52,ze,2,2,"option",22),t(),a(53,"select",33),Z("ngModelChange",function(g){return J(o.filtros.ordenarPor,g)||(o.filtros.ordenarPor=g),g}),$("change",function(){return o.aplicarFiltros()}),a(54,"option",35),n(55,"Ordenar por Nombre"),t(),a(56,"option",36),n(57,"Ordenar por Asistencia"),t(),a(58,"option",37),n(59,"Ordenar por Tardanzas"),t(),a(60,"option",38),n(61,"Ordenar por Faltas"),t()(),z(62,Ie,2,0,"button",39),t(),a(63,"div",40)(64,"span",41),n(65),t()()()(),z(66,Le,33,3,"div",42)(67,Ze,12,5,"div",43)(68,Ke,10,2,"div",44)(69,rt,13,3,"div",45),t()),s&2&&(i(22),x("ngIf",o.resumenGeneral),i(),x("ngIf",o.resumenGeneral),i(4),q("ngModel",o.filtros.mes),i(),x("ngForOf",o.meses),i(),q("ngModel",o.filtros.anio),i(),x("ngForOf",o.anios),i(5),U("",o.nombreMesActual," ",o.filtros.anio),i(2),Q("active",o.vistaActual==="resumen"),i(2),Q("active",o.vistaActual==="detalle"),i(2),Q("active",o.vistaActual==="grafico"),i(7),q("ngModel",o.filtros.busqueda),i(),q("ngModel",o.filtros.area),i(3),x("ngForOf",o.areas),i(),q("ngModel",o.filtros.ordenarPor),i(9),x("ngIf",o.filtros.busqueda||o.filtros.area),i(3),b("",o.resumenTrabajadoresFiltrados.length," trabajadores"),i(),x("ngIf",o.vistaActual==="resumen"),i(),x("ngIf",o.vistaActual==="detalle"),i(),x("ngIf",o.vistaActual==="grafico"),i(),x("ngIf",o.mostrarModalDetalle))},dependencies:[ge,de,ce,pe,Pe,Ce,ve,ue,he,xe,_e],styles:['@charset "UTF-8";.resumen-mensual[_ngcontent-%COMP%]{width:100%;max-width:100%;padding-bottom:20px}.page-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:16px;margin-top:0;padding:16px 20px;background:linear-gradient(135deg,#fff,#f8fafc)!important;border-radius:10px;border:1px solid rgba(34,197,94,.15);box-shadow:0 4px 16px #00000014,0 1px 3px #0000000d,inset 0 1px #ffffffe6;position:relative;overflow:hidden;gap:20px;flex-wrap:wrap}.page-header[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:5px;background:linear-gradient(90deg,#22c55e,#16a34a,#22c55e);background-size:200% 100%;animation:_ngcontent-%COMP%_shimmer 3s ease-in-out infinite}.page-header[_ngcontent-%COMP%]:after{content:"";position:absolute;top:0;left:0;width:4px;height:100%;background:linear-gradient(180deg,#22c55e,#16a34a);opacity:.6}.page-header__left[_ngcontent-%COMP%]{flex:1;position:relative;z-index:1;padding-left:12px}.page-header__right[_ngcontent-%COMP%]{display:flex;gap:12px;flex-shrink:0;position:relative;z-index:1}[data-theme=dark][_nghost-%COMP%]   .page-header[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .page-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1e293b,#0f172a)!important;border:1px solid rgba(34,197,94,.2);box-shadow:0 4px 16px #0000004d,0 1px 3px #0003,inset 0 1px #ffffff0d}.page-title[_ngcontent-%COMP%]{font-size:28px;font-weight:700;color:var(--text-1);margin:0 0 8px;display:flex;align-items:center;gap:12px}.page-title__icon[_ngcontent-%COMP%]{font-size:32px}.page-subtitle[_ngcontent-%COMP%]{font-size:11px;color:#64748b;margin:0;font-weight:600;letter-spacing:.05em;display:flex;align-items:center;gap:10px;text-transform:uppercase;position:relative;padding-left:20px}.page-subtitle__dots[_ngcontent-%COMP%]{position:absolute;left:0;top:50%;transform:translateY(-50%);display:flex;flex-direction:column;align-items:flex-start;justify-content:center;gap:3px;width:16px;height:20px}.page-subtitle__dot[_ngcontent-%COMP%]{border-radius:50%;background:linear-gradient(135deg,#22c55e,#16a34a);flex-shrink:0}.page-subtitle__dot--large[_ngcontent-%COMP%]{width:8px;height:8px;box-shadow:0 0 0 2px #22c55e33,0 0 8px #22c55e66;animation:dotPulse 2s ease-in-out infinite;margin-left:0}.page-subtitle__dot--medium[_ngcontent-%COMP%]{width:5px;height:5px;box-shadow:0 0 0 1.5px #22c55e33,0 0 6px #22c55e4d;opacity:.85;margin-left:3px}.page-subtitle__dot--small[_ngcontent-%COMP%]{width:3px;height:3px;box-shadow:0 0 0 1px #22c55e33,0 0 4px #22c55e4d;opacity:.7;margin-left:6px}.btn-export[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;justify-content:center;padding:18px 20px;min-width:66px;overflow:hidden}.btn-export__icon[_ngcontent-%COMP%]{width:42px;height:42px;transition:all .4s cubic-bezier(.34,1.56,.64,1);object-fit:contain;display:block;position:relative;z-index:2;flex-shrink:0}.btn-export__icon--excel[_ngcontent-%COMP%], .btn-export__icon--pdf[_ngcontent-%COMP%]{filter:drop-shadow(0 2px 4px rgba(0,0,0,.25))}.btn-export__text[_ngcontent-%COMP%]{position:absolute;left:50%;transform:translate(-50%) translate(30px);font-size:13px;font-weight:600;white-space:nowrap;opacity:0;visibility:hidden;pointer-events:none;transition:all .4s cubic-bezier(.34,1.56,.64,1);z-index:1;letter-spacing:.3px;color:var(--text-1)}.btn-export[_ngcontent-%COMP%]:hover   .btn-export__icon[_ngcontent-%COMP%]{transform:translate(-45px);opacity:.2}.btn-export[_ngcontent-%COMP%]:hover   .btn-export__text[_ngcontent-%COMP%]{opacity:1;visibility:visible;transform:translate(-50%);transition-delay:.1s}.btn-export--excel[_ngcontent-%COMP%]:hover{background:#2173461a;border-color:#217346}.btn-export--excel[_ngcontent-%COMP%]:hover   .btn-export__text[_ngcontent-%COMP%]{color:#217346;font-weight:700}.btn-export--pdf[_ngcontent-%COMP%]:hover{background:#dc143c1a;border-color:#dc143c}.btn-export--pdf[_ngcontent-%COMP%]:hover   .btn-export__text[_ngcontent-%COMP%]{color:#dc143c;font-weight:700}[data-theme=dark][_nghost-%COMP%]   .page-header[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .page-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--panel) 0%,#1e293b 100%)!important;border-color:var(--border);box-shadow:0 4px 16px #0000004d,0 1px 3px #0003,inset 0 1px #ffffff0d}[data-theme=dark][_nghost-%COMP%]   .btn-export__text[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .btn-export__text[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f1f5f9,#e2e8f0);color:#1e293b}[data-theme=dark][_nghost-%COMP%]   .btn-export__text[_ngcontent-%COMP%]:after, [data-theme=dark]   [_nghost-%COMP%]   .btn-export__text[_ngcontent-%COMP%]:after{border-top-color:#e2e8f0}.periodo-selector[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;padding:20px;background:var(--panel);border:1px solid var(--border);border-radius:8px;margin-bottom:24px;position:relative;overflow:hidden}.periodo-selector__top[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:20px;flex-wrap:wrap}.periodo-selector__controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;flex-wrap:wrap}.periodo-selector__filtros[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:16px;padding-top:16px;border-top:1px solid var(--border);flex-wrap:wrap}.periodo-selector__filtros[_ngcontent-%COMP%]   .filtros-bar__left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;flex-wrap:wrap;flex:1}.periodo-selector__filtros[_ngcontent-%COMP%]   .filtros-bar__right[_ngcontent-%COMP%]{display:flex;align-items:center;flex-shrink:0}.periodo-actual[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:10px 20px;background:linear-gradient(135deg,var(--accent) 0%,#16a34a 100%);border-radius:10px}.periodo-actual__label[_ngcontent-%COMP%]{font-size:13px;font-weight:600;color:#fffc}.periodo-actual__value[_ngcontent-%COMP%]{font-size:16px;font-weight:700;color:#fff}.vista-toggle[_ngcontent-%COMP%]{display:flex;gap:8px}.select[_ngcontent-%COMP%]{padding:10px 14px;border:1px solid var(--border);border-radius:10px;background:var(--panel-2);color:var(--text-1);font-size:14px;outline:none;cursor:pointer;transition:all .2s ease}.select[_ngcontent-%COMP%]:focus{border-color:var(--accent);box-shadow:0 0 0 3px #22c55e1a}.select--large[_ngcontent-%COMP%]{padding:12px 16px;font-size:15px;font-weight:600;min-width:150px}.resumen-general[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:16px;margin-bottom:16px}.resumen-card[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;padding:20px;border-radius:8px;border:2px solid;transition:all .3s ease}.resumen-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 8px 24px #00000026}.resumen-card__icon[_ngcontent-%COMP%]{font-size:36px}.resumen-card__content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.resumen-card__label[_ngcontent-%COMP%]{font-size:12px;font-weight:600;color:var(--text-2);text-transform:uppercase;letter-spacing:.5px}.resumen-card__value[_ngcontent-%COMP%]{font-size:28px;font-weight:700;line-height:1}.resumen-card--primary[_ngcontent-%COMP%]{background:#3b82f61a;border-color:#3b82f64d}.resumen-card--primary[_ngcontent-%COMP%]   .resumen-card__value[_ngcontent-%COMP%]{color:#3b82f6}.resumen-card--success[_ngcontent-%COMP%]{background:#22c55e1a;border-color:#22c55e4d}.resumen-card--success[_ngcontent-%COMP%]   .resumen-card__value[_ngcontent-%COMP%]{color:var(--accent)}.resumen-card--info[_ngcontent-%COMP%]{background:#0ea5e91a;border-color:#0ea5e94d}.resumen-card--info[_ngcontent-%COMP%]   .resumen-card__value[_ngcontent-%COMP%]{color:#0ea5e9}.resumen-card--warning[_ngcontent-%COMP%]{background:#f59e0b1a;border-color:#f59e0b4d}.resumen-card--warning[_ngcontent-%COMP%]   .resumen-card__value[_ngcontent-%COMP%]{color:#f59e0b}.resumen-card--danger[_ngcontent-%COMP%]{background:#ef44441a;border-color:#ef44444d}.resumen-card--danger[_ngcontent-%COMP%]   .resumen-card__value[_ngcontent-%COMP%]{color:#ef4444}.resumen-card--secondary[_ngcontent-%COMP%]{background:#6b72801a;border-color:#6b72804d}.resumen-card--secondary[_ngcontent-%COMP%]   .resumen-card__value[_ngcontent-%COMP%]{color:#6b7280}.destacados-alertas[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(400px,1fr));gap:20px;margin-bottom:16px}.panel[_ngcontent-%COMP%]{background:var(--panel);border:1px solid var(--border);border-radius:12px;padding:20px;position:relative;overflow:hidden}.panel[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:3px;background:linear-gradient(90deg,#22c55e,#16a34a,#22c55e);background-size:200% 100%;animation:_ngcontent-%COMP%_shimmer 3s ease-in-out infinite}.panel__title[_ngcontent-%COMP%]{font-size:18px;font-weight:700;color:var(--text-1);margin:0 0 20px;display:flex;align-items:center;gap:10px}.panel__icon[_ngcontent-%COMP%]{font-size:24px}.panel--destacados[_ngcontent-%COMP%]{border-color:#22c55e4d}.panel--alertas[_ngcontent-%COMP%]{border-color:#ef44444d}.lista-destacados[_ngcontent-%COMP%], .lista-alertas[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.destacado-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;padding:16px;background:#22c55e0d;border:1px solid rgba(34,197,94,.15);border-radius:10px;transition:all .2s ease}.destacado-item[_ngcontent-%COMP%]:hover{background:#22c55e1a;transform:translate(4px)}.destacado-item__avatar[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:50%;background:linear-gradient(135deg,var(--accent) 0%,#16a34a 100%);color:#fff;display:flex;align-items:center;justify-content:center;font-size:20px;font-weight:700;flex-shrink:0}.destacado-item__info[_ngcontent-%COMP%]{flex:1}.destacado-item__nombre[_ngcontent-%COMP%]{font-size:15px;font-weight:700;color:var(--text-1);margin:0 0 4px}.destacado-item__cargo[_ngcontent-%COMP%], .destacado-item__area[_ngcontent-%COMP%]{font-size:12px;color:var(--text-2);margin:0}.destacado-item__stats[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px;align-items:flex-end}.alerta-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;padding:16px;background:#ef44440d;border:1px solid rgba(239,68,68,.15);border-radius:10px;transition:all .2s ease}.alerta-item[_ngcontent-%COMP%]:hover{background:#ef44441a;transform:translate(4px)}.alerta-item__avatar[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:50%;background:linear-gradient(135deg,#ef4444,#dc2626);color:#fff;display:flex;align-items:center;justify-content:center;font-size:20px;font-weight:700;flex-shrink:0}.alerta-item__info[_ngcontent-%COMP%]{flex:1}.alerta-item__nombre[_ngcontent-%COMP%]{font-size:15px;font-weight:700;color:var(--text-1);margin:0 0 4px}.alerta-item__cargo[_ngcontent-%COMP%]{font-size:12px;color:var(--text-2);margin:0}.alerta-item__stats[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px;align-items:flex-end}.stat[_ngcontent-%COMP%]{padding:4px 10px;border-radius:6px;font-size:12px;font-weight:600;white-space:nowrap}.stat--asistencia[_ngcontent-%COMP%]{background:#22c55e26;color:var(--accent)}.stat--puntualidad[_ngcontent-%COMP%]{background:#3b82f626;color:#3b82f6}.stat--asistencia-baja[_ngcontent-%COMP%], .stat--faltas[_ngcontent-%COMP%]{background:#ef444426;color:#ef4444}.stat--tardanzas[_ngcontent-%COMP%]{background:#f59e0b26;color:#f59e0b}.filtros-bar[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:16px;padding:20px 24px;background:linear-gradient(135deg,#fff,#f8fafc)!important;border:1px solid var(--border);border-radius:8px;margin-bottom:24px;flex-wrap:wrap;position:relative;overflow:hidden}.filtros-bar[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:3px;background:linear-gradient(90deg,#22c55e,#16a34a,#22c55e);background-size:200% 100%;animation:_ngcontent-%COMP%_shimmer 3s ease-in-out infinite}.filtros-bar__left[_ngcontent-%COMP%], .filtros-bar__right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;flex-wrap:wrap}@keyframes _ngcontent-%COMP%_shimmer{0%,to{background-position:0% 50%}50%{background-position:100% 50%}}.search-box[_ngcontent-%COMP%]{position:relative;min-width:300px}.search-box__icon[_ngcontent-%COMP%]{position:absolute;left:14px;top:50%;transform:translateY(-50%);font-size:18px;opacity:.5;pointer-events:none}.search-box__input[_ngcontent-%COMP%]{width:100%;padding:10px 14px 10px 44px;border:1px solid var(--border);border-radius:10px;background:var(--panel-2);color:var(--text-1);font-size:14px;outline:none;transition:all .2s ease}.search-box__input[_ngcontent-%COMP%]:focus{border-color:var(--accent);box-shadow:0 0 0 3px #22c55e1a}.resultados-count[_ngcontent-%COMP%]{font-size:14px;color:var(--text-2);font-weight:600}.tabla-container[_ngcontent-%COMP%]{background:var(--panel);border:1px solid var(--border);border-radius:4px;overflow:hidden;margin-bottom:24px}.tabla-scroll[_ngcontent-%COMP%]{overflow-x:auto}.tabla[_ngcontent-%COMP%]{width:100%;border-collapse:separate;border-spacing:0;font-size:13px;border-radius:4px;overflow:hidden}.tabla[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:#059669!important;border-bottom:2px solid #047857!important}.tabla[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:16px 20px!important;text-align:left;font-size:12px!important;font-weight:700!important;color:#fff!important;text-transform:uppercase!important;letter-spacing:1px!important;white-space:nowrap;border-right:1px solid rgba(4,120,87,.3)!important;box-shadow:0 1px 3px #04785733!important}.tabla[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{border-left:none!important;border-top-left-radius:4px}.tabla[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{border-right:none!important;border-top-right-radius:4px}.tabla[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid var(--line-soft);transition:background .15s ease}.tabla[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:var(--panel-2)}.tabla[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child{border-bottom:none}.tabla[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]:first-child{border-bottom-left-radius:4px}.tabla[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]:last-child{border-bottom-right-radius:4px}.tabla[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:14px 12px;color:var(--text-1)}.td-loading[_ngcontent-%COMP%], .td-empty[_ngcontent-%COMP%]{text-align:center;padding:60px 20px}.loading-spinner[_ngcontent-%COMP%]{font-size:16px;color:var(--text-2)}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:12px}.empty-state__icon[_ngcontent-%COMP%]{font-size:48px;opacity:.5}.empty-state__text[_ngcontent-%COMP%]{font-size:16px;color:var(--text-2);margin:0}.trabajador-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.trabajador-info__nombre[_ngcontent-%COMP%]{font-weight:600;color:var(--text-1)}.trabajador-info__cargo[_ngcontent-%COMP%]{font-size:12px;color:var(--text-2)}.td-numero[_ngcontent-%COMP%]{text-align:center;font-weight:600}.td-numero--success[_ngcontent-%COMP%]{color:var(--accent)}.td-numero--warning[_ngcontent-%COMP%]{color:#f59e0b}.td-numero--danger[_ngcontent-%COMP%]{color:#ef4444}.justif-badge[_ngcontent-%COMP%]{display:inline-block;margin-left:4px;padding:2px 6px;background:#22c55e26;border-radius:4px;font-size:10px;color:var(--accent);font-weight:700}.td-porcentaje[_ngcontent-%COMP%]{text-align:center}.td-horas[_ngcontent-%COMP%]{font-weight:600}.horas-extras[_ngcontent-%COMP%]{display:block;font-size:11px;color:var(--accent);font-weight:600;margin-top:4px}.td-actions[_ngcontent-%COMP%]{text-align:center}.btn-icon[_ngcontent-%COMP%]{width:32px;height:32px;display:inline-flex;align-items:center;justify-content:center;border-radius:8px;border:none;background:transparent;cursor:pointer;font-size:16px;transition:all .2s ease}.btn-icon[_ngcontent-%COMP%]:hover{background:var(--panel-2)}.badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:4px;padding:4px 10px;border-radius:6px;font-size:12px;font-weight:600;white-space:nowrap}.badge--excelente[_ngcontent-%COMP%]{background:#22c55e26;color:#22c55e;border:1px solid rgba(34,197,94,.3)}.badge--bueno[_ngcontent-%COMP%]{background:#3b82f626;color:#3b82f6;border:1px solid rgba(59,130,246,.3)}.badge--regular[_ngcontent-%COMP%]{background:#f59e0b26;color:#f59e0b;border:1px solid rgba(245,158,11,.3)}.badge--malo[_ngcontent-%COMP%]{background:#ef444426;color:#ef4444;border:1px solid rgba(239,68,68,.3)}.badge--presente[_ngcontent-%COMP%]{background:#22c55e26;color:#22c55e;border:1px solid rgba(34,197,94,.3)}.badge--tardanza[_ngcontent-%COMP%]{background:#f59e0b26;color:#f59e0b;border:1px solid rgba(245,158,11,.3)}.badge--falta[_ngcontent-%COMP%]{background:#ef444426;color:#ef4444;border:1px solid rgba(239,68,68,.3)}.badge--permiso[_ngcontent-%COMP%]{background:#a855f726;color:#a855f7;border:1px solid rgba(168,85,247,.3)}.badge--licencia[_ngcontent-%COMP%]{background:#0ea5e926;color:#0ea5e9;border:1px solid rgba(14,165,233,.3)}.badge--comision[_ngcontent-%COMP%]{background:#8b5cf626;color:#8b5cf6;border:1px solid rgba(139,92,246,.3)}.calendario-container[_ngcontent-%COMP%]{background:var(--panel);border:1px solid var(--border);border-radius:8px;padding:24px;margin-bottom:24px;position:relative;overflow:hidden}.calendario-container[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:3px;background:linear-gradient(90deg,#22c55e,#16a34a,#22c55e);background-size:200% 100%;animation:_ngcontent-%COMP%_shimmer 3s ease-in-out infinite}.trabajador-selector[_ngcontent-%COMP%]{margin-bottom:24px}.calendario-mensual[_ngcontent-%COMP%]{width:100%}.calendario-header[_ngcontent-%COMP%]{margin-bottom:24px;padding-bottom:16px;border-bottom:2px solid var(--border)}.calendario-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:var(--text-1);margin:0 0 8px}.calendario-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;color:var(--text-2);margin:0}.calendario-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(5,1fr);gap:12px;margin-bottom:24px}.calendario-dia[_ngcontent-%COMP%]{padding:12px;border-radius:8px;border:1px solid var(--border);background:var(--panel-2);min-height:100px;display:flex;flex-direction:column;gap:6px;transition:all .2s ease}.calendario-dia[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #0000001a}.calendario-dia--header[_ngcontent-%COMP%]{background:var(--panel);font-weight:700;text-align:center;min-height:auto;padding:8px;border:none}.calendario-dia--header[_ngcontent-%COMP%]:hover{transform:none;box-shadow:none}.calendario-dia--presente[_ngcontent-%COMP%]{background:#22c55e1a;border-color:#22c55e4d}.calendario-dia--tardanza[_ngcontent-%COMP%]{background:#f59e0b1a;border-color:#f59e0b4d}.calendario-dia--falta[_ngcontent-%COMP%]{background:#ef44441a;border-color:#ef44444d}.calendario-dia--permiso[_ngcontent-%COMP%]{background:#a855f71a;border-color:#a855f74d}.calendario-dia--licencia[_ngcontent-%COMP%]{background:#0ea5e91a;border-color:#0ea5e94d}.calendario-dia--comision[_ngcontent-%COMP%]{background:#8b5cf61a;border-color:#8b5cf64d}.calendario-dia--descanso[_ngcontent-%COMP%]{background:#6b72801a;border-color:#6b728033}.dia-numero[_ngcontent-%COMP%]{font-size:18px;font-weight:700;color:var(--text-1)}.dia-estado[_ngcontent-%COMP%]{font-size:12px;font-weight:600;color:var(--text-2)}.dia-horas[_ngcontent-%COMP%]{font-size:11px;color:var(--text-2);font-family:Courier New,monospace}.dia-retraso[_ngcontent-%COMP%]{font-size:10px;color:#ef4444;font-weight:700}.leyenda[_ngcontent-%COMP%]{margin-top:24px;padding:16px;background:var(--panel-2);border-radius:10px}.leyenda[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:14px;font-weight:700;color:var(--text-1);margin:0 0 12px}.leyenda-items[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:16px}.leyenda-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:13px;color:var(--text-1)}.leyenda-item[_ngcontent-%COMP%]   .color[_ngcontent-%COMP%]{width:20px;height:20px;border-radius:4px;border:1px solid var(--border)}.graficos-container[_ngcontent-%COMP%]{padding:24px}.grafico-principal[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.grafico-card[_ngcontent-%COMP%]{background:var(--panel);border:1px solid var(--border);border-radius:8px;padding:32px;box-shadow:0 4px 16px #0003;transition:transform .2s,box-shadow .2s;width:100%;max-width:1400px;position:relative;overflow:hidden}.grafico-card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:3px;background:linear-gradient(90deg,#22c55e,#16a34a,#22c55e);background-size:200% 100%;animation:_ngcontent-%COMP%_shimmer 3s ease-in-out infinite}.grafico-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 20px #00000040}.grafico-card--large[_ngcontent-%COMP%]{width:100%}.grafico-card__header[_ngcontent-%COMP%]{margin-bottom:24px;padding-bottom:20px;border-bottom:2px solid var(--border)}.grafico-card__title[_ngcontent-%COMP%]{font-size:22px;font-weight:700;color:var(--text-1);margin:0 0 8px;display:flex;align-items:center;gap:10px}.grafico-card__subtitle[_ngcontent-%COMP%]{font-size:14px;color:var(--text-2);margin:0}.grafico-card__body[_ngcontent-%COMP%]{position:relative;height:500px}.grafico-card__body[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{max-height:100%}.modal[_ngcontent-%COMP%]{position:fixed!important;inset:0!important;width:100vw!important;height:100vh!important;min-width:100vw!important;min-height:100vh!important;max-width:100vw!important;max-height:100vh!important;margin:0!important;padding:20px!important;background:#0b1220d9!important;backdrop-filter:blur(8px)!important;-webkit-backdrop-filter:blur(8px)!important;display:flex!important;align-items:center!important;justify-content:center!important;z-index:999999!important;pointer-events:all!important;box-sizing:border-box!important;animation:_ngcontent-%COMP%_fadeIn .2s ease}.modal__content[_ngcontent-%COMP%]{background:var(--panel);border:1px solid var(--border);border-radius:16px;max-width:700px;width:100%;max-height:90vh;overflow-y:auto;box-shadow:0 20px 60px #0000004d;animation:_ngcontent-%COMP%_slideUp .3s ease}.modal__content--large[_ngcontent-%COMP%]{max-width:900px}.modal__header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:16px;padding:24px;border-bottom:1px solid var(--border)}.modal__title[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:var(--text-1);margin:0}.modal__close[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:8px;border:none;background:transparent;cursor:pointer;font-size:18px;transition:all .2s ease}.modal__close[_ngcontent-%COMP%]:hover{background:#ef44441a;color:#ef4444}.modal__body[_ngcontent-%COMP%]{padding:24px}.modal__footer[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end;gap:12px;padding:20px 24px;border-top:1px solid var(--border)}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.trabajador-card[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px;padding:20px;background:var(--panel-2);border-radius:12px;margin-bottom:24px}.avatar-large[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:50%;background:linear-gradient(135deg,var(--accent) 0%,#16a34a 100%);color:#fff;display:flex;align-items:center;justify-content:center;font-size:32px;font-weight:700;flex-shrink:0}.trabajador-data[_ngcontent-%COMP%]{flex:1}.trabajador-data[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:var(--text-1);margin:0 0 12px}.trabajador-data[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;color:var(--text-2);margin:4px 0}.trabajador-data[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:var(--text-1)}.estadisticas-detalle[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:16px;margin-bottom:24px}.stat-box[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;padding:16px;background:var(--panel-2);border:1px solid var(--border);border-radius:10px;text-align:center}.stat-box__label[_ngcontent-%COMP%]{font-size:12px;font-weight:600;color:var(--text-2);text-transform:uppercase}.stat-box__value[_ngcontent-%COMP%]{font-size:28px;font-weight:700;color:var(--text-1)}.stat-box__value--success[_ngcontent-%COMP%]{color:var(--accent)}.stat-box__value--warning[_ngcontent-%COMP%]{color:#f59e0b}.stat-box__value--danger[_ngcontent-%COMP%]{color:#ef4444}.timeline-asistencia[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:16px;font-weight:700;color:var(--text-1);margin:0 0 16px}.timeline-item[_ngcontent-%COMP%]{display:flex;gap:16px;padding:12px;border-left:3px solid var(--accent);background:var(--panel-2);margin-bottom:8px;border-radius:0 8px 8px 0}.timeline-item__fecha[_ngcontent-%COMP%]{font-size:12px;font-weight:600;color:var(--text-2);min-width:150px}.timeline-item__contenido[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;flex:1;flex-wrap:wrap}.timeline-item__horas[_ngcontent-%COMP%]{font-size:13px;color:var(--text-2);font-family:Courier New,monospace}.timeline-item__retraso[_ngcontent-%COMP%]{font-size:12px;color:#ef4444;font-weight:600}.btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;gap:8px;padding:10px 16px;border-radius:10px;font-weight:600;font-size:14px;cursor:pointer;transition:all .2s ease;border:none;white-space:nowrap}.btn--sm[_ngcontent-%COMP%]{padding:8px 14px;font-size:13px}.btn--primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6,#2563eb);color:#fff}.btn--primary[_ngcontent-%COMP%]:hover{box-shadow:0 0 20px #3b82f666;transform:translateY(-1px)}.btn--outline[_ngcontent-%COMP%]{background:transparent;border:1px solid var(--border);color:var(--text-1)}.btn--outline[_ngcontent-%COMP%]:hover{background:var(--panel-2);border-color:var(--accent);color:var(--accent)}.btn--outline.active[_ngcontent-%COMP%]{background:#22c55e1a;border-color:var(--accent);color:var(--accent)}.btn--ghost[_ngcontent-%COMP%]{background:transparent;border:none;color:var(--text-2)}.btn--ghost[_ngcontent-%COMP%]:hover{background:var(--panel-2);color:var(--text-1)}@media (max-width: 1200px){.resumen-general[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}.destacados-alertas[_ngcontent-%COMP%]{grid-template-columns:1fr}}@media (max-width: 768px){.page-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.page-header__right[_ngcontent-%COMP%]{width:100%;justify-content:stretch}.page-header__right[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{flex:1}.periodo-selector[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.periodo-selector__controls[_ngcontent-%COMP%]{width:100%;flex-direction:column}.vista-toggle[_ngcontent-%COMP%]{width:100%}.vista-toggle[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{flex:1}.resumen-general[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.filtros-bar[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.filtros-bar__left[_ngcontent-%COMP%], .filtros-bar__right[_ngcontent-%COMP%]{width:100%;flex-direction:column}.search-box[_ngcontent-%COMP%]{min-width:100%}.calendario-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}.estadisticas-detalle[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}.registro-detallado-modal[_ngcontent-%COMP%]{margin-top:24px}.registro-detallado-title[_ngcontent-%COMP%]{font-size:16px;font-weight:700;color:var(--text-1);margin:0 0 16px;padding-bottom:12px;border-bottom:2px solid var(--border)}.tabla-detalle-scroll[_ngcontent-%COMP%]{max-height:400px;overflow-y:auto;border:1px solid var(--border);border-radius:10px}.tabla--detalle-modal[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-size:12px}.tabla--detalle-modal[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{position:sticky;top:0;z-index:10;background:var(--panel-2);border-bottom:2px solid var(--border)}.tabla--detalle-modal[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:10px 8px;text-align:left;font-weight:600;color:var(--text-1);font-size:11px;text-transform:uppercase;letter-spacing:.5px;white-space:nowrap}.tabla--detalle-modal[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid var(--line-soft);transition:background .15s ease}.tabla--detalle-modal[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:var(--panel-2)}.tabla--detalle-modal[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.fila--presente[_ngcontent-%COMP%]{background:#22c55e0d}.tabla--detalle-modal[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.fila--tardanza[_ngcontent-%COMP%]{background:#f59e0b0d}.tabla--detalle-modal[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.fila--falta[_ngcontent-%COMP%]{background:#ef44440d}.tabla--detalle-modal[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.fila--permiso[_ngcontent-%COMP%]{background:#3b82f60d}.tabla--detalle-modal[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.fila--licencia[_ngcontent-%COMP%]{background:#a855f70d}.tabla--detalle-modal[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px 8px;color:var(--text-1);font-size:12px}.registro-detallado-empty[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;color:var(--text-2)}.registro-detallado-empty[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px}.detalle-container[_ngcontent-%COMP%]{width:100%;animation:_ngcontent-%COMP%_fadeIn .4s ease}.detalle-header[_ngcontent-%COMP%]{margin-bottom:24px;padding:20px;background:var(--panel-1);border-radius:16px;border:1px solid var(--border);box-shadow:0 2px 8px #0000001a}.detalle-header__selector[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.detalle-header__label[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:var(--text-1);display:flex;align-items:center;gap:8px}.select--premium[_ngcontent-%COMP%]{padding:12px 16px;font-size:15px;border:2px solid var(--border);border-radius:12px;background:var(--panel-2);color:var(--text-1);transition:all .3s ease}.select--premium[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--accent);box-shadow:0 0 0 3px #22c55e1a}.select--premium[_ngcontent-%COMP%]:hover{border-color:var(--accent)}.trabajador-info-card[_ngcontent-%COMP%]{margin-bottom:24px;padding:24px;background:linear-gradient(135deg,var(--panel-1) 0%,var(--panel-2) 100%);border-radius:16px;border:1px solid var(--border);box-shadow:0 4px 16px #0000001a,0 1px 4px #0000000d}.trabajador-info-card__header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px;margin-bottom:24px;padding-bottom:24px;border-bottom:2px solid var(--border)}.trabajador-info-card__avatar[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:16px;background:linear-gradient(135deg,var(--accent) 0%,#16a34a 100%);display:flex;align-items:center;justify-content:center;font-size:32px;font-weight:700;color:#fff;box-shadow:0 4px 12px #22c55e4d;flex-shrink:0}.trabajador-info-card__data[_ngcontent-%COMP%]{flex:1}.trabajador-info-card__nombre[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:var(--text-1);margin:0 0 12px;background:linear-gradient(135deg,var(--text-1) 0%,var(--accent) 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.trabajador-info-card__meta[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:20px}.trabajador-info-card[_ngcontent-%COMP%]   .meta-item[_ngcontent-%COMP%]{font-size:14px;color:var(--text-2)}.trabajador-info-card[_ngcontent-%COMP%]   .meta-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:var(--text-1);font-weight:600;margin-right:6px}.trabajador-stats[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(160px,1fr));gap:16px}.stat-card[_ngcontent-%COMP%]{padding:20px;border-radius:12px;border:1px solid var(--border);background:var(--panel-1);display:flex;align-items:center;gap:16px;transition:all .3s ease;box-shadow:0 2px 8px #0000000d}.stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #0000001a}.stat-card__icon[_ngcontent-%COMP%]{font-size:32px;flex-shrink:0}.stat-card__content[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:4px}.stat-card__label[_ngcontent-%COMP%]{font-size:12px;color:var(--text-2);text-transform:uppercase;letter-spacing:.5px;font-weight:600}.stat-card__value[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:var(--text-1)}.stat-card--success[_ngcontent-%COMP%]{background:linear-gradient(135deg,#22c55e1a,#22c55e0d);border-color:#22c55e4d}.stat-card--success[_ngcontent-%COMP%]   .stat-card__value[_ngcontent-%COMP%]{color:var(--accent)}.stat-card--warning[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f59e0b1a,#f59e0b0d);border-color:#f59e0b4d}.stat-card--warning[_ngcontent-%COMP%]   .stat-card__value[_ngcontent-%COMP%]{color:#f59e0b}.stat-card--danger[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ef44441a,#ef44440d);border-color:#ef44444d}.stat-card--danger[_ngcontent-%COMP%]   .stat-card__value[_ngcontent-%COMP%]{color:#ef4444}.stat-card--info[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f61a,#3b82f60d);border-color:#3b82f64d}.stat-card--info[_ngcontent-%COMP%]   .stat-card__value[_ngcontent-%COMP%]{color:#3b82f6}.stat-card--primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#6366f11a,#6366f10d);border-color:#6366f14d}.stat-card--primary[_ngcontent-%COMP%]   .stat-card__value[_ngcontent-%COMP%]{color:#6366f1}.stat-card--secondary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#94a3b81a,#94a3b80d);border-color:#94a3b84d}.stat-card--secondary[_ngcontent-%COMP%]   .stat-card__value[_ngcontent-%COMP%]{color:#94a3b8}.detalle-tabla-container[_ngcontent-%COMP%]{margin-top:24px;background:var(--panel-1);border-radius:16px;border:1px solid var(--border);box-shadow:0 4px 16px #0000001a;overflow:hidden}.detalle-tabla-header[_ngcontent-%COMP%]{padding:20px 24px;background:linear-gradient(135deg,var(--panel-2) 0%,var(--panel-1) 100%);border-bottom:2px solid var(--border);display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:16px}.detalle-tabla-title[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:var(--text-1);margin:0;display:flex;align-items:center;gap:12px}.detalle-tabla-info[_ngcontent-%COMP%]{display:flex;gap:12px}.info-badge[_ngcontent-%COMP%]{padding:8px 16px;background:#3b82f61a;border:1px solid rgba(59,130,246,.3);border-radius:8px;font-size:14px;font-weight:600;color:#3b82f6}.tabla--detalle[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:var(--panel-2)}.tabla--detalle[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:16px 12px;font-weight:700;text-transform:uppercase;font-size:11px;letter-spacing:.5px;color:var(--text-2);border-bottom:2px solid var(--border)}.tabla--detalle[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:all .2s ease}.tabla--detalle[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:var(--panel-2)}.tabla--detalle[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.fila--presente[_ngcontent-%COMP%]{background:#22c55e08}.tabla--detalle[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.fila--tardanza[_ngcontent-%COMP%]{background:#f59e0b08}.tabla--detalle[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.fila--falta[_ngcontent-%COMP%]{background:#ef444408}.tabla--detalle[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.fila--permiso[_ngcontent-%COMP%]{background:#8b5cf608}.tabla--detalle[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.fila--licencia[_ngcontent-%COMP%]{background:#3b82f608}.tabla--detalle[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:16px 12px;font-size:14px;color:var(--text-1)}.td-fecha[_ngcontent-%COMP%]{font-weight:600;font-family:Courier New,monospace}.td-dia[_ngcontent-%COMP%]{text-transform:capitalize;color:var(--text-2);font-size:13px}.td-estado[_ngcontent-%COMP%]{text-align:center}.td-hora[_ngcontent-%COMP%]{font-family:Courier New,monospace;font-weight:600;text-align:center;color:var(--text-1)}.td-horas[_ngcontent-%COMP%]{font-weight:600;text-align:center}.td-horas[_ngcontent-%COMP%]   .horas-extras[_ngcontent-%COMP%]{display:block;font-size:11px;color:var(--accent);margin-top:4px}.td-tardanza[_ngcontent-%COMP%]{text-align:center}.tardanza-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 8px;background:#f59e0b26;border:1px solid rgba(245,158,11,.3);border-radius:6px;font-size:12px;font-weight:600;color:#f59e0b}.tardanza-badge--none[_ngcontent-%COMP%]{background:transparent;border:none;color:var(--text-3)}.td-observaciones[_ngcontent-%COMP%]{font-size:13px;color:var(--text-2);max-width:200px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.detalle-empty[_ngcontent-%COMP%]{margin-top:60px;padding:60px 20px;text-align:center}.empty-state--large[_ngcontent-%COMP%]   .empty-state__icon[_ngcontent-%COMP%]{font-size:64px;margin-bottom:16px}.empty-state--large[_ngcontent-%COMP%]   .empty-state__title[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:var(--text-1);margin:0 0 12px}.empty-state--large[_ngcontent-%COMP%]   .empty-state__text[_ngcontent-%COMP%]{font-size:16px;color:var(--text-2);line-height:1.6;max-width:600px;margin:0 auto}.empty-state--large[_ngcontent-%COMP%]   .empty-state__text[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:var(--text-1);font-weight:600}.empty-state--large[_ngcontent-%COMP%]   .empty-state__hint[_ngcontent-%COMP%]{font-size:14px;color:var(--text-3);margin-top:8px;font-style:italic}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}']});let l=m;return l})();export{_t as ResumenComponent};
