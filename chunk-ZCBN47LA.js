import{a as V}from"./chunk-VPVNNZJM.js";import{b as X,c as w}from"./chunk-4F4PQCC5.js";import{a as I}from"./chunk-MPWYS2KC.js";import{Ba as z,Ca as y,Fa as i,Ga as m,Ha as v,Ib as R,J as F,L as o,La as C,Ma as M,Na as P,Rb as L,T as E,Ub as $,V as D,Xb as W,Zb as B,_ as f,ac as U,bc as q,cc as Y,ec as H,fa as l,ga as t,ha as e,ia as O,jc as G,lb as k,mb as j,nb as A,pa as S,sa as g,ta as p,tb as J,v as x,w as b,yb as T,zb as N}from"./chunk-XJZXWVKN.js";var Z=["Problemas de Transporte","Emergencia M\xE9dica","Emergencia Familiar","Cita M\xE9dica","Tr\xE1mite Personal Urgente","Accidente de Tr\xE1nsito","Fen\xF3meno Natural","Problema Dom\xE9stico","Otro"],K=["Enfermedad","Emergencia Familiar","Duelo","Licencia M\xE9dica","Permiso Sindical","Comisi\xF3n de Servicio","Permiso por Maternidad/Paternidad","Tr\xE1mite Judicial","Capacitaci\xF3n Autorizada","Otro"],Q=[{valor:"Ninguna",label:"Sin acci\xF3n"},{valor:"Amonestacion",label:"Amonestaci\xF3n Verbal"},{valor:"Suspension",label:"Suspensi\xF3n"},{valor:"Descuento",label:"Descuento de Haberes"}];function te(r,d){if(r&1&&(t(0,"div",46)(1,"div",47)(2,"div",48),i(3,"\u{1F4CA}"),e(),t(4,"div",49)(5,"span",50),i(6,"Total Incidencias"),e(),t(7,"span",51),i(8),e()()(),t(9,"div",52)(10,"div",48),i(11,"\u23F0"),e(),t(12,"div",49)(13,"span",50),i(14,"Total Tardanzas"),e(),t(15,"span",51),i(16),e(),t(17,"span",53),i(18),e()()(),t(19,"div",54)(20,"div",48),i(21,"\u274C"),e(),t(22,"div",49)(23,"span",50),i(24,"Total Faltas"),e(),t(25,"span",51),i(26),e()()(),t(27,"div",55)(28,"div",48),i(29,"\u23F3"),e(),t(30,"div",49)(31,"span",50),i(32,"Pendientes"),e(),t(33,"span",51),i(34),e()()(),t(35,"div",56)(36,"div",48),i(37,"\u2705"),e(),t(38,"div",49)(39,"span",50),i(40,"Justificadas"),e(),t(41,"span",51),i(42),e()()(),t(43,"div",57)(44,"div",48),i(45,"\u26D4"),e(),t(46,"div",49)(47,"span",50),i(48,"No Justificadas"),e(),t(49,"span",51),i(50),e()()(),t(51,"div",58)(52,"div",48),i(53,"\u{1F465}"),e(),t(54,"div",49)(55,"span",50),i(56,"Trabajadores Afectados"),e(),t(57,"span",51),i(58),e()()(),t(59,"div",59)(60,"div",48),i(61,"\u{1F6A8}"),e(),t(62,"div",49)(63,"span",50),i(64,"Reincidentes"),e(),t(65,"span",51),i(66),e()()()()),r&2){let n=p();o(8),m(n.resumen.totalIncidencias),o(8),m(n.resumen.totalTardanzas),o(2),v("",n.resumen.minutosRetrasoProm,"min promedio"),o(8),m(n.resumen.totalFaltas),o(8),m(n.resumen.tardanzasPendientes+n.resumen.faltasPendientes),o(8),m(n.resumen.tardanzasJustificadas+n.resumen.faltasJustificadas),o(8),m(n.resumen.tardanzasNoJustificadas+n.resumen.faltasNoJustificadas),o(8),m(n.resumen.trabajadoresConIncidencias),o(8),m(n.resumen.trabajadoresReincidentes)}}function ne(r,d){if(r&1&&(t(0,"option",60),i(1),e()),r&2){let n=d.$implicit;l("value",n),o(),m(n)}}function ie(r,d){r&1&&(t(0,"tr")(1,"td",66)(2,"div",67),i(3,"Cargando..."),e()()())}function ae(r,d){r&1&&(t(0,"tr")(1,"td",68)(2,"div",69)(3,"span",70),i(4,"\u{1F4ED}"),e(),t(5,"p",71),i(6,"No se encontraron incidencias"),e()()()())}function oe(r,d){if(r&1&&(t(0,"span",98),i(1),e()),r&2){let n=p(2).$implicit;o(),v("+",n.minutosRetraso,"min")}}function re(r,d){r&1&&(t(0,"span",98),i(1,"Sin retraso"),e())}function se(r,d){if(r&1&&(t(0,"div",95)(1,"span",96),i(2),e(),f(3,oe,2,1,"span",97)(4,re,2,0,"span",97),e()),r&2){let n=p().$implicit;o(2),m(n.horaLlegada||"---"),o(),l("ngIf",n.minutosRetraso&&n.minutosRetraso>0),o(),l("ngIf",!n.minutosRetraso||n.minutosRetraso===0)}}function ce(r,d){r&1&&(t(0,"div",95)(1,"span",99),i(2,"Ausencia total"),e()())}function le(r,d){if(r&1&&(t(0,"div",100)(1,"span",101),i(2,"\u2705"),e(),t(3,"span",102),i(4),e()()),r&2){let n=p().$implicit;o(4),m(n.tipoJustificacion)}}function de(r,d){r&1&&(t(0,"span",103),i(1,"-"),e())}function pe(r,d){if(r&1&&(t(0,"span",107),i(1),e()),r&2){let n=p(2).$implicit;o(),v(" S/. ",n.montoDescuento," ")}}function me(r,d){if(r&1&&(t(0,"div",104)(1,"span",105),i(2),e(),f(3,pe,2,1,"span",106),e()),r&2){let n=p().$implicit;o(2),m(n.tipoAccion),o(),l("ngIf",n.tipoAccion==="Descuento")}}function _e(r,d){r&1&&(t(0,"span",108),i(1,"Sin acci\xF3n"),e())}function ge(r,d){if(r&1){let n=S();t(0,"button",109),g("click",function(){x(n);let a=p().$implicit,s=p(2);return b(s.abrirModalJustificacion(a))}),i(1," \u{1F4DD} "),e()}}function ue(r,d){if(r&1){let n=S();t(0,"tr")(1,"td",72),i(2),e(),t(3,"td",73)(4,"span",74),i(5),e()(),t(6,"td",75),i(7),e(),t(8,"td",76)(9,"div",77)(10,"span",78),i(11),e(),t(12,"span",79),i(13),e()()(),t(14,"td",80),i(15),e(),t(16,"td",81),f(17,se,5,3,"div",82)(18,ce,3,0,"div",82),e(),t(19,"td",83)(20,"span",74),i(21),e()(),t(22,"td",84),f(23,le,5,1,"div",85)(24,de,2,0,"span",86),e(),t(25,"td",87),f(26,me,4,2,"div",88)(27,_e,2,0,"span",89),e(),t(28,"td",90)(29,"div",91),f(30,ge,2,0,"button",92),t(31,"button",93),g("click",function(){let a=x(n).$implicit,s=p(2);return b(s.abrirModalAccion(a))}),i(32," \u2696\uFE0F "),e(),t(33,"button",94),g("click",function(a){let s=x(n).$implicit;return p(2).abrirModalDetalles(s),b(a.stopPropagation())}),i(34," \u{1F441}\uFE0F "),e()()()()}if(r&2){let n=d.$implicit,c=p(2);o(2),m(n.fecha),o(2),l("ngClass",c.getTipoBadgeClass(n.tipo)),o(),v(" ",n.tipo," "),o(2),m(n.trabajadorDni),o(4),m(n.trabajadorNombre),o(2),m(n.trabajadorCargo),o(2),m(n.trabajadorArea),o(2),l("ngIf",n.tipo==="Tardanza"),o(),l("ngIf",n.tipo==="Falta"),o(2),l("ngClass",c.getEstadoBadgeClass(n.estado)),o(),v(" ",n.estado==="NoJustificada"?"No Justificada":n.estado," "),o(2),l("ngIf",n.tieneJustificacion),o(),l("ngIf",!n.tieneJustificacion),o(2),l("ngIf",n.requiereAccion&&n.tipoAccion),o(),l("ngIf",!n.requiereAccion),o(3),l("ngIf",n.estado==="Pendiente")}}function fe(r,d){if(r&1&&(t(0,"div",61)(1,"div",62)(2,"table",63)(3,"thead")(4,"tr")(5,"th"),i(6,"Fecha"),e(),t(7,"th"),i(8,"Tipo"),e(),t(9,"th"),i(10,"DNI"),e(),t(11,"th"),i(12,"Trabajador"),e(),t(13,"th"),i(14,"\xC1rea"),e(),t(15,"th"),i(16,"Detalle"),e(),t(17,"th"),i(18,"Estado"),e(),t(19,"th"),i(20,"Justificaci\xF3n"),e(),t(21,"th"),i(22,"Acci\xF3n"),e(),t(23,"th"),i(24,"Acciones"),e()()(),t(25,"tbody"),f(26,ie,4,0,"tr",64)(27,ae,7,0,"tr",64)(28,ue,35,16,"tr",65),e()()()()),r&2){let n=p();o(26),l("ngIf",n.cargando),o(),l("ngIf",!n.cargando&&n.registrosFiltrados.length===0),o(),l("ngForOf",n.registrosFiltrados)}}function xe(r,d){if(r&1&&(t(0,"div",124)(1,"div",125)(2,"span",126),i(3),e(),t(4,"span",127),i(5),e()(),t(6,"div",128)(7,"span",129),i(8),e(),t(9,"span",130),i(10),e()(),t(11,"div",131),O(12,"div",132)(13,"div",133),e()()),r&2){let n=d.$implicit;o(3),m(n.area),o(2),m(n.total),o(3),v("",n.tardanzas," tardanzas"),o(2),v("",n.faltas," faltas"),o(2),z("width",n.tardanzas/n.total*100+"%"),o(),z("width",n.faltas/n.total*100+"%")}}function be(r,d){if(r&1&&(t(0,"div",110)(1,"div",111)(2,"div",112)(3,"h3",113),i(4,"\u{1F4CA} Incidencias por \xC1rea"),e(),t(5,"div",114),f(6,xe,14,8,"div",115),e()(),t(7,"div",112)(8,"h3",113),i(9,"\u{1F4C8} Distribuci\xF3n de Estados"),e(),t(10,"div",116)(11,"div",117)(12,"div",118),i(13,"\u23F3"),e(),t(14,"div",119)(15,"span",120),i(16,"Pendientes"),e(),t(17,"span",121),i(18),e()()(),t(19,"div",117)(20,"div",122),i(21,"\u2705"),e(),t(22,"div",119)(23,"span",120),i(24,"Justificadas"),e(),t(25,"span",121),i(26),e()()(),t(27,"div",117)(28,"div",123),i(29,"\u26D4"),e(),t(30,"div",119)(31,"span",120),i(32,"No Justificadas"),e(),t(33,"span",121),i(34),e()()()()()()()),r&2){let n=p();o(6),l("ngForOf",n.resumen.incidenciasPorArea),o(12),m(n.resumen.tardanzasPendientes+n.resumen.faltasPendientes),o(8),m(n.resumen.tardanzasJustificadas+n.resumen.faltasJustificadas),o(8),m(n.resumen.tardanzasNoJustificadas+n.resumen.faltasNoJustificadas)}}function ve(r,d){if(r&1&&(t(0,"div",140)(1,"div",141)(2,"div",142),i(3),e(),t(4,"div",143)(5,"h4",144),i(6),e(),t(7,"p",145),i(8),e(),t(9,"p",146),i(10),e()(),t(11,"span",74),i(12),e()(),t(13,"div",147)(14,"div",148)(15,"div",149)(16,"span",150),i(17,"\u23F0"),e(),t(18,"div",151)(19,"span",152),i(20,"Tardanzas"),e(),t(21,"span",153),i(22),e()()(),t(23,"div",149)(24,"span",150),i(25,"\u274C"),e(),t(26,"div",151)(27,"span",152),i(28,"Faltas"),e(),t(29,"span",153),i(30),e()()(),t(31,"div",149)(32,"span",150),i(33,"\u{1F4CA}"),e(),t(34,"div",151)(35,"span",152),i(36,"Total"),e(),t(37,"span",153),i(38),e()()()(),t(39,"div",154)(40,"span",155),i(41,"\xDAltima incidencia:"),e(),t(42,"span",156),i(43),e()()(),t(44,"div",157)(45,"button",158),i(46,"\u{1F4C4} Ver Historial"),e(),t(47,"button",159),i(48,"\u2696\uFE0F Acci\xF3n Disciplinaria"),e()()()),r&2){let n=d.$implicit,c=p(2);o(3),m(n.trabajadorNombre.charAt(0)),o(3),m(n.trabajadorNombre),o(2),v("DNI: ",n.trabajadorDni),o(2),m(n.trabajadorArea),o(),l("ngClass",c.getNivelRiesgoBadgeClass(n.nivelRiesgo)),o(),v(" ",n.nivelRiesgo," "),o(10),m(n.cantidadTardanzas),o(8),m(n.cantidadFaltas),o(8),m(n.totalIncidencias),o(5),m(n.ultimaIncidencia)}}function he(r,d){r&1&&(t(0,"div",69)(1,"span",70),i(2,"\u2705"),e(),t(3,"p",71),i(4,"No hay trabajadores reincidentes en este per\xEDodo"),e()())}function Ce(r,d){if(r&1&&(t(0,"div",134)(1,"div",135)(2,"h3",113),i(3,"\u{1F6A8} Trabajadores Reincidentes"),e(),t(4,"p",136),i(5,"Trabajadores con 2 o m\xE1s incidencias en el per\xEDodo"),e()(),t(6,"div",137),f(7,ve,49,10,"div",138),e(),f(8,he,5,0,"div",139),e()),r&2){let n=p();o(7),l("ngForOf",n.trabajadoresReincidentes),o(),l("ngIf",n.trabajadoresReincidentes.length===0)}}function Me(r,d){if(r&1&&(t(0,"option",60),i(1),e()),r&2){let n=d.$implicit;l("value",n),o(),m(n)}}function Pe(r,d){if(r&1){let n=S();t(0,"div",169)(1,"div",170)(2,"div",142),i(3),e(),t(4,"div",143)(5,"h4"),i(6),e(),t(7,"p"),i(8),e(),t(9,"p")(10,"strong"),i(11,"Fecha:"),e(),i(12),e(),t(13,"p")(14,"span",74),i(15),e()()()(),t(16,"div",171)(17,"div",172)(18,"label",173),i(19,"Tipo de Justificaci\xF3n *"),e(),t(20,"select",174),P("ngModelChange",function(a){x(n);let s=p(2);return M(s.justificacionForm.tipoJustificacion,a)||(s.justificacionForm.tipoJustificacion=a),b(a)}),t(21,"option",38),i(22,"Seleccione un tipo"),e(),f(23,Me,2,2,"option",39),e()(),t(24,"div",172)(25,"label",173),i(26,"Motivo Detallado *"),e(),t(27,"textarea",175),P("ngModelChange",function(a){x(n);let s=p(2);return M(s.justificacionForm.motivo,a)||(s.justificacionForm.motivo=a),b(a)}),e()(),t(28,"div",172)(29,"label",173),i(30,"Documento de Sustento"),e(),t(31,"input",176),g("change",function(a){x(n);let s=p(2);return b(s.onFileSelected(a))}),e(),t(32,"span",177),i(33,"Adjunte certificado m\xE9dico, papeleta, etc. (PDF, JPG, PNG)"),e()()()()}if(r&2){let n=p(2);o(3),m(n.registroSeleccionado.trabajadorNombre.charAt(0)),o(3),m(n.registroSeleccionado.trabajadorNombre),o(2),m(n.registroSeleccionado.trabajadorArea),o(4),v(" ",n.registroSeleccionado.fecha),o(2),l("ngClass",n.getTipoBadgeClass(n.registroSeleccionado.tipo)),o(),v(" ",n.registroSeleccionado.tipo," "),o(5),C("ngModel",n.justificacionForm.tipoJustificacion),o(3),l("ngForOf",n.tiposJustificacionActuales),o(4),C("ngModel",n.justificacionForm.motivo)}}function Se(r,d){if(r&1){let n=S();t(0,"div",160),g("click",function(){x(n);let a=p();return a.mostrarModalJustificacion=!1,b(a.restaurarTopbarSidebar())}),t(1,"div",161),g("click",function(a){return x(n),b(a.stopPropagation())}),t(2,"div",162)(3,"h3",163),i(4,"\u{1F4DD} Registrar Justificaci\xF3n"),e(),t(5,"button",164),g("click",function(){x(n);let a=p();return a.mostrarModalJustificacion=!1,b(a.restaurarTopbarSidebar())}),i(6,"\u2716\uFE0F"),e()(),f(7,Pe,34,9,"div",165),t(8,"div",166)(9,"button",167),g("click",function(){x(n);let a=p();return a.mostrarModalJustificacion=!1,b(a.restaurarTopbarSidebar())}),i(10,"Cancelar"),e(),t(11,"button",168),g("click",function(){x(n);let a=p();return b(a.guardarJustificacion())}),i(12," \u2705 Guardar Justificaci\xF3n "),e()()()()}if(r&2){let n=p();o(7),l("ngIf",n.registroSeleccionado),o(4),l("disabled",!n.justificacionForm.tipoJustificacion||!n.justificacionForm.motivo)}}function Oe(r,d){if(r&1&&(t(0,"option",60),i(1),e()),r&2){let n=d.$implicit;l("value",n.valor),o(),m(n.label)}}function Ee(r,d){if(r&1){let n=S();t(0,"div",172)(1,"label",173),i(2,"Monto de Descuento (S/.)"),e(),t(3,"input",181),P("ngModelChange",function(a){x(n);let s=p(3);return M(s.accionForm.montoDescuento,a)||(s.accionForm.montoDescuento=a),b(a)}),e()()}if(r&2){let n=p(3);o(3),C("ngModel",n.accionForm.montoDescuento)}}function ye(r,d){if(r&1){let n=S();t(0,"div",169)(1,"div",170)(2,"div",142),i(3),e(),t(4,"div",143)(5,"h4"),i(6),e(),t(7,"p"),i(8),e(),t(9,"p")(10,"strong"),i(11,"Fecha:"),e(),i(12),e(),t(13,"p")(14,"span",74),i(15),e()()()(),t(16,"div",171)(17,"div",172)(18,"label",173),i(19,"Tipo de Acci\xF3n *"),e(),t(20,"select",174),P("ngModelChange",function(a){x(n);let s=p(2);return M(s.accionForm.tipoAccion,a)||(s.accionForm.tipoAccion=a),b(a)}),f(21,Oe,2,2,"option",39),e()(),f(22,Ee,4,1,"div",179),t(23,"div",172)(24,"label",173),i(25,"Observaciones"),e(),t(26,"textarea",180),P("ngModelChange",function(a){x(n);let s=p(2);return M(s.accionForm.observaciones,a)||(s.accionForm.observaciones=a),b(a)}),e()()()()}if(r&2){let n=p(2);o(3),m(n.registroSeleccionado.trabajadorNombre.charAt(0)),o(3),m(n.registroSeleccionado.trabajadorNombre),o(2),m(n.registroSeleccionado.trabajadorArea),o(4),v(" ",n.registroSeleccionado.fecha),o(2),l("ngClass",n.getTipoBadgeClass(n.registroSeleccionado.tipo)),o(),v(" ",n.registroSeleccionado.tipo," "),o(5),C("ngModel",n.accionForm.tipoAccion),o(),l("ngForOf",n.tiposAccion),o(),l("ngIf",n.accionForm.tipoAccion==="Descuento"),o(4),C("ngModel",n.accionForm.observaciones)}}function Te(r,d){if(r&1){let n=S();t(0,"div",160),g("click",function(){x(n);let a=p();return b(a.mostrarModalAccion=!1)}),t(1,"div",161),g("click",function(a){return x(n),b(a.stopPropagation())}),t(2,"div",162)(3,"h3",163),i(4,"\u2696\uFE0F Acci\xF3n Disciplinaria"),e(),t(5,"button",164),g("click",function(){x(n);let a=p();return b(a.mostrarModalAccion=!1)}),i(6,"\u2716\uFE0F"),e()(),f(7,ye,27,10,"div",165),t(8,"div",166)(9,"button",167),g("click",function(){x(n);let a=p();return b(a.mostrarModalAccion=!1)}),i(10,"Cancelar"),e(),t(11,"button",178),g("click",function(){x(n);let a=p();return b(a.guardarAccion())}),i(12," \u2696\uFE0F Aplicar Acci\xF3n "),e()()()()}if(r&2){let n=p();o(7),l("ngIf",n.registroSeleccionado)}}function we(r,d){if(r&1&&(t(0,"div",187)(1,"span",188),i(2,"Hora Esperada:"),e(),t(3,"span",189),i(4),e()()),r&2){let n=p(3);o(4),m(n.registroSeleccionado.horaEsperada||"N/A")}}function ze(r,d){if(r&1&&(t(0,"div",187)(1,"span",188),i(2,"Hora de Llegada:"),e(),t(3,"span",189),i(4),e()()),r&2){let n=p(3);o(4),m(n.registroSeleccionado.horaLlegada||"N/A")}}function Ie(r,d){if(r&1&&(t(0,"span",194),i(1),e()),r&2){let n=p(4);o(),v(" +",n.registroSeleccionado.minutosRetraso," minutos ")}}function Fe(r,d){r&1&&(t(0,"span",189),i(1," Sin retraso "),e())}function De(r,d){if(r&1&&(t(0,"div",187)(1,"span",188),i(2,"Minutos de Retraso:"),e(),f(3,Ie,2,1,"span",192)(4,Fe,2,0,"span",193),e()),r&2){let n=p(3);o(3),l("ngIf",n.registroSeleccionado.minutosRetraso&&n.registroSeleccionado.minutosRetraso>0),o(),l("ngIf",!n.registroSeleccionado.minutosRetraso||n.registroSeleccionado.minutosRetraso===0)}}function ke(r,d){if(r&1&&(t(0,"div",187)(1,"span",188),i(2,"Fecha de Justificaci\xF3n:"),e(),t(3,"span",189),i(4),e()()),r&2){let n=p(4);o(4),m(n.formatearFechaHora(n.registroSeleccionado.fechaJustificacion))}}function je(r,d){if(r&1&&(t(0,"div",187)(1,"span",188),i(2,"Documento Adjunto:"),e(),t(3,"span",189)(4,"a",196),i(5," \u{1F4C4} Ver documento "),e()()()),r&2){let n=p(4);o(4),l("href",n.registroSeleccionado.documentoAdjunto,F)}}function Ae(r,d){if(r&1&&(t(0,"div",184)(1,"h4",185),i(2,"\u2705 Justificaci\xF3n"),e(),t(3,"div",186)(4,"div",187)(5,"span",188),i(6,"Tipo de Justificaci\xF3n:"),e(),t(7,"span",189),i(8),e()(),t(9,"div",195)(10,"span",188),i(11,"Motivo:"),e(),t(12,"span",189),i(13),e()(),f(14,ke,5,1,"div",190)(15,je,6,1,"div",190),e()()),r&2){let n=p(3);o(8),m(n.registroSeleccionado.tipoJustificacion||"N/A"),o(5),m(n.registroSeleccionado.motivoJustificacion||"N/A"),o(),l("ngIf",n.registroSeleccionado.fechaJustificacion),o(),l("ngIf",n.registroSeleccionado.documentoAdjunto)}}function Je(r,d){if(r&1&&(t(0,"div",187)(1,"span",188),i(2,"Monto de Descuento:"),e(),t(3,"span",197),i(4),e()()),r&2){let n=p(4);o(4),v("S/. ",n.registroSeleccionado.montoDescuento)}}function Ne(r,d){if(r&1&&(t(0,"div",184)(1,"h4",185),i(2,"\u2696\uFE0F Acci\xF3n Disciplinaria"),e(),t(3,"div",186)(4,"div",187)(5,"span",188),i(6,"Tipo de Acci\xF3n:"),e(),t(7,"span",189),i(8),e()(),f(9,Je,5,1,"div",190),e()()),r&2){let n=p(3);o(8),m(n.registroSeleccionado.tipoAccion),o(),l("ngIf",n.registroSeleccionado.tipoAccion==="Descuento"&&n.registroSeleccionado.montoDescuento)}}function Re(r,d){if(r&1&&(t(0,"div",184)(1,"h4",185),i(2,"\u{1F4DD} Observaciones"),e(),t(3,"div",198)(4,"p",199),i(5),e()()()),r&2){let n=p(3);o(5),m(n.registroSeleccionado.observaciones)}}function Ve(r,d){if(r&1&&(t(0,"div",187)(1,"span",188),i(2,"Revisado por:"),e(),t(3,"span",189),i(4),e()()),r&2){let n=p(3);o(4),m(n.registroSeleccionado.revisadoPor)}}function Le(r,d){if(r&1&&(t(0,"div",187)(1,"span",188),i(2,"Fecha de Revisi\xF3n:"),e(),t(3,"span",189),i(4),e()()),r&2){let n=p(3);o(4),m(n.formatearFechaHora(n.registroSeleccionado.fechaRevision))}}function $e(r,d){if(r&1&&(t(0,"div",169)(1,"div",184)(2,"h4",185),i(3,"\u{1F464} Informaci\xF3n del Trabajador"),e(),t(4,"div",186)(5,"div",187)(6,"span",188),i(7,"Nombre Completo:"),e(),t(8,"span",189),i(9),e()(),t(10,"div",187)(11,"span",188),i(12,"DNI:"),e(),t(13,"span",189),i(14),e()(),t(15,"div",187)(16,"span",188),i(17,"Cargo:"),e(),t(18,"span",189),i(19),e()(),t(20,"div",187)(21,"span",188),i(22,"\xC1rea:"),e(),t(23,"span",189),i(24),e()()()(),t(25,"div",184)(26,"h4",185),i(27,"\u{1F4CB} Informaci\xF3n de la Incidencia"),e(),t(28,"div",186)(29,"div",187)(30,"span",188),i(31,"Fecha:"),e(),t(32,"span",189),i(33),e()(),t(34,"div",187)(35,"span",188),i(36,"Tipo:"),e(),t(37,"span",74),i(38),e()(),f(39,we,5,1,"div",190)(40,ze,5,1,"div",190)(41,De,5,2,"div",190),t(42,"div",187)(43,"span",188),i(44,"Estado:"),e(),t(45,"span",74),i(46),e()()()(),f(47,Ae,16,4,"div",191)(48,Ne,10,2,"div",191)(49,Re,6,1,"div",191),t(50,"div",184)(51,"h4",185),i(52,"\u{1F4CA} Informaci\xF3n del Registro"),e(),t(53,"div",186)(54,"div",187)(55,"span",188),i(56,"Registrado por:"),e(),t(57,"span",189),i(58),e()(),t(59,"div",187)(60,"span",188),i(61,"Fecha de Registro:"),e(),t(62,"span",189),i(63),e()(),f(64,Ve,5,1,"div",190)(65,Le,5,1,"div",190),e()()()),r&2){let n=p(2);o(9),m(n.registroSeleccionado.trabajadorNombre),o(5),m(n.registroSeleccionado.trabajadorDni),o(5),m(n.registroSeleccionado.trabajadorCargo),o(5),m(n.registroSeleccionado.trabajadorArea||"Sin \xE1rea"),o(9),m(n.formatearFecha(n.registroSeleccionado.fecha)),o(4),l("ngClass",n.getTipoBadgeClass(n.registroSeleccionado.tipo)),o(),v(" ",n.registroSeleccionado.tipo," "),o(),l("ngIf",n.registroSeleccionado.tipo==="Tardanza"),o(),l("ngIf",n.registroSeleccionado.tipo==="Tardanza"),o(),l("ngIf",n.registroSeleccionado.tipo==="Tardanza"),o(4),l("ngClass",n.getEstadoBadgeClass(n.registroSeleccionado.estado)),o(),v(" ",n.registroSeleccionado.estado==="NoJustificada"?"No Justificada":n.registroSeleccionado.estado," "),o(),l("ngIf",n.registroSeleccionado.tieneJustificacion),o(),l("ngIf",n.registroSeleccionado.requiereAccion&&n.registroSeleccionado.tipoAccion),o(),l("ngIf",n.registroSeleccionado.observaciones),o(9),m(n.registroSeleccionado.registradoPor||"N/A"),o(5),m(n.formatearFechaHora(n.registroSeleccionado.fechaRegistro)),o(),l("ngIf",n.registroSeleccionado.revisadoPor),o(),l("ngIf",n.registroSeleccionado.fechaRevision)}}function We(r,d){if(r&1){let n=S();t(0,"button",200),g("click",function(){x(n);let a=p(2);return a.abrirModalJustificacion(a.registroSeleccionado),b(a.mostrarModalDetalles=!1)}),i(1," \u{1F4DD} Justificar "),e()}}function Be(r,d){if(r&1){let n=S();t(0,"div",160),g("click",function(){x(n);let a=p();return b(a.mostrarModalDetalles=!1)}),t(1,"div",182),g("click",function(a){return x(n),b(a.stopPropagation())}),t(2,"div",162)(3,"h3",163),i(4,"\u{1F441}\uFE0F Detalles de la Incidencia"),e(),t(5,"button",164),g("click",function(){x(n);let a=p();return b(a.mostrarModalDetalles=!1)}),i(6,"\u2716\uFE0F"),e()(),f(7,$e,66,19,"div",165),t(8,"div",166)(9,"button",167),g("click",function(){x(n);let a=p();return b(a.mostrarModalDetalles=!1)}),i(10,"Cerrar"),e(),f(11,We,2,0,"button",183),t(12,"button",178),g("click",function(){x(n);let a=p();return a.abrirModalAccion(a.registroSeleccionado),b(a.mostrarModalDetalles=!1)}),i(13," \u2696\uFE0F Acci\xF3n Disciplinaria "),e()()()()}if(r&2){let n=p();o(7),l("ngIf",n.registroSeleccionado),o(4),l("ngIf",n.registroSeleccionado.estado==="Pendiente")}}var at=(()=>{let d=class d{constructor(c,a,s){this.router=c,this.authService=a,this.http=s,this.registros=[],this.registrosFiltrados=[],this.resumen=null,this.trabajadoresReincidentes=[],this.filtros={fechaInicio:this.obtenerPrimerDiaMes(),fechaFin:this.obtenerUltimoDiaMes(),tipo:"Todas",estado:"Todos",area:"",busqueda:""},this.cargando=!1,this.vistaActual="lista",this.mostrarModalJustificacion=!1,this.mostrarModalAccion=!1,this.mostrarModalDetalles=!1,this.registroSeleccionado=null,this.tiposJustificacionTardanza=Z,this.tiposJustificacionFalta=K,this.tiposAccion=Q,this.areas=[],this.justificacionForm={tipoJustificacion:"",motivo:"",documento:null},this.accionForm={tipoAccion:"Ninguna",montoDescuento:0,observaciones:""},this.apiUrl=`${I.apiUrl}/asistencias`}ngOnInit(){window.scrollTo(0,0),setTimeout(()=>{let c=document.querySelector(".main-content");c&&(c.scrollTop=0)},100),this.cargarAreas(),this.cargarDatos()}cargarAreas(){this.http.get(`${I.apiUrl}/areas`).subscribe({next:c=>{let a=c.data||c;if(Array.isArray(a)&&a.length>0){let s=new Map;a.forEach(u=>{let _=u.Nombre||u.nombre;_&&!s.has(_.trim().toUpperCase())&&s.set(_.trim().toUpperCase(),_)}),this.areas=Array.from(s.values()).sort()}else this.areas=["Gerencia Municipal","Oficina de Recursos Humanos","Oficina de Administraci\xF3n","Gerencia de Desarrollo Social","Gerencia de Infraestructura","Serenazgo","Registro Civil"]},error:c=>{console.error("Error al cargar \xE1reas:",c),this.areas=["Gerencia Municipal","Oficina de Recursos Humanos","Oficina de Administraci\xF3n","Gerencia de Desarrollo Social","Gerencia de Infraestructura","Serenazgo","Registro Civil"]}})}obtenerPrimerDiaMes(){let c=new Date;return`${c.getFullYear()}-${String(c.getMonth()+1).padStart(2,"0")}-01`}obtenerUltimoDiaMes(){let c=new Date,a=new Date(c.getFullYear(),c.getMonth()+1,0);return`${a.getFullYear()}-${String(a.getMonth()+1).padStart(2,"0")}-${String(a.getDate()).padStart(2,"0")}`}cargarDatos(){if(this.cargando=!0,this.authService.isDemo()){this.registros=[],this.registrosFiltrados=[],this.resumen={periodo:`${this.filtros.fechaInicio} - ${this.filtros.fechaFin}`,mes:new Date(this.filtros.fechaInicio).getMonth()+1,anio:new Date(this.filtros.fechaInicio).getFullYear(),totalIncidencias:0,totalTardanzas:0,totalFaltas:0,tardanzasJustificadas:0,tardanzasNoJustificadas:0,tardanzasPendientes:0,faltasJustificadas:0,faltasNoJustificadas:0,faltasPendientes:0,minutosRetrasoProm:0,trabajadoresConIncidencias:0,trabajadoresReincidentes:0,incidenciasPorArea:[],tendencia:"Estable"},this.trabajadoresReincidentes=[],this.cargando=!1;return}let c=new T().set("fechaInicio",this.filtros.fechaInicio).set("fechaFin",this.filtros.fechaFin).set("tipo",this.filtros.tipo).set("estado",this.filtros.estado);this.filtros.area&&(c=c.set("area",this.filtros.area)),this.filtros.busqueda&&(c=c.set("busqueda",this.filtros.busqueda)),console.log("\u{1F504} [Frontend] Cargando incidencias con par\xE1metros:",{fechaInicio:this.filtros.fechaInicio,fechaFin:this.filtros.fechaFin,tipo:this.filtros.tipo,estado:this.filtros.estado,area:this.filtros.area,busqueda:this.filtros.busqueda,url:`${this.apiUrl}/incidencias`}),this.http.get(`${this.apiUrl}/incidencias`,{params:c}).subscribe({next:a=>{console.log("\u2705 [Frontend] Respuesta recibida:",{success:a.success,total:a.total,dataLength:a.data?.length||0}),a.success?(this.registros=a.data||[],this.registrosFiltrados=[...this.registros],console.log(`\u{1F4CA} [Frontend] ${this.registros.length} incidencias cargadas`),this.registros.length>0&&this.registros.slice(0,3).forEach((s,u)=>{console.log(`\u{1F4DD} [Frontend] Incidencia ${u+1}:`,{id:s.id,tipo:s.tipo,trabajadorNombre:s.trabajadorNombre,minutosRetraso:s.minutosRetraso,horaLlegada:s.horaLlegada,horaEsperada:s.horaEsperada,fecha:s.fecha})})):(console.error("\u274C [Frontend] Error en respuesta:",a.message),this.registros=[],this.registrosFiltrados=[]),this.cargarResumen()},error:a=>{console.error("\u274C [Frontend] Error HTTP al cargar incidencias:",a),console.error("\u274C [Frontend] Detalles del error:",{status:a.status,statusText:a.statusText,message:a.message,error:a.error}),this.registros=[],this.registrosFiltrados=[],this.cargarResumen()}})}cargarResumen(){let c=new T().set("fechaInicio",this.filtros.fechaInicio).set("fechaFin",this.filtros.fechaFin);this.http.get(`${this.apiUrl}/incidencias/resumen`,{params:c}).subscribe({next:a=>{if(a.success&&a.data){let s=a.data;this.resumen={periodo:`${this.filtros.fechaInicio} - ${this.filtros.fechaFin}`,mes:new Date(this.filtros.fechaInicio).getMonth()+1,anio:new Date(this.filtros.fechaInicio).getFullYear(),totalTardanzas:s.totalTardanzas||0,totalFaltas:s.totalFaltas||0,totalIncidencias:s.totalIncidencias||0,tardanzasJustificadas:s.tardanzasJustificadas||0,tardanzasNoJustificadas:s.tardanzasNoJustificadas||0,tardanzasPendientes:s.tardanzasPendientes||0,faltasJustificadas:s.faltasJustificadas||0,faltasNoJustificadas:s.faltasNoJustificadas||0,faltasPendientes:s.faltasPendientes||0,minutosRetrasoProm:s.minutosRetrasoProm||0,trabajadoresConIncidencias:s.trabajadoresConIncidencias||0,trabajadoresReincidentes:s.trabajadoresReincidentes||0,incidenciasPorArea:s.incidenciasPorArea||[],tendencia:s.tendencia||"Estable"}}else this.resumen={periodo:`${this.filtros.fechaInicio} - ${this.filtros.fechaFin}`,mes:new Date(this.filtros.fechaInicio).getMonth()+1,anio:new Date(this.filtros.fechaInicio).getFullYear(),totalTardanzas:0,totalFaltas:0,totalIncidencias:0,tardanzasJustificadas:0,tardanzasNoJustificadas:0,tardanzasPendientes:0,faltasJustificadas:0,faltasNoJustificadas:0,faltasPendientes:0,minutosRetrasoProm:0,trabajadoresConIncidencias:0,trabajadoresReincidentes:0,incidenciasPorArea:[],tendencia:"Estable"};this.cargarReincidentes(),this.cargando=!1},error:a=>{console.error("Error al cargar resumen:",a),this.resumen={periodo:`${this.filtros.fechaInicio} - ${this.filtros.fechaFin}`,mes:new Date(this.filtros.fechaInicio).getMonth()+1,anio:new Date(this.filtros.fechaInicio).getFullYear(),totalTardanzas:0,totalFaltas:0,totalIncidencias:0,tardanzasJustificadas:0,tardanzasNoJustificadas:0,tardanzasPendientes:0,faltasJustificadas:0,faltasNoJustificadas:0,faltasPendientes:0,minutosRetrasoProm:0,trabajadoresConIncidencias:0,trabajadoresReincidentes:0,incidenciasPorArea:[],tendencia:"Estable"},this.cargarReincidentes(),this.cargando=!1}})}cargarReincidentes(){let c=new T().set("fechaInicio",this.filtros.fechaInicio).set("fechaFin",this.filtros.fechaFin);this.http.get(`${this.apiUrl}/incidencias/reincidentes`,{params:c}).subscribe({next:a=>{a.success?this.trabajadoresReincidentes=a.data||[]:this.trabajadoresReincidentes=[]},error:a=>{console.error("Error al cargar reincidentes:",a),this.trabajadoresReincidentes=[]}})}calcularNivelRiesgo(c,a){let s=c+a,u=a*2,_=c+u;return _>=10||a>=3?"Critico":_>=6||a>=2?"Alto":_>=3?"Medio":"Bajo"}aplicarFiltros(){this.cargarDatos()}abrirModalJustificacion(c){this.registroSeleccionado=c,this.justificacionForm={tipoJustificacion:c.tipoJustificacion||"",motivo:c.motivoJustificacion||"",documento:null},this.mostrarModalJustificacion=!0,setTimeout(()=>{document.documentElement.classList.add("modal-open"),document.body.classList.add("modal-open");let a=document.querySelector("app-topbar");if(a){a.style.setProperty("z-index","1","important");let u=a.querySelector(".topbar");u&&(u.style.setProperty("z-index","1","important"),u.style.setProperty("pointer-events","none","important"))}let s=document.querySelector("app-sidebar");s&&(s.style.setProperty("z-index","1","important"),s.style.setProperty("pointer-events","none","important"))},100)}guardarJustificacion(){if(!this.registroSeleccionado||!this.justificacionForm.tipoJustificacion||!this.justificacionForm.motivo){alert("Por favor complete todos los campos obligatorios");return}let c={tipoJustificacion:this.justificacionForm.tipoJustificacion,motivo:this.justificacionForm.motivo,documento:this.justificacionForm.documento?this.justificacionForm.documento.name:null};this.http.put(`${this.apiUrl}/incidencias/${this.registroSeleccionado.id}/justificacion`,c).subscribe({next:a=>{a.success?(alert("Justificaci\xF3n guardada correctamente"),this.mostrarModalJustificacion=!1,this.restaurarTopbarSidebar(),this.cargarDatos()):alert("Error al guardar justificaci\xF3n: "+(a.message||"Error desconocido"))},error:a=>{console.error("Error al guardar justificaci\xF3n:",a),alert("Error al guardar justificaci\xF3n: "+(a.error?.message||a.message||"Error desconocido"))}})}onFileSelected(c){let a=c.target;a.files&&a.files.length>0&&(this.justificacionForm.documento=a.files[0])}restaurarTopbarSidebar(){setTimeout(()=>{document.documentElement.classList.remove("modal-open"),document.body.classList.remove("modal-open");let c=document.querySelector("app-topbar");if(c){c.style.setProperty("z-index","100000","important"),c.style.setProperty("pointer-events","auto","important"),c.style.setProperty("visibility","visible","important");let s=c.querySelector(".topbar");s&&(s.style.setProperty("z-index","100000","important"),s.style.setProperty("pointer-events","auto","important"),s.style.setProperty("visibility","visible","important"))}let a=document.querySelector("app-sidebar");a&&(a.style.setProperty("z-index","1000","important"),a.style.setProperty("pointer-events","auto","important"),a.style.setProperty("visibility","visible","important")),document.body.offsetHeight},150)}abrirModalAccion(c){this.registroSeleccionado=c,this.accionForm={tipoAccion:c.tipoAccion||"Ninguna",montoDescuento:c.montoDescuento||0,observaciones:c.observaciones||""},this.mostrarModalAccion=!0}abrirModalDetalles(c){this.registroSeleccionado=c,this.mostrarModalDetalles=!0}formatearFecha(c){return c?(typeof c=="string"?new Date(c):c).toLocaleDateString("es-PE",{year:"numeric",month:"long",day:"numeric"}):"N/A"}formatearFechaHora(c){return c?(typeof c=="string"?new Date(c):c).toLocaleString("es-PE",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"}guardarAccion(){if(!this.registroSeleccionado)return;let c={tipoAccion:this.accionForm.tipoAccion,montoDescuento:this.accionForm.tipoAccion==="Descuento"?this.accionForm.montoDescuento:null,observaciones:this.accionForm.observaciones};this.http.put(`${this.apiUrl}/incidencias/${this.registroSeleccionado.id}/accion`,c).subscribe({next:a=>{a.success?(alert("Acci\xF3n disciplinaria guardada correctamente"),this.mostrarModalAccion=!1,this.cargarDatos()):alert("Error al guardar acci\xF3n: "+(a.message||"Error desconocido"))},error:a=>{console.error("Error al guardar acci\xF3n:",a),alert("Error al guardar acci\xF3n: "+(a.error?.message||a.message||"Error desconocido"))}})}exportarExcel(){try{let c=this.registrosFiltrados.map(h=>({Fecha:h.fecha,Tipo:h.tipo,DNI:h.trabajadorDni,Trabajador:h.trabajadorNombre,\u00C1rea:h.trabajadorArea,Cargo:h.trabajadorCargo,Detalle:h.tipo==="Tardanza"?`Llegada: ${h.horaLlegada||"---"} (+${h.minutosRetraso||0}min)`:"Ausencia total",Estado:h.estado==="NoJustificada"?"No Justificada":h.estado,Justificaci\u00F3n:h.tieneJustificacion?h.tipoJustificacion||"S\xED":"No",Motivo:h.motivoJustificacion||"---",Acci\u00F3n:h.requiereAccion?h.tipoAccion||"S\xED":"Sin acci\xF3n",Observaciones:h.observaciones||"---"})),a=w.json_to_sheet(c),s=w.book_new();w.book_append_sheet(s,a,"Tardanzas y Faltas");let u=this.filtros.fechaInicio.replace(/-/g,""),_=this.filtros.fechaFin.replace(/-/g,""),ee=`Tardanzas_Faltas_${u}_${_}.xlsx`;X(s,ee),alert("Excel exportado correctamente")}catch(c){console.error("Error al exportar Excel:",c),alert("Error al exportar Excel. Por favor, instale la librer\xEDa xlsx: npm install xlsx")}}exportarPDF(){try{let c=`
        <html>
          <head>
            <title>Reporte de Tardanzas y Faltas</title>
            <style>
              body { font-family: Arial, sans-serif; margin: 20px; }
              h1 { color: #333; }
              table { width: 100%; border-collapse: collapse; margin-top: 20px; }
              th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
              th { background-color: #f2f2f2; }
              .resumen { margin-top: 30px; }
              .resumen-card { display: inline-block; margin: 10px; padding: 10px; border: 1px solid #ddd; }
            </style>
          </head>
          <body>
            <h1>Reporte de Tardanzas y Faltas</h1>
            <p><strong>Per\xEDodo:</strong> ${this.filtros.fechaInicio} al ${this.filtros.fechaFin}</p>
            <div class="resumen">
              <h2>Resumen</h2>
              ${this.resumen?`
                <p><strong>Total Incidencias:</strong> ${this.resumen.totalIncidencias}</p>
                <p><strong>Total Tardanzas:</strong> ${this.resumen.totalTardanzas}</p>
                <p><strong>Total Faltas:</strong> ${this.resumen.totalFaltas}</p>
                <p><strong>Trabajadores Afectados:</strong> ${this.resumen.trabajadoresConIncidencias}</p>
              `:""}
            </div>
            <table>
              <thead>
                <tr>
                  <th>Fecha</th>
                  <th>Tipo</th>
                  <th>DNI</th>
                  <th>Trabajador</th>
                  <th>\xC1rea</th>
                  <th>Detalle</th>
                  <th>Estado</th>
                  <th>Justificaci\xF3n</th>
                </tr>
              </thead>
              <tbody>
      `;this.registrosFiltrados.forEach(s=>{c+=`
          <tr>
            <td>${s.fecha}</td>
            <td>${s.tipo}</td>
            <td>${s.trabajadorDni}</td>
            <td>${s.trabajadorNombre}</td>
            <td>${s.trabajadorArea}</td>
            <td>${s.tipo==="Tardanza"?`Llegada: ${s.horaLlegada||"---"} (+${s.minutosRetraso||0}min)`:"Ausencia total"}</td>
            <td>${s.estado==="NoJustificada"?"No Justificada":s.estado}</td>
            <td>${s.tieneJustificacion?s.tipoJustificacion||"S\xED":"No"}</td>
          </tr>
        `}),c+=`
              </tbody>
            </table>
          </body>
        </html>
      `;let a=window.open("","_blank");a?(a.document.write(c),a.document.close(),a.print()):alert("Por favor, permita ventanas emergentes para exportar PDF")}catch(c){console.error("Error al exportar PDF:",c),alert("Error al exportar PDF")}}limpiarFiltros(){this.filtros={fechaInicio:this.obtenerPrimerDiaMes(),fechaFin:this.obtenerUltimoDiaMes(),tipo:"Todas",estado:"Todos",area:"",busqueda:""},this.cargarDatos()}getEstadoBadgeClass(c){return{Pendiente:"badge--pendiente",Justificada:"badge--justificada",NoJustificada:"badge--no-justificada"}[c]||""}getTipoBadgeClass(c){return c==="Tardanza"?"badge--tardanza":"badge--falta"}getNivelRiesgoBadgeClass(c){return{Bajo:"badge--riesgo-bajo",Medio:"badge--riesgo-medio",Alto:"badge--riesgo-alto",Critico:"badge--riesgo-critico"}[c]||""}get tiposJustificacionActuales(){return this.registroSeleccionado?.tipo==="Tardanza"?this.tiposJustificacionTardanza:this.tiposJustificacionFalta}};d.\u0275fac=function(a){return new(a||d)(E(R),E(V),E(N))},d.\u0275cmp=D({type:d,selectors:[["app-tardanzas"]],decls:76,vars:21,consts:[[1,"tardanzas-faltas"],[1,"page-header"],[1,"page-header__left"],[1,"page-title"],[1,"page-title__icon"],[1,"page-subtitle"],[1,"page-subtitle__dots"],[1,"page-subtitle__dot","page-subtitle__dot--large"],[1,"page-subtitle__dot","page-subtitle__dot--medium"],[1,"page-subtitle__dot","page-subtitle__dot--small"],[1,"page-header__right"],[1,"btn","btn--sm","btn--outline","btn-export","btn-export--excel",3,"click"],["src","assets/excel.png","alt","Excel",1,"btn-export__icon","btn-export__icon--excel"],[1,"btn-export__text"],[1,"btn","btn--sm","btn--outline","btn-export","btn-export--pdf",3,"click"],["src","assets/pdf.png","alt","PDF",1,"btn-export__icon","btn-export__icon--pdf"],["class","resumen-general",4,"ngIf"],[1,"periodo-selector"],[1,"periodo-selector__top"],[1,"periodo-selector__controls"],[1,"fecha-range"],[1,"fecha-label"],["type","date",1,"fecha-input",3,"ngModelChange","change","ngModel"],[1,"vista-toggle"],[1,"btn","btn--sm","btn--outline",3,"click"],[1,"periodo-selector__filtros"],[1,"filtros-bar__left"],[1,"search-box"],[1,"search-box__icon"],["type","text","placeholder","Buscar por DNI o nombre...",1,"search-box__input",3,"ngModelChange","input","ngModel"],[1,"select",3,"ngModelChange","change","ngModel"],["value","Todas"],["value","Tardanza"],["value","Falta"],["value","Todos"],["value","Pendiente"],["value","Justificada"],["value","No Justificada"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"filtros-bar__right"],[1,"resultados-count"],["class","tabla-container",4,"ngIf"],["class","estadisticas-container",4,"ngIf"],["class","reincidentes-container",4,"ngIf"],["class","modal",3,"click",4,"ngIf"],[1,"resumen-general"],[1,"resumen-card","resumen-card--total"],[1,"resumen-card__icon"],[1,"resumen-card__content"],[1,"resumen-card__label"],[1,"resumen-card__value"],[1,"resumen-card","resumen-card--tardanza"],[1,"resumen-card__detalle"],[1,"resumen-card","resumen-card--falta"],[1,"resumen-card","resumen-card--pendiente"],[1,"resumen-card","resumen-card--justificada"],[1,"resumen-card","resumen-card--no-justificada"],[1,"resumen-card","resumen-card--trabajadores"],[1,"resumen-card","resumen-card--reincidentes"],[3,"value"],[1,"tabla-container"],[1,"tabla-scroll"],[1,"tabla"],[4,"ngIf"],[4,"ngFor","ngForOf"],["colspan","10",1,"td-loading"],[1,"loading-spinner"],["colspan","10",1,"td-empty"],[1,"empty-state"],[1,"empty-state__icon"],[1,"empty-state__text"],[1,"td-fecha"],[1,"td-tipo"],[1,"badge",3,"ngClass"],[1,"td-dni"],[1,"td-trabajador"],[1,"trabajador-info"],[1,"trabajador-info__nombre"],[1,"trabajador-info__cargo"],[1,"td-area"],[1,"td-detalle"],["class","detalle-incidencia",4,"ngIf"],[1,"td-estado"],[1,"td-justificacion"],["class","justificacion-info",4,"ngIf"],["class","no-justificacion",4,"ngIf"],[1,"td-accion"],["class","accion-info",4,"ngIf"],["class","no-accion",4,"ngIf"],[1,"td-actions"],[1,"actions-menu"],["class","btn-icon","title","Justificar",3,"click",4,"ngIf"],["title","Acci\xF3n disciplinaria",1,"btn-icon",3,"click"],["title","Ver detalles","type","button",1,"btn-icon",3,"click"],[1,"detalle-incidencia"],[1,"detalle-hora"],["class","detalle-retraso",4,"ngIf"],[1,"detalle-retraso"],[1,"detalle-texto"],[1,"justificacion-info"],[1,"justificacion-icon"],[1,"justificacion-tipo"],[1,"no-justificacion"],[1,"accion-info"],[1,"accion-tipo"],["class","accion-monto",4,"ngIf"],[1,"accion-monto"],[1,"no-accion"],["title","Justificar",1,"btn-icon",3,"click"],[1,"estadisticas-container"],[1,"estadisticas-grid"],[1,"estadistica-panel"],[1,"panel__title"],[1,"area-stats"],["class","area-stat-item",4,"ngFor","ngForOf"],[1,"estado-stats"],[1,"estado-stat-item"],[1,"estado-stat-item__icon","estado-stat-item__icon--pendiente"],[1,"estado-stat-item__content"],[1,"estado-stat-item__label"],[1,"estado-stat-item__value"],[1,"estado-stat-item__icon","estado-stat-item__icon--justificada"],[1,"estado-stat-item__icon","estado-stat-item__icon--no-justificada"],[1,"area-stat-item"],[1,"area-stat-item__header"],[1,"area-stat-item__nombre"],[1,"area-stat-item__total"],[1,"area-stat-item__detalle"],[1,"stat-detalle","stat-detalle--tardanza"],[1,"stat-detalle","stat-detalle--falta"],[1,"area-stat-item__bar"],[1,"bar","bar--tardanza"],[1,"bar","bar--falta"],[1,"reincidentes-container"],[1,"reincidentes-header"],[1,"panel__subtitle"],[1,"reincidentes-grid"],["class","reincidente-card",4,"ngFor","ngForOf"],["class","empty-state",4,"ngIf"],[1,"reincidente-card"],[1,"reincidente-card__header"],[1,"avatar"],[1,"info"],[1,"nombre"],[1,"dni"],[1,"area"],[1,"reincidente-card__body"],[1,"stat-grid"],[1,"stat-item"],[1,"stat-item__icon"],[1,"stat-item__content"],[1,"stat-item__label"],[1,"stat-item__value"],[1,"ultima-incidencia"],[1,"ultima-incidencia__label"],[1,"ultima-incidencia__fecha"],[1,"reincidente-card__footer"],[1,"btn","btn--sm","btn--outline"],[1,"btn","btn--sm","btn--danger"],[1,"modal",3,"click"],[1,"modal__content",3,"click"],[1,"modal__header"],[1,"modal__title"],[1,"modal__close",3,"click"],["class","modal__body",4,"ngIf"],[1,"modal__footer"],[1,"btn","btn--ghost",3,"click"],[1,"btn","btn--accent",3,"click","disabled"],[1,"modal__body"],[1,"trabajador-selected"],[1,"form-grid"],[1,"form-group","form-group--full"],[1,"form-label"],[1,"form-select",3,"ngModelChange","ngModel"],["rows","4","placeholder","Describa el motivo de la incidencia...",1,"form-textarea",3,"ngModelChange","ngModel"],["type","file","accept",".pdf,.jpg,.png,.jpeg",1,"form-input",3,"change"],[1,"form-hint"],[1,"btn","btn--danger",3,"click"],["class","form-group form-group--full",4,"ngIf"],["rows","4","placeholder","Detalles de la acci\xF3n disciplinaria...",1,"form-textarea",3,"ngModelChange","ngModel"],["type","number","placeholder","0.00","min","0","step","0.01",1,"form-input",3,"ngModelChange","ngModel"],[1,"modal__content","modal__content--large",3,"click"],["class","btn btn--accent",3,"click",4,"ngIf"],[1,"detalle-section"],[1,"detalle-section__title"],[1,"detalle-grid"],[1,"detalle-item"],[1,"detalle-item__label"],[1,"detalle-item__value"],["class","detalle-item",4,"ngIf"],["class","detalle-section",4,"ngIf"],["class","detalle-item__value detalle-item__value--retraso",4,"ngIf"],["class","detalle-item__value",4,"ngIf"],[1,"detalle-item__value","detalle-item__value--retraso"],[1,"detalle-item","detalle-item--full"],["target","_blank",1,"detalle-link",3,"href"],[1,"detalle-item__value","detalle-item__value--monto"],[1,"detalle-observaciones"],[1,"detalle-observaciones__texto"],[1,"btn","btn--accent",3,"click"]],template:function(a,s){a&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3)(4,"span",4),i(5,"\u26A0\uFE0F"),e(),i(6," Control de Tardanzas y Faltas "),e(),t(7,"p",5)(8,"span",6),O(9,"span",7)(10,"span",8)(11,"span",9),e(),i(12," Gesti\xF3n de incidencias y acciones disciplinarias "),e()(),t(13,"div",10)(14,"button",11),g("click",function(){return s.exportarExcel()}),O(15,"img",12),t(16,"span",13),i(17,"Excel"),e()(),t(18,"button",14),g("click",function(){return s.exportarPDF()}),O(19,"img",15),t(20,"span",13),i(21,"PDF"),e()()()(),f(22,te,67,9,"div",16),t(23,"div",17)(24,"div",18)(25,"div",19)(26,"div",20)(27,"label",21),i(28,"Desde:"),e(),t(29,"input",22),P("ngModelChange",function(_){return M(s.filtros.fechaInicio,_)||(s.filtros.fechaInicio=_),_}),g("change",function(){return s.cargarDatos()}),e()(),t(30,"div",20)(31,"label",21),i(32,"Hasta:"),e(),t(33,"input",22),P("ngModelChange",function(_){return M(s.filtros.fechaFin,_)||(s.filtros.fechaFin=_),_}),g("change",function(){return s.cargarDatos()}),e()()(),t(34,"div",23)(35,"button",24),g("click",function(){return s.vistaActual="lista"}),i(36," \u{1F4CB} Lista "),e(),t(37,"button",24),g("click",function(){return s.vistaActual="estadisticas"}),i(38," \u{1F4CA} Estad\xEDsticas "),e(),t(39,"button",24),g("click",function(){return s.vistaActual="reincidentes"}),i(40," \u{1F6A8} Reincidentes "),e()()(),t(41,"div",25)(42,"div",26)(43,"div",27)(44,"span",28),i(45,"\u{1F50D}"),e(),t(46,"input",29),P("ngModelChange",function(_){return M(s.filtros.busqueda,_)||(s.filtros.busqueda=_),_}),g("input",function(){return s.aplicarFiltros()}),e()(),t(47,"select",30),P("ngModelChange",function(_){return M(s.filtros.tipo,_)||(s.filtros.tipo=_),_}),g("change",function(){return s.aplicarFiltros()}),t(48,"option",31),i(49,"Todos los tipos"),e(),t(50,"option",32),i(51,"Tardanza"),e(),t(52,"option",33),i(53,"Falta"),e()(),t(54,"select",30),P("ngModelChange",function(_){return M(s.filtros.estado,_)||(s.filtros.estado=_),_}),g("change",function(){return s.aplicarFiltros()}),t(55,"option",34),i(56,"Todos los estados"),e(),t(57,"option",35),i(58,"Pendiente"),e(),t(59,"option",36),i(60,"Justificada"),e(),t(61,"option",37),i(62,"No Justificada"),e()(),t(63,"select",30),P("ngModelChange",function(_){return M(s.filtros.area,_)||(s.filtros.area=_),_}),g("change",function(){return s.aplicarFiltros()}),t(64,"option",38),i(65,"Todas las \xE1reas"),e(),f(66,ne,2,2,"option",39),e()(),t(67,"div",40)(68,"span",41),i(69),e()()()(),f(70,fe,29,3,"div",42)(71,be,35,4,"div",43)(72,Ce,9,2,"div",44)(73,Se,13,2,"div",45)(74,Te,13,1,"div",45)(75,Be,14,2,"div",45),e()),a&2&&(o(22),l("ngIf",s.resumen),o(7),C("ngModel",s.filtros.fechaInicio),o(4),C("ngModel",s.filtros.fechaFin),o(2),y("active",s.vistaActual==="lista"),o(2),y("active",s.vistaActual==="estadisticas"),o(2),y("active",s.vistaActual==="reincidentes"),o(7),C("ngModel",s.filtros.busqueda),o(),C("ngModel",s.filtros.tipo),o(7),C("ngModel",s.filtros.estado),o(9),C("ngModel",s.filtros.area),o(3),l("ngForOf",s.areas),o(3),v("",s.registrosFiltrados.length," incidencias"),o(),l("ngIf",s.vistaActual==="lista"),o(),l("ngIf",s.vistaActual==="estadisticas"&&s.resumen),o(),l("ngIf",s.vistaActual==="reincidentes"),o(),l("ngIf",s.mostrarModalJustificacion),o(),l("ngIf",s.mostrarModalAccion),o(),l("ngIf",s.mostrarModalDetalles))},dependencies:[J,k,j,A,G,q,Y,L,B,U,$,H,W],styles:['@charset "UTF-8";.tardanzas-faltas[_ngcontent-%COMP%]{width:100%;max-width:100%;padding-bottom:40px}.page-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:32px;padding:18px 24px;background:linear-gradient(135deg,#fff,#f8fafc)!important;border-radius:10px;border:1px solid rgba(34,197,94,.15);box-shadow:0 4px 16px #00000014,0 1px 3px #0000000d,inset 0 1px #ffffffe6;position:relative;overflow:hidden;gap:20px;flex-wrap:wrap}.page-header[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:5px;background:linear-gradient(90deg,#22c55e,#16a34a,#22c55e);background-size:200% 100%;animation:_ngcontent-%COMP%_shimmer 3s ease-in-out infinite}.page-header[_ngcontent-%COMP%]:after{content:"";position:absolute;top:0;left:0;width:4px;height:100%;background:linear-gradient(180deg,#22c55e,#16a34a);opacity:.6}.page-header__left[_ngcontent-%COMP%]{flex:1;position:relative;z-index:1;padding-left:12px}.page-header__right[_ngcontent-%COMP%]{display:flex;gap:12px;flex-shrink:0;position:relative;z-index:1}[data-theme=dark][_nghost-%COMP%]   .page-header[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .page-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1e293b,#0f172a)!important;border:1px solid rgba(34,197,94,.2);box-shadow:0 4px 16px #0000004d,0 1px 3px #0003,inset 0 1px #ffffff0d}@keyframes _ngcontent-%COMP%_shimmer{0%,to{background-position:0% 50%}50%{background-position:100% 50%}}.page-title[_ngcontent-%COMP%]{font-size:28px;font-weight:700;color:var(--text-1);margin:0 0 8px;display:flex;align-items:center;gap:12px}.page-title__icon[_ngcontent-%COMP%]{font-size:32px}.page-subtitle[_ngcontent-%COMP%]{font-size:14px;color:var(--text-2);margin:0;display:flex;align-items:center;gap:10px;position:relative;padding-left:20px}.page-subtitle__dots[_ngcontent-%COMP%]{position:absolute;left:0;top:50%;transform:translateY(-50%);display:flex;flex-direction:column;align-items:flex-start;justify-content:center;gap:3px;width:16px;height:20px}.page-subtitle__dot[_ngcontent-%COMP%]{border-radius:50%;background:linear-gradient(135deg,#22c55e,#16a34a);box-shadow:0 0 6px #22c55e80}.page-subtitle__dot--large[_ngcontent-%COMP%]{width:8px;height:8px;margin-left:0}.page-subtitle__dot--medium[_ngcontent-%COMP%]{width:5px;height:5px;margin-left:3px}.page-subtitle__dot--small[_ngcontent-%COMP%]{width:3px;height:3px;margin-left:6px}.periodo-selector[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;padding:20px;background:var(--panel);border:1px solid var(--border);border-radius:8px;margin-bottom:24px;position:relative;overflow:hidden}.periodo-selector__top[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:20px;flex-wrap:wrap}.periodo-selector__controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;flex-wrap:wrap}.periodo-selector__filtros[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:16px;padding-top:16px;border-top:1px solid var(--border);flex-wrap:wrap}.periodo-selector__filtros[_ngcontent-%COMP%]   .filtros-bar__left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;flex-wrap:wrap;flex:1}.periodo-selector__filtros[_ngcontent-%COMP%]   .filtros-bar__right[_ngcontent-%COMP%]{display:flex;align-items:center;flex-shrink:0}.fecha-range[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.fecha-label[_ngcontent-%COMP%]{font-size:13px;font-weight:600;color:var(--text-2)}.fecha-input[_ngcontent-%COMP%]{padding:10px 14px;border:1px solid var(--border);border-radius:10px;background:var(--panel-2);color:var(--text-1);font-size:14px;font-weight:600;outline:none;cursor:pointer;transition:all .2s ease}.fecha-input[_ngcontent-%COMP%]:focus{border-color:var(--accent);box-shadow:0 0 0 3px #22c55e1a}.vista-toggle[_ngcontent-%COMP%]{display:flex;gap:8px}.resumen-general[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:16px;margin-bottom:24px}.resumen-card[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;padding:20px;border-radius:8px;border:2px solid;transition:all .3s ease}.resumen-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 8px 24px #00000026}.resumen-card__icon[_ngcontent-%COMP%]{font-size:36px}.resumen-card__content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.resumen-card__label[_ngcontent-%COMP%]{font-size:12px;font-weight:600;color:var(--text-2);text-transform:uppercase;letter-spacing:.5px}.resumen-card__value[_ngcontent-%COMP%]{font-size:28px;font-weight:700;line-height:1}.resumen-card__detalle[_ngcontent-%COMP%]{font-size:11px;color:var(--text-2);margin-top:4px}.resumen-card--total[_ngcontent-%COMP%]{background:#3b82f61a;border-color:#3b82f64d}.resumen-card--total[_ngcontent-%COMP%]   .resumen-card__value[_ngcontent-%COMP%]{color:#3b82f6}.resumen-card--tardanza[_ngcontent-%COMP%]{background:#f59e0b1a;border-color:#f59e0b4d}.resumen-card--tardanza[_ngcontent-%COMP%]   .resumen-card__value[_ngcontent-%COMP%]{color:#f59e0b}.resumen-card--falta[_ngcontent-%COMP%]{background:#ef44441a;border-color:#ef44444d}.resumen-card--falta[_ngcontent-%COMP%]   .resumen-card__value[_ngcontent-%COMP%]{color:#ef4444}.resumen-card--pendiente[_ngcontent-%COMP%]{background:#a855f71a;border-color:#a855f74d}.resumen-card--pendiente[_ngcontent-%COMP%]   .resumen-card__value[_ngcontent-%COMP%]{color:#a855f7}.resumen-card--justificada[_ngcontent-%COMP%]{background:#22c55e1a;border-color:#22c55e4d}.resumen-card--justificada[_ngcontent-%COMP%]   .resumen-card__value[_ngcontent-%COMP%]{color:var(--accent)}.resumen-card--no-justificada[_ngcontent-%COMP%]{background:#dc26261a;border-color:#dc26264d}.resumen-card--no-justificada[_ngcontent-%COMP%]   .resumen-card__value[_ngcontent-%COMP%]{color:#dc2626}.resumen-card--trabajadores[_ngcontent-%COMP%]{background:#6366f11a;border-color:#6366f14d}.resumen-card--trabajadores[_ngcontent-%COMP%]   .resumen-card__value[_ngcontent-%COMP%]{color:#6366f1}.resumen-card--reincidentes[_ngcontent-%COMP%]{background:#ef444426;border-color:#ef444466}.resumen-card--reincidentes[_ngcontent-%COMP%]   .resumen-card__value[_ngcontent-%COMP%]{color:#ef4444}.filtros-bar[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:16px;margin-bottom:24px;flex-wrap:wrap}.filtros-bar__left[_ngcontent-%COMP%], .filtros-bar__right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;flex-wrap:wrap}.search-box[_ngcontent-%COMP%]{position:relative;min-width:300px}.search-box__icon[_ngcontent-%COMP%]{position:absolute;left:14px;top:50%;transform:translateY(-50%);font-size:18px;opacity:.5;pointer-events:none}.search-box__input[_ngcontent-%COMP%]{width:100%;padding:10px 14px 10px 44px;border:1px solid var(--border);border-radius:10px;background:var(--panel-2);color:var(--text-1);font-size:14px;outline:none;transition:all .2s ease}.search-box__input[_ngcontent-%COMP%]:focus{border-color:var(--accent);box-shadow:0 0 0 3px #22c55e1a}.select[_ngcontent-%COMP%]{padding:10px 14px;border:1px solid var(--border);border-radius:10px;background:var(--panel-2);color:var(--text-1);font-size:14px;outline:none;cursor:pointer;transition:all .2s ease}.select[_ngcontent-%COMP%]:focus{border-color:var(--accent);box-shadow:0 0 0 3px #22c55e1a}.resultados-count[_ngcontent-%COMP%]{font-size:14px;color:var(--text-2);font-weight:600}.tabla-container[_ngcontent-%COMP%]{background:var(--panel);border:1px solid var(--border);border-radius:8px;overflow:hidden;margin-bottom:24px}.tabla-scroll[_ngcontent-%COMP%]{overflow-x:auto}.tabla[_ngcontent-%COMP%]{width:100%;border-collapse:separate;border-spacing:0;font-size:13px;border-radius:4px;overflow:hidden}.tabla[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:#059669!important;border-bottom:2px solid #047857!important}.tabla[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:16px 20px!important;text-align:left;font-size:12px!important;font-weight:700!important;color:#fff!important;text-transform:uppercase!important;letter-spacing:1px!important;white-space:nowrap;border-right:1px solid rgba(4,120,87,.3)!important;box-shadow:0 1px 3px #04785733!important}.tabla[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{border-left:none!important;border-top-left-radius:4px}.tabla[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{border-right:none!important;border-top-right-radius:4px}.tabla[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid var(--line-soft);transition:background .15s ease}.tabla[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:var(--panel-2)}.tabla[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child{border-bottom:none}.tabla[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]:first-child{border-bottom-left-radius:4px}.tabla[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]:last-child{border-bottom-right-radius:4px}.tabla[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:14px 12px;color:var(--text-1)}.td-loading[_ngcontent-%COMP%], .td-empty[_ngcontent-%COMP%]{text-align:center;padding:60px 20px}.loading-spinner[_ngcontent-%COMP%]{font-size:16px;color:var(--text-2)}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:12px;padding:40px 20px}.empty-state__icon[_ngcontent-%COMP%]{font-size:48px;opacity:.5}.empty-state__text[_ngcontent-%COMP%]{font-size:16px;color:var(--text-2);margin:0}.trabajador-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.trabajador-info__nombre[_ngcontent-%COMP%]{font-weight:600;color:var(--text-1)}.trabajador-info__cargo[_ngcontent-%COMP%]{font-size:12px;color:var(--text-2)}.detalle-incidencia[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.detalle-hora[_ngcontent-%COMP%]{font-family:Courier New,monospace;font-weight:600;color:var(--text-1)}.detalle-retraso[_ngcontent-%COMP%]{font-size:11px;font-weight:700;color:#f59e0b}.detalle-texto[_ngcontent-%COMP%]{font-size:12px;color:var(--text-2)}.justificacion-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px}.justificacion-icon[_ngcontent-%COMP%]{font-size:16px}.justificacion-tipo[_ngcontent-%COMP%]{font-size:12px;color:var(--text-2)}.no-justificacion[_ngcontent-%COMP%]{color:var(--text-2);opacity:.5}.accion-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.accion-tipo[_ngcontent-%COMP%]{font-size:12px;font-weight:600;color:var(--text-1)}.accion-monto[_ngcontent-%COMP%]{font-size:11px;font-weight:700;color:#ef4444}.no-accion[_ngcontent-%COMP%]{font-size:12px;color:var(--text-2);opacity:.5}.actions-menu[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:4px}.btn-icon[_ngcontent-%COMP%]{width:32px;height:32px;display:inline-flex;align-items:center;justify-content:center;border-radius:8px;border:none;background:transparent;cursor:pointer;font-size:16px;transition:all .2s ease}.btn-icon[_ngcontent-%COMP%]:hover{background:var(--panel-2)}.badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:4px;padding:4px 10px;border-radius:6px;font-size:12px;font-weight:600;white-space:nowrap}.badge--tardanza[_ngcontent-%COMP%]{background:#f59e0b26;color:#f59e0b;border:1px solid rgba(245,158,11,.3)}.badge--falta[_ngcontent-%COMP%]{background:#ef444426;color:#ef4444;border:1px solid rgba(239,68,68,.3)}.badge--pendiente[_ngcontent-%COMP%]{background:#a855f726;color:#a855f7;border:1px solid rgba(168,85,247,.3)}.badge--justificada[_ngcontent-%COMP%]{background:#22c55e26;color:#22c55e;border:1px solid rgba(34,197,94,.3)}.badge--no-justificada[_ngcontent-%COMP%]{background:#dc262626;color:#dc2626;border:1px solid rgba(220,38,38,.3)}.badge--riesgo-bajo[_ngcontent-%COMP%]{background:#22c55e26;color:#22c55e;border:1px solid rgba(34,197,94,.3)}.badge--riesgo-medio[_ngcontent-%COMP%]{background:#f59e0b26;color:#f59e0b;border:1px solid rgba(245,158,11,.3)}.badge--riesgo-alto[_ngcontent-%COMP%]{background:#ef444426;color:#ef4444;border:1px solid rgba(239,68,68,.3)}.badge--riesgo-critico[_ngcontent-%COMP%]{background:#dc262640;color:#dc2626;border:1px solid rgba(220,38,38,.5);animation:_ngcontent-%COMP%_pulse 2s infinite}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.7}}.estadisticas-container[_ngcontent-%COMP%]{margin-bottom:24px}.estadisticas-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(400px,1fr));gap:24px}.estadistica-panel[_ngcontent-%COMP%]{background:var(--panel);border:1px solid var(--border);border-radius:8px;padding:24px}.panel__title[_ngcontent-%COMP%]{font-size:18px;font-weight:700;color:var(--text-1);margin:0 0 20px}.area-stats[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.area-stat-item__header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}.area-stat-item__nombre[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:var(--text-1)}.area-stat-item__total[_ngcontent-%COMP%]{font-size:18px;font-weight:700;color:var(--accent)}.area-stat-item__detalle[_ngcontent-%COMP%]{display:flex;gap:16px;margin-bottom:8px}.area-stat-item__bar[_ngcontent-%COMP%]{display:flex;height:8px;background:var(--panel-2);border-radius:4px;overflow:hidden}.stat-detalle[_ngcontent-%COMP%]{font-size:12px;font-weight:600}.stat-detalle--tardanza[_ngcontent-%COMP%]{color:#f59e0b}.stat-detalle--falta[_ngcontent-%COMP%]{color:#ef4444}.bar--tardanza[_ngcontent-%COMP%]{background:#f59e0b}.bar--falta[_ngcontent-%COMP%]{background:#ef4444}.estado-stats[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.estado-stat-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;padding:16px;background:var(--panel-2);border-radius:10px}.estado-stat-item__icon[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:24px}.estado-stat-item__icon--pendiente[_ngcontent-%COMP%]{background:#a855f726}.estado-stat-item__icon--justificada[_ngcontent-%COMP%]{background:#22c55e26}.estado-stat-item__icon--no-justificada[_ngcontent-%COMP%]{background:#dc262626}.estado-stat-item__content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.estado-stat-item__label[_ngcontent-%COMP%]{font-size:13px;font-weight:600;color:var(--text-2)}.estado-stat-item__value[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:var(--text-1)}.reincidentes-container[_ngcontent-%COMP%], .reincidentes-header[_ngcontent-%COMP%]{margin-bottom:24px}.panel__subtitle[_ngcontent-%COMP%]{font-size:14px;color:var(--text-2);margin:8px 0 0}.reincidentes-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(350px,1fr));gap:20px}.reincidente-card[_ngcontent-%COMP%]{background:var(--panel);border:1px solid var(--border);border-radius:8px;padding:20px;transition:all .3s ease}.reincidente-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 8px 24px #00000026}.reincidente-card__header[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:16px;margin-bottom:20px;padding-bottom:16px;border-bottom:1px solid var(--line-soft)}.reincidente-card__body[_ngcontent-%COMP%]{margin-bottom:20px}.reincidente-card__footer[_ngcontent-%COMP%]{display:flex;gap:12px}.avatar[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:50%;background:linear-gradient(135deg,#ef4444,#dc2626);color:#fff;display:flex;align-items:center;justify-content:center;font-size:20px;font-weight:700;flex-shrink:0}.info[_ngcontent-%COMP%]{flex:1}.info[_ngcontent-%COMP%]   .nombre[_ngcontent-%COMP%]{font-size:15px;font-weight:700;color:var(--text-1);margin:0 0 4px}.info[_ngcontent-%COMP%]   .dni[_ngcontent-%COMP%], .info[_ngcontent-%COMP%]   .area[_ngcontent-%COMP%]{font-size:12px;color:var(--text-2);margin:0}.stat-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;margin-bottom:16px}.stat-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;padding:12px;background:var(--panel-2);border-radius:8px}.stat-item__icon[_ngcontent-%COMP%]{font-size:20px}.stat-item__content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px}.stat-item__label[_ngcontent-%COMP%]{font-size:10px;color:var(--text-2);font-weight:600;text-transform:uppercase}.stat-item__value[_ngcontent-%COMP%]{font-size:18px;font-weight:700;color:var(--text-1)}.ultima-incidencia[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:10px;background:#ef44440d;border-radius:8px}.ultima-incidencia__label[_ngcontent-%COMP%]{font-size:12px;color:var(--text-2);font-weight:600}.ultima-incidencia__fecha[_ngcontent-%COMP%]{font-size:12px;color:var(--text-1);font-weight:700}.modal[_ngcontent-%COMP%]{position:fixed!important;inset:0!important;width:100vw!important;height:100vh!important;min-width:100vw!important;min-height:100vh!important;max-width:100vw!important;max-height:100vh!important;margin:0!important;padding:20px!important;background:#0b1220d9!important;backdrop-filter:blur(8px)!important;-webkit-backdrop-filter:blur(8px)!important;display:flex!important;align-items:center!important;justify-content:center!important;z-index:999999!important;pointer-events:all!important;box-sizing:border-box!important;animation:_ngcontent-%COMP%_fadeIn .2s ease}.modal__content[_ngcontent-%COMP%]{background:var(--panel);border:1px solid var(--border);border-radius:16px;max-width:600px;width:100%;max-height:90vh;overflow-y:auto;box-shadow:0 20px 60px #0000004d;animation:_ngcontent-%COMP%_slideUp .3s ease}.modal__content--large[_ngcontent-%COMP%]{max-width:900px}.modal__header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:16px;padding:24px;border-bottom:1px solid var(--border)}.modal__title[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:var(--text-1);margin:0}.modal__close[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:8px;border:none;background:transparent;cursor:pointer;font-size:18px;transition:all .2s ease}.modal__close[_ngcontent-%COMP%]:hover{background:#ef44441a;color:#ef4444}.modal__body[_ngcontent-%COMP%]{padding:24px}.modal__footer[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end;gap:12px;padding:20px 24px;border-top:1px solid var(--border)}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.trabajador-selected[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;padding:16px;background:var(--panel-2);border-radius:10px;margin-bottom:24px}.trabajador-selected[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{flex:1}.trabajador-selected[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:16px;font-weight:700;color:var(--text-1);margin:0 0 4px}.trabajador-selected[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:13px;color:var(--text-2);margin:4px 0}.trabajador-selected[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:var(--text-1)}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:16px}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px}.form-group--full[_ngcontent-%COMP%]{grid-column:1/-1}.form-label[_ngcontent-%COMP%]{font-size:13px;font-weight:600;color:var(--text-1)}.form-input[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%], .form-textarea[_ngcontent-%COMP%]{padding:10px 12px;border:1px solid var(--border);border-radius:8px;background:var(--panel-2);color:var(--text-1);font-size:14px;outline:none;transition:all .2s ease}.form-input[_ngcontent-%COMP%]:focus, .form-select[_ngcontent-%COMP%]:focus, .form-textarea[_ngcontent-%COMP%]:focus{border-color:var(--accent);box-shadow:0 0 0 3px #22c55e1a}.form-textarea[_ngcontent-%COMP%]{resize:vertical;font-family:inherit}.form-hint[_ngcontent-%COMP%]{font-size:12px;color:var(--text-2);font-style:italic}.btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;gap:8px;padding:10px 16px;border-radius:10px;font-weight:600;font-size:14px;cursor:pointer;transition:all .2s ease;border:none;white-space:nowrap}.btn--sm[_ngcontent-%COMP%]{padding:8px 14px;font-size:13px}.btn--primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6,#2563eb);color:#fff}.btn--primary[_ngcontent-%COMP%]:hover{box-shadow:0 0 20px #3b82f666;transform:translateY(-1px)}.btn--accent[_ngcontent-%COMP%]{background:linear-gradient(135deg,#22c55e,#16a34a);color:#fff}.btn--accent[_ngcontent-%COMP%]:hover{box-shadow:0 0 20px #22c55e66;transform:translateY(-1px)}.btn--danger[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ef4444,#dc2626);color:#fff}.btn--danger[_ngcontent-%COMP%]:hover{box-shadow:0 0 20px #ef444466;transform:translateY(-1px)}.btn--outline[_ngcontent-%COMP%]{background:transparent;border:1px solid var(--border);color:var(--text-1)}.btn--outline[_ngcontent-%COMP%]:hover{background:var(--panel-2);border-color:var(--accent);color:var(--accent)}.btn--outline.active[_ngcontent-%COMP%]{background:#22c55e1a;border-color:var(--accent);color:var(--accent)}.btn--ghost[_ngcontent-%COMP%]{background:transparent;border:none;color:var(--text-2)}.btn--ghost[_ngcontent-%COMP%]:hover{background:var(--panel-2);color:var(--text-1)}.btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.btn[_ngcontent-%COMP%]:disabled:hover{transform:none;box-shadow:none}@media (max-width: 1200px){.resumen-general[_ngcontent-%COMP%]{grid-template-columns:repeat(4,1fr)}.estadisticas-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}@media (max-width: 768px){.page-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.page-header__right[_ngcontent-%COMP%]{width:100%}.page-header__right[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{flex:1}.periodo-selector[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.periodo-selector__controls[_ngcontent-%COMP%]{width:100%;flex-direction:column}.vista-toggle[_ngcontent-%COMP%]{width:100%}.vista-toggle[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{flex:1}.resumen-general[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.filtros-bar[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.filtros-bar__left[_ngcontent-%COMP%], .filtros-bar__right[_ngcontent-%COMP%]{width:100%;flex-direction:column}.search-box[_ngcontent-%COMP%]{min-width:100%}.reincidentes-grid[_ngcontent-%COMP%], .form-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}.detalle-section[_ngcontent-%COMP%]{margin-bottom:32px}.detalle-section[_ngcontent-%COMP%]:last-child{margin-bottom:0}.detalle-section__title[_ngcontent-%COMP%]{font-size:16px;font-weight:700;color:var(--text-1);margin:0 0 16px;padding-bottom:12px;border-bottom:2px solid var(--border);display:flex;align-items:center;gap:8px}.detalle-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:16px}.btn-export[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;justify-content:center;padding:18px 20px;min-width:66px;overflow:hidden}.btn-export__icon[_ngcontent-%COMP%]{width:42px;height:42px;transition:all .4s cubic-bezier(.34,1.56,.64,1);object-fit:contain;display:block;position:relative;z-index:2;flex-shrink:0}.btn-export__icon--excel[_ngcontent-%COMP%], .btn-export__icon--pdf[_ngcontent-%COMP%]{filter:drop-shadow(0 2px 4px rgba(0,0,0,.25))}.btn-export__icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain}.btn-export__text[_ngcontent-%COMP%]{position:absolute;left:50%;transform:translate(-50%) translate(30px);font-size:13px;font-weight:600;white-space:nowrap;opacity:0;visibility:hidden;pointer-events:none;transition:all .4s cubic-bezier(.34,1.56,.64,1);z-index:1;letter-spacing:.3px;color:var(--text-1)}.btn-export[_ngcontent-%COMP%]:hover   .btn-export__icon[_ngcontent-%COMP%]{transform:translate(-45px) scale(1.1)!important;opacity:.2}.btn-export[_ngcontent-%COMP%]:hover   .btn-export__text[_ngcontent-%COMP%]{opacity:1;visibility:visible;transform:translate(-50%);transition-delay:.1s}.btn-export--excel[_ngcontent-%COMP%]:hover{background:#2173461a;border-color:#217346}.btn-export--excel[_ngcontent-%COMP%]:hover   .btn-export__text[_ngcontent-%COMP%]{color:#217346;font-weight:700}.btn-export--pdf[_ngcontent-%COMP%]:hover{background:#dc143c1a;border-color:#dc143c}.btn-export--pdf[_ngcontent-%COMP%]:hover   .btn-export__text[_ngcontent-%COMP%]{color:#dc143c;font-weight:700}[data-theme=dark][_nghost-%COMP%]   .page-header[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .page-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--panel) 0%,#1e293b 100%)!important;border-color:var(--border);box-shadow:0 4px 16px #0000004d,0 1px 3px #0003,inset 0 1px #ffffff0d}[data-theme=dark][_nghost-%COMP%]   .btn-export__text[_ngcontent-%COMP%], [data-theme=dark]   [_nghost-%COMP%]   .btn-export__text[_ngcontent-%COMP%]{color:var(--text-1)}.detalle-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px;padding:12px;background:var(--panel-2);border-radius:10px;border:1px solid var(--border);transition:all .2s ease}.detalle-item[_ngcontent-%COMP%]:hover{border-color:var(--accent);background:#22c55e0d}.detalle-item--full[_ngcontent-%COMP%]{grid-column:1/-1}.detalle-item__label[_ngcontent-%COMP%]{font-size:11px;font-weight:700;color:var(--text-2);text-transform:uppercase;letter-spacing:.5px}.detalle-item__value[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:var(--text-1);word-break:break-word}.detalle-item__value--retraso[_ngcontent-%COMP%]{color:#f59e0b;font-weight:700;font-size:15px}.detalle-item__value--monto[_ngcontent-%COMP%]{color:#ef4444;font-weight:700;font-size:16px}.detalle-observaciones[_ngcontent-%COMP%]{padding:16px;background:var(--panel-2);border-radius:10px;border:1px solid var(--border)}.detalle-observaciones__texto[_ngcontent-%COMP%]{font-size:14px;line-height:1.6;color:var(--text-1);margin:0;white-space:pre-wrap}.detalle-link[_ngcontent-%COMP%]{color:var(--accent);text-decoration:none;font-weight:600;transition:all .2s ease;display:inline-flex;align-items:center;gap:6px}.detalle-link[_ngcontent-%COMP%]:hover{color:#16a34a;text-decoration:underline}@media (max-width: 768px){.detalle-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.modal__content--large[_ngcontent-%COMP%]{max-width:100%}}']});let r=d;return r})();export{at as TardanzasComponent};
